{"version":3,"file":"app.js","sources":["../../../../journey/src/js/lib/roadtrip/Route.js","../../../../journey/src/js/lib/roadtrip/utils/watchLinks.js","../../../../journey/src/js/lib/roadtrip/utils/isSameRoute.js","../../../../journey/src/js/lib/roadtrip/roadtrip.js","../../../../journey/src/js/lib/journey/EventEmitter.js","../../../../journey/src/js/lib/journey/utils/util.js","../../../../journey/src/js/lib/journey/handler/routeAbuseMonitor.js","../../../../journey/src/js/lib/journey/journey.js","../../../web/src/js/lib/ractive.js","../../../web/src/js/lib/fade.js","../../../web/src/js/app/views/basics/methods/methods.js","../../../web/src/js/app/views/basics/binding/binding.js","../../../web/src/js/lib/parsley.js","../../../web/src/js/app/views/forms/validate/validatingForm.js","../../../web/src/js/app/views/lifecycle/events/events.js","../../../web/src/js/app/views/ajax/basic/basicAjax.js","../../../web/src/js/app/views/ajax/upload/upload.js","../../../web/src/js/app/views/comp/basic/basicComp.js","../../../web/src/js/app/views/comp/multiple/multipleComp.js","../../../web/src/js/app/views/comp/pubsub/compPubSub.js","../../../web/src/js/app/panel/side-panel/sidePanel.js","../../../web/src/js/app/menu/menuSlider.js","../../../../journey/src/js/lib/roadtrip/utils/util.js","../../../../journey/src/js/lib/roadtrip/utils/watchHistory.js","../../../../journey/src/js/lib/roadtrip/utils/config.js","../../../../journey/src/js/lib/roadtrip/utils/pathHelper.js","../../../../journey/src/js/lib/roadtrip/utils/window.js","../../../../journey/src/js/lib/roadtrip/utils/polyfill.js","../../../../journey/src/js/lib/journey/handler/eventer.js","../../../../journey/src/js/lib/journey/utils/mode.js","../../../../journey/src/js/lib/journey/utils/events.js","../../../../journey/src/js/lib/journey/utils/config.js","../../../web/src/js/lib/prism.js","../../../web/src/js/app/views/home/home.js","../../../web/src/js/app/views/basics/controller/basic.js","../../../web/src/js/app/views/nav/nav.js","../../../web/src/js/app/views/nav/navTarget.js","../../../web/src/js/app/views/nav/navTargetParams.js","../../../web/src/js/app/views/notfound/notFound.js","../../../web/src/js/app/views/nav/redirect/redirect.js","../../../web/src/js/app/views/nav/redirect/redirectTarget.js","../../../web/src/js/app/views/forms/basic/basicForm.js","../../../web/src/js/app/views/partial/basic/basicPartial.js","../../../web/src/js/app/views/comp/pubsub/grid.js","../../../web/src/js/app/views/transition/basic/basicTransition.js","../../../web/src/js/app/config/routes.js","../../../web/src/js/lib/pace.js","../../../web/src/js/app/menu/menu.js","../../../web/src/js/lib/bootstrap.js","../../../web/src/js/app/animationMonitor.js","../../../web/src/js/app/start.js"],"sourcesContent":["import roadtrip from './roadtrip.js';\nimport pathHelper from \"./utils/pathHelper.js\";\nimport watchHistory from \"./utils/watchHistory.js\";\n\n\nconst a = typeof document !== 'undefined' && document.createElement( 'a' );\nconst QUERYPAIR_REGEX = /^([\\w\\-]+)(?:=([^&]*))?$/;\nconst HANDLERS = [ 'beforeenter', 'enter', 'leave', 'update' ];\n\nlet isInitial = true;\n\nfunction RouteData( { route, pathname, params, query, hash, scrollX, scrollY } ) {\n\tthis.pathname = pathname;\n\tthis.params = params;\n\tthis.query = query;\n\tthis.hash = hash;\n\tthis.isInitial = isInitial;\n\tthis.scrollX = scrollX;\n\tthis.scrollY = scrollY;\n\n\tthis._route = route;\n\n\tisInitial = false;\n}\n\nRouteData.prototype = {\n\tmatches( href ) {\n\t\treturn this._route.matches( href );\n\t}\n};\n\nexport default function Route( path, options ) {\n\tpath = pathHelper.stripSlashOrHashPrefix(path);\t\n\n\tthis.path = path;\n\tthis.segments = path.split( '/' );\n\n\tif ( typeof options === 'function' ) {\n\t\toptions = {\n\t\t\tenter: options\n\t\t};\n\t}\n\n\tthis.updateable = typeof options.update === 'function';\n\n\tHANDLERS.forEach( handler => {\n\t\tthis[ handler ] = ( route, other, opts ) => {\n\t\t\tlet value;\n\n\t\t\tif ( options[ handler ] ) {\n\t\t\t\tvalue = options[ handler ]( route, other, opts );\n\t\t\t}\n\n\t\t\treturn roadtrip.Promise.resolve( value );\n\t\t};\n\t} );\n}\n\nRoute.prototype = {\n\tmatches( href ) {\n\t\ta.href = pathHelper.prefixWithSlash(href); // This works for the options useHash: false + contextPath: true\n\n\t\tconst pathname = a.pathname.slice( 1 );\n\t\tconst segments = pathname.split( '/' );\n\n\t\treturn segmentsMatch( segments, this.segments );\n\t},\n\n\texec( target ) {\n\t\ta.href = target.href;\n\n\t\tlet pathname = a.pathname;\n\t\tpathname = pathHelper.stripSlashOrHashPrefix(pathname);\n\t\tconst search = a.search.slice( 1 );\n\n\t\tconst segments = pathname.split( '/' );\n\n\t\tif ( segments.length !== this.segments.length ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst params = { };\n\n\t\tfor ( let i = 0; i < segments.length; i += 1 ) {\n\t\t\tconst segment = segments[i];\n\t\t\tconst toMatch = this.segments[i];\n\n\t\t\tif ( toMatch[0] === ':' ) {\n\t\t\t\tparams[ toMatch.slice( 1 ) ] = segment;\n\t\t\t} else if ( segment !== toMatch ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tconst query = { };\n\t\tconst queryPairs = search.split( '&' );\n\n\t\tfor ( let i = 0; i < queryPairs.length; i += 1 ) {\n\t\t\tconst match = QUERYPAIR_REGEX.exec( queryPairs[i] );\n\n\t\t\tif ( match ) {\n\t\t\t\tconst key = match[1];\n\t\t\t\tconst value = decodeURIComponent( match[2] );\n\n\t\t\t\tif ( query.hasOwnProperty( key ) ) {\n\t\t\t\t\tif ( typeof query[ key ] !== 'object' ) {\n\t\t\t\t\t\tquery[ key ] = [ query[ key ] ];\n\t\t\t\t\t}\n\n\t\t\t\t\tquery[ key ].push( value );\n\t\t\t\t} else {\n\t\t\t\t\tquery[ key ] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn new RouteData( {\n\t\t\troute: this,\n\t\t\tpathname,\n\t\t\tparams,\n\t\t\tquery,\n\t\t\thash: a.hash.slice( 1 ),\n\t\t\tscrollX: target.scrollX,\n\t\t\tscrollY: target.scrollY\n\t\t} );\n\t}\n};\n\nfunction segmentsMatch( a, b ) {\n\tif ( a.length !== b.length )\n\t\treturn;\n\n\tlet i = a.length;\n\twhile ( i -- ) {\n\t\tif ( ( a[i] !== b[i] ) && ( b[i][0] !== ':' ) ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\n//\n//const skip = [ \"isInitial\", \"_route\", \"pathname\", \"params\", \"query\", \"hash\" ];\n//\n//RouteData.prototype.extend = function ( src ) {\n//\tfor ( var nextKey in src ) {\n//\t\tif ( src.hasOwnProperty( nextKey ) ) {\n//\n//\t\t\tif ( skip.indexOf( nextKey ) < 0 ) {\n//\t\t\t\tthis[nextKey] = src[nextKey];\n//\t\t\t}\n//\t\t}\n//\t}\n//\treturn this;\n//};\n\n\nRouteData.prototype.extend = function( target ) {\n\tvar output = Object( target );\n\n\tfor ( var i = 1; i < arguments.length; i++ ) {\n\t\tvar src = arguments[i];\n\t\tif ( src === undefined || src === null )\n\t\t\tcontinue;\n\t\tfor ( var nextKey in src ) {\n\t\t\tif ( src.hasOwnProperty( nextKey ) ) {\n\t\t\t\toutput[nextKey] = src[nextKey];\n\t\t\t}\n\t\t}\n\t}\n\treturn output;\n};","import window from './window.js';\nimport roadtrip from '../roadtrip.js';\nimport routes from '../routes.js';\nimport util from './util.js';\nimport watchHistory from './watchHistory.js';\nimport path from \"./pathHelper.js\";\nimport config from \"./config.js\";\n\n// Adapted from https://github.com/visionmedia/page.js\n// MIT license https://github.com/visionmedia/page.js#license\n\nexport default function watchLinks ( callback ) {\n\twindow.addEventListener( 'click', handler, false );\n\twindow.addEventListener( 'touchstart', handler, false );\n\n\tfunction handler ( event ) {\n\t\tif ( which( event ) !== 1 ) return;\n\t\tif ( event.metaKey || event.ctrlKey || event.shiftKey ) return;\n\t\tif ( event.defaultPrevented ) return;\n\n\t\t// ensure target is a link\n\t\tlet el = event.target;\n\t\twhile ( el && el.nodeName !== 'A' ) {\n\t\t\tel = el.parentNode;\n\t\t}\n\n\t\tif ( !el || el.nodeName !== 'A' ) return;\n\n\t\t// Ignore if tag has\n\t\t// 1. 'download' attribute\n\t\t// 2. rel='external' attribute\n\t\tif ( el.hasAttribute( 'download' ) || el.getAttribute( 'rel' ) === 'external' ) return;\n\n\t\t// ensure non-hash for the same path\n\n\t\t// Check for mailto: in the href\n\t\tif ( ~el.href.indexOf( 'mailto:' ) ) return;\n\n\t\t// check target\n\t\tif ( el.target ) return;\n\n\t\t// x-origin\n\t\tif ( !sameOrigin( el.href ) ) return;\n\n\t\tlet path;\n\n\t\tif (config.useHash) {\n\t\t\tpath = toHash(el);\n\n\t\t} else {\n\t\tpath = el.getAttribute('href');\n\t\t\n\t\t// below is original code which builds up path from the a.href property. Above we instead simply use the <a href> attribute\n\t\t//path = el.pathname + el.search + ( el.hash || '' );\n\t\t}\n\n\t\t// strip leading '/[drive letter]:' on NW.js on Windows\n\t\tif ( typeof process !== 'undefined' && path.match( /^\\/[a-zA-Z]:\\// ) ) {\n\t\t\tpath = path.replace( /^\\/[a-zA-Z]:\\//, '/' );\n\t\t}\n\n\t\t// same page\n\t\t//const orig = path;\n\n\t\t/*\n\t\tif ( config.base && orig === path ) {\n\t\t\treturn;\n\t\t}*/\n\n\t\tpath = util.stripBase(path, config.base);\n\n\t\t// no match? allow navigation\n\t\tlet matchFound = routes.some( route => route.matches( path ) );\n\n\t\tif ( matchFound ) {\n\t\t\tevent.preventDefault();\n\n\t\t\t//path = util.prefixWithBase(path, config.base);\n\t\t\tcallback( path );\n\t\t}\n\n\t\treturn;\n\t}\n}\n\nfunction toHash(link) {\n\tlet href = link.getAttribute('href');\n\thref = path.prefixWithHash(href);\n\treturn href;\n}\n\nfunction which ( event ) {\n\tevent = event || window.event;\n\treturn event.which === null ? event.button : event.which;\n}\n\nfunction sameOrigin ( href ) {\n\tlet origin = location.protocol + '//' + location.hostname;\n\tif ( location.port ) origin += ':' + location.port;\n\n\treturn ( href && ( href.indexOf( origin ) === 0 ) );\n}\n","export default function isSameRoute ( routeA, routeB, dataA, dataB ) {\n\tif ( routeA !== routeB ) {\n\t\treturn false;\n\t}\n\n\treturn (\n\t\tdataA.hash === dataB.hash &&\n\t\tdeepEqual( dataA.params, dataB.params ) &&\n\t\tdeepEqual( dataA.query, dataB.query )\n\t);\n}\n\nfunction deepEqual ( a, b ) {\n\tif ( a === null && b === null ) {\n\t\treturn true;\n\t}\n\n\tif ( isArray( a ) && isArray( b ) ) {\n\t\tlet i = a.length;\n\n\t\tif ( b.length !== i ) return false;\n\n\t\twhile ( i-- ) {\n\t\t\tif ( !deepEqual( a[i], b[i] ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\telse if ( typeof a === 'object' && typeof b === 'object' ) {\n\t\tconst aKeys = Object.keys( a );\n\t\tconst bKeys = Object.keys( b );\n\n\t\tlet i = aKeys.length;\n\n\t\tif ( bKeys.length !== i ) return false;\n\n\t\twhile ( i-- ) {\n\t\t\tconst key = aKeys[i];\n\n\t\t\tif ( !b.hasOwnProperty( key ) || !deepEqual( b[ key ], a[ key ] ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\treturn a === b;\n}\n\nconst toString = Object.prototype.toString;\n\nfunction isArray ( thing ) {\n\treturn toString.call( thing ) === '[object Array]';\n}\n","import Route from './Route.js';\nimport watchLinks from './utils/watchLinks.js';\nimport pathHelper from './utils/pathHelper.js';\nimport isSameRoute from './utils/isSameRoute.js';\nimport window from './utils/window.js';\nimport routes from './routes.js';\nimport watchHistory from './utils/watchHistory.js';\nimport util from './utils/util.js';\nimport config from './utils/config.js';\nimport './utils/polyfill.js';\n\n// Enables HTML5-History-API polyfill: https://github.com/devote/HTML5-History-API\nconst location = window && ( window.history.location || window.location );\n\nfunction noop () {}\n\nlet currentData = {};\nlet currentRoute = {\n\tenter: () => roadtrip.Promise.resolve(),\n\tleave: () => roadtrip.Promise.resolve()\n};\n\nlet _target;\nlet isTransitioning = false;\n\nconst scrollHistory = {};\nlet uniqueID = 1;\nlet currentID = uniqueID;\n\nconst roadtrip = {\n\tPromise,\n\n\tadd ( path, options ) {\n\t\troutes.push( new Route( path, options ) );\n\t\treturn roadtrip;\n\t},\n\n\tstart ( options = {} ) {\n\n\t\tutil.extend( config, options );\n\t\t\n\t\twatchHistory.start(config);\n\t\twatchHistory.setListener(historyListener);\n\n\t\tlet path = pathHelper.getInitialPath();\n\n\t\tlet matchFound = routes.some( route => route.matches( path ) );\n\t\tconst href = matchFound ?\n\t\t\tpath :\n\t\t\tconfig.fallback;\n\n\t\t\tconst internalOptions = {\n\t\t\t\treplaceState: true,\n\t\t\t\tscrollX: window.scrollX,\n\t\t\t\tscrollY: window.scrollY\n\t\t\t};\n\t\t\tconst otherOptions = {};\n\n\t\treturn roadtrip.goto( href, otherOptions, internalOptions);\n\t},\n\n\tgoto ( href, otherOptions = {}, internalOptions = {} ) {\n\t\tif (href == null) return roadtrip.Promise.resolve();\n\n\t\thref = pathHelper.getGotoPath(href);\n\n\t\tscrollHistory[ currentID ] = {\n\t\t\tx: window.scrollX,\n\t\t\ty: window.scrollY\n\t\t};\n\n\t\tlet target;\n\t\tconst promise = new roadtrip.Promise( ( fulfil, reject ) => {\n\t\t\ttarget = _target = {\n\t\t\t\thref,\n\t\t\t\tscrollX: internalOptions.scrollX || 0,\n\t\t\t\tscrollY: internalOptions.scrollY || 0,\n\t\t\t\tinternalOptions,\n\t\t\t\totherOptions,\n\t\t\t\tfulfil,\n\t\t\t\treject\n\t\t\t};\n\t\t});\n\t\t\n\t\tpromise._locked = false;\n\t\tif ( isTransitioning ) {\n\t\t\tpromise._locked = true;\n\t\t\treturn promise;\n\t\t}\n\n\t\t_goto( target );\n\n\t\tpromise._sameRoute = target._sameRoute;\n\t\treturn promise;\n\t},\n\n\tgetCurrentRoute () {\n\t\treturn currentData;\n\t}\n};\n\nif ( window ) {\n\twatchLinks( href => {\n\t\troadtrip.goto( href )\n\n\t\t\t.catch(e => {\n\t\t\t\tisTransitioning = false; \n\t\t\t} );\n\t});\n}\n\nfunction getNewData(target) {\n\tlet newData;\n\tlet newRoute;\n\n\tfor ( let i = 0; i < routes.length; i += 1 ) {\n\t\tconst route = routes[i];\n\t\tnewData = route.exec( target );\n\n\t\tif ( newData ) {\n\t\t\tnewRoute = route;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn {\n\t\tnewRoute: newRoute,\n\t\tnewData: newData\n\t};\n}\n\nfunction historyListener(options) {\n\n\t\tlet url = util.stripBase(options.url, config.base);\n\n\tconst otherOptions = {};\n\tconst internalOptions = {};\n\n\t\t_target = {\n\t\t\thref: url,\n\t\t\thashChange: options.hashChange, // so we know not to manipulate the history\n\t\t\tpopState: options.popState, // so we know not to manipulate the history\n\t\t\tfulfil: noop,\n\t\t\treject: noop,\n\t\t\totherOptions,\n\t\t\tinternalOptions\n\t\t};\n\n\t\tif(options.popEvent != null) {\n\t\t\tconst scroll = scrollHistory[ options.popEvent.state.uid ] || {x: 0, y: 0};\n\t\t\t_target.scrollX = scroll.x;\n\t\t\t_target.scrollY = scroll.y;\n\n\t\t} else {\n\t\t\t_target.scrollX = 0;\n\t\t\t_target.scrollY = 0;\n\t\t}\n\n\t\t_goto( _target );\n\n\t\tif(options.popEvent != null) {\n\t\t\tcurrentID = options.popEvent.state.uid;\n\t\t}\n}\n\nfunction _goto ( target ) {\n\tlet newRoute;\n\tlet newData;\n\tlet forceReloadRoute = target.otherOptions.forceReload || false;\n\n\t//let targetHref = util.stripBase(target.href, config.base);\n\ttargetHref = pathHelper.prefixWithSlash(target.href);\n\ttarget.href = targetHref;\n\n\tvar result = getNewData(target);\n\n\tif (!result.newData) {\n\t\t// If we cannot find data, it is because the requested url isn't mapped to a route. Use fallback to render page. Keep url pointing to requested url for \n\t\t// debugging.\n\t\tlet tempHref = target.href;\n\t\ttarget.href = config.fallback;\n\t\tresult = getNewData(target);\n\t\ttarget.href = tempHref;\n\t}\n\n\tnewData = result.newData;\n\tnewRoute = result.newRoute;\n\n\ttarget._sameRoute = false;\n\tif ( !newRoute || (isSameRoute( newRoute, currentRoute, newData, currentData ) && !forceReloadRoute) ) {\n\t\ttarget.fulfil();\n\t\ttarget._sameRoute = true;\n\t\treturn;\n\t}\n\n\tscrollHistory[ currentID ] = {\n\t\tx: ( currentData.scrollX = window.scrollX ),\n\t\ty: ( currentData.scrollY = window.scrollY )\n\t};\n\n\tisTransitioning = true;\n\n\tlet promise;\n\tif ( !forceReloadRoute && ( newRoute === currentRoute ) && newRoute.updateable ) {\n\n\t\t// For updates, copy merge newData into currentData, in order to peserve custom data that was set during enter or beforeenter events\n\t\tnewData = newData.extend({}, currentData, newData);\n\n\t\tpromise = newRoute.update( newData, target.otherOptions );\n\t} else {\n\t\tpromise = roadtrip.Promise.all([\n\t\t\tcurrentRoute.leave( currentData, newData, target.otherOptions ),\n\t\t\tnewRoute.beforeenter( newData, currentData, target.otherOptions )\n\t\t]).then( () => newRoute.enter( newData, currentData, target.otherOptions ) );\n\t}\n\n\tpromise\n\t\t.then( () => {\n\t\t\tcurrentRoute = newRoute;\n\t\t\tcurrentData = newData;\n\n\t\t\tisTransitioning = false;\n\n\t\t\t// if the user navigated while the transition was taking\n\t\t\t// place, we need to do it all again\n\t\t\tif ( _target !== target ) {\n\t\t\t\t_goto( _target );\n\n\t\t\t} else {\n\t\t\t\ttarget.fulfil();\n\t\t\t}\n\t\t})\n\t\t.catch( e => {\n\t\t\tisTransitioning = false;\n\t\t\ttarget.reject(e);\n\t\t});\n\n\tif ( target.popState || target.hashChange ) return;\n\n\tconst uid = target.internalOptions.replaceState ? currentID : ++uniqueID;\n\n\tlet targetHref = target.href;\n\n\tif (watchHistory.useOnHashChange) {\n\t\ttargetHref = pathHelper.prefixWithHash(targetHref);\n\t\ttarget.href = targetHref;\n\t\twatchHistory.setHash( targetHref, target.internalOptions.replaceState );\n\n\t} else {\n\n\t\tif (config.useHash) {\n\t\t\ttargetHref = pathHelper.prefixWithHash(targetHref);\n\t\t\ttarget.href = targetHref;\n\n\t\t} else {\n\t\t\ttargetHref = pathHelper.prefixWithSlash(targetHref);\n\t\t\t// Add base path for pushstate, as we are routing to an absolute path '/' eg. /base/page1\n\t\t\ttargetHref = util.prefixWithBase(targetHref, config.base);\n\t\t\ttarget.href = targetHref;\n\t\t}\n\n\t\twindow.history[ target.internalOptions.replaceState ? 'replaceState' : 'pushState' ]( { uid }, '', target.href );\n\t}\n\n\tcurrentID = uid;\n\tscrollHistory[ currentID ] = {\n\t\tx: target.scrollX,\n\t\ty: target.scrollY\n\t};\n}\n\nexport default roadtrip;\n","/*!\n * EventEmitter v4.2.11 - git.io/ee\n * https://github.com/Olical/EventEmitter\n * Unlicense - http://unlicense.org/\n * Oliver Caldwell - http://oli.me.uk/\n * @preserve\n */\n\n    'use strict';\n\n    /**\n     * Class for managing events.\n     * Can be extended to provide event functionality in other classes.\n     *\n     * @class EventEmitter Manages event registering and emitting.\n     */\n    function EventEmitter() {}\n\t\n\n    // Shortcuts to improve speed and size\n    var proto = EventEmitter.prototype;\n\n    /**\n     * Finds the index of the listener for the event in its storage array.\n     *\n     * @param {Function[]} listeners Array of listeners to search through.\n     * @param {Function} listener Method to look for.\n     * @return {Number} Index of the specified listener, -1 if not found\n     * @api private\n     */\n    function indexOfListener(listeners, listener) {\n        var i = listeners.length;\n        while (i--) {\n            if (listeners[i].listener === listener) {\n                return i;\n            }\n        }\n\n        return -1;\n    }\n\n    /**\n     * Alias a method while keeping the context correct, to allow for overwriting of target method.\n     *\n     * @param {String} name The name of the target method.\n     * @return {Function} The aliased method\n     * @api private\n     */\n    function alias(name) {\n        return function aliasClosure() {\n            return this[name].apply(this, arguments);\n        };\n    }\n\n    /**\n     * Returns the listener array for the specified event.\n     * Will initialise the event object and listener arrays if required.\n     * Will return an object if you use a regex search. The object contains keys for each matched event. So /ba[rz]/ might return an object containing bar and baz. But only if you have either defined them with defineEvent or added some listeners to them.\n     * Each property in the object response is an array of listener functions.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Function[]|Object} All listener functions for the event.\n     */\n    proto.getListeners = function getListeners(evt) {\n        var events = this._getEvents();\n        var response;\n        var key;\n\n        // Return a concatenated array of all matching events if\n        // the selector is a regular expression.\n        if (evt instanceof RegExp) {\n            response = {};\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    response[key] = events[key];\n                }\n            }\n        }\n        else {\n            response = events[evt] || (events[evt] = []);\n        }\n\n        return response;\n    };\n\n    /**\n     * Takes a list of listener objects and flattens it into a list of listener functions.\n     *\n     * @param {Object[]} listeners Raw listener objects.\n     * @return {Function[]} Just the listener functions.\n     */\n    proto.flattenListeners = function flattenListeners(listeners) {\n        var flatListeners = [];\n        var i;\n\n        for (i = 0; i < listeners.length; i += 1) {\n            flatListeners.push(listeners[i].listener);\n        }\n\n        return flatListeners;\n    };\n\n    /**\n     * Fetches the requested listeners via getListeners but will always return the results inside an object. This is mainly for internal use but others may find it useful.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Object} All listener functions for an event in an object.\n     */\n    proto.getListenersAsObject = function getListenersAsObject(evt) {\n        var listeners = this.getListeners(evt);\n        var response;\n\n        if (listeners instanceof Array) {\n            response = {};\n            response[evt] = listeners;\n        }\n\n        return response || listeners;\n    };\n\n    /**\n     * Adds a listener function to the specified event.\n     * The listener will not be added if it is a duplicate.\n     * If the listener returns true then it will be removed after it is called.\n     * If you pass a regular expression as the event name then the listener will be added to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListener = function addListener(evt, listener) {\n        var listeners = this.getListenersAsObject(evt);\n        var listenerIsWrapped = typeof listener === 'object';\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key) && indexOfListener(listeners[key], listener) === -1) {\n                listeners[key].push(listenerIsWrapped ? listener : {\n                    listener: listener,\n                    once: false\n                });\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of addListener\n     */\n    proto.on = alias('addListener');\n\n    /**\n     * Semi-alias of addListener. It will add a listener that will be\n     * automatically removed after its first execution.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addOnceListener = function addOnceListener(evt, listener) {\n        return this.addListener(evt, {\n            listener: listener,\n            once: true\n        });\n    };\n\n    /**\n     * Alias of addOnceListener.\n     */\n    proto.once = alias('addOnceListener');\n\n    /**\n     * Defines an event name. This is required if you want to use a regex to add a listener to multiple events at once. If you don't do this then how do you expect it to know what event to add to? Should it just add to every possible match for a regex? No. That is scary and bad.\n     * You need to tell it what event names should be matched by a regex.\n     *\n     * @param {String} evt Name of the event to create.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvent = function defineEvent(evt) {\n        this.getListeners(evt);\n        return this;\n    };\n\n    /**\n     * Uses defineEvent to define multiple events.\n     *\n     * @param {String[]} evts An array of event names to define.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvents = function defineEvents(evts) {\n        for (var i = 0; i < evts.length; i += 1) {\n            this.defineEvent(evts[i]);\n        }\n        return this;\n    };\n\n    /**\n     * Removes a listener function from the specified event.\n     * When passed a regular expression as the event name, it will remove the listener from all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to remove the listener from.\n     * @param {Function} listener Method to remove from the event.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListener = function removeListener(evt, listener) {\n\t\tif (listener == null) {\n\t\t\treturn this.removeEvent(evt);\n\t\t}\n        var listeners = this.getListenersAsObject(evt);\n        var index;\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key)) {\n                index = indexOfListener(listeners[key], listener);\n\n                if (index !== -1) {\n                    listeners[key].splice(index, 1);\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeListener\n     */\n    proto.off = alias('removeListener');\n\n    /**\n     * Adds listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the second argument you can add to multiple events at once. The object should contain key value pairs of events and listeners or listener arrays. You can also pass it an event name and an array of listeners to be added.\n     * You can also pass it a regular expression to add the array of listeners to all events that match it.\n     * Yeah, this function does quite a bit. That's probably a bad thing.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add to multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListeners = function addListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(false, evt, listeners);\n    };\n\n    /**\n     * Removes listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the second argument you can remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be removed.\n     * You can also pass it a regular expression to remove the listeners from all events that match it.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListeners = function removeListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(true, evt, listeners);\n    };\n\n    /**\n     * Edits listeners in bulk. The addListeners and removeListeners methods both use this to do their job. You should really use those instead, this is a little lower level.\n     * The first argument will determine if the listeners are removed (true) or added (false).\n     * If you pass an object as the second argument you can add/remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be added/removed.\n     * You can also pass it a regular expression to manipulate the listeners of all events that match it.\n     *\n     * @param {Boolean} remove True if you want to remove listeners, false if you want to add.\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add/remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add/remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.manipulateListeners = function manipulateListeners(remove, evt, listeners) {\n        var i;\n        var value;\n        var single = remove ? this.removeListener : this.addListener;\n        var multiple = remove ? this.removeListeners : this.addListeners;\n\n        // If evt is an object then pass each of its properties to this method\n        if (typeof evt === 'object' && !(evt instanceof RegExp)) {\n            for (i in evt) {\n                if (evt.hasOwnProperty(i) && (value = evt[i])) {\n                    // Pass the single listener straight through to the singular method\n                    if (typeof value === 'function') {\n                        single.call(this, i, value);\n                    }\n                    else {\n                        // Otherwise pass back to the multiple function\n                        multiple.call(this, i, value);\n                    }\n                }\n            }\n        }\n        else {\n            // So evt must be a string\n            // And listeners must be an array of listeners\n            // Loop over it and pass each one to the multiple method\n            i = listeners.length;\n            while (i--) {\n                single.call(this, evt, listeners[i]);\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Removes all listeners from a specified event.\n     * If you do not specify an event then all listeners will be removed.\n     * That means every event will be emptied.\n     * You can also pass a regex to remove all events that match it.\n     *\n     * @param {String|RegExp} [evt] Optional name of the event to remove all listeners for. Will remove from every event if not passed.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeEvent = function removeEvent(evt) {\n        var type = typeof evt;\n        var events = this._getEvents();\n        var key;\n\n        // Remove different things depending on the state of evt\n        if (type === 'string') {\n            // Remove all listeners for the specified event\n            delete events[evt];\n        }\n        else if (evt instanceof RegExp) {\n            // Remove all events matching the regex.\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    delete events[key];\n                }\n            }\n        }\n        else {\n            // Remove all listeners in all events\n            delete this._events;\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeEvent.\n     *\n     * Added to mirror the node API.\n     */\n    proto.removeAllListeners = alias('removeEvent');\n\n    /**\n     * Emits an event of your choice.\n     * When emitted, every listener attached to that event will be executed.\n     * If you pass the optional argument array then those arguments will be passed to every listener upon execution.\n     * Because it uses `apply`, your array of arguments will be passed as if you wrote them out separately.\n     * So they will not arrive within the array on the other side, they will be separate.\n     * You can also pass a regular expression to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {Array} [args] Optional array of arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emitEvent = function emitEvent(that, evt, args) {\n\t\t// NOTE: customized this method\n        var listenersMap = this.getListenersAsObject(evt);\n        var listeners;\n        var listener;\n        var i;\n        var key;\n        var response;\n\n        for (key in listenersMap) {\n            if (listenersMap.hasOwnProperty(key)) {\n                listeners = listenersMap[key].slice(0);\n                i = listeners.length;\n\n                while (i--) {\n                    // If the listener returns true then it shall be removed from the event\n                    // The function is executed either with a basic call or an apply if there is an args array\n                    listener = listeners[i];\n\n                    if (listener.once === true) {\n                        this.removeListener(evt, listener.listener);\n                    }\n\n                    response = listener.listener.apply(that, args || []);\n\n                    if (response === this._getOnceReturnValue()) {\n                        this.removeListener(evt, listener.listener);\n                    }\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of emitEvent\n     */\n    proto.trigger = alias('emitEvent');\n\n    /**\n     * Subtly different from emitEvent in that it will pass its arguments on to the listeners, as opposed to taking a single array of arguments to pass on.\n     * As with emitEvent, you can pass a regex in place of the event name to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {...*} Optional additional arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emit = function emit(that, evt) {\n\t\t// NOTE: customized this method\n        var args = Array.prototype.slice.call(arguments, 2);\n        return this.emitEvent(that, evt, args);\n    };\n\n    /**\n     * Sets the current value to check against when executing listeners. If a\n     * listeners return value matches the one set here then it will be removed\n     * after execution. This value defaults to true.\n     *\n     * @param {*} value The new value to check for when executing listeners.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.setOnceReturnValue = function setOnceReturnValue(value) {\n        this._onceReturnValue = value;\n        return this;\n    };\n\n    /**\n     * Fetches the current value to check against when executing listeners. If\n     * the listeners return value matches this one then it should be removed\n     * automatically. It will return true by default.\n     *\n     * @return {*|Boolean} The current value to check for or the default, true.\n     * @api private\n     */\n    proto._getOnceReturnValue = function _getOnceReturnValue() {\n        if (this.hasOwnProperty('_onceReturnValue')) {\n            return this._onceReturnValue;\n        }\n        else {\n            return true;\n        }\n    };\n\n    /**\n     * Fetches the events object and creates one if required.\n     *\n     * @return {Object} The events storage object.\n     * @api private\n     */\n    proto._getEvents = function _getEvents() {\n        return this._events || (this._events = {});\n    };\n\n    if (typeof module === 'object' && module.exports) {\n        module.exports = EventEmitter;\n    }\n    \n\nexport default EventEmitter;\n\n","import mode from \"./mode\";\nvar rbracket = /\\[\\]$/;\nvar r20 = /%20/g;\nvar utils = {\n\n\tisFunction: function ( val ) {\n\t\treturn typeof val === 'function';\n\t},\n\n\tfadeIn: function ( el ) {\n\t\tel.style.opacity = 0;\n\t\tvar last = + new Date( );\n\t\tvar tick = function ( ) {\n\t\t\tel.style.opacity = + el.style.opacity + ( new Date( ) - last ) / 400;\n\t\t\tlast = + new Date( );\n\t\t\tif ( + el.style.opacity < 1 ) {\n\t\t\t\t( window.requestAnimationFrame && requestAnimationFrame( tick ) ) || setTimeout( tick, 16 )\n\t\t\t}\n\t\t};\n\t\ttick( );\n\t},\n\n\tfadeOut: function ( el ) {\n\t\tel.style.opacity = 0;\n\t\tvar last = + new Date( );\n\t\tvar tick = function ( ) {\n\t\t\tel.style.opacity = + el.style.opacity + ( new Date( ) - last ) / 400;\n\t\t\tlast = + new Date( );\n\t\t\tif ( + el.style.opacity < 1 ) {\n\t\t\t\t( window.requestAnimationFrame && requestAnimationFrame( tick ) ) || setTimeout( tick, 16 )\n\t\t\t}\n\t\t};\n\t\ttick( );\n\t},\n\n\t// Serialize an array of form elements or a set of key/values into a query string\n\tparam: function ( a, traditional ) {\n\t\tvar prefix,\n\t\t\t\ts = [ ],\n\t\t\t\tadd = function ( key, value ) {\n\t\t\t\t\t// If value is a function, invoke it and return its value\n\t\t\t\t\tvalue = ( typeof value === 'function' ) ? value( ) : ( value == null ? \"\" : value );\n\t\t\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" + encodeURIComponent( value );\n\t\t\t\t};\n\t\t// If an array was passed in, assume that it is an array of form elements.\n\t\tif ( Array.isArray( a ) ) {\n\t\t\t// Serialize the form elements\n\t\t\ta.forEach( function ( item, index ) {\n\t\t\t\tadd( item.name, item.value );\n\t\t\t} );\n\t\t} else {\n\t\t\t// If traditional, encode the \"old\" way (the way 1.3.2 or older\n\t\t\t// did it), otherwise encode params recursively.\n\t\t\tfor ( prefix in a ) {\n\n\t\t\t\tbuildParams( prefix, a[ prefix ], traditional, add );\n\t\t\t}\n\t\t}\n\n\t\t// Return the resulting serialization\n\t\treturn s.join( \"&\" ).replace( r20, \"+\" );\n\t},\n\n\tlog: function ( ) {\n\t\tif ( mode.DEBUG ) {\n\t\t\tFunction.apply.call( console.log, console, arguments );\n\t\t}\n\t},\n\n\tlogWarn: function ( ) {\n\t\tif ( mode.DEBUG ) {\n\t\t\tFunction.apply.call( console.info, console, arguments );\n\t\t}\n\t},\n\n\tlogInfo: function ( ) {\n\t\tif ( mode.DEBUG ) {\n\t\t\tFunction.apply.call( console.warn, console, arguments );\n\t\t}\n\t},\n\n\tlogError: function ( ) {\n\t\tif ( mode.DEBUG ) {\n\t\t\tFunction.apply.call( console.error, console, arguments );\n\t\t}\n\t}\n};\n\nfunction buildParams( prefix, obj, traditional, add ) {\n\tvar name;\n\tif ( Array.isArray( obj ) ) {\n\t\t// Serialize array item.\n\t\tobj.forEach( function ( item, index ) {\n\t\t\tif ( traditional || rbracket.test( prefix ) ) {\n\t\t\t\t// Treat each array item as a scalar.\n\t\t\t\tadd( prefix, item );\n\t\t\t} else {\n\t\t\t\t// Item is non-scalar (array or object), encode its numeric index.\n\t\t\t\tbuildParams( prefix + \"[\" + ( typeof item === \"object\" ? index : \"\" ) + \"]\", item, traditional, add );\n\t\t\t}\n\t\t} );\n\t} else if ( ! traditional && type( obj ) === \"object\" ) {\n\t\tdebugger;\n\t\t// Serialize object item.\n\t\tfor ( name in obj ) {\n\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], traditional, add );\n\t\t}\n\n\t} else {\n\t\t// Serialize scalar item.\n\t\tadd( prefix, obj );\n\t}\n}\n\nfunction type( obj ) {\n\treturn Object.prototype.toString.call( obj ).replace( /^\\[object (.+)\\]$/, \"$1\" ).toLowerCase( );\n}\n\nexport default utils;\n","import eventer from \"./eventer\";\nimport utils from  \"../utils/util\";\n\nvar callstack = [ ];\n\nvar resetRequest = false;\n\nsetupListeners();\n\nvar handler = {\n\n\t//init: ( options ) => {\n\t//},\n\n\tcheck: () => {\n\t\tif ( callstack.length > 1 ) {\n\t\t\teventer.emit( \"routeAbuseStart\" );\n\n\t\t\t// After a short delay we check if the callstack is back to normal.\n\t\t\t// If at the end of the dely the callstack is normal, we emit \"callstackNormal\" event.\n\t\t\t// If the callstack overflows again during the delay, we cancel the reset request\n\t\t\t// and begin a new reset request after a delay.\n\t\t\tvar delay = 2000;\n\t\t\tresetWhenNormal( delay );\n\t\t}\n\t},\n\treset: () => {\n\t\tcallstack = [ ];\n\t\teventer.emit( \"routeAbuseEnd\" );\n\t},\n\n\tpush: () => {\n\t\tcallstack.push( 1 );\n\t\thandler.check();\n\t},\n\n\tpop: () => {\n\t\tcallstack.splice( 0, 1 );\n\t\tif ( callstack.length === 0 ) {\n\t\t}\n\t}\n};\n\nfunction setupListeners() {\n\n\teventer.on( \"goto\", ( options ) => {\n\t\thandler.push();\n\t} );\n\n\n\teventer.on( \"error\", ( options ) => {\n\t\thandler.pop();\n\t} );\n\n\teventer.on( \"entered\", ( options ) => {\n\t\thandler.pop();\n\t} );\n\n\teventer.on( \"updated\", ( options ) => {\n\t\thandler.pop();\n\t} );\n}\n\nfunction resetWhenNormal( delay = 2000 ) {\n\n\t// if a request was already made to reenable animations, clear it and make a new request\n\tif ( resetRequest ) {\n\t\tclearTimeout( resetRequest );\n\t}\n\n\t// We wait a bit before restting callstack in case user is still thrashing UI.\n\tresetRequest = setTimeout( function ( ) {\n\t\thandler.reset( );\n\t}, delay );\n}\n\nexport default handler;\n","import roadtrip from  \"../roadtrip/roadtrip\";\nimport eventer from \"./handler/eventer\";\nimport journeyUtils from \"./utils/util.js\";\nimport roadtripUtils from \"../roadtrip/utils/util.js\";\nimport mode from \"./utils/mode\";\nimport events from \"./utils/events\";\nimport \"./handler/routeAbuseMonitor\";\nimport config from \"./utils/config.js\";\n\n// Enables HTML5-History-API polyfill: https://github.com/devote/HTML5-History-API\nconst location = window && ( window.history.location || window.location );\n\nvar journey = {\t};\n\neventer.init( journey );\n\njourney.add = function add( path, options ) {\n\t\n\tif (path == null) {\n\t\tthrow new Error(\"journey.add does not accept 'null' path\");\n\t}\n\t\n\tif (options == null) {\n\t\tthrow new Error(\"journey.add does not accept 'null' options\");\n\t}\n\t\n\toptions = roadtripUtils.extend( { }, options );\n\twrap( options );\n\n\troadtrip.add( path, options );\n\n\treturn journey;\n};\n\njourney.start = function( options ) {\n\n\troadtripUtils.extend( config, options );\n\n\tmode.DEBUG = config.debug;\n\t\n\twrapRoadtripGoto();\n\n\treturn roadtrip.start( options );\n};\n\njourney.goto = function ( href, otherOptions = {}, internalOptions = {}) {\n\tif (roadtrip._origGoto == null) {\n\t\tthrow new Error(\"call start() before using journey\");\n\t}\n\t\tvar promise = roadtrip._origGoto( href, otherOptions, internalOptions );\n\n\tif (promise._sameRoute) {\n\t\treturn promise;\n\t}\n\n\tjourney.emit( journey, \"goto\", {href: location.href} );\n\n\t//routeAbuseMonitor.push();\n\t//callstack.check();\n\n\treturn promise;\n};\n\njourney.getBase = function( ) {\n\treturn roadtrip.base;\n}\n\njourney.getCurrentRoute = function( ) {\n\treturn roadtrip.getCurrentRoute();\n};\n\nfunction raiseError( options ) {\n\tjourneyUtils.logError( options.error );\n\tjourney.emit( journey, \"error\", options );\n}\n\nfunction raiseEvent( event, args ) {\n\tvar options = { };\n\tif ( event === events.UPDATE || event === events.UPDATED ) {\n\t\toptions.route = args[0];\n\t\toptions.other = args[1];\n\n\t} else if ( event === events.BEFORE_ENTER || event === events.BEFORE_ENTER_COMPLETE ) {\n\t\toptions.to = args[0];\n\t\toptions.from = args[1];\n\t\toptions.other = args[2];\n\n\t} else if ( event === events.ENTER || event === events.ENTERED ) {\n\t\toptions.to = args[0];\n\t\toptions.from = args[1];\n\t\toptions.other = args[2];\n\n\t} else if ( event === events.LEAVE || event === events.LEFT ) {\n\t\toptions.from = args[0];\n\t\toptions.to = args[1];\n\t\toptions.other = args[2];\n\t}\n\n\tjourney.emit( journey, event, options );\n}\n\nfunction wrap( options ) {\n\tenhanceEvent( events.ENTER, options );\n\tenhanceEvent( events.UPDATE, options );\n\tenhanceEvent( events.BEFORE_ENTER, options );\n\tenhanceEvent( events.LEAVE, options );\n}\n\nfunction enhanceEvent( name, options ) {\n\tvar handler = options[name];\n\n\tif ( handler == null ) {\n\t\treturn;\n\t}\n\n\tvar wrapper = function ( ) {\n\t\tvar that = this;\n\t\t//var thatArgs = arguments;\n\n\t\t// Handle errors thrown by handler: enter, leave, update or beforeenter\n\t\ttry {\n\t\t\t// convert arguments into a proper array\n\t\t\tvar args = Array.prototype.slice.call(arguments);\n\t\t\t\n\t\t\tvar options;\n\t\t\t\n\t\t\tif (name === events.UPDATE) { // update only accepts one argument\n\t\t\t\toptions = args[1];\n\t\t\t\tif (options == null) {\n\t\t\t\t\toptions = args[1] = {};\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\toptions = args[2];\n\t\t\t\tif (options == null) {\n\t\t\t\t\toptions = args[2] = {};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Ensure default target is passed to events, but don't override if already present\n\t\t\toptions.target = options.target || config.target;\n\t\t\toptions.startOptions = options.startOptions || config;\n\t\t\t//args.push(options);\n\n\t\t\traiseEvent( name, args );\n\n\t\t\t// Call handler\n\t\t\tvar result = handler.apply( that, args );\n\n\t\t\tresult = Promise.all( [ result ] ); // Ensure handler result can be handled as promise\n\t\t\tresult.then( () => {\n\n\t\t\t\tif ( name === events.BEFORE_ENTER ) {\n\t\t\t\t\traiseEvent( events.BEFORE_ENTER_COMPLETE, args );\n\n\t\t\t\t} else if ( name === events.ENTER ) {\n\t\t\t\t\traiseEvent( events.ENTERED, args );\n\n\t\t\t\t} else if ( name === events.LEAVE ) {\n\t\t\t\t\traiseEvent( events.LEFT, args );\n\n\t\t\t\t} else if ( name === events.UPDATE ) {\n\t\t\t\t\traiseEvent( events.UPDATED, args );\n\t\t\t\t}\n\t\t\t} ).catch( err => {\n\t\t\t\tvar options = gatherErrorOptions( name, args, err );\n\t\t\t\traiseError( options );\n\t\t\t} );\n\n\t\t\treturn result;\n\n\t\t} catch ( err ) {\n\t\t\tvar options = gatherErrorOptions( name, args, err );\n\t\t\traiseError( options );\n\t\t\treturn Promise.reject( \"error occurred in [\" + name + \"] - \" + err.message ); // let others handle further up the stack\n\t\t}\n\t};\n\n\toptions[name] = wrapper;\n}\n\nfunction gatherErrorOptions( event, args, err ) {\n\t//utils.log( \"JA journey got this one: \" + event );\n\tvar route, from, to;\n\n\tif ( event === events.UPDATE ) {\n\t\troute = args[0];\n\n\t} else if ( event === events.BEFORE_ENTER || event === events.ENTER ) {\n\t\troute = args[0];\n\t\tto = args[0];\n\t\tfrom = args[1];\n\t} else {\n\t\troute = args[1];\n\t\tto = args[1];\n\t\tfrom = args[0];\n\t}\n\tvar options = { error: err, event: event, from: from, to: to, route: route };\n\treturn options;\n\n}\n\nfunction wrapRoadtripGoto() {\n\t// Ensure to only wrap goto once, in case journey.start is called more than once\n\tif (roadtrip._origGoto != null) return;\n\n\troadtrip._origGoto = roadtrip.goto;\n\troadtrip.goto = journey.goto;\n\n\t\n}\n\nexport default journey;\n\n","/*\n\tRactive.js v0.9.0-edge\n\tBuild: unknown\n\tDate: Fri May 12 2017 23:15:19 GMT+0200 (South Africa Standard Time)\n\tWebsite: http://ractivejs.org\n\tLicense: MIT\n*/\nvar defaults = {\n\t// render placement:\n\tel:                     void 0,\n\tappend:                 false,\n\tdelegate:               true,\n\n\t// template:\n\ttemplate:               null,\n\n\t// parse:\n\tdelimiters:             [ '{{', '}}' ],\n\ttripleDelimiters:       [ '{{{', '}}}' ],\n\tstaticDelimiters:       [ '[[', ']]' ],\n\tstaticTripleDelimiters: [ '[[[', ']]]' ],\n\tcsp:                    true,\n\tinterpolate:            false,\n\tpreserveWhitespace:     false,\n\tsanitize:               false,\n\tstripComments:          true,\n\tcontextLines:           0,\n\tparserTransforms:       [],\n\n\t// data & binding:\n\tdata:                   {},\n\tcomputed:               {},\n\tsyncComputedChildren:   false,\n\tresolveInstanceMembers: true,\n\twarnAboutAmbiguity:     false,\n\tadapt:                  [],\n\tisolated:               true,\n\ttwoway:                 true,\n\tlazy:                   false,\n\n\t// transitions:\n\tnoIntro:                false,\n\tnoOutro:                false,\n\ttransitionsEnabled:     true,\n\tcomplete:               void 0,\n\tnestedTransitions:      true,\n\n\t// css:\n\tcss:                    null,\n\tnoCssTransform:         false\n};\n\n// These are a subset of the easing equations found at\n// https://raw.github.com/danro/easing-js - license info\n// follows:\n\n// --------------------------------------------------\n// easing.js v0.5.4\n// Generic set of easing functions with AMD support\n// https://github.com/danro/easing-js\n// This code may be freely distributed under the MIT license\n// http://danro.mit-license.org/\n// --------------------------------------------------\n// All functions adapted from Thomas Fuchs & Jeremy Kahn\n// Easing Equations (c) 2003 Robert Penner, BSD license\n// https://raw.github.com/danro/easing-js/master/LICENSE\n// --------------------------------------------------\n\n// In that library, the functions named easeIn, easeOut, and\n// easeInOut below are named easeInCubic, easeOutCubic, and\n// (you guessed it) easeInOutCubic.\n//\n// You can add additional easing functions to this list, and they\n// will be globally available.\n\n\nvar easing = {\n\tlinear: function linear ( pos ) { return pos; },\n\teaseIn: function easeIn ( pos ) { return Math.pow( pos, 3 ); },\n\teaseOut: function easeOut ( pos ) { return ( Math.pow( ( pos - 1 ), 3 ) + 1 ); },\n\teaseInOut: function easeInOut ( pos ) {\n\t\tif ( ( pos /= 0.5 ) < 1 ) { return ( 0.5 * Math.pow( pos, 3 ) ); }\n\t\treturn ( 0.5 * ( Math.pow( ( pos - 2 ), 3 ) + 2 ) );\n\t}\n};\n\nvar toString = Object.prototype.toString;\n\n\nfunction isEqual ( a, b ) {\n\tif ( a === null && b === null ) {\n\t\treturn true;\n\t}\n\n\tif ( typeof a === 'object' || typeof b === 'object' ) {\n\t\treturn false;\n\t}\n\n\treturn a === b;\n}\n\n// http://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric\nfunction isNumeric ( thing ) {\n\treturn !isNaN( parseFloat( thing ) ) && isFinite( thing );\n}\n\nfunction isObject ( thing ) {\n\treturn ( thing && toString.call( thing ) === '[object Object]' );\n}\n\nfunction isObjectLike ( thing ) {\n\tif ( !thing ) { return false; }\n\tvar type = typeof thing;\n\tif ( type === 'object' || type === 'function' ) { return true; }\n}\n\n/* eslint no-console:\"off\" */\nvar win = typeof window !== 'undefined' ? window : null;\nvar doc = win ? document : null;\nvar isClient = !!doc;\nvar hasConsole = ( typeof console !== 'undefined' && typeof console.warn === 'function' && typeof console.warn.apply === 'function' );\n\nvar svg = doc ?\n\tdoc.implementation.hasFeature( 'http://www.w3.org/TR/SVG11/feature#BasicStructure', '1.1' ) :\n\tfalse;\n\nvar vendors = [ 'o', 'ms', 'moz', 'webkit' ];\n\nvar noop = function () {};\n\n/* global console */\n/* eslint no-console:\"off\" */\n\nvar alreadyWarned = {};\nvar log;\nvar printWarning;\nvar welcome;\n\nif ( hasConsole ) {\n\tvar welcomeIntro = [\n\t\t\"%cRactive.js %c0.9.0-edge %cin debug mode, %cmore...\",\n\t\t'color: rgb(114, 157, 52); font-weight: normal;',\n\t\t'color: rgb(85, 85, 85); font-weight: normal;',\n\t\t'color: rgb(85, 85, 85); font-weight: normal;',\n\t\t'color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;'\n\t];\n\tvar welcomeMessage = \"You're running Ractive 0.9.0-edge in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\\n\\nTo disable debug mode, add this line at the start of your app:\\n  Ractive.DEBUG = false;\\n\\nTo disable debug mode when your app is minified, add this snippet:\\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\\n\\nGet help and support:\\n  http://docs.ractivejs.org\\n  http://stackoverflow.com/questions/tagged/ractivejs\\n  http://groups.google.com/forum/#!forum/ractive-js\\n  http://twitter.com/ractivejs\\n\\nFound a bug? Raise an issue:\\n  https://github.com/ractivejs/ractive/issues\\n\\n\";\n\n\twelcome = function () {\n\t\tif ( Ractive.WELCOME_MESSAGE === false ) {\n\t\t\twelcome = noop;\n\t\t\treturn;\n\t\t}\n\t\tvar message = 'WELCOME_MESSAGE' in Ractive ? Ractive.WELCOME_MESSAGE : welcomeMessage;\n\t\tvar hasGroup = !!console.groupCollapsed;\n\t\tif ( hasGroup ) { console.groupCollapsed.apply( console, welcomeIntro ); }\n\t\tconsole.log( message );\n\t\tif ( hasGroup ) {\n\t\t\tconsole.groupEnd( welcomeIntro );\n\t\t}\n\n\t\twelcome = noop;\n\t};\n\n\tprintWarning = function ( message, args ) {\n\t\twelcome();\n\n\t\t// extract information about the instance this message pertains to, if applicable\n\t\tif ( typeof args[ args.length - 1 ] === 'object' ) {\n\t\t\tvar options = args.pop();\n\t\t\tvar ractive = options ? options.ractive : null;\n\n\t\t\tif ( ractive ) {\n\t\t\t\t// if this is an instance of a component that we know the name of, add\n\t\t\t\t// it to the message\n\t\t\t\tvar name;\n\t\t\t\tif ( ractive.component && ( name = ractive.component.name ) ) {\n\t\t\t\t\tmessage = \"<\" + name + \"> \" + message;\n\t\t\t\t}\n\n\t\t\t\tvar node;\n\t\t\t\tif ( node = ( options.node || ( ractive.fragment && ractive.fragment.rendered && ractive.find( '*' ) ) ) ) {\n\t\t\t\t\targs.push( node );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconsole.warn.apply( console, [ '%cRactive.js: %c' + message, 'color: rgb(114, 157, 52);', 'color: rgb(85, 85, 85);' ].concat( args ) );\n\t};\n\n\tlog = function () {\n\t\tconsole.log.apply( console, arguments );\n\t};\n} else {\n\tprintWarning = log = welcome = noop;\n}\n\nfunction format ( message, args ) {\n\treturn message.replace( /%s/g, function () { return args.shift(); } );\n}\n\nfunction fatal ( message ) {\n\tvar args = [], len = arguments.length - 1;\n\twhile ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n\tmessage = format( message, args );\n\tthrow new Error( message );\n}\n\nfunction logIfDebug () {\n\tif ( Ractive.DEBUG ) {\n\t\tlog.apply( null, arguments );\n\t}\n}\n\nfunction warn ( message ) {\n\tvar args = [], len = arguments.length - 1;\n\twhile ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n\tmessage = format( message, args );\n\tprintWarning( message, args );\n}\n\nfunction warnOnce ( message ) {\n\tvar args = [], len = arguments.length - 1;\n\twhile ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n\tmessage = format( message, args );\n\n\tif ( alreadyWarned[ message ] ) {\n\t\treturn;\n\t}\n\n\talreadyWarned[ message ] = true;\n\tprintWarning( message, args );\n}\n\nfunction warnIfDebug () {\n\tif ( Ractive.DEBUG ) {\n\t\twarn.apply( null, arguments );\n\t}\n}\n\nfunction warnOnceIfDebug () {\n\tif ( Ractive.DEBUG ) {\n\t\twarnOnce.apply( null, arguments );\n\t}\n}\n\n// Error messages that are used (or could be) in multiple places\nvar badArguments = 'Bad arguments';\nvar noRegistryFunctionReturn = 'A function was specified for \"%s\" %s, but no %s was returned';\nvar missingPlugin = function ( name, type ) { return (\"Missing \\\"\" + name + \"\\\" \" + type + \" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#\" + type + \"s\"); };\n\nfunction findInViewHierarchy ( registryName, ractive, name ) {\n\tvar instance = findInstance( registryName, ractive, name );\n\treturn instance ? instance[ registryName ][ name ] : null;\n}\n\nfunction findInstance ( registryName, ractive, name ) {\n\twhile ( ractive ) {\n\t\tif ( name in ractive[ registryName ] ) {\n\t\t\treturn ractive;\n\t\t}\n\n\t\tif ( ractive.isolated ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tractive = ractive.parent;\n\t}\n}\n\nfunction interpolate ( from, to, ractive, type ) {\n\tif ( from === to ) { return null; }\n\n\tif ( type ) {\n\t\tvar interpol = findInViewHierarchy( 'interpolators', ractive, type );\n\t\tif ( interpol ) { return interpol( from, to ) || null; }\n\n\t\tfatal( missingPlugin( type, 'interpolator' ) );\n\t}\n\n\treturn interpolators.number( from, to ) ||\n\t       interpolators.array( from, to ) ||\n\t       interpolators.object( from, to ) ||\n\t       null;\n}\n\nfunction snap ( to ) {\n\treturn function () { return to; };\n}\n\nvar interpolators = {\n\tnumber: function number ( from, to ) {\n\t\tif ( !isNumeric( from ) || !isNumeric( to ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tfrom = +from;\n\t\tto = +to;\n\n\t\tvar delta = to - from;\n\n\t\tif ( !delta ) {\n\t\t\treturn function () { return from; };\n\t\t}\n\n\t\treturn function ( t ) {\n\t\t\treturn from + ( t * delta );\n\t\t};\n\t},\n\n\tarray: function array ( from, to ) {\n\t\tvar len, i;\n\n\t\tif ( !Array.isArray( from ) || !Array.isArray( to ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar intermediate = [];\n\t\tvar interpolators = [];\n\n\t\ti = len = Math.min( from.length, to.length );\n\t\twhile ( i-- ) {\n\t\t\tinterpolators[i] = interpolate( from[i], to[i] );\n\t\t}\n\n\t\t// surplus values - don't interpolate, but don't exclude them either\n\t\tfor ( i=len; i<from.length; i+=1 ) {\n\t\t\tintermediate[i] = from[i];\n\t\t}\n\n\t\tfor ( i=len; i<to.length; i+=1 ) {\n\t\t\tintermediate[i] = to[i];\n\t\t}\n\n\t\treturn function ( t ) {\n\t\t\tvar i = len;\n\n\t\t\twhile ( i-- ) {\n\t\t\t\tintermediate[i] = interpolators[i]( t );\n\t\t\t}\n\n\t\t\treturn intermediate;\n\t\t};\n\t},\n\n\tobject: function object ( from, to ) {\n\t\tif ( !isObject( from ) || !isObject( to ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar properties = [];\n\t\tvar intermediate = {};\n\t\tvar interpolators = {};\n\n\t\tfor ( var prop in from ) {\n\t\t\tif ( from.hasOwnProperty( prop ) ) {\n\t\t\t\tif ( to.hasOwnProperty( prop ) ) {\n\t\t\t\t\tproperties.push( prop );\n\t\t\t\t\tinterpolators[ prop ] = interpolate( from[ prop ], to[ prop ] ) || snap( to[ prop ] );\n\t\t\t\t}\n\n\t\t\t\telse {\n\t\t\t\t\tintermediate[ prop ] = from[ prop ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor ( var prop$1 in to ) {\n\t\t\tif ( to.hasOwnProperty( prop$1 ) && !from.hasOwnProperty( prop$1 ) ) {\n\t\t\t\tintermediate[ prop$1 ] = to[ prop$1 ];\n\t\t\t}\n\t\t}\n\n\t\tvar len = properties.length;\n\n\t\treturn function ( t ) {\n\t\t\tvar i = len;\n\n\t\t\twhile ( i-- ) {\n\t\t\t\tvar prop = properties[i];\n\n\t\t\t\tintermediate[ prop ] = interpolators[ prop ]( t );\n\t\t\t}\n\n\t\t\treturn intermediate;\n\t\t};\n\t}\n};\n\nfunction addToArray ( array, value ) {\n\tvar index = array.indexOf( value );\n\n\tif ( index === -1 ) {\n\t\tarray.push( value );\n\t}\n}\n\nfunction arrayContains ( array, value ) {\n\tfor ( var i = 0, c = array.length; i < c; i++ ) {\n\t\tif ( array[i] == value ) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\nfunction arrayContentsMatch ( a, b ) {\n\tvar i;\n\n\tif ( !Array.isArray( a ) || !Array.isArray( b ) ) {\n\t\treturn false;\n\t}\n\n\tif ( a.length !== b.length ) {\n\t\treturn false;\n\t}\n\n\ti = a.length;\n\twhile ( i-- ) {\n\t\tif ( a[i] !== b[i] ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nfunction ensureArray ( x ) {\n\tif ( typeof x === 'string' ) {\n\t\treturn [ x ];\n\t}\n\n\tif ( x === undefined ) {\n\t\treturn [];\n\t}\n\n\treturn x;\n}\n\nfunction lastItem ( array ) {\n\treturn array[ array.length - 1 ];\n}\n\nfunction removeFromArray ( array, member ) {\n\tif ( !array ) {\n\t\treturn;\n\t}\n\n\tvar index = array.indexOf( member );\n\n\tif ( index !== -1 ) {\n\t\tarray.splice( index, 1 );\n\t}\n}\n\nfunction combine () {\n\tvar arrays = [], len = arguments.length;\n\twhile ( len-- ) arrays[ len ] = arguments[ len ];\n\n\tvar res = arrays.concat.apply( [], arrays );\n\tvar i = res.length;\n\twhile ( i-- ) {\n\t\tvar idx = res.indexOf( res[i] );\n\t\tif ( ~idx && idx < i ) { res.splice( i, 1 ); }\n\t}\n\n\treturn res;\n}\n\nfunction toArray ( arrayLike ) {\n\tvar array = [];\n\tvar i = arrayLike.length;\n\twhile ( i-- ) {\n\t\tarray[i] = arrayLike[i];\n\t}\n\n\treturn array;\n}\n\nfunction findMap ( array, fn ) {\n\tvar len = array.length;\n\tfor ( var i = 0; i < len; i++ ) {\n\t\tvar result = fn( array[i] );\n\t\tif ( result ) { return result; }\n\t}\n}\n\nvar TransitionManager = function TransitionManager ( callback, parent ) {\n\tthis.callback = callback;\n\tthis.parent = parent;\n\n\tthis.intros = [];\n\tthis.outros = [];\n\n\tthis.children = [];\n\tthis.totalChildren = this.outroChildren = 0;\n\n\tthis.detachQueue = [];\n\tthis.outrosComplete = false;\n\n\tif ( parent ) {\n\t\tparent.addChild( this );\n\t}\n};\n\nTransitionManager.prototype.add = function add ( transition ) {\n\tvar list = transition.isIntro ? this.intros : this.outros;\n\ttransition.starting = true;\n\tlist.push( transition );\n};\n\nTransitionManager.prototype.addChild = function addChild ( child ) {\n\tthis.children.push( child );\n\n\tthis.totalChildren += 1;\n\tthis.outroChildren += 1;\n};\n\nTransitionManager.prototype.decrementOutros = function decrementOutros () {\n\tthis.outroChildren -= 1;\n\tcheck( this );\n};\n\nTransitionManager.prototype.decrementTotal = function decrementTotal () {\n\tthis.totalChildren -= 1;\n\tcheck( this );\n};\n\nTransitionManager.prototype.detachNodes = function detachNodes () {\n\tthis.detachQueue.forEach( detach );\n\tthis.children.forEach( _detachNodes );\n\tthis.detachQueue = [];\n};\n\nTransitionManager.prototype.ready = function ready () {\n\tif ( this.detachQueue.length ) { detachImmediate( this ); }\n};\n\nTransitionManager.prototype.remove = function remove ( transition ) {\n\tvar list = transition.isIntro ? this.intros : this.outros;\n\tremoveFromArray( list, transition );\n\tcheck( this );\n};\n\nTransitionManager.prototype.start = function start () {\n\tthis.children.forEach( function (c) { return c.start(); } );\n\tthis.intros.concat( this.outros ).forEach( function (t) { return t.start(); } );\n\tthis.ready = true;\n\tcheck( this );\n};\n\nfunction detach ( element ) {\n\telement.detach();\n}\n\nfunction _detachNodes ( tm ) { // _ to avoid transpiler quirk\n\ttm.detachNodes();\n}\n\nfunction check ( tm ) {\n\tif ( !tm.ready || tm.outros.length || tm.outroChildren ) { return; }\n\n\t// If all outros are complete, and we haven't already done this,\n\t// we notify the parent if there is one, otherwise\n\t// start detaching nodes\n\tif ( !tm.outrosComplete ) {\n\t\ttm.outrosComplete = true;\n\n\t\tif ( tm.parent && !tm.parent.outrosComplete ) {\n\t\t\ttm.parent.decrementOutros( tm );\n\t\t} else {\n\t\t\ttm.detachNodes();\n\t\t}\n\t}\n\n\t// Once everything is done, we can notify parent transition\n\t// manager and call the callback\n\tif ( !tm.intros.length && !tm.totalChildren ) {\n\t\tif ( typeof tm.callback === 'function' ) {\n\t\t\ttm.callback();\n\t\t}\n\n\t\tif ( tm.parent && !tm.notifiedTotal ) {\n\t\t\ttm.notifiedTotal = true;\n\t\t\ttm.parent.decrementTotal();\n\t\t}\n\t}\n}\n\n// check through the detach queue to see if a node is up or downstream from a\n// transition and if not, go ahead and detach it\nfunction detachImmediate ( manager ) {\n\tvar queue = manager.detachQueue;\n\tvar outros = collectAllOutros( manager );\n\n\tvar i = queue.length;\n\tvar j = 0;\n\tvar node, trans;\n\tstart: while ( i-- ) {\n\t\tnode = queue[i].node;\n\t\tj = outros.length;\n\t\twhile ( j-- ) {\n\t\t\ttrans = outros[j].element.node;\n\t\t\t// check to see if the node is, contains, or is contained by the transitioning node\n\t\t\tif ( trans === node || trans.contains( node ) || node.contains( trans ) ) { continue start; }\n\t\t}\n\n\t\t// no match, we can drop it\n\t\tqueue[i].detach();\n\t\tqueue.splice( i, 1 );\n\t}\n}\n\nfunction collectAllOutros ( manager, _list ) {\n\tvar list = _list;\n\n\t// if there's no list, we're starting at the root to build one\n\tif ( !list ) {\n\t\tlist = [];\n\t\tvar parent = manager;\n\t\twhile ( parent.parent ) { parent = parent.parent; }\n\t\treturn collectAllOutros( parent, list );\n\t} else {\n\t\t// grab all outros from child managers\n\t\tvar i = manager.children.length;\n\t\twhile ( i-- ) {\n\t\t\tlist = collectAllOutros( manager.children[i], list );\n\t\t}\n\n\t\t// grab any from this manager if there are any\n\t\tif ( manager.outros.length ) { list = list.concat( manager.outros ); }\n\n\t\treturn list;\n\t}\n}\n\nvar batch;\n\nvar runloop = {\n\tstart: function start ( instance ) {\n\t\tvar fulfilPromise;\n\t\tvar promise = new Promise( function (f) { return ( fulfilPromise = f ); } );\n\n\t\tbatch = {\n\t\t\tpreviousBatch: batch,\n\t\t\ttransitionManager: new TransitionManager( fulfilPromise, batch && batch.transitionManager ),\n\t\t\tfragments: [],\n\t\t\ttasks: [],\n\t\t\timmediateObservers: [],\n\t\t\tdeferredObservers: [],\n\t\t\tinstance: instance,\n\t\t\tpromise: promise\n\t\t};\n\n\t\treturn promise;\n\t},\n\n\tend: function end () {\n\t\tflushChanges();\n\n\t\tif ( !batch.previousBatch ) { batch.transitionManager.start(); }\n\n\t\tbatch = batch.previousBatch;\n\t},\n\n\taddFragment: function addFragment ( fragment ) {\n\t\taddToArray( batch.fragments, fragment );\n\t},\n\n\t// TODO: come up with a better way to handle fragments that trigger their own update\n\taddFragmentToRoot: function addFragmentToRoot ( fragment ) {\n\t\tif ( !batch ) { return; }\n\n\t\tvar b = batch;\n\t\twhile ( b.previousBatch ) {\n\t\t\tb = b.previousBatch;\n\t\t}\n\n\t\taddToArray( b.fragments, fragment );\n\t},\n\n\taddObserver: function addObserver ( observer, defer ) {\n\t\taddToArray( defer ? batch.deferredObservers : batch.immediateObservers, observer );\n\t},\n\n\tregisterTransition: function registerTransition ( transition ) {\n\t\ttransition._manager = batch.transitionManager;\n\t\tbatch.transitionManager.add( transition );\n\t},\n\n\t// synchronise node detachments with transition ends\n\tdetachWhenReady: function detachWhenReady ( thing ) {\n\t\tbatch.transitionManager.detachQueue.push( thing );\n\t},\n\n\tscheduleTask: function scheduleTask ( task, postRender ) {\n\t\tvar _batch;\n\n\t\tif ( !batch ) {\n\t\t\ttask();\n\t\t} else {\n\t\t\t_batch = batch;\n\t\t\twhile ( postRender && _batch.previousBatch ) {\n\t\t\t\t// this can't happen until the DOM has been fully updated\n\t\t\t\t// otherwise in some situations (with components inside elements)\n\t\t\t\t// transitions and decorators will initialise prematurely\n\t\t\t\t_batch = _batch.previousBatch;\n\t\t\t}\n\n\t\t\t_batch.tasks.push( task );\n\t\t}\n\t},\n\n\tpromise: function promise () {\n\t\tif ( !batch ) { return Promise.resolve(); }\n\n\t\tvar target = batch;\n\t\twhile ( target.previousBatch ) {\n\t\t\ttarget = target.previousBatch;\n\t\t}\n\n\t\treturn target.promise || Promise.resolve();\n\t}\n};\n\nfunction dispatch ( observer ) {\n\tobserver.dispatch();\n}\n\nfunction flushChanges () {\n\tvar which = batch.immediateObservers;\n\tbatch.immediateObservers = [];\n\twhich.forEach( dispatch );\n\n\t// Now that changes have been fully propagated, we can update the DOM\n\t// and complete other tasks\n\tvar i = batch.fragments.length;\n\tvar fragment;\n\n\twhich = batch.fragments;\n\tbatch.fragments = [];\n\n\twhile ( i-- ) {\n\t\tfragment = which[i];\n\t\tfragment.update();\n\t}\n\n\tbatch.transitionManager.ready();\n\n\twhich = batch.deferredObservers;\n\tbatch.deferredObservers = [];\n\twhich.forEach( dispatch );\n\n\tvar tasks = batch.tasks;\n\tbatch.tasks = [];\n\n\tfor ( i = 0; i < tasks.length; i += 1 ) {\n\t\ttasks[i]();\n\t}\n\n\t// If updating the view caused some model blowback - e.g. a triple\n\t// containing <option> elements caused the binding on the <select>\n\t// to update - then we start over\n\tif ( batch.fragments.length || batch.immediateObservers.length || batch.deferredObservers.length || batch.tasks.length ) { return flushChanges(); }\n}\n\nvar refPattern = /\\[\\s*(\\*|[0-9]|[1-9][0-9]+)\\s*\\]/g;\nvar splitPattern = /([^\\\\](?:\\\\\\\\)*)\\./;\nvar escapeKeyPattern = /\\\\|\\./g;\nvar unescapeKeyPattern = /((?:\\\\)+)\\1|\\\\(\\.)/g;\n\nfunction escapeKey ( key ) {\n\tif ( typeof key === 'string' ) {\n\t\treturn key.replace( escapeKeyPattern, '\\\\$&' );\n\t}\n\n\treturn key;\n}\n\nfunction normalise ( ref ) {\n\treturn ref ? ref.replace( refPattern, '.$1' ) : '';\n}\n\nfunction splitKeypath ( keypath ) {\n\tvar result = [];\n\tvar match;\n\n\tkeypath = normalise( keypath );\n\n\twhile ( match = splitPattern.exec( keypath ) ) {\n\t\tvar index = match.index + match[1].length;\n\t\tresult.push( keypath.substr( 0, index ) );\n\t\tkeypath = keypath.substr( index + 1 );\n\t}\n\n\tresult.push( keypath );\n\n\treturn result;\n}\n\nfunction unescapeKey ( key ) {\n\tif ( typeof key === 'string' ) {\n\t\treturn key.replace( unescapeKeyPattern, '$1$2' );\n\t}\n\n\treturn key;\n}\n\nvar keep = false;\n\nfunction set ( ractive, pairs, options ) {\n\tvar k = keep;\n\n\tvar deep = options && options.deep;\n\tvar shuffle = options && options.shuffle;\n\tvar promise = runloop.start( ractive, true );\n\tif ( options && 'keep' in options ) { keep = options.keep; }\n\n\tvar i = pairs.length;\n\twhile ( i-- ) {\n\t\tvar model = pairs[i][0];\n\t\tvar value = pairs[i][1];\n\t\tvar keypath = pairs[i][2];\n\n\t\tif ( !model ) {\n\t\t\trunloop.end();\n\t\t\tthrow new Error( (\"Failed to set invalid keypath '\" + keypath + \"'\") );\n\t\t}\n\n\t\tif ( deep ) { deepSet( model, value ); }\n\t\telse if ( shuffle ) {\n\t\t\tvar array = value;\n\t\t\tvar target = model.get();\n\t\t\t// shuffle target array with itself\n\t\t\tif ( !array ) { array = target; }\n\n\t\t\tif ( !Array.isArray( target ) || !Array.isArray( array ) ) {\n\t\t\t\tthrow new Error( 'You cannot merge an array with a non-array' );\n\t\t\t}\n\n\t\t\tvar comparator = getComparator( shuffle );\n\t\t\tmodel.merge( array, comparator );\n\t\t} else { model.set( value ); }\n\t}\n\n\trunloop.end();\n\n\tkeep = k;\n\n\treturn promise;\n}\n\nvar star = /\\*/;\nfunction gather ( ractive, keypath, base ) {\n\tif ( !base && keypath[0] === '.' ) {\n\t\twarnIfDebug( \"Attempted to set a relative keypath from a non-relative context. You can use a getNodeInfo or event object to set relative keypaths.\" );\n\t\treturn [];\n\t}\n\n\tvar model = base || ractive.viewmodel;\n\tif ( star.test( keypath ) ) {\n\t\treturn model.findMatches( splitKeypath( keypath ) );\n\t} else {\n\t\treturn [ model.joinAll( splitKeypath( keypath ) ) ];\n\t}\n}\n\nfunction build ( ractive, keypath, value ) {\n\tvar sets = [];\n\n\t// set multiple keypaths in one go\n\tif ( isObject( keypath ) ) {\n\t\tvar loop = function ( k ) {\n\t\t\tif ( keypath.hasOwnProperty( k ) ) {\n\t\t\t\tsets.push.apply( sets, gather( ractive, k ).map( function (m) { return [ m, keypath[k], k ]; } ) );\n\t\t\t}\n\t\t};\n\n\t\tfor ( var k in keypath ) loop( k );\n\n\t}\n\t// set a single keypath\n\telse {\n\t\tsets.push.apply( sets, gather( ractive, keypath ).map( function (m) { return [ m, value, keypath ]; } ) );\n\t}\n\n\treturn sets;\n}\n\nvar deepOpts = { virtual: false };\nfunction deepSet( model, value ) {\n\tvar dest = model.get( false, deepOpts );\n\n\t// if dest doesn't exist, just set it\n\tif ( dest == null || typeof value !== 'object' ) { return model.set( value ); }\n\tif ( typeof dest !== 'object' ) { return model.set( value ); }\n\n\tfor ( var k in value ) {\n\t\tif ( value.hasOwnProperty( k ) ) {\n\t\t\tdeepSet( model.joinKey( k ), value[k] );\n\t\t}\n\t}\n}\n\nvar comparators = {};\nfunction getComparator ( option ) {\n\tif ( option === true ) { return null; } // use existing arrays\n\tif ( typeof option === 'function' ) { return option; }\n\n\tif ( typeof option === 'string' ) {\n\t\treturn comparators[ option ] || ( comparators[ option ] = function (thing) { return thing[ option ]; } );\n\t}\n\n\tthrow new Error( 'If supplied, options.compare must be a string, function, or true' ); // TODO link to docs\n}\n\nvar errorMessage = 'Cannot add to a non-numeric value';\n\nfunction add ( ractive, keypath, d ) {\n\tif ( typeof keypath !== 'string' || !isNumeric( d ) ) {\n\t\tthrow new Error( 'Bad arguments' );\n\t}\n\n\tvar sets = build( ractive, keypath, d );\n\n\treturn set( ractive, sets.map( function (pair) {\n\t\tvar model = pair[0];\n\t\tvar add = pair[1];\n\t\tvar value = model.get();\n\t\tif ( !isNumeric( add ) || !isNumeric( value ) ) { throw new Error( errorMessage ); }\n\t\treturn [ model, value + add ];\n\t}));\n}\n\nfunction Ractive$add ( keypath, d, options ) {\n\tvar num = typeof d === 'number' ? d : 1;\n\tvar opts = typeof d === 'object' ? d : options;\n\treturn add( this, keypath, num, opts );\n}\n\nvar noAnimation = Promise.resolve();\nObject.defineProperty( noAnimation, 'stop', { value: noop });\n\nvar linear = easing.linear;\n\nfunction getOptions ( options, instance ) {\n\toptions = options || {};\n\n\tvar easing$$1;\n\tif ( options.easing ) {\n\t\teasing$$1 = typeof options.easing === 'function' ?\n\t\t\toptions.easing :\n\t\t\tinstance.easing[ options.easing ];\n\t}\n\n\treturn {\n\t\teasing: easing$$1 || linear,\n\t\tduration: 'duration' in options ? options.duration : 400,\n\t\tcomplete: options.complete || noop,\n\t\tstep: options.step || noop\n\t};\n}\n\nfunction animate ( ractive, model, to, options ) {\n\toptions = getOptions( options, ractive );\n\tvar from = model.get();\n\n\t// don't bother animating values that stay the same\n\tif ( isEqual( from, to ) ) {\n\t\toptions.complete( options.to );\n\t\treturn noAnimation; // TODO should this have .then and .catch methods?\n\t}\n\n\tvar interpolator = interpolate( from, to, ractive, options.interpolator );\n\n\t// if we can't interpolate the value, set it immediately\n\tif ( !interpolator ) {\n\t\trunloop.start();\n\t\tmodel.set( to );\n\t\trunloop.end();\n\n\t\treturn noAnimation;\n\t}\n\n\treturn model.animate( from, to, options, interpolator );\n}\n\nfunction Ractive$animate ( keypath, to, options ) {\n\tif ( typeof keypath === 'object' ) {\n\t\tvar keys = Object.keys( keypath );\n\n\t\tthrow new Error( (\"ractive.animate(...) no longer supports objects. Instead of ractive.animate({\\n  \" + (keys.map( function (key) { return (\"'\" + key + \"': \" + (keypath[ key ])); } ).join( '\\n  ' )) + \"\\n}, {...}), do\\n\\n\" + (keys.map( function (key) { return (\"ractive.animate('\" + key + \"', \" + (keypath[ key ]) + \", {...});\"); } ).join( '\\n' )) + \"\\n\") );\n\t}\n\n\n\treturn animate( this, this.viewmodel.joinAll( splitKeypath( keypath ) ), to, options );\n}\n\nfunction enqueue ( ractive, event ) {\n\tif ( ractive.event ) {\n\t\tractive._eventQueue.push( ractive.event );\n\t}\n\n\tractive.event = event;\n}\n\nfunction dequeue ( ractive ) {\n\tif ( ractive._eventQueue.length ) {\n\t\tractive.event = ractive._eventQueue.pop();\n\t} else {\n\t\tractive.event = null;\n\t}\n}\n\nvar initStars = {};\nvar bubbleStars = {};\n\n// cartesian product of name parts and stars\n// adjusted appropriately for special cases\nfunction variants ( name, initial ) {\n\tvar map = initial ? initStars : bubbleStars;\n\tif ( map[ name ] ) { return map[ name ]; }\n\n\tvar parts = name.split( '.' );\n\tvar result = [];\n\tvar base = false;\n\n\t// initial events the implicit namespace of 'this'\n\tif ( initial ) {\n\t\tparts.unshift( 'this' );\n\t\tbase = true;\n\t}\n\n\t// use max - 1 bits as a bitmap to pick a part or a *\n\t// need to skip the full star case if the namespace is synthetic\n\tvar max = Math.pow( 2, parts.length ) - ( initial ? 1 : 0 );\n\tfor ( var i = 0; i < max; i++ ) {\n\t\tvar join = [];\n\t\tfor ( var j = 0; j < parts.length; j++ ) {\n\t\t\tjoin.push( 1 & ( i >> j ) ? '*' : parts[j] );\n\t\t}\n\t\tresult.unshift( join.join( '.' ) );\n\t}\n\n\tif ( base ) {\n\t\t// include non-this-namespaced versions\n\t\tif ( parts.length > 2 ) {\n\t\t\tresult.push.apply( result, variants( name, false ) );\n\t\t} else {\n\t\t\tresult.push( '*' );\n\t\t\tresult.push( name );\n\t\t}\n\t}\n\n\tmap[ name ] = result;\n\treturn result;\n}\n\nfunction fireEvent ( ractive, eventName, context, args ) {\n\tif ( args === void 0 ) args = [];\n\n\tif ( !eventName ) { return; }\n\n\tcontext.name = eventName;\n\targs.unshift( context );\n\n\tvar eventNames = ractive._nsSubs ? variants( eventName, true ) : [ '*', eventName ];\n\n\treturn fireEventAs( ractive, eventNames, context, args, true );\n}\n\nfunction fireEventAs  ( ractive, eventNames, context, args, initialFire ) {\n\tif ( initialFire === void 0 ) initialFire = false;\n\n\tvar bubble = true;\n\n\tif ( initialFire || ractive._nsSubs ) {\n\t\tenqueue( ractive, context );\n\n\t\tvar i = eventNames.length;\n\t\twhile ( i-- ) {\n\t\t\tif ( eventNames[ i ] in ractive._subs ) {\n\t\t\t\tbubble = notifySubscribers( ractive, ractive._subs[ eventNames[ i ] ], context, args ) && bubble;\n\t\t\t}\n\t\t}\n\n\t\tdequeue( ractive );\n\t}\n\n\tif ( ractive.parent && bubble ) {\n\t\tif ( initialFire && ractive.component ) {\n\t\t\tvar fullName = ractive.component.name + '.' + eventNames[ eventNames.length - 1 ];\n\t\t\teventNames = variants( fullName, false );\n\n\t\t\tif ( context && !context.component ) {\n\t\t\t\tcontext.component = ractive;\n\t\t\t}\n\t\t}\n\n\t\tbubble = fireEventAs( ractive.parent, eventNames, context, args );\n\t}\n\n\treturn bubble;\n}\n\nfunction notifySubscribers ( ractive, subscribers, context, args ) {\n\tvar originalEvent = null;\n\tvar stopEvent = false;\n\n\t// subscribers can be modified inflight, e.g. \"once\" functionality\n\t// so we need to copy to make sure everyone gets called\n\tsubscribers = subscribers.slice();\n\n\tfor ( var i = 0, len = subscribers.length; i < len; i += 1 ) {\n\t\tif ( !subscribers[ i ].off && subscribers[ i ].handler.apply( ractive, args ) === false ) {\n\t\t\tstopEvent = true;\n\t\t}\n\t}\n\n\tif ( context && stopEvent && ( originalEvent = context.event ) ) {\n\t\toriginalEvent.preventDefault && originalEvent.preventDefault();\n\t\toriginalEvent.stopPropagation && originalEvent.stopPropagation();\n\t}\n\n\treturn !stopEvent;\n}\n\nvar extern = {};\n\nfunction getRactiveContext ( ractive ) {\n\tvar assigns = [], len = arguments.length - 1;\n\twhile ( len-- > 0 ) assigns[ len ] = arguments[ len + 1 ];\n\n\tvar fragment = ractive.fragment || ractive._fakeFragment || ( ractive._fakeFragment = new FakeFragment( ractive ) );\n\treturn fragment.getContext.apply( fragment, assigns );\n}\n\nfunction getContext () {\n\tvar assigns = [], len = arguments.length;\n\twhile ( len-- ) assigns[ len ] = arguments[ len ];\n\n\tif ( !this.ctx ) { this.ctx = new extern.Context( this ); }\n\tassigns.unshift( Object.create( this.ctx ) );\n\treturn Object.assign.apply( null, assigns );\n}\n\nvar FakeFragment = function FakeFragment ( ractive ) {\n\tthis.ractive = ractive;\n};\n\nFakeFragment.prototype.findContext = function findContext () { return this.ractive.viewmodel; };\nvar proto = FakeFragment.prototype;\nproto.getContext = getContext;\nproto.find = proto.findComponent = proto.findAll = proto.findAllComponents = noop;\n\nvar Hook = function Hook ( event ) {\n\tthis.event = event;\n\tthis.method = 'on' + event;\n};\n\nHook.prototype.fire = function fire ( ractive, arg ) {\n\tvar context = getRactiveContext( ractive );\n\n\tif ( ractive[ this.method ] ) {\n\t\targ ? ractive[ this.method ]( context, arg ) : ractive[ this.method ]( context );\n\t}\n\n\tfireEvent( ractive, this.event, context, arg ? [ arg, ractive ] : [ ractive ] );\n};\n\nfunction findAnchors ( fragment, name ) {\n\tif ( name === void 0 ) name = null;\n\n\tvar res = [];\n\n\tfindAnchorsIn( fragment, name, res );\n\n\treturn res;\n}\n\nfunction findAnchorsIn ( item, name, result ) {\n\tif ( item.isAnchor ) {\n\t\tif ( !name || item.name === name ) {\n\t\t\tresult.push( item );\n\t\t}\n\t} else if ( item.items ) {\n\t\titem.items.forEach( function (i) { return findAnchorsIn( i, name, result ); } );\n\t} else if ( item.iterations ) {\n\t\titem.iterations.forEach( function (i) { return findAnchorsIn( i, name, result ); } );\n\t} else if ( item.fragment && !item.component ) {\n\t\tfindAnchorsIn( item.fragment, name, result );\n\t}\n}\n\nfunction updateAnchors ( instance, name ) {\n\tif ( name === void 0 ) name = null;\n\n\tvar anchors = findAnchors( instance.fragment, name );\n\tvar idxs = {};\n\tvar children = instance._children.byName;\n\n\tanchors.forEach( function (a) {\n\t\tvar name = a.name;\n\t\tif ( !( name in idxs ) ) { idxs[name] = 0; }\n\t\tvar idx = idxs[name];\n\t\tvar child = ( children[name] || [] )[idx];\n\n\t\tif ( child && child.lastBound !== a ) {\n\t\t\tif ( child.lastBound ) { child.lastBound.removeChild( child ); }\n\t\t\ta.addChild( child );\n\t\t}\n\n\t\tidxs[name]++;\n\t});\n}\n\nfunction unrenderChild ( meta ) {\n\tif ( meta.instance.fragment.rendered ) {\n\t\tmeta.shouldDestroy = true;\n\t\tmeta.instance.unrender();\n\t}\n\tmeta.instance.el = null;\n}\n\nvar attachHook = new Hook( 'attachchild' );\n\nfunction attachChild ( child, options ) {\n\tif ( options === void 0 ) options = {};\n\n\tvar children = this._children;\n\n\tif ( child.parent && child.parent !== this ) { throw new Error( (\"Instance \" + (child._guid) + \" is already attached to a different instance \" + (child.parent._guid) + \". Please detach it from the other instance using detachChild first.\") ); }\n\telse if ( child.parent ) { throw new Error( (\"Instance \" + (child._guid) + \" is already attached to this instance.\") ); }\n\n\tvar meta = {\n\t\tinstance: child,\n\t\tractive: this,\n\t\tname: options.name || child.constructor.name || 'Ractive',\n\t\ttarget: options.target || false,\n\t\tbubble: bubble,\n\t\tfindNextNode: findNextNode\n\t};\n\tmeta.nameOption = options.name;\n\n\t// child is managing itself\n\tif ( !meta.target ) {\n\t\tmeta.parentFragment = this.fragment;\n\t\tmeta.external = true;\n\t} else {\n\t\tvar list;\n\t\tif ( !( list = children.byName[ meta.target ] ) ) {\n\t\t\tlist = [];\n\t\t\tthis.set( (\"@this.children.byName.\" + (meta.target)), list );\n\t\t}\n\t\tvar idx = options.prepend ? 0 : options.insertAt !== undefined ? options.insertAt : list.length;\n\t\tlist.splice( idx, 0, meta );\n\t}\n\n\tchild.set({\n\t\t'@this.parent': this,\n\t\t'@this.root': this.root\n\t});\n\tchild.component = meta;\n\tchildren.push( meta );\n\n\tattachHook.fire( child );\n\n\tvar promise = runloop.start( child, true );\n\n\tif ( meta.target ) {\n\t\tunrenderChild( meta );\n\t\tthis.set( (\"@this.children.byName.\" + (meta.target)), null, { shuffle: true } );\n\t\tupdateAnchors( this, meta.target );\n\t} else {\n\t\tif ( !child.isolated ) { child.viewmodel.attached( this.fragment ); }\n\t}\n\n\trunloop.end();\n\n\tpromise.ractive = child;\n\treturn promise.then( function () { return child; } );\n}\n\nfunction bubble () { runloop.addFragment( this.instance.fragment ); }\n\nfunction findNextNode () {\n\tif ( this.anchor ) { return this.anchor.findNextNode(); }\n}\n\nvar detachHook = new Hook( 'detach' );\n\nfunction Ractive$detach () {\n\tif ( this.isDetached ) {\n\t\treturn this.el;\n\t}\n\n\tif ( this.el ) {\n\t\tremoveFromArray( this.el.__ractive_instances__, this );\n\t}\n\n\tthis.el = this.fragment.detach();\n\tthis.isDetached = true;\n\n\tdetachHook.fire( this );\n\treturn this.el;\n}\n\nvar detachHook$1 = new Hook( 'detachchild' );\n\nfunction detachChild ( child ) {\n\tvar children = this._children;\n\tvar meta, index;\n\n\tvar i = children.length;\n\twhile ( i-- ) {\n\t\tif ( children[i].instance === child ) {\n\t\t\tindex = i;\n\t\t\tmeta = children[i];\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif ( !meta || child.parent !== this ) { throw new Error( (\"Instance \" + (child._guid) + \" is not attached to this instance.\") ); }\n\n\tvar promise = runloop.start( child, true );\n\n\tif ( meta.anchor ) { meta.anchor.removeChild( meta ); }\n\tif ( !child.isolated ) { child.viewmodel.detached(); }\n\n\trunloop.end();\n\n\tchildren.splice( index, 1 );\n\tif ( meta.target ) {\n\t\tvar list = children.byName[ meta.target ];\n\t\tlist.splice( list.indexOf( meta ), 1 );\n\t\tthis.set( (\"@this.children.byName.\" + (meta.target)), null, { shuffle: true } );\n\t\tupdateAnchors( this, meta.target );\n\t}\n\tchild.set({\n\t\t'@this.parent': undefined,\n\t\t'@this.root': child\n\t});\n\tchild.component = null;\n\n\tdetachHook$1.fire( child );\n\n\tpromise.ractive = child;\n\treturn promise.then( function () { return child; } );\n}\n\nfunction Ractive$find ( selector, options ) {\n\tvar this$1 = this;\n\tif ( options === void 0 ) options = {};\n\n\tif ( !this.el ) { throw new Error( (\"Cannot call ractive.find('\" + selector + \"') unless instance is rendered to the DOM\") ); }\n\n\tvar node = this.fragment.find( selector, options );\n\tif ( node ) { return node; }\n\n\tif ( options.remote ) {\n\t\tfor ( var i = 0; i < this._children.length; i++ ) {\n\t\t\tif ( !this$1._children[i].instance.fragment.rendered ) { continue; }\n\t\t\tnode = this$1._children[i].instance.find( selector, options );\n\t\t\tif ( node ) { return node; }\n\t\t}\n\t}\n}\n\nfunction Ractive$findAll ( selector, options ) {\n\tif ( options === void 0 ) options = {};\n\n\tif ( !this.el ) { throw new Error( (\"Cannot call ractive.findAll('\" + selector + \"', ...) unless instance is rendered to the DOM\") ); }\n\n\tif ( !Array.isArray( options.result ) ) { options.result = []; }\n\n\tthis.fragment.findAll( selector, options );\n\n\tif ( options.remote ) {\n\t\t// seach non-fragment children\n\t\tthis._children.forEach( function (c) {\n\t\t\tif ( !c.target && c.instance.fragment && c.instance.fragment.rendered ) {\n\t\t\t\tc.instance.findAll( selector, options );\n\t\t\t}\n\t\t});\n\t}\n\n\treturn options.result;\n}\n\nfunction Ractive$findAllComponents ( selector, options ) {\n\tif ( !options && typeof selector === 'object' ) {\n\t\toptions = selector;\n\t\tselector = '';\n\t}\n\n\toptions = options || {};\n\n\tif ( !Array.isArray( options.result ) ) { options.result = []; }\n\n\tthis.fragment.findAllComponents( selector, options );\n\n\tif ( options.remote ) {\n\t\t// search non-fragment children\n\t\tthis._children.forEach( function (c) {\n\t\t\tif ( !c.target && c.instance.fragment && c.instance.fragment.rendered ) {\n\t\t\t\tif ( !selector || c.name === selector ) {\n\t\t\t\t\toptions.result.push( c.instance );\n\t\t\t\t}\n\n\t\t\t\tc.instance.findAllComponents( selector, options );\n\t\t\t}\n\t\t});\n\t}\n\n\treturn options.result;\n}\n\nfunction Ractive$findComponent ( selector, options ) {\n\tvar this$1 = this;\n\tif ( options === void 0 ) options = {};\n\n\tif ( typeof selector === 'object' ) {\n\t\toptions = selector;\n\t\tselector = '';\n\t}\n\n\tvar child = this.fragment.findComponent( selector, options );\n\tif ( child ) { return child; }\n\n\tif ( options.remote ) {\n\t\tif ( !selector && this._children.length ) { return this._children[0].instance; }\n\t\tfor ( var i = 0; i < this._children.length; i++ ) {\n\t\t\t// skip children that are or should be in an anchor\n\t\t\tif ( this$1._children[i].target ) { continue; }\n\t\t\tif ( this$1._children[i].name === selector ) { return this$1._children[i].instance; }\n\t\t\tchild = this$1._children[i].instance.findComponent( selector, options );\n\t\t\tif ( child ) { return child; }\n\t\t}\n\t}\n}\n\nfunction Ractive$findContainer ( selector ) {\n\tif ( this.container ) {\n\t\tif ( this.container.component && this.container.component.name === selector ) {\n\t\t\treturn this.container;\n\t\t} else {\n\t\t\treturn this.container.findContainer( selector );\n\t\t}\n\t}\n\n\treturn null;\n}\n\nfunction Ractive$findParent ( selector ) {\n\n\tif ( this.parent ) {\n\t\tif ( this.parent.component && this.parent.component.name === selector ) {\n\t\t\treturn this.parent;\n\t\t} else {\n\t\t\treturn this.parent.findParent ( selector );\n\t\t}\n\t}\n\n\treturn null;\n}\n\nvar stack = [];\nvar captureGroup;\n\nfunction startCapturing () {\n\tstack.push( captureGroup = [] );\n}\n\nfunction stopCapturing () {\n\tvar dependencies = stack.pop();\n\tcaptureGroup = stack[ stack.length - 1 ];\n\treturn dependencies;\n}\n\nfunction capture ( model ) {\n\tif ( captureGroup ) {\n\t\tcaptureGroup.push( model );\n\t}\n}\n\nvar KeyModel = function KeyModel ( key, parent ) {\n\tthis.value = key;\n\tthis.isReadonly = this.isKey = true;\n\tthis.deps = [];\n\tthis.links = [];\n\tthis.parent = parent;\n};\n\nKeyModel.prototype.get = function get ( shouldCapture ) {\n\tif ( shouldCapture ) { capture( this ); }\n\treturn unescapeKey( this.value );\n};\n\nKeyModel.prototype.getKeypath = function getKeypath () {\n\treturn unescapeKey( this.value );\n};\n\nKeyModel.prototype.rebind = function rebind ( next, previous ) {\n\t\tvar this$1 = this;\n\n\tvar i = this.deps.length;\n\twhile ( i-- ) { this$1.deps[i].rebind( next, previous, false ); }\n\n\ti = this.links.length;\n\twhile ( i-- ) { this$1.links[i].rebind( next, previous, false ); }\n};\n\nKeyModel.prototype.register = function register ( dependant ) {\n\tthis.deps.push( dependant );\n};\n\nKeyModel.prototype.registerLink = function registerLink ( link ) {\n\taddToArray( this.links, link );\n};\n\nKeyModel.prototype.unregister = function unregister ( dependant ) {\n\tremoveFromArray( this.deps, dependant );\n};\n\nKeyModel.prototype.unregisterLink = function unregisterLink ( link ) {\n\tremoveFromArray( this.links, link );\n};\n\nKeyModel.prototype.reference = noop;\nKeyModel.prototype.unreference = noop;\n\nfunction bind               ( x ) { x.bind(); }\nfunction cancel             ( x ) { x.cancel(); }\nfunction destroyed          ( x ) { x.destroyed(); }\nfunction handleChange       ( x ) { x.handleChange(); }\nfunction mark               ( x ) { x.mark(); }\nfunction marked             ( x ) { x.marked(); }\nfunction markedAll          ( x ) { x.markedAll(); }\nfunction render             ( x ) { x.render(); }\nfunction shuffled           ( x ) { x.shuffled(); }\nfunction teardown           ( x ) { x.teardown(); }\nfunction unbind             ( x ) { x.unbind(); }\nfunction unrender           ( x ) { x.unrender(); }\nfunction unrenderAndDestroy ( x ) { x.unrender( true ); }\nfunction update             ( x ) { x.update(); }\nfunction toString$1           ( x ) { return x.toString(); }\nfunction toEscapedString    ( x ) { return x.toString( true ); }\n\nvar KeypathModel = function KeypathModel ( parent, ractive ) {\n\tthis.parent = parent;\n\tthis.ractive = ractive;\n\tthis.value = ractive ? parent.getKeypath( ractive ) : parent.getKeypath();\n\tthis.deps = [];\n\tthis.children = {};\n\tthis.isReadonly = this.isKeypath = true;\n};\n\nKeypathModel.prototype.get = function get ( shouldCapture ) {\n\tif ( shouldCapture ) { capture( this ); }\n\treturn this.value;\n};\n\nKeypathModel.prototype.getChild = function getChild ( ractive ) {\n\tif ( !( ractive._guid in this.children ) ) {\n\t\tvar model = new KeypathModel( this.parent, ractive );\n\t\tthis.children[ ractive._guid ] = model;\n\t\tmodel.owner = this;\n\t}\n\treturn this.children[ ractive._guid ];\n};\n\nKeypathModel.prototype.getKeypath = function getKeypath () {\n\treturn this.value;\n};\n\nKeypathModel.prototype.handleChange = function handleChange$1 () {\n\t\tvar this$1 = this;\n\n\tvar keys = Object.keys( this.children );\n\tvar i = keys.length;\n\twhile ( i-- ) {\n\t\tthis$1.children[ keys[i] ].handleChange();\n\t}\n\n\tthis.deps.forEach( handleChange );\n};\n\nKeypathModel.prototype.rebindChildren = function rebindChildren ( next ) {\n\t\tvar this$1 = this;\n\n\tvar keys = Object.keys( this.children );\n\tvar i = keys.length;\n\twhile ( i-- ) {\n\t\tvar child = this$1.children[keys[i]];\n\t\tchild.value = next.getKeypath( child.ractive );\n\t\tchild.handleChange();\n\t}\n};\n\nKeypathModel.prototype.rebind = function rebind ( next, previous ) {\n\t\tvar this$1 = this;\n\n\tvar model = next ? next.getKeypathModel( this.ractive ) : undefined;\n\n\tvar keys = Object.keys( this.children );\n\tvar i = keys.length;\n\twhile ( i-- ) {\n\t\tthis$1.children[ keys[i] ].rebind( next, previous, false );\n\t}\n\n\ti = this.deps.length;\n\twhile ( i-- ) {\n\t\tthis$1.deps[i].rebind( model, this$1, false );\n\t}\n};\n\nKeypathModel.prototype.register = function register ( dep ) {\n\tthis.deps.push( dep );\n};\n\nKeypathModel.prototype.removeChild = function removeChild ( model ) {\n\tif ( model.ractive ) { delete this.children[ model.ractive._guid ]; }\n};\n\nKeypathModel.prototype.teardown = function teardown$$1 () {\n\t\tvar this$1 = this;\n\n\tif ( this.owner ) { this.owner.removeChild( this ); }\n\n\tvar keys = Object.keys( this.children );\n\tvar i = keys.length;\n\twhile ( i-- ) {\n\t\tthis$1.children[ keys[i] ].teardown();\n\t}\n};\n\nKeypathModel.prototype.unregister = function unregister ( dep ) {\n\tremoveFromArray( this.deps, dep );\n\tif ( !this.deps.length ) { this.teardown(); }\n};\n\nKeypathModel.prototype.reference = noop;\nKeypathModel.prototype.unreference = noop;\n\nvar fnBind = Function.prototype.bind;\n\nfunction bind$1 ( fn, context ) {\n\tif ( !/this/.test( fn.toString() ) ) { return fn; }\n\n\tvar bound = fnBind.call( fn, context );\n\tfor ( var prop in fn ) { bound[ prop ] = fn[ prop ]; }\n\n\treturn bound;\n}\n\nvar hasProp = Object.prototype.hasOwnProperty;\n\nvar shuffleTasks = { early: [], mark: [] };\nvar registerQueue = { early: [], mark: [] };\n\nvar ModelBase = function ModelBase ( parent ) {\n\tthis.deps = [];\n\n\tthis.children = [];\n\tthis.childByKey = {};\n\tthis.links = [];\n\n\tthis.keyModels = {};\n\n\tthis.bindings = [];\n\tthis.patternObservers = [];\n\n\tif ( parent ) {\n\t\tthis.parent = parent;\n\t\tthis.root = parent.root;\n\t}\n};\n\nModelBase.prototype.addShuffleTask = function addShuffleTask ( task, stage ) {\n\tif ( stage === void 0 ) stage = 'early';\n shuffleTasks[stage].push( task ); };\nModelBase.prototype.addShuffleRegister = function addShuffleRegister ( item, stage ) {\n\tif ( stage === void 0 ) stage = 'early';\n registerQueue[stage].push({ model: this, item: item }); };\n\nModelBase.prototype.findMatches = function findMatches ( keys ) {\n\tvar len = keys.length;\n\n\tvar existingMatches = [ this ];\n\tvar matches;\n\tvar i;\n\n\tvar loop = function (  ) {\n\t\tvar key = keys[i];\n\n\t\tif ( key === '*' ) {\n\t\t\tmatches = [];\n\t\t\texistingMatches.forEach( function (model) {\n\t\t\t\tmatches.push.apply( matches, model.getValueChildren( model.get() ) );\n\t\t\t});\n\t\t} else {\n\t\t\tmatches = existingMatches.map( function (model) { return model.joinKey( key ); } );\n\t\t}\n\n\t\texistingMatches = matches;\n\t};\n\n\t\tfor ( i = 0; i < len; i += 1 ) loop(  );\n\n\treturn matches;\n};\n\nModelBase.prototype.getKeyModel = function getKeyModel ( key, skip ) {\n\tif ( key !== undefined && !skip ) { return this.parent.getKeyModel( key, true ); }\n\n\tif ( !( key in this.keyModels ) ) { this.keyModels[ key ] = new KeyModel( escapeKey( key ), this ); }\n\n\treturn this.keyModels[ key ];\n};\n\nModelBase.prototype.getKeypath = function getKeypath ( ractive ) {\n\tif ( ractive !== this.ractive && this._link ) { return this._link.target.getKeypath( ractive ); }\n\n\tif ( !this.keypath ) {\n\t\tvar parent = this.parent && this.parent.getKeypath( ractive );\n\t\tthis.keypath = parent ? ((this.parent.getKeypath( ractive )) + \".\" + (escapeKey( this.key ))) : escapeKey( this.key );\n\t}\n\n\treturn this.keypath;\n};\n\nModelBase.prototype.getValueChildren = function getValueChildren ( value ) {\n\t\tvar this$1 = this;\n\n\tvar children;\n\tif ( Array.isArray( value ) ) {\n\t\tchildren = [];\n\t\tif ( 'length' in this && this.length !== value.length ) {\n\t\t\tchildren.push( this.joinKey( 'length' ) );\n\t\t}\n\t\tvalue.forEach( function ( m, i ) {\n\t\t\tchildren.push( this$1.joinKey( i ) );\n\t\t});\n\t}\n\n\telse if ( isObject( value ) || typeof value === 'function' ) {\n\t\tchildren = Object.keys( value ).map( function (key) { return this$1.joinKey( key ); } );\n\t}\n\n\telse if ( value != null ) {\n\t\treturn [];\n\t}\n\n\treturn children;\n};\n\nModelBase.prototype.getVirtual = function getVirtual ( shouldCapture ) {\n\t\tvar this$1 = this;\n\n\tvar value = this.get( shouldCapture, { virtual: false } );\n\tif ( isObject( value ) ) {\n\t\tvar result = Array.isArray( value ) ? [] : {};\n\n\t\tvar keys = Object.keys( value );\n\t\tvar i = keys.length;\n\t\twhile ( i-- ) {\n\t\t\tvar child = this$1.childByKey[ keys[i] ];\n\t\t\tif ( !child ) { result[ keys[i] ] = value[ keys[i] ]; }\n\t\t\telse if ( child._link ) { result[ keys[i] ] = child._link.getVirtual(); }\n\t\t\telse { result[ keys[i] ] = child.getVirtual(); }\n\t\t}\n\n\t\ti = this.children.length;\n\t\twhile ( i-- ) {\n\t\t\tvar child$1 = this$1.children[i];\n\t\t\tif ( !( child$1.key in result ) && child$1._link ) {\n\t\t\t\tresult[ child$1.key ] = child$1._link.getVirtual();\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t} else { return value; }\n};\n\nModelBase.prototype.has = function has ( key ) {\n\tif ( this._link ) { return this._link.has( key ); }\n\n\tvar value = this.get();\n\tif ( !value ) { return false; }\n\n\tkey = unescapeKey( key );\n\tif ( hasProp.call( value, key ) ) { return true; }\n\n\t// We climb up the constructor chain to find if one of them contains the key\n\tvar constructor = value.constructor;\n\twhile ( constructor !== Function && constructor !== Array && constructor !== Object ) {\n\t\tif ( hasProp.call( constructor.prototype, key ) ) { return true; }\n\t\tconstructor = constructor.constructor;\n\t}\n\n\treturn false;\n};\n\nModelBase.prototype.joinAll = function joinAll ( keys, opts ) {\n\tvar model = this;\n\tfor ( var i = 0; i < keys.length; i += 1 ) {\n\t\tif ( opts && opts.lastLink === false && i + 1 === keys.length && model.childByKey[keys[i]] && model.childByKey[keys[i]]._link ) { return model.childByKey[keys[i]]; }\n\t\tmodel = model.joinKey( keys[i], opts );\n\t}\n\n\treturn model;\n};\n\nModelBase.prototype.notifyUpstream = function notifyUpstream ( startPath ) {\n\t\tvar this$1 = this;\n\n\tvar parent = this.parent;\n\tvar path = startPath || [ this.key ];\n\twhile ( parent ) {\n\t\tif ( parent.patternObservers.length ) { parent.patternObservers.forEach( function (o) { return o.notify( path.slice() ); } ); }\n\t\tpath.unshift( parent.key );\n\t\tparent.links.forEach( function (l) { return l.notifiedUpstream( path, this$1.root ); } );\n\t\tparent.deps.forEach( handleChange );\n\t\tparent = parent.parent;\n\t}\n};\n\nModelBase.prototype.rebind = function rebind ( next, previous, safe ) {\n\t\tvar this$1 = this;\n\n\t// tell the deps to move to the new target\n\tvar i = this.deps.length;\n\twhile ( i-- ) {\n\t\tif ( this$1.deps[i].rebind ) { this$1.deps[i].rebind( next, previous, safe ); }\n\t}\n\n\ti = this.links.length;\n\twhile ( i-- ) {\n\t\tvar link = this$1.links[i];\n\t\t// only relink the root of the link tree\n\t\tif ( link.owner._link ) { link.relinking( next, safe ); }\n\t}\n\n\ti = this.children.length;\n\twhile ( i-- ) {\n\t\tvar child = this$1.children[i];\n\t\tchild.rebind( next ? next.joinKey( child.key ) : undefined, child, safe );\n\t}\n\n\tif ( this.keypathModel ) { this.keypathModel.rebind( next, previous, false ); }\n\n\ti = this.bindings.length;\n\twhile ( i-- ) {\n\t\tthis$1.bindings[i].rebind( next, previous, safe );\n\t}\n};\n\nModelBase.prototype.reference = function reference () {\n\t'refs' in this ? this.refs++ : this.refs = 1;\n};\n\nModelBase.prototype.register = function register ( dep ) {\n\tthis.deps.push( dep );\n};\n\nModelBase.prototype.registerLink = function registerLink ( link ) {\n\taddToArray( this.links, link );\n};\n\nModelBase.prototype.registerPatternObserver = function registerPatternObserver ( observer ) {\n\tthis.patternObservers.push( observer );\n\tthis.register( observer );\n};\n\nModelBase.prototype.registerTwowayBinding = function registerTwowayBinding ( binding ) {\n\tthis.bindings.push( binding );\n};\n\nModelBase.prototype.unreference = function unreference () {\n\tif ( 'refs' in this ) { this.refs--; }\n};\n\nModelBase.prototype.unregister = function unregister ( dep ) {\n\tremoveFromArray( this.deps, dep );\n};\n\nModelBase.prototype.unregisterLink = function unregisterLink ( link ) {\n\tremoveFromArray( this.links, link );\n};\n\nModelBase.prototype.unregisterPatternObserver = function unregisterPatternObserver ( observer ) {\n\tremoveFromArray( this.patternObservers, observer );\n\tthis.unregister( observer );\n};\n\nModelBase.prototype.unregisterTwowayBinding = function unregisterTwowayBinding ( binding ) {\n\tremoveFromArray( this.bindings, binding );\n};\n\nModelBase.prototype.updateFromBindings = function updateFromBindings$1 ( cascade ) {\n\t\tvar this$1 = this;\n\n\tvar i = this.bindings.length;\n\twhile ( i-- ) {\n\t\tvar value = this$1.bindings[i].getValue();\n\t\tif ( value !== this$1.value ) { this$1.set( value ); }\n\t}\n\n\t// check for one-way bindings if there are no two-ways\n\tif ( !this.bindings.length ) {\n\t\tvar oneway = findBoundValue( this.deps );\n\t\tif ( oneway && oneway.value !== this.value ) { this.set( oneway.value ); }\n\t}\n\n\tif ( cascade ) {\n\t\tthis.children.forEach( updateFromBindings );\n\t\tthis.links.forEach( updateFromBindings );\n\t\tif ( this._link ) { this._link.updateFromBindings( cascade ); }\n\t}\n};\n\n// TODO: this may be better handled by overreiding `get` on models with a parent that isRoot\nfunction maybeBind ( model, value, shouldBind ) {\n\tif ( shouldBind && typeof value === 'function' && model.parent && model.parent.isRoot ) {\n\t\tif ( !model.boundValue ) {\n\t\t\tmodel.boundValue = bind$1( value._r_unbound || value, model.parent.ractive );\n\t\t}\n\n\t\treturn model.boundValue;\n\t}\n\n\treturn value;\n}\n\nfunction updateFromBindings ( model ) {\n\tmodel.updateFromBindings( true );\n}\n\nfunction findBoundValue( list ) {\n\tvar i = list.length;\n\twhile ( i-- ) {\n\t\tif ( list[i].bound ) {\n\t\t\tvar owner = list[i].owner;\n\t\t\tif ( owner ) {\n\t\t\t\tvar value = owner.name === 'checked' ?\n\t\t\t\t\towner.node.checked :\n\t\t\t\t\towner.node.value;\n\t\t\t\treturn { value: value };\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction fireShuffleTasks ( stage ) {\n\tif ( !stage ) {\n\t\tfireShuffleTasks( 'early' );\n\t\tfireShuffleTasks( 'mark' );\n\t} else {\n\t\tvar tasks = shuffleTasks[stage];\n\t\tshuffleTasks[stage] = [];\n\t\tvar i = tasks.length;\n\t\twhile ( i-- ) { tasks[i](); }\n\n\t\tvar register = registerQueue[stage];\n\t\tregisterQueue[stage] = [];\n\t\ti = register.length;\n\t\twhile ( i-- ) { register[i].model.register( register[i].item ); }\n\t}\n}\n\nfunction shuffle ( model, newIndices, link ) {\n\tmodel.shuffling = true;\n\n\tvar i = newIndices.length;\n\twhile ( i-- ) {\n\t\tvar idx = newIndices[ i ];\n\t\t// nothing is actually changing, so move in the index and roll on\n\t\tif ( i === idx ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// rebind the children on i to idx\n\t\tif ( i in model.childByKey ) { model.childByKey[ i ].rebind( !~idx ? undefined : model.joinKey( idx ), model.childByKey[ i ], true ); }\n\n\t\tif ( !~idx && model.keyModels[ i ] ) {\n\t\t\tmodel.keyModels[i].rebind( undefined, model.keyModels[i], false );\n\t\t} else if ( ~idx && model.keyModels[ i ] ) {\n\t\t\tif ( !model.keyModels[ idx ] ) { model.childByKey[ idx ].getKeyModel( idx ); }\n\t\t\tmodel.keyModels[i].rebind( model.keyModels[ idx ], model.keyModels[i], false );\n\t\t}\n\t}\n\n\tvar upstream = model.source().length !== model.source().value.length;\n\n\tmodel.links.forEach( function (l) { return l.shuffle( newIndices ); } );\n\tif ( !link ) { fireShuffleTasks( 'early' ); }\n\n\ti = model.deps.length;\n\twhile ( i-- ) {\n\t\tif ( model.deps[i].shuffle ) { model.deps[i].shuffle( newIndices ); }\n\t}\n\n\tmodel[ link ? 'marked' : 'mark' ]();\n\tif ( !link ) { fireShuffleTasks( 'mark' ); }\n\n\tif ( upstream ) { model.notifyUpstream(); }\n\n\tmodel.shuffling = false;\n}\n\nKeyModel.prototype.addShuffleTask = ModelBase.prototype.addShuffleTask;\nKeyModel.prototype.addShuffleRegister = ModelBase.prototype.addShuffleRegister;\nKeypathModel.prototype.addShuffleTask = ModelBase.prototype.addShuffleTask;\nKeypathModel.prototype.addShuffleRegister = ModelBase.prototype.addShuffleRegister;\n\n// this is the dry method of checking to see if a rebind applies to\n// a particular keypath because in some cases, a dep may be bound\n// directly to a particular keypath e.g. foo.bars.0.baz and need\n// to avoid getting kicked to foo.bars.1.baz if foo.bars is unshifted\nfunction rebindMatch ( template, next, previous, fragment ) {\n\tvar keypath = template.r || template;\n\n\t// no valid keypath, go with next\n\tif ( !keypath || typeof keypath !== 'string' ) { return next; }\n\n\t// completely contextual ref, go with next\n\tif ( keypath === '.' || keypath[0] === '@' || ( next || previous ).isKey || ( next || previous ).isKeypath ) { return next; }\n\n\tvar parts = keypath.split( '/' );\n\tvar keys = splitKeypath( parts[ parts.length - 1 ] );\n\tvar last = keys[ keys.length - 1 ];\n\n\t// check the keypath against the model keypath to see if it matches\n\tvar model = next || previous;\n\n\t// check to see if this was an alias\n\tif ( model && keys.length === 1 && last !== model.key && fragment ) {\n\t\tkeys = findAlias( last, fragment ) || keys;\n\t}\n\n\tvar i = keys.length;\n\tvar match = true;\n\tvar shuffling = false;\n\n\twhile ( model && i-- ) {\n\t\tif ( model.shuffling ) { shuffling = true; }\n\t\t// non-strict comparison to account for indices in keypaths\n\t\tif ( keys[i] != model.key ) { match = false; }\n\t\tmodel = model.parent;\n\t}\n\n\t// next is undefined, but keypath is shuffling and previous matches\n\tif ( !next && match && shuffling ) { return previous; }\n\t// next is defined, but doesn't match the keypath\n\telse if ( next && !match && shuffling ) { return previous; }\n\telse { return next; }\n}\n\nfunction findAlias ( name, fragment ) {\n\twhile ( fragment ) {\n\t\tvar z = fragment.aliases;\n\t\tif ( z && z[ name ] ) {\n\t\t\tvar aliases = ( fragment.owner.iterations ? fragment.owner : fragment ).owner.template.z;\n\t\t\tfor ( var i = 0; i < aliases.length; i++ ) {\n\t\t\t\tif ( aliases[i].n === name ) {\n\t\t\t\t\tvar alias = aliases[i].x;\n\t\t\t\t\tif ( !alias.r ) { return false; }\n\t\t\t\t\tvar parts = alias.r.split( '/' );\n\t\t\t\t\treturn splitKeypath( parts[ parts.length - 1 ] );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tfragment = fragment.componentParent || fragment.parent;\n\t}\n}\n\n// temporary placeholder target for detached implicit links\nvar Missing = {\n\tkey: '@missing',\n\tanimate: noop,\n\tapplyValue: noop,\n\tget: noop,\n\tgetKeypath: function getKeypath () { return this.key; },\n\tjoinAll: function joinAll () { return this; },\n\tjoinKey: function joinKey () { return this; },\n\tmark: noop,\n\tregisterLink: noop,\n\tshufle: noop,\n\tset: noop,\n\tunregisterLink: noop\n};\nMissing.parent = Missing;\n\nvar LinkModel = (function (ModelBase$$1) {\n\tfunction LinkModel ( parent, owner, target, key ) {\n\t\tModelBase$$1.call( this, parent );\n\n\t\tthis.owner = owner;\n\t\tthis.target = target;\n\t\tthis.key = key === undefined ? owner.key : key;\n\t\tif ( owner.isLink ) { this.sourcePath = (owner.sourcePath) + \".\" + (this.key); }\n\n\t\ttarget.registerLink( this );\n\n\t\tif ( parent ) { this.isReadonly = parent.isReadonly; }\n\n\t\tthis.isLink = true;\n\t}\n\n\tif ( ModelBase$$1 ) LinkModel.__proto__ = ModelBase$$1;\n\tLinkModel.prototype = Object.create( ModelBase$$1 && ModelBase$$1.prototype );\n\tLinkModel.prototype.constructor = LinkModel;\n\n\tLinkModel.prototype.animate = function animate ( from, to, options, interpolator ) {\n\t\treturn this.target.animate( from, to, options, interpolator );\n\t};\n\n\tLinkModel.prototype.applyValue = function applyValue ( value ) {\n\t\tif ( this.boundValue ) { this.boundValue = null; }\n\t\tthis.target.applyValue( value );\n\t};\n\n\tLinkModel.prototype.attach = function attach ( fragment ) {\n\t\tvar model = resolveReference( fragment, this.key );\n\t\tif ( model ) {\n\t\t\tthis.relinking( model, false );\n\t\t} else { // if there is no link available, move everything here to real models\n\t\t\tthis.owner.unlink();\n\t\t}\n\t};\n\n\tLinkModel.prototype.detach = function detach () {\n\t\tthis.relinking( Missing, false );\n\t};\n\n\tLinkModel.prototype.get = function get ( shouldCapture, opts ) {\n\t\tif ( opts === void 0 ) opts = {};\n\n\t\tif ( shouldCapture ) {\n\t\t\tcapture( this );\n\n\t\t\t// may need to tell the target to unwrap\n\t\t\topts.unwrap = true;\n\t\t}\n\n\t\tvar bind$$1 = 'shouldBind' in opts ? opts.shouldBind : true;\n\t\topts.shouldBind = false;\n\n\t\treturn maybeBind( this, this.target.get( false, opts ), bind$$1 );\n\t};\n\n\tLinkModel.prototype.getKeypath = function getKeypath ( ractive ) {\n\t\tif ( ractive && ractive !== this.root.ractive ) { return this.target.getKeypath( ractive ); }\n\n\t\treturn ModelBase$$1.prototype.getKeypath.call( this, ractive );\n\t};\n\n\tLinkModel.prototype.getKeypathModel = function getKeypathModel ( ractive ) {\n\t\tif ( !this.keypathModel ) { this.keypathModel = new KeypathModel( this ); }\n\t\tif ( ractive && ractive !== this.root.ractive ) { return this.keypathModel.getChild( ractive ); }\n\t\treturn this.keypathModel;\n\t};\n\n\tLinkModel.prototype.handleChange = function handleChange$1 () {\n\t\tthis.deps.forEach( handleChange );\n\t\tthis.links.forEach( handleChange );\n\t\tthis.notifyUpstream();\n\t};\n\n\tLinkModel.prototype.isDetached = function isDetached () { return this.virtual && this.target === Missing; };\n\n\tLinkModel.prototype.joinKey = function joinKey ( key ) {\n\t\t// TODO: handle nested links\n\t\tif ( key === undefined || key === '' ) { return this; }\n\n\t\tif ( !this.childByKey.hasOwnProperty( key ) ) {\n\t\t\tvar child = new LinkModel( this, this, this.target.joinKey( key ), key );\n\t\t\tthis.children.push( child );\n\t\t\tthis.childByKey[ key ] = child;\n\t\t}\n\n\t\treturn this.childByKey[ key ];\n\t};\n\n\tLinkModel.prototype.mark = function mark$$1 ( force ) {\n\t\tthis.target.mark( force );\n\t};\n\n\tLinkModel.prototype.marked = function marked$1 () {\n\t\tif ( this.boundValue ) { this.boundValue = null; }\n\n\t\tthis.links.forEach( marked );\n\n\t\tthis.deps.forEach( handleChange );\n\t};\n\n\tLinkModel.prototype.markedAll = function markedAll$1 () {\n\t\tthis.children.forEach( markedAll );\n\t\tthis.marked();\n\t};\n\n\tLinkModel.prototype.notifiedUpstream = function notifiedUpstream ( startPath, root ) {\n\t\tvar this$1 = this;\n\n\t\tthis.links.forEach( function (l) { return l.notifiedUpstream( startPath, this$1.root ); } );\n\t\tthis.deps.forEach( handleChange );\n\t\tif ( startPath && this.rootLink && this.root !== root ) {\n\t\t\tvar path = startPath.slice( 1 );\n\t\t\tpath.unshift( this.key );\n\t\t\tthis.notifyUpstream( path );\n\t\t}\n\t};\n\n\tLinkModel.prototype.relinked = function relinked () {\n\t\tthis.target.registerLink( this );\n\t\tthis.children.forEach( function (c) { return c.relinked(); } );\n\t};\n\n\tLinkModel.prototype.relinking = function relinking ( target, safe ) {\n\t\tvar this$1 = this;\n\n\t\tif ( this.rootLink && this.sourcePath ) { target = rebindMatch( this.sourcePath, target, this.target ); }\n\t\tif ( !target || this.target === target ) { return; }\n\n\t\tthis.target.unregisterLink( this );\n\t\tif ( this.keypathModel ) { this.keypathModel.rebindChildren( target ); }\n\n\t\tthis.target = target;\n\t\tthis.children.forEach( function (c) {\n\t\t\tc.relinking( target.joinKey( c.key ), safe );\n\t\t});\n\n\t\tif ( this.rootLink ) { this.addShuffleTask( function () {\n\t\t\tthis$1.relinked();\n\t\t\tif ( !safe ) { this$1.notifyUpstream(); }\n\t\t}); }\n\t};\n\n\tLinkModel.prototype.set = function set ( value ) {\n\t\tif ( this.boundValue ) { this.boundValue = null; }\n\t\tthis.target.set( value );\n\t};\n\n\tLinkModel.prototype.shuffle = function shuffle$1 ( newIndices ) {\n\t\t// watch for extra shuffles caused by a shuffle in a downstream link\n\t\tif ( this.shuffling ) { return; }\n\n\t\t// let the real model handle firing off shuffles\n\t\tif ( !this.target.shuffling ) {\n\t\t\tthis.target.shuffle( newIndices );\n\t\t} else {\n\t\t\tshuffle( this, newIndices, true );\n\t\t}\n\n\t};\n\n\tLinkModel.prototype.source = function source () {\n\t\tif ( this.target.source ) { return this.target.source(); }\n\t\telse { return this.target; }\n\t};\n\n\tLinkModel.prototype.teardown = function teardown$1 () {\n\t\tif ( this._link ) { this._link.teardown(); }\n\t\tthis.target.unregisterLink( this );\n\t\tthis.children.forEach( teardown );\n\t};\n\n\treturn LinkModel;\n}(ModelBase));\n\nModelBase.prototype.link = function link ( model, keypath, options ) {\n\tvar lnk = this._link || new LinkModel( this.parent, this, model, this.key );\n\tlnk.implicit = options && options.implicit;\n\tlnk.sourcePath = keypath;\n\tlnk.rootLink = true;\n\tif ( this._link ) { this._link.relinking( model, true, false ); }\n\tthis.rebind( lnk, this, false );\n\tfireShuffleTasks();\n\n\tthis._link = lnk;\n\tlnk.markedAll();\n\n\tthis.notifyUpstream();\n\treturn lnk;\n};\n\nModelBase.prototype.unlink = function unlink () {\n\tif ( this._link ) {\n\t\tvar ln = this._link;\n\t\tthis._link = undefined;\n\t\tln.rebind( this, this._link );\n\t\tfireShuffleTasks();\n\t\tln.teardown();\n\t\tthis.notifyUpstream();\n\t}\n};\n\n// TODO what happens if a transition is aborted?\n\nvar tickers = [];\nvar running = false;\n\nfunction tick () {\n\trunloop.start();\n\n\tvar now = performance.now();\n\n\tvar i;\n\tvar ticker;\n\n\tfor ( i = 0; i < tickers.length; i += 1 ) {\n\t\tticker = tickers[i];\n\n\t\tif ( !ticker.tick( now ) ) {\n\t\t\t// ticker is complete, remove it from the stack, and decrement i so we don't miss one\n\t\t\ttickers.splice( i--, 1 );\n\t\t}\n\t}\n\n\trunloop.end();\n\n\tif ( tickers.length ) {\n\t\trequestAnimationFrame( tick );\n\t} else {\n\t\trunning = false;\n\t}\n}\n\nvar Ticker = function Ticker ( options ) {\n\tthis.duration = options.duration;\n\tthis.step = options.step;\n\tthis.complete = options.complete;\n\tthis.easing = options.easing;\n\n\tthis.start = performance.now();\n\tthis.end = this.start + this.duration;\n\n\tthis.running = true;\n\n\ttickers.push( this );\n\tif ( !running ) { requestAnimationFrame( tick ); }\n};\n\nTicker.prototype.tick = function tick ( now ) {\n\tif ( !this.running ) { return false; }\n\n\tif ( now > this.end ) {\n\t\tif ( this.step ) { this.step( 1 ); }\n\t\tif ( this.complete ) { this.complete( 1 ); }\n\n\t\treturn false;\n\t}\n\n\tvar elapsed = now - this.start;\n\tvar eased = this.easing( elapsed / this.duration );\n\n\tif ( this.step ) { this.step( eased ); }\n\n\treturn true;\n};\n\nTicker.prototype.stop = function stop () {\n\tif ( this.abort ) { this.abort(); }\n\tthis.running = false;\n};\n\nvar prefixers = {};\n\n// TODO this is legacy. sooner we can replace the old adaptor API the better\nfunction prefixKeypath ( obj, prefix ) {\n\tvar prefixed = {};\n\n\tif ( !prefix ) {\n\t\treturn obj;\n\t}\n\n\tprefix += '.';\n\n\tfor ( var key in obj ) {\n\t\tif ( obj.hasOwnProperty( key ) ) {\n\t\t\tprefixed[ prefix + key ] = obj[ key ];\n\t\t}\n\t}\n\n\treturn prefixed;\n}\n\nfunction getPrefixer ( rootKeypath ) {\n\tvar rootDot;\n\n\tif ( !prefixers[ rootKeypath ] ) {\n\t\trootDot = rootKeypath ? rootKeypath + '.' : '';\n\n\t\tprefixers[ rootKeypath ] = function ( relativeKeypath, value ) {\n\t\t\tvar obj;\n\n\t\t\tif ( typeof relativeKeypath === 'string' ) {\n\t\t\t\tobj = {};\n\t\t\t\tobj[ rootDot + relativeKeypath ] = value;\n\t\t\t\treturn obj;\n\t\t\t}\n\n\t\t\tif ( typeof relativeKeypath === 'object' ) {\n\t\t\t\t// 'relativeKeypath' is in fact a hash, not a keypath\n\t\t\t\treturn rootDot ? prefixKeypath( relativeKeypath, rootKeypath ) : relativeKeypath;\n\t\t\t}\n\t\t};\n\t}\n\n\treturn prefixers[ rootKeypath ];\n}\n\nvar Model = (function (ModelBase$$1) {\n\tfunction Model ( parent, key ) {\n\t\tModelBase$$1.call( this, parent );\n\n\t\tthis.ticker = null;\n\n\t\tif ( parent ) {\n\t\t\tthis.key = unescapeKey( key );\n\t\t\tthis.isReadonly = parent.isReadonly;\n\n\t\t\tif ( parent.value ) {\n\t\t\t\tthis.value = parent.value[ this.key ];\n\t\t\t\tif ( Array.isArray( this.value ) ) { this.length = this.value.length; }\n\t\t\t\tthis.adapt();\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( ModelBase$$1 ) Model.__proto__ = ModelBase$$1;\n\tModel.prototype = Object.create( ModelBase$$1 && ModelBase$$1.prototype );\n\tModel.prototype.constructor = Model;\n\n\tModel.prototype.adapt = function adapt () {\n\t\tvar this$1 = this;\n\n\t\tvar adaptors = this.root.adaptors;\n\t\tvar len = adaptors.length;\n\n\t\tthis.rewrap = false;\n\n\t\t// Exit early if no adaptors\n\t\tif ( len === 0 ) { return; }\n\n\t\tvar value = this.wrapper ? ( 'newWrapperValue' in this ? this.newWrapperValue : this.wrapperValue ) : this.value;\n\n\t\t// TODO remove this legacy nonsense\n\t\tvar ractive = this.root.ractive;\n\t\tvar keypath = this.getKeypath();\n\n\t\t// tear previous adaptor down if present\n\t\tif ( this.wrapper ) {\n\t\t\tvar shouldTeardown = this.wrapperValue === value ? false : !this.wrapper.reset || this.wrapper.reset( value ) === false;\n\n\t\t\tif ( shouldTeardown ) {\n\t\t\t\tthis.wrapper.teardown();\n\t\t\t\tthis.wrapper = null;\n\n\t\t\t\t// don't branch for undefined values\n\t\t\t\tif ( this.value !== undefined ) {\n\t\t\t\t\tvar parentValue = this.parent.value || this.parent.createBranch( this.key );\n\t\t\t\t\tif ( parentValue[ this.key ] !== value ) { parentValue[ this.key ] = value; }\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdelete this.newWrapperValue;\n\t\t\t\tthis.wrapperValue = value;\n\t\t\t\tthis.value = this.wrapper.get();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tvar i;\n\n\t\tfor ( i = 0; i < len; i += 1 ) {\n\t\t\tvar adaptor = adaptors[i];\n\t\t\tif ( adaptor.filter( value, keypath, ractive ) ) {\n\t\t\t\tthis$1.wrapper = adaptor.wrap( ractive, value, keypath, getPrefixer( keypath ) );\n\t\t\t\tthis$1.wrapperValue = value;\n\t\t\t\tthis$1.wrapper.__model = this$1; // massive temporary hack to enable array adaptor\n\n\t\t\t\tthis$1.value = this$1.wrapper.get();\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\tModel.prototype.animate = function animate ( from, to, options, interpolator ) {\n\t\tvar this$1 = this;\n\n\t\tif ( this.ticker ) { this.ticker.stop(); }\n\n\t\tvar fulfilPromise;\n\t\tvar promise = new Promise( function (fulfil) { return fulfilPromise = fulfil; } );\n\n\t\tthis.ticker = new Ticker({\n\t\t\tduration: options.duration,\n\t\t\teasing: options.easing,\n\t\t\tstep: function (t) {\n\t\t\t\tvar value = interpolator( t );\n\t\t\t\tthis$1.applyValue( value );\n\t\t\t\tif ( options.step ) { options.step( t, value ); }\n\t\t\t},\n\t\t\tcomplete: function () {\n\t\t\t\tthis$1.applyValue( to );\n\t\t\t\tif ( options.complete ) { options.complete( to ); }\n\n\t\t\t\tthis$1.ticker = null;\n\t\t\t\tfulfilPromise();\n\t\t\t}\n\t\t});\n\n\t\tpromise.stop = this.ticker.stop;\n\t\treturn promise;\n\t};\n\n\tModel.prototype.applyValue = function applyValue ( value, notify ) {\n\t\tif ( notify === void 0 ) notify = true;\n\n\t\tif ( isEqual( value, this.value ) ) { return; }\n\t\tif ( this.boundValue ) { this.boundValue = null; }\n\n\t\tif ( this.parent.wrapper && this.parent.wrapper.set ) {\n\t\t\tthis.parent.wrapper.set( this.key, value );\n\t\t\tthis.parent.value = this.parent.wrapper.get();\n\n\t\t\tthis.value = this.parent.value[ this.key ];\n\t\t\tif ( this.wrapper ) { this.newWrapperValue = this.value; }\n\t\t\tthis.adapt();\n\t\t} else if ( this.wrapper ) {\n\t\t\tthis.newWrapperValue = value;\n\t\t\tthis.adapt();\n\t\t} else {\n\t\t\tvar parentValue = this.parent.value || this.parent.createBranch( this.key );\n\t\t\tif ( isObjectLike( parentValue ) ) {\n\t\t\t\tparentValue[ this.key ] = value;\n\t\t\t} else {\n\t\t\t\twarnIfDebug( (\"Attempted to set a property of a non-object '\" + (this.getKeypath()) + \"'\") );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.value = value;\n\t\t\tthis.adapt();\n\t\t}\n\n\t\t// keep track of array stuff\n\t\tif ( Array.isArray( value ) ) {\n\t\t\tthis.length = value.length;\n\t\t\tthis.isArray = true;\n\t\t} else {\n\t\t\tthis.isArray = false;\n\t\t}\n\n\t\t// notify dependants\n\t\tthis.links.forEach( handleChange );\n\t\tthis.children.forEach( mark );\n\t\tthis.deps.forEach( handleChange );\n\n\t\tif ( notify ) { this.notifyUpstream(); }\n\n\t\tif ( this.parent.isArray ) {\n\t\t\tif ( this.key === 'length' ) { this.parent.length = value; }\n\t\t\telse { this.parent.joinKey( 'length' ).mark(); }\n\t\t}\n\t};\n\n\tModel.prototype.createBranch = function createBranch ( key ) {\n\t\tvar branch = isNumeric( key ) ? [] : {};\n\t\tthis.applyValue( branch, false );\n\n\t\treturn branch;\n\t};\n\n\tModel.prototype.get = function get ( shouldCapture, opts ) {\n\t\tif ( this._link ) { return this._link.get( shouldCapture, opts ); }\n\t\tif ( shouldCapture ) { capture( this ); }\n\t\t// if capturing, this value needs to be unwrapped because it's for external use\n\t\tif ( opts && opts.virtual ) { return this.getVirtual( false ); }\n\t\treturn maybeBind( this, ( ( opts && 'unwrap' in opts ) ? opts.unwrap !== false : shouldCapture ) && this.wrapper ? this.wrapperValue : this.value, !opts || opts.shouldBind !== false );\n\t};\n\n\tModel.prototype.getKeypathModel = function getKeypathModel () {\n\t\tif ( !this.keypathModel ) { this.keypathModel = new KeypathModel( this ); }\n\t\treturn this.keypathModel;\n\t};\n\n\tModel.prototype.joinKey = function joinKey ( key, opts ) {\n\t\tif ( this._link ) {\n\t\t\tif ( opts && opts.lastLink !== false && ( key === undefined || key === '' ) ) { return this; }\n\t\t\treturn this._link.joinKey( key );\n\t\t}\n\n\t\tif ( key === undefined || key === '' ) { return this; }\n\n\n\t\tif ( !this.childByKey.hasOwnProperty( key ) ) {\n\t\t\tvar child = new Model( this, key );\n\t\t\tthis.children.push( child );\n\t\t\tthis.childByKey[ key ] = child;\n\t\t}\n\n\t\tif ( this.childByKey[ key ]._link && ( !opts || opts.lastLink !== false ) ) { return this.childByKey[ key ]._link; }\n\t\treturn this.childByKey[ key ];\n\t};\n\n\tModel.prototype.mark = function mark$1 ( force ) {\n\t\tif ( this._link ) { return this._link.mark(); }\n\n\t\tvar value = this.retrieve();\n\n\t\tif ( force || !isEqual( value, this.value ) ) {\n\t\t\tvar old = this.value;\n\t\t\tthis.value = value;\n\t\t\tif ( this.boundValue ) { this.boundValue = null; }\n\n\t\t\t// make sure the wrapper stays in sync\n\t\t\tif ( old !== value || this.rewrap ) {\n\t\t\t\tif ( this.wrapper ) { this.newWrapperValue = value; }\n\t\t\t\tthis.adapt();\n\t\t\t}\n\n\t\t\t// keep track of array stuff\n\t\t\tif ( Array.isArray( value ) ) {\n\t\t\t\tthis.length = value.length;\n\t\t\t\tthis.isArray = true;\n\t\t\t} else {\n\t\t\t\tthis.isArray = false;\n\t\t\t}\n\n\t\t\tthis.children.forEach( mark );\n\t\t\tthis.links.forEach( marked );\n\n\t\t\tthis.deps.forEach( handleChange );\n\t\t}\n\t};\n\n\tModel.prototype.merge = function merge ( array, comparator ) {\n\t\tvar oldArray = this.value;\n\t\tvar newArray = array;\n\t\tif ( oldArray === newArray ) { oldArray = recreateArray( this ); }\n\t\tif ( comparator ) {\n\t\t\toldArray = oldArray.map( comparator );\n\t\t\tnewArray = newArray.map( comparator );\n\t\t}\n\n\t\tvar oldLength = oldArray.length;\n\n\t\tvar usedIndices = {};\n\t\tvar firstUnusedIndex = 0;\n\n\t\tvar newIndices = oldArray.map( function (item) {\n\t\t\tvar index;\n\t\t\tvar start = firstUnusedIndex;\n\n\t\t\tdo {\n\t\t\t\tindex = newArray.indexOf( item, start );\n\n\t\t\t\tif ( index === -1 ) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\n\t\t\t\tstart = index + 1;\n\t\t\t} while ( ( usedIndices[ index ] === true ) && start < oldLength );\n\n\t\t\t// keep track of the first unused index, so we don't search\n\t\t\t// the whole of newArray for each item in oldArray unnecessarily\n\t\t\tif ( index === firstUnusedIndex ) {\n\t\t\t\tfirstUnusedIndex += 1;\n\t\t\t}\n\t\t\t// allow next instance of next \"equal\" to be found item\n\t\t\tusedIndices[ index ] = true;\n\t\t\treturn index;\n\t\t});\n\n\t\tthis.parent.value[ this.key ] = array;\n\t\tthis.shuffle( newIndices );\n\t};\n\n\tModel.prototype.retrieve = function retrieve () {\n\t\treturn this.parent.value ? this.parent.value[ this.key ] : undefined;\n\t};\n\n\tModel.prototype.set = function set ( value ) {\n\t\tif ( this.ticker ) { this.ticker.stop(); }\n\t\tthis.applyValue( value );\n\t};\n\n\tModel.prototype.shuffle = function shuffle$1 ( newIndices ) {\n\t\tshuffle( this, newIndices, false );\n\t};\n\n\tModel.prototype.source = function source () { return this; };\n\n\tModel.prototype.teardown = function teardown$1 () {\n\t\tif ( this._link ) { this._link.teardown(); }\n\t\tthis.children.forEach( teardown );\n\t\tif ( this.wrapper ) { this.wrapper.teardown(); }\n\t\tif ( this.keypathModel ) { this.keypathModel.teardown(); }\n\t};\n\n\treturn Model;\n}(ModelBase));\n\nfunction recreateArray( model ) {\n\tvar array = [];\n\n\tfor ( var i = 0; i < model.length; i++ ) {\n\t\tarray[ i ] = (model.childByKey[i] || {}).value;\n\t}\n\n\treturn array;\n}\n\n/* global global */\nvar data = {};\n\nvar SharedModel = (function (Model$$1) {\n\tfunction SharedModel ( value, name ) {\n\t\tModel$$1.call( this, null, (\"@\" + name) );\n\t\tthis.key = \"@\" + name;\n\t\tthis.value = value;\n\t\tthis.isRoot = true;\n\t\tthis.root = this;\n\t\tthis.adaptors = [];\n\t}\n\n\tif ( Model$$1 ) SharedModel.__proto__ = Model$$1;\n\tSharedModel.prototype = Object.create( Model$$1 && Model$$1.prototype );\n\tSharedModel.prototype.constructor = SharedModel;\n\n\tSharedModel.prototype.getKeypath = function getKeypath () {\n\t\treturn this.key;\n\t};\n\n\treturn SharedModel;\n}(Model));\n\nvar SharedModel$1 = new SharedModel( data, 'shared' );\n\nvar GlobalModel = new SharedModel( typeof global !== 'undefined' ? global : window, 'global' );\n\nfunction resolveReference ( fragment, ref ) {\n\tvar initialFragment = fragment;\n\t// current context ref\n\tif ( ref === '.' ) { return fragment.findContext(); }\n\n\t// ancestor references\n\tif ( ref[0] === '~' ) { return fragment.ractive.viewmodel.joinAll( splitKeypath( ref.slice( 2 ) ) ); }\n\n\t// scoped references\n\tif ( ref[0] === '.' || ref[0] === '^' ) {\n\t\tvar frag = fragment;\n\t\tvar parts = ref.split( '/' );\n\t\tvar explicitContext = parts[0] === '^^';\n\t\tvar context$1 = explicitContext ? null : fragment.findContext();\n\n\t\t// account for the first context hop\n\t\tif ( explicitContext ) { parts.unshift( '^^' ); }\n\n\t\t// walk up the context chain\n\t\twhile ( parts[0] === '^^' ) {\n\t\t\tparts.shift();\n\t\t\tcontext$1 = null;\n\t\t\twhile ( frag && !context$1 ) {\n\t\t\t\tcontext$1 = frag.context;\n\t\t\t\tfrag = frag.parent.component ? frag.parent.component.parentFragment : frag.parent;\n\t\t\t}\n\t\t}\n\n\t\tif ( !context$1 && explicitContext ) {\n\t\t\tthrow new Error( (\"Invalid context parent reference ('\" + ref + \"'). There is not context at that level.\") );\n\t\t}\n\n\t\t// walk up the context path\n\t\twhile ( parts[0] === '.' || parts[0] === '..' ) {\n\t\t\tvar part = parts.shift();\n\n\t\t\tif ( part === '..' ) {\n\t\t\t\tcontext$1 = context$1.parent;\n\t\t\t}\n\t\t}\n\n\t\tref = parts.join( '/' );\n\n\t\t// special case - `{{.foo}}` means the same as `{{./foo}}`\n\t\tif ( ref[0] === '.' ) { ref = ref.slice( 1 ); }\n\t\treturn context$1.joinAll( splitKeypath( ref ) );\n\t}\n\n\tvar keys = splitKeypath( ref );\n\tif ( !keys.length ) { return; }\n\tvar base = keys.shift();\n\n\t// special refs\n\tif ( base[0] === '@' ) {\n\t\t// shorthand from outside the template\n\t\t// @this referring to local ractive instance\n\t\tif ( base === '@this' || base === '@' ) {\n\t\t\treturn fragment.ractive.viewmodel.getRactiveModel().joinAll( keys );\n\t\t}\n\n\t\t// @index or @key referring to the nearest repeating index or key\n\t\telse if ( base === '@index' || base === '@key' ) {\n\t\t\tif ( keys.length ) { badReference( base ); }\n\t\t\tvar repeater = fragment.findRepeatingFragment();\n\t\t\t// make sure the found fragment is actually an iteration\n\t\t\tif ( !repeater.isIteration ) { return; }\n\t\t\treturn repeater.context.getKeyModel( repeater[ ref[1] === 'i' ? 'index' : 'key' ] );\n\t\t}\n\n\t\t// @global referring to window or global\n\t\telse if ( base === '@global' ) {\n\t\t\treturn GlobalModel.joinAll( keys );\n\t\t}\n\n\t\t// @global referring to window or global\n\t\telse if ( base === '@shared' ) {\n\t\t\treturn SharedModel$1.joinAll( keys );\n\t\t}\n\n\t\t// @keypath or @rootpath, the current keypath string\n\t\telse if ( base === '@keypath' || base === '@rootpath' ) {\n\t\t\tvar root = ref[1] === 'r' ? fragment.ractive.root : null;\n\t\t\tvar context$2 = fragment.findContext();\n\n\t\t\t// skip over component roots, which provide no context\n\t\t\twhile ( root && context$2.isRoot && context$2.ractive.component ) {\n\t\t\t\tcontext$2 = context$2.ractive.component.parentFragment.findContext();\n\t\t\t}\n\n\t\t\treturn context$2.getKeypathModel( root );\n\t\t}\n\n\t\telse if ( base === '@context' ) {\n\t\t\treturn new ContextModel( fragment.getContext() );\n\t\t}\n\n\t\t// @context-local data\n\t\telse if ( base === '@local' ) {\n\t\t\treturn fragment.getContext()._data.joinAll( keys );\n\t\t}\n\n\t\t// nope\n\t\telse {\n\t\t\tthrow new Error( (\"Invalid special reference '\" + base + \"'\") );\n\t\t}\n\t}\n\n\tvar context = fragment.findContext();\n\n\t// check immediate context for a match\n\tif ( context.has( base ) ) {\n\t\treturn context.joinKey( base ).joinAll( keys );\n\t}\n\n\t// walk up the fragment hierarchy looking for a matching ref, alias, or key in a context\n\tvar crossedComponentBoundary;\n\tvar shouldWarn = fragment.ractive.warnAboutAmbiguity;\n\n\twhile ( fragment ) {\n\t\t// repeated fragments\n\t\tif ( fragment.isIteration ) {\n\t\t\tif ( base === fragment.parent.keyRef ) {\n\t\t\t\tif ( keys.length ) { badReference( base ); }\n\t\t\t\treturn fragment.context.getKeyModel( fragment.key );\n\t\t\t}\n\n\t\t\tif ( base === fragment.parent.indexRef ) {\n\t\t\t\tif ( keys.length ) { badReference( base ); }\n\t\t\t\treturn fragment.context.getKeyModel( fragment.index );\n\t\t\t}\n\t\t}\n\n\t\t// alias node or iteration\n\t\tif ( fragment.aliases  && fragment.aliases.hasOwnProperty( base ) ) {\n\t\t\tvar model = fragment.aliases[ base ];\n\n\t\t\tif ( keys.length === 0 ) { return model; }\n\t\t\telse if ( typeof model.joinAll === 'function' ) {\n\t\t\t\treturn model.joinAll( keys );\n\t\t\t}\n\t\t}\n\n\t\t// check fragment context to see if it has the key we need\n\t\tif ( fragment.context && fragment.context.has( base ) ) {\n\t\t\t// this is an implicit mapping\n\t\t\tif ( crossedComponentBoundary ) {\n\t\t\t\tif ( shouldWarn ) { warnIfDebug( (\"'\" + ref + \"' resolved but is ambiguous and will create a mapping to a parent component.\") ); }\n\t\t\t\treturn context.root.createLink( base, fragment.context.joinKey( base ), base, { implicit: true } ).joinAll( keys );\n\t\t\t}\n\n\t\t\tif ( shouldWarn ) { warnIfDebug( (\"'\" + ref + \"' resolved but is ambiguous.\") ); }\n\t\t\treturn fragment.context.joinKey( base ).joinAll( keys );\n\t\t}\n\n\t\tif ( ( fragment.componentParent || ( !fragment.parent && fragment.ractive.component ) ) && !fragment.ractive.isolated ) {\n\t\t\t// ascend through component boundary\n\t\t\tfragment = fragment.componentParent || fragment.ractive.component.parentFragment;\n\t\t\tcrossedComponentBoundary = true;\n\t\t} else {\n\t\t\tfragment = fragment.parent;\n\t\t}\n\t}\n\n\t// if enabled, check the instance for a match\n\tif ( initialFragment.ractive.resolveInstanceMembers ) {\n\t\tvar model$1 = initialFragment.ractive.viewmodel.getRactiveModel();\n\t\tif ( model$1.has( base ) ) {\n\t\t\treturn model$1.joinKey( base ).joinAll( keys );\n\t\t}\n\t}\n\n\tif ( shouldWarn ) {\n\t\twarnIfDebug( (\"'\" + ref + \"' is ambiguous and did not resolve.\") );\n\t}\n\n\t// didn't find anything, so go ahead and create the key on the local model\n\treturn context.joinKey( base ).joinAll( keys );\n}\n\nfunction badReference ( key ) {\n\tthrow new Error( (\"An index or key reference (\" + key + \") cannot have child properties\") );\n}\n\nvar ContextModel = function ContextModel ( context ) {\n\tthis.context = context;\n};\n\nContextModel.prototype.get = function get () { return this.context; };\n\n// This function takes an array, the name of a mutator method, and the\n// arguments to call that mutator method with, and returns an array that\n// maps the old indices to their new indices.\n\n// So if you had something like this...\n//\n//     array = [ 'a', 'b', 'c', 'd' ];\n//     array.push( 'e' );\n//\n// ...you'd get `[ 0, 1, 2, 3 ]` - in other words, none of the old indices\n// have changed. If you then did this...\n//\n//     array.unshift( 'z' );\n//\n// ...the indices would be `[ 1, 2, 3, 4, 5 ]` - every item has been moved\n// one higher to make room for the 'z'. If you removed an item, the new index\n// would be -1...\n//\n//     array.splice( 2, 2 );\n//\n// ...this would result in [ 0, 1, -1, -1, 2, 3 ].\n//\n// This information is used to enable fast, non-destructive shuffling of list\n// sections when you do e.g. `ractive.splice( 'items', 2, 2 );\n\nfunction getNewIndices ( length, methodName, args ) {\n\tvar newIndices = [];\n\n\tvar spliceArguments = getSpliceEquivalent( length, methodName, args );\n\n\tif ( !spliceArguments ) {\n\t\treturn null; // TODO support reverse and sort?\n\t}\n\n\tvar balance = ( spliceArguments.length - 2 ) - spliceArguments[1];\n\n\tvar removeStart = Math.min( length, spliceArguments[0] );\n\tvar removeEnd = removeStart + spliceArguments[1];\n\tnewIndices.startIndex = removeStart;\n\n\tvar i;\n\tfor ( i = 0; i < removeStart; i += 1 ) {\n\t\tnewIndices.push( i );\n\t}\n\n\tfor ( ; i < removeEnd; i += 1 ) {\n\t\tnewIndices.push( -1 );\n\t}\n\n\tfor ( ; i < length; i += 1 ) {\n\t\tnewIndices.push( i + balance );\n\t}\n\n\t// there is a net shift for the rest of the array starting with index + balance\n\tif ( balance !== 0 ) {\n\t\tnewIndices.touchedFrom = spliceArguments[0];\n\t} else {\n\t\tnewIndices.touchedFrom = length;\n\t}\n\n\treturn newIndices;\n}\n\n\n// The pop, push, shift an unshift methods can all be represented\n// as an equivalent splice\nfunction getSpliceEquivalent ( length, methodName, args ) {\n\tswitch ( methodName ) {\n\t\tcase 'splice':\n\t\t\tif ( args[0] !== undefined && args[0] < 0 ) {\n\t\t\t\targs[0] = length + Math.max( args[0], -length );\n\t\t\t}\n\n\t\t\tif ( args[0] === undefined ) { args[0] = 0; }\n\n\t\t\twhile ( args.length < 2 ) {\n\t\t\t\targs.push( length - args[0] );\n\t\t\t}\n\n\t\t\tif ( typeof args[1] !== 'number' ) {\n\t\t\t\targs[1] = length - args[0];\n\t\t\t}\n\n\t\t\t// ensure we only remove elements that exist\n\t\t\targs[1] = Math.min( args[1], length - args[0] );\n\n\t\t\treturn args;\n\n\t\tcase 'sort':\n\t\tcase 'reverse':\n\t\t\treturn null;\n\n\t\tcase 'pop':\n\t\t\tif ( length ) {\n\t\t\t\treturn [ length - 1, 1 ];\n\t\t\t}\n\t\t\treturn [ 0, 0 ];\n\n\t\tcase 'push':\n\t\t\treturn [ length, 0 ].concat( args );\n\n\t\tcase 'shift':\n\t\t\treturn [ 0, length ? 1 : 0 ];\n\n\t\tcase 'unshift':\n\t\t\treturn [ 0, 0 ].concat( args );\n\t}\n}\n\nvar arrayProto = Array.prototype;\n\nvar makeArrayMethod = function ( methodName ) {\n\tfunction path ( keypath ) {\n\t\tvar args = [], len = arguments.length - 1;\n\t\twhile ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n\t\treturn model( this.viewmodel.joinAll( splitKeypath( keypath ) ), args );\n\t}\n\n\tfunction model ( mdl, args ) {\n\t\tvar array = mdl.get();\n\n\t\tif ( !Array.isArray( array ) ) {\n\t\t\tif ( array === undefined ) {\n\t\t\t\tarray = [];\n\t\t\t\tvar result$1 = arrayProto[ methodName ].apply( array, args );\n\t\t\t\tvar promise$1 = runloop.start( this, true ).then( function () { return result$1; } );\n\t\t\t\tmdl.set( array );\n\t\t\t\trunloop.end();\n\t\t\t\treturn promise$1;\n\t\t\t} else {\n\t\t\t\tthrow new Error( (\"shuffle array method \" + methodName + \" called on non-array at \" + (mdl.getKeypath())) );\n\t\t\t}\n\t\t}\n\n\t\tvar newIndices = getNewIndices( array.length, methodName, args );\n\t\tvar result = arrayProto[ methodName ].apply( array, args );\n\n\t\tvar promise = runloop.start( this, true ).then( function () { return result; } );\n\t\tpromise.result = result;\n\n\t\tif ( newIndices ) {\n\t\t\tmdl.shuffle( newIndices );\n\t\t} else {\n\t\t\tmdl.set( result );\n\t\t}\n\n\t\trunloop.end();\n\n\t\treturn promise;\n\t}\n\n\treturn { path: path, model: model };\n};\n\nvar updateHook = new Hook( 'update' );\n\nfunction update$1 ( ractive, model, options ) {\n\t// if the parent is wrapped, the adaptor will need to be updated before\n\t// updating on this keypath\n\tif ( model.parent && model.parent.wrapper ) {\n\t\tmodel.parent.adapt();\n\t}\n\n\tvar promise = runloop.start( ractive, true );\n\n\tmodel.mark( options && options.force );\n\n\t// notify upstream of changes\n\tmodel.notifyUpstream();\n\n\trunloop.end();\n\n\tupdateHook.fire( ractive, model );\n\n\treturn promise;\n}\n\nfunction Ractive$update ( keypath, options ) {\n\tvar opts, path;\n\n\tif ( typeof keypath === 'string' ) {\n\t\tpath = splitKeypath( keypath );\n\t\topts = options;\n\t} else {\n\t\topts = keypath;\n\t}\n\n\treturn update$1( this, path ? this.viewmodel.joinAll( path ) : this.viewmodel, opts );\n}\n\nvar TEXT              = 1;\nvar INTERPOLATOR      = 2;\nvar TRIPLE            = 3;\nvar SECTION           = 4;\nvar INVERTED          = 5;\nvar CLOSING           = 6;\nvar ELEMENT           = 7;\nvar PARTIAL           = 8;\nvar COMMENT           = 9;\nvar DELIMCHANGE       = 10;\nvar ANCHOR            = 11;\nvar ATTRIBUTE         = 13;\nvar CLOSING_TAG       = 14;\nvar COMPONENT         = 15;\nvar YIELDER           = 16;\nvar INLINE_PARTIAL    = 17;\nvar DOCTYPE           = 18;\nvar ALIAS             = 19;\n\nvar NUMBER_LITERAL    = 20;\nvar STRING_LITERAL    = 21;\nvar ARRAY_LITERAL     = 22;\nvar OBJECT_LITERAL    = 23;\nvar BOOLEAN_LITERAL   = 24;\nvar REGEXP_LITERAL    = 25;\n\nvar GLOBAL            = 26;\nvar KEY_VALUE_PAIR    = 27;\n\n\nvar REFERENCE         = 30;\nvar REFINEMENT        = 31;\nvar MEMBER            = 32;\nvar PREFIX_OPERATOR   = 33;\nvar BRACKETED         = 34;\nvar CONDITIONAL       = 35;\nvar INFIX_OPERATOR    = 36;\n\nvar INVOCATION        = 40;\n\nvar SECTION_IF        = 50;\nvar SECTION_UNLESS    = 51;\nvar SECTION_EACH      = 52;\nvar SECTION_WITH      = 53;\nvar SECTION_IF_WITH   = 54;\n\nvar ELSE              = 60;\nvar ELSEIF            = 61;\n\nvar EVENT             = 70;\nvar DECORATOR         = 71;\nvar TRANSITION        = 72;\nvar BINDING_FLAG      = 73;\nvar DELEGATE_FLAG     = 74;\n\nfunction findElement( start, orComponent, name ) {\n\tif ( orComponent === void 0 ) orComponent = true;\n\n\twhile ( start && ( start.type !== ELEMENT || ( name && start.name !== name ) ) && ( !orComponent || ( start.type !== COMPONENT && start.type !== ANCHOR ) ) ) {\n\t\t// start is a fragment - look at the owner\n\t\tif ( start.owner ) { start = start.owner; }\n\t\t// start is a component or yielder - look at the container\n\t\telse if ( start.component ) { start = start.containerFragment || start.component.parentFragment; }\n\t\t// start is an item - look at the parent\n\t\telse if ( start.parent ) { start = start.parent; }\n\t\t// start is an item without a parent - look at the parent fragment\n\t\telse if ( start.parentFragment ) { start = start.parentFragment; }\n\n\t\telse { start = undefined; }\n\t}\n\n\treturn start;\n}\n\nvar modelPush = makeArrayMethod( 'push' ).model;\nvar modelPop = makeArrayMethod( 'pop' ).model;\nvar modelShift = makeArrayMethod( 'shift' ).model;\nvar modelUnshift = makeArrayMethod( 'unshift' ).model;\nvar modelSort = makeArrayMethod( 'sort' ).model;\nvar modelSplice = makeArrayMethod( 'splice' ).model;\nvar modelReverse = makeArrayMethod( 'reverse' ).model;\n\nvar ContextData = (function (Model$$1) {\n\tfunction ContextData ( options ) {\n\t\tModel$$1.call( this, null, null );\n\n\t\tthis.isRoot = true;\n\t\tthis.root = this;\n\t\tthis.value = {};\n\t\tthis.ractive = options.ractive;\n\t\tthis.adaptors = [];\n\t\tthis.context = options.context;\n\t}\n\n\tif ( Model$$1 ) ContextData.__proto__ = Model$$1;\n\tContextData.prototype = Object.create( Model$$1 && Model$$1.prototype );\n\tContextData.prototype.constructor = ContextData;\n\n\tContextData.prototype.getKeypath = function getKeypath () {\n\t\treturn '@context.data';\n\t};\n\n\treturn ContextData;\n}(Model));\n\nvar Context = function Context ( fragment, element ) {\n\tthis.fragment = fragment;\n\tthis.element = element || findElement( fragment );\n\tthis.ractive = fragment.ractive;\n\tthis.root = this;\n};\n\nvar prototypeAccessors = { decorators: {},_data: {} };\n\nprototypeAccessors.decorators.get = function () {\n\tvar items = {};\n\tif ( !this.element ) { return items; }\n\tthis.element.decorators.forEach( function (d) { return items[ d.name ] = d.intermediary; } );\n\treturn items;\n};\n\nprototypeAccessors._data.get = function () {\n\treturn this.model || ( this.root.model = new ContextData({ ractive: this.ractive, context: this.root }) );\n};\n\n// the usual mutation suspects\nContext.prototype.add = function add ( keypath, d, options ) {\n\tvar num = typeof d === 'number' ? +d : 1;\n\tvar opts = typeof d === 'object' ? d : options;\n\treturn set( this.ractive, build$1( this, keypath, num ).map( function (pair) {\n\t\tvar model = pair[0];\n\t\t\tvar val = pair[1];\n\t\tvar value = model.get();\n\t\tif ( !isNumeric( val ) || !isNumeric( value ) ) { throw new Error( 'Cannot add non-numeric value' ); }\n\t\treturn [ model, value + val ];\n\t}), opts );\n};\n\nContext.prototype.animate = function animate$$1 ( keypath, value, options ) {\n\tvar model = findModel( this, keypath ).model;\n\treturn animate( this.ractive, model, value, options );\n};\n\n// get relative keypaths and values\nContext.prototype.get = function get ( keypath ) {\n\tif ( !keypath ) { return this.fragment.findContext().get( true ); }\n\n\tvar ref = findModel( this, keypath );\n\t\tvar model = ref.model;\n\n\treturn model ? model.get( true ) : undefined;\n};\n\nContext.prototype.link = function link ( source, dest ) {\n\tvar there = findModel( this, source ).model;\n\tvar here = findModel( this, dest ).model;\n\tvar promise = runloop.start( this.ractive, true );\n\there.link( there, source );\n\trunloop.end();\n\treturn promise;\n};\n\nContext.prototype.observe = function observe ( keypath, callback, options ) {\n\t\tif ( options === void 0 ) options = {};\n\n\tif ( isObject( keypath ) ) { options = callback || {}; }\n\toptions.fragment = this.fragment;\n\treturn this.ractive.observe( keypath, callback, options );\n};\n\nContext.prototype.observeOnce = function observeOnce ( keypath, callback, options ) {\n\t\tif ( options === void 0 ) options = {};\n\n\tif ( isObject( keypath ) ) { options = callback || {}; }\n\toptions.fragment = this.fragment;\n\treturn this.ractive.observeOnce( keypath, callback, options );\n};\n\nContext.prototype.pop = function pop ( keypath ) {\n\treturn modelPop( findModel( this, keypath ).model, [] );\n};\n\nContext.prototype.push = function push ( keypath ) {\n\t\tvar values = [], len = arguments.length - 1;\n\t\twhile ( len-- > 0 ) values[ len ] = arguments[ len + 1 ];\n\n\treturn modelPush( findModel( this, keypath ).model, values );\n};\n\nContext.prototype.raise = function raise ( name, event ) {\n\t\tvar args = [], len = arguments.length - 2;\n\t\twhile ( len-- > 0 ) args[ len ] = arguments[ len + 2 ];\n\n\tvar element = this.element;\n\n\twhile ( element ) {\n\t\tvar events = element.events;\n\t\tfor ( var i = 0; i < events.length; i++ ) {\n\t\t\tvar ev = events[i];\n\t\t\tif ( ~ev.template.n.indexOf( name ) ) {\n\t\t\t\tev.fire( ev.element.getContext( event ), args );\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\telement = element.parent;\n\t}\n};\n\nContext.prototype.readLink = function readLink ( keypath, options ) {\n\treturn this.ractive.readLink( this.resolve( keypath ), options );\n};\n\nContext.prototype.resolve = function resolve ( path, ractive ) {\n\tvar ref = findModel( this, path );\n\t\tvar model = ref.model;\n\t\tvar instance = ref.instance;\n\treturn model ? model.getKeypath( ractive || instance ) : path;\n};\n\nContext.prototype.reverse = function reverse ( keypath ) {\n\treturn modelReverse( findModel( this, keypath ).model, [] );\n};\n\nContext.prototype.set = function set$$1 ( keypath, value, options ) {\n\treturn set( this.ractive, build$1( this, keypath, value ), options );\n};\n\nContext.prototype.shift = function shift ( keypath ) {\n\treturn modelShift( findModel( this, keypath ).model, [] );\n};\n\nContext.prototype.splice = function splice ( keypath, index, drop ) {\n\t\tvar add = [], len = arguments.length - 3;\n\t\twhile ( len-- > 0 ) add[ len ] = arguments[ len + 3 ];\n\n\tadd.unshift( index, drop );\n\treturn modelSplice( findModel( this, keypath ).model, add );\n};\n\nContext.prototype.sort = function sort ( keypath ) {\n\treturn modelSort( findModel( this, keypath ).model, [] );\n};\n\nContext.prototype.subtract = function subtract ( keypath, d, options ) {\n\tvar num = typeof d === 'number' ? d : 1;\n\tvar opts = typeof d === 'object' ? d : options;\n\treturn set( this.ractive, build$1( this, keypath, num ).map( function (pair) {\n\t\tvar model = pair[0];\n\t\t\tvar val = pair[1];\n\t\tvar value = model.get();\n\t\tif ( !isNumeric( val ) || !isNumeric( value ) ) { throw new Error( 'Cannot add non-numeric value' ); }\n\t\treturn [ model, value - val ];\n\t}), opts );\n};\n\nContext.prototype.toggle = function toggle ( keypath, options ) {\n\tvar ref = findModel( this, keypath );\n\t\tvar model = ref.model;\n\treturn set( this.ractive, [ [ model, !model.get() ] ], options );\n};\n\nContext.prototype.unlink = function unlink ( dest ) {\n\tvar here = findModel( this, dest ).model;\n\tvar promise = runloop.start( this.ractive, true );\n\tif ( here.owner && here.owner._link ) { here.owner.unlink(); }\n\trunloop.end();\n\treturn promise;\n};\n\nContext.prototype.unshift = function unshift ( keypath ) {\n\t\tvar add = [], len = arguments.length - 1;\n\t\twhile ( len-- > 0 ) add[ len ] = arguments[ len + 1 ];\n\n\treturn modelUnshift( findModel( this, keypath ).model, add );\n};\n\nContext.prototype.update = function update$$1 ( keypath, options ) {\n\treturn update$1( this.ractive, findModel( this, keypath ).model, options );\n};\n\nContext.prototype.updateModel = function updateModel ( keypath, cascade ) {\n\tvar ref = findModel( this, keypath );\n\t\tvar model = ref.model;\n\tvar promise = runloop.start( this.ractive, true );\n\tmodel.updateFromBindings( cascade );\n\trunloop.end();\n\treturn promise;\n};\n\n// two-way binding related helpers\nContext.prototype.isBound = function isBound () {\n\tvar ref = this.getBindingModel( this );\n\t\tvar model = ref.model;\n\treturn !!model;\n};\n\nContext.prototype.getBindingPath = function getBindingPath ( ractive ) {\n\tvar ref = this.getBindingModel( this );\n\t\tvar model = ref.model;\n\t\tvar instance = ref.instance;\n\tif ( model ) { return model.getKeypath( ractive || instance ); }\n};\n\nContext.prototype.getBinding = function getBinding () {\n\tvar ref = this.getBindingModel( this );\n\t\tvar model = ref.model;\n\tif ( model ) { return model.get( true ); }\n};\n\nContext.prototype.getBindingModel = function getBindingModel ( ctx ) {\n\tvar el = ctx.element;\n\treturn { model: el.binding && el.binding.model, instance: el.parentFragment.ractive };\n};\n\nContext.prototype.setBinding = function setBinding ( value ) {\n\tvar ref = this.getBindingModel( this );\n\t\tvar model = ref.model;\n\treturn set( this.ractive, [ [ model, value ] ] );\n};\n\nObject.defineProperties( Context.prototype, prototypeAccessors );\n\nContext.forRactive = getRactiveContext;\n// circular deps are fun\nextern.Context = Context;\n\n// TODO: at some point perhaps this could support relative * keypaths?\nfunction build$1 ( ctx, keypath, value ) {\n\tvar sets = [];\n\n\t// set multiple keypaths in one go\n\tif ( isObject( keypath ) ) {\n\t\tfor ( var k in keypath ) {\n\t\t\tif ( keypath.hasOwnProperty( k ) ) {\n\t\t\t\tsets.push( [ findModel( ctx, k ).model, keypath[k] ] );\n\t\t\t}\n\t\t}\n\n\t}\n\t// set a single keypath\n\telse {\n\t\tsets.push( [ findModel( ctx, keypath ).model, value ] );\n\t}\n\n\treturn sets;\n}\n\nfunction findModel ( ctx, path ) {\n\tvar frag = ctx.fragment;\n\n\tif ( typeof path !== 'string' ) {\n\t\treturn { model: frag.findContext(), instance: path };\n\t}\n\n\treturn { model: resolveReference( frag, path ), instance: frag.ractive };\n}\n\nfunction Ractive$fire ( eventName ) {\n\tvar args = [], len = arguments.length - 1;\n\twhile ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n\t// watch for reproxy\n\tif ( args[0] instanceof Context ) {\n\t\tvar proto = args.shift();\n\t\tvar ctx = Object.create( proto );\n\t\tObject.assign( ctx, proto );\n\t\treturn fireEvent( this, eventName, ctx, args );\n\t} else {\n\t\treturn fireEvent( this, eventName, Context.forRactive( this ), args );\n\t}\n}\n\nfunction Ractive$get ( keypath, opts ) {\n\tif ( typeof keypath !== 'string' ) { return this.viewmodel.get( true, keypath ); }\n\n\tvar keys = splitKeypath( keypath );\n\tvar key = keys[0];\n\n\tvar model;\n\n\tif ( !this.viewmodel.has( key ) ) {\n\t\t// if this is an inline component, we may need to create\n\t\t// an implicit mapping\n\t\tif ( this.component && !this.isolated ) {\n\t\t\tmodel = resolveReference( this.component.parentFragment, key );\n\n\t\t\tif ( model ) {\n\t\t\t\tthis.viewmodel.map( key, model, { implicit: true } );\n\t\t\t}\n\t\t}\n\t}\n\n\tmodel = this.viewmodel.joinAll( keys );\n\treturn model.get( true, opts );\n}\n\nvar query = doc && doc.querySelector;\n\nvar staticInfo = function( node ) {\n\tif ( typeof node === 'string' && query ) {\n\t\tnode = query.call( document, node );\n\t}\n\n\tvar instances;\n\tif ( node ) {\n\t\tif ( node._ractive ) {\n\t\t\treturn node._ractive.proxy.getContext();\n\t\t} else if ( ( instances = node.__ractive_instances__ ) && instances.length === 1 ) {\n\t\t\treturn getRactiveContext( instances[0] );\n\t\t}\n\t}\n};\n\nfunction getNodeInfo( node, options ) {\n\tif ( typeof node === 'string' ) {\n\t\tnode = this.find( node, options );\n\t}\n\n\treturn staticInfo( node );\n}\n\nvar html   = 'http://www.w3.org/1999/xhtml';\nvar mathml = 'http://www.w3.org/1998/Math/MathML';\nvar svg$1    = 'http://www.w3.org/2000/svg';\nvar xlink  = 'http://www.w3.org/1999/xlink';\nvar xml    = 'http://www.w3.org/XML/1998/namespace';\nvar xmlns  = 'http://www.w3.org/2000/xmlns';\n\nvar namespaces = { html: html, mathml: mathml, svg: svg$1, xlink: xlink, xml: xml, xmlns: xmlns };\n\nvar createElement;\nvar matches;\nvar div;\nvar methodNames;\nvar unprefixed;\nvar prefixed;\nvar i;\nvar j;\nvar makeFunction;\n\n// Test for SVG support\nif ( !svg ) {\n\tcreateElement = function ( type, ns, extend ) {\n\t\tif ( ns && ns !== html ) {\n\t\t\tthrow 'This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you\\'re trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information';\n\t\t}\n\n\t\treturn extend ?\n\t\t\tdoc.createElement( type, extend ) :\n\t\t\tdoc.createElement( type );\n\t};\n} else {\n\tcreateElement = function ( type, ns, extend ) {\n\t\tif ( !ns || ns === html ) {\n\t\t\treturn extend ?\n\t\t\t\tdoc.createElement( type, extend ) :\n\t\t\t\tdoc.createElement( type );\n\t\t}\n\n\t\treturn extend ?\n\t\t\tdoc.createElementNS( ns, type, extend ) :\n\t\t\tdoc.createElementNS( ns, type );\n\t};\n}\n\nfunction createDocumentFragment () {\n\treturn doc.createDocumentFragment();\n}\n\nfunction getElement ( input ) {\n\tvar output;\n\n\tif ( !input || typeof input === 'boolean' ) { return; }\n\n\tif ( !win || !doc || !input ) {\n\t\treturn null;\n\t}\n\n\t// We already have a DOM node - no work to do. (Duck typing alert!)\n\tif ( input.nodeType ) {\n\t\treturn input;\n\t}\n\n\t// Get node from string\n\tif ( typeof input === 'string' ) {\n\t\t// try ID first\n\t\toutput = doc.getElementById( input );\n\n\t\t// then as selector, if possible\n\t\tif ( !output && doc.querySelector ) {\n\t\t\toutput = doc.querySelector( input );\n\t\t}\n\n\t\t// did it work?\n\t\tif ( output && output.nodeType ) {\n\t\t\treturn output;\n\t\t}\n\t}\n\n\t// If we've been given a collection (jQuery, Zepto etc), extract the first item\n\tif ( input[0] && input[0].nodeType ) {\n\t\treturn input[0];\n\t}\n\n\treturn null;\n}\n\nif ( !isClient ) {\n\tmatches = null;\n} else {\n\tdiv = createElement( 'div' );\n\tmethodNames = [ 'matches', 'matchesSelector' ];\n\n\tmakeFunction = function ( methodName ) {\n\t\treturn function ( node, selector ) {\n\t\t\treturn node[ methodName ]( selector );\n\t\t};\n\t};\n\n\ti = methodNames.length;\n\n\twhile ( i-- && !matches ) {\n\t\tunprefixed = methodNames[i];\n\n\t\tif ( div[ unprefixed ] ) {\n\t\t\tmatches = makeFunction( unprefixed );\n\t\t} else {\n\t\t\tj = vendors.length;\n\t\t\twhile ( j-- ) {\n\t\t\t\tprefixed = vendors[i] + unprefixed.substr( 0, 1 ).toUpperCase() + unprefixed.substring( 1 );\n\n\t\t\t\tif ( div[ prefixed ] ) {\n\t\t\t\t\tmatches = makeFunction( prefixed );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// IE8...\n\tif ( !matches ) {\n\t\tmatches = function ( node, selector ) {\n\t\t\tvar parentNode, i;\n\n\t\t\tparentNode = node.parentNode;\n\n\t\t\tif ( !parentNode ) {\n\t\t\t\t// empty dummy <div>\n\t\t\t\tdiv.innerHTML = '';\n\n\t\t\t\tparentNode = div;\n\t\t\t\tnode = node.cloneNode();\n\n\t\t\t\tdiv.appendChild( node );\n\t\t\t}\n\n\t\t\tvar nodes = parentNode.querySelectorAll( selector );\n\n\t\t\ti = nodes.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( nodes[i] === node ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\t}\n}\n\nfunction detachNode ( node ) {\n\t// stupid ie\n\tif ( node && typeof node.parentNode !== 'unknown' && node.parentNode ) { // eslint-disable-line valid-typeof\n\t\tnode.parentNode.removeChild( node );\n\t}\n\n\treturn node;\n}\n\nfunction safeToStringValue ( value ) {\n\treturn ( value == null || !value.toString ) ? '' : '' + value;\n}\n\nfunction safeAttributeString ( string ) {\n\treturn safeToStringValue( string )\n\t\t.replace( /&/g, '&amp;' )\n\t\t.replace( /\"/g, '&quot;' )\n\t\t.replace( /'/g, '&#39;' );\n}\n\nvar insertHook = new Hook( 'insert' );\n\nfunction Ractive$insert ( target, anchor ) {\n\tif ( !this.fragment.rendered ) {\n\t\t// TODO create, and link to, documentation explaining this\n\t\tthrow new Error( 'The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.' );\n\t}\n\n\ttarget = getElement( target );\n\tanchor = getElement( anchor ) || null;\n\n\tif ( !target ) {\n\t\tthrow new Error( 'You must specify a valid target to insert into' );\n\t}\n\n\ttarget.insertBefore( this.detach(), anchor );\n\tthis.el = target;\n\n\t( target.__ractive_instances__ || ( target.__ractive_instances__ = [] ) ).push( this );\n\tthis.isDetached = false;\n\n\tfireInsertHook( this );\n}\n\nfunction fireInsertHook( ractive ) {\n\tinsertHook.fire( ractive );\n\n\tractive.findAllComponents('*').forEach( function (child) {\n\t\tfireInsertHook( child.instance );\n\t});\n}\n\nfunction link( there, here, options ) {\n\tif ( here === there || (there + '.').indexOf( here + '.' ) === 0 || (here + '.').indexOf( there + '.' ) === 0 ) {\n\t\tthrow new Error( 'A keypath cannot be linked to itself.' );\n\t}\n\n\tvar promise = runloop.start();\n\tvar model;\n\tvar target = ( options && options.ractive ) || this;\n\n\t// may need to allow a mapping to resolve implicitly\n\tvar sourcePath = splitKeypath( there );\n\tif ( !target.viewmodel.has( sourcePath[0] ) && target.component ) {\n\t\tmodel = resolveReference( target.component.parentFragment, sourcePath[0] );\n\t\tmodel = model.joinAll( sourcePath.slice( 1 ) );\n\t}\n\n\tthis.viewmodel.joinAll( splitKeypath( here ), { lastLink: false } ).link( model || target.viewmodel.joinAll( sourcePath ), there );\n\n\trunloop.end();\n\n\treturn promise;\n}\n\nvar Observer = function Observer ( ractive, model, callback, options ) {\n\tthis.context = options.context || ractive;\n\tthis.callback = callback;\n\tthis.ractive = ractive;\n\tthis.keypath = options.keypath;\n\tthis.options = options;\n\n\tif ( model ) { this.resolved( model ); }\n\n\tif ( typeof options.old === 'function' ) {\n\t\tthis.oldContext = Object.create( ractive );\n\t\tthis.old = options.old;\n\t} else {\n\t\tthis.old = old;\n\t}\n\n\tif ( options.init !== false ) {\n\t\tthis.dirty = true;\n\t\tthis.dispatch();\n\t} else {\n\t\tthis.oldValue = this.old.call( this.oldContext, undefined, this.newValue );\n\t}\n\n\tthis.dirty = false;\n};\n\nObserver.prototype.cancel = function cancel () {\n\tthis.cancelled = true;\n\tif ( this.model ) {\n\t\tthis.model.unregister( this );\n\t} else {\n\t\tthis.resolver.unbind();\n\t}\n\tremoveFromArray( this.ractive._observers, this );\n};\n\nObserver.prototype.dispatch = function dispatch () {\n\tif ( !this.cancelled ) {\n\t\tthis.callback.call( this.context, this.newValue, this.oldValue, this.keypath );\n\t\tthis.oldValue = this.old.call( this.oldContext, this.oldValue, this.model ? this.model.get() : this.newValue );\n\t\tthis.dirty = false;\n\t}\n};\n\nObserver.prototype.handleChange = function handleChange () {\n\t\tvar this$1 = this;\n\n\tif ( !this.dirty ) {\n\t\tvar newValue = this.model.get();\n\t\tif ( isEqual( newValue, this.oldValue ) ) { return; }\n\n\t\tthis.newValue = newValue;\n\n\t\tif ( this.options.strict && this.newValue === this.oldValue ) { return; }\n\n\t\trunloop.addObserver( this, this.options.defer );\n\t\tthis.dirty = true;\n\n\t\tif ( this.options.once ) { runloop.scheduleTask( function () { return this$1.cancel(); } ); }\n\t}\n};\n\nObserver.prototype.rebind = function rebind ( next, previous ) {\n\t\tvar this$1 = this;\n\n\tnext = rebindMatch( this.keypath, next, previous );\n\t// TODO: set up a resolver if next is undefined?\n\tif ( next === this.model ) { return false; }\n\n\tif ( this.model ) { this.model.unregister( this ); }\n\tif ( next ) { next.addShuffleTask( function () { return this$1.resolved( next ); } ); }\n};\n\nObserver.prototype.resolved = function resolved ( model ) {\n\tthis.model = model;\n\n\tthis.oldValue = undefined;\n\tthis.newValue = model.get();\n\n\tmodel.register( this );\n};\n\nfunction old ( previous, next ) {\n\treturn next;\n}\n\nvar star$1 = /\\*+/g;\n\nvar PatternObserver = function PatternObserver ( ractive, baseModel, keys, callback, options ) {\n\tvar this$1 = this;\n\n\tthis.context = options.context || ractive;\n\tthis.ractive = ractive;\n\tthis.baseModel = baseModel;\n\tthis.keys = keys;\n\tthis.callback = callback;\n\n\tvar pattern = keys.join( '\\\\.' ).replace( star$1, '(.+)' );\n\tvar baseKeypath = this.baseKeypath = baseModel.getKeypath( ractive );\n\tthis.pattern = new RegExp( (\"^\" + (baseKeypath ? baseKeypath + '\\\\.' : '') + pattern + \"$\") );\n\tthis.recursive = keys.length === 1 && keys[0] === '**';\n\tif ( this.recursive ) { this.keys = [ '*' ]; }\n\n\tthis.oldValues = {};\n\tthis.newValues = {};\n\n\tthis.defer = options.defer;\n\tthis.once = options.once;\n\tthis.strict = options.strict;\n\n\tthis.dirty = false;\n\tthis.changed = [];\n\tthis.partial = false;\n\tthis.links = options.links;\n\n\tvar models = baseModel.findMatches( this.keys );\n\n\tmodels.forEach( function (model) {\n\t\tthis$1.newValues[ model.getKeypath( this$1.ractive ) ] = model.get();\n\t});\n\n\tif ( options.init !== false ) {\n\t\tthis.dispatch();\n\t} else {\n\t\tthis.oldValues = this.newValues;\n\t}\n\n\tbaseModel.registerPatternObserver( this );\n};\n\nPatternObserver.prototype.cancel = function cancel () {\n\tthis.baseModel.unregisterPatternObserver( this );\n\tremoveFromArray( this.ractive._observers, this );\n};\n\nPatternObserver.prototype.dispatch = function dispatch () {\n\t\tvar this$1 = this;\n\n\tvar newValues = this.newValues;\n\tthis.newValues = {};\n\tObject.keys( newValues ).forEach( function (keypath) {\n\t\tif ( this$1.newKeys && !this$1.newKeys[ keypath ] ) { return; }\n\n\t\tvar newValue = newValues[ keypath ];\n\t\tvar oldValue = this$1.oldValues[ keypath ];\n\n\t\tif ( this$1.strict && newValue === oldValue ) { return; }\n\t\tif ( isEqual( newValue, oldValue ) ) { return; }\n\n\t\tvar args = [ newValue, oldValue, keypath ];\n\t\tif ( keypath ) {\n\t\t\tvar wildcards = this$1.pattern.exec( keypath );\n\t\t\tif ( wildcards ) {\n\t\t\t\targs = args.concat( wildcards.slice( 1 ) );\n\t\t\t}\n\t\t}\n\n\t\tthis$1.callback.apply( this$1.context, args );\n\t});\n\n\tif ( this.partial ) {\n\t\tfor ( var k in newValues ) {\n\t\t\tthis$1.oldValues[k] = newValues[k];\n\t\t}\n\t} else {\n\t\tthis.oldValues = newValues;\n\t}\n\n\tthis.newKeys = null;\n\tthis.dirty = false;\n};\n\nPatternObserver.prototype.notify = function notify ( key ) {\n\tthis.changed.push( key );\n};\n\nPatternObserver.prototype.shuffle = function shuffle ( newIndices ) {\n\t\tvar this$1 = this;\n\n\tif ( !Array.isArray( this.baseModel.value ) ) { return; }\n\n\tvar base = this.baseKeypath = this.baseModel.getKeypath( this.ractive );\n\tvar max = this.baseModel.value.length;\n\tvar suffix = this.keys.length > 1 ? '.' + this.keys.slice( 1 ).join( '.' ) : '';\n\n\tthis.newKeys = {};\n\tfor ( var i = 0; i < newIndices.length; i++ ) {\n\t\tif ( newIndices[ i ] === -1 || newIndices[ i ] === i ) { continue; }\n\t\tthis$1.newKeys[ (base + \".\" + i + suffix) ] = true;\n\t}\n\n\tfor ( var i$1 = newIndices.touchedFrom; i$1 < max; i$1++ ) {\n\t\tthis$1.newKeys[ (base + \".\" + i$1 + suffix) ] = true;\n\t}\n};\n\nPatternObserver.prototype.handleChange = function handleChange () {\n\t\tvar this$1 = this;\n\n\tif ( !this.dirty || this.changed.length ) {\n\t\tif ( !this.dirty ) { this.newValues = {}; }\n\n\t\tif ( !this.changed.length ) {\n\t\t\tthis.baseModel.findMatches( this.keys ).forEach( function (model) {\n\t\t\t\tvar keypath = model.getKeypath( this$1.ractive );\n\t\t\t\tthis$1.newValues[ keypath ] = model.get();\n\t\t\t});\n\t\t\tthis.partial = false;\n\t\t} else {\n\t\t\tvar count = 0;\n\n\t\t\tif ( this.recursive ) {\n\t\t\t\tthis.changed.forEach( function (keys) {\n\t\t\t\t\tvar model = this$1.baseModel.joinAll( keys );\n\t\t\t\t\tif ( model.isLink && !this$1.links ) { return; }\n\t\t\t\t\tcount++;\n\t\t\t\t\tthis$1.newValues[ model.getKeypath( this$1.ractive ) ] = model.get();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tvar ok = this.baseModel.isRoot ?\n\t\t\t\t\tthis.changed.map( function (keys) { return keys.map( escapeKey ).join( '.' ); } ) :\n\t\t\t\t\tthis.changed.map( function (keys) { return this$1.baseKeypath + '.' + keys.map( escapeKey ).join( '.' ); } );\n\n\t\t\t\tthis.baseModel.findMatches( this.keys ).forEach( function (model) {\n\t\t\t\t\tvar keypath = model.getKeypath( this$1.ractive );\n\t\t\t\t\tvar check = function (k) {\n\t\t\t\t\t\treturn ( k.indexOf( keypath ) === 0 && ( k.length === keypath.length || k[ keypath.length ] === '.' ) ) ||\n\t\t\t\t\t\t\t( keypath.indexOf( k ) === 0 && ( k.length === keypath.length || keypath[ k.length ] === '.' ) );\n\n\t\t\t\t\t};\n\n\t\t\t\t\t// is this model on a changed keypath?\n\t\t\t\t\tif ( ok.filter( check ).length ) {\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t\tthis$1.newValues[ keypath ] = model.get();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// no valid change triggered, so bail to avoid breakage\n\t\t\tif ( !count ) { return; }\n\n\t\t\tthis.partial = true;\n\t\t}\n\n\t\trunloop.addObserver( this, this.defer );\n\t\tthis.dirty = true;\n\t\tthis.changed.length = 0;\n\n\t\tif ( this.once ) { this.cancel(); }\n\t}\n};\n\nfunction negativeOne () {\n\treturn -1;\n}\n\nvar ArrayObserver = function ArrayObserver ( ractive, model, callback, options ) {\n\tthis.ractive = ractive;\n\tthis.model = model;\n\tthis.keypath = model.getKeypath();\n\tthis.callback = callback;\n\tthis.options = options;\n\n\tthis.pending = null;\n\n\tmodel.register( this );\n\n\tif ( options.init !== false ) {\n\t\tthis.sliced = [];\n\t\tthis.shuffle([]);\n\t\tthis.dispatch();\n\t} else {\n\t\tthis.sliced = this.slice();\n\t}\n};\n\nArrayObserver.prototype.cancel = function cancel () {\n\tthis.model.unregister( this );\n\tremoveFromArray( this.ractive._observers, this );\n};\n\nArrayObserver.prototype.dispatch = function dispatch () {\n\tthis.callback( this.pending );\n\tthis.pending = null;\n\tif ( this.options.once ) { this.cancel(); }\n};\n\nArrayObserver.prototype.handleChange = function handleChange () {\n\tif ( this.pending ) {\n\t\t// post-shuffle\n\t\trunloop.addObserver( this, this.options.defer );\n\t} else {\n\t\t// entire array changed\n\t\tthis.shuffle( this.sliced.map( negativeOne ) );\n\t\tthis.handleChange();\n\t}\n};\n\nArrayObserver.prototype.shuffle = function shuffle ( newIndices ) {\n\t\tvar this$1 = this;\n\n\tvar newValue = this.slice();\n\n\tvar inserted = [];\n\tvar deleted = [];\n\tvar start;\n\n\tvar hadIndex = {};\n\n\tnewIndices.forEach( function ( newIndex, oldIndex ) {\n\t\thadIndex[ newIndex ] = true;\n\n\t\tif ( newIndex !== oldIndex && start === undefined ) {\n\t\t\tstart = oldIndex;\n\t\t}\n\n\t\tif ( newIndex === -1 ) {\n\t\t\tdeleted.push( this$1.sliced[ oldIndex ] );\n\t\t}\n\t});\n\n\tif ( start === undefined ) { start = newIndices.length; }\n\n\tvar len = newValue.length;\n\tfor ( var i = 0; i < len; i += 1 ) {\n\t\tif ( !hadIndex[i] ) { inserted.push( newValue[i] ); }\n\t}\n\n\tthis.pending = { inserted: inserted, deleted: deleted, start: start };\n\tthis.sliced = newValue;\n};\n\nArrayObserver.prototype.slice = function slice () {\n\tvar value = this.model.get();\n\treturn Array.isArray( value ) ? value.slice() : [];\n};\n\nfunction observe ( keypath, callback, options ) {\n\tvar this$1 = this;\n\n\tvar observers = [];\n\tvar map;\n\tvar opts;\n\n\tif ( isObject( keypath ) ) {\n\t\tmap = keypath;\n\t\topts = callback || {};\n\t} else {\n\t\tif ( typeof keypath === 'function' ) {\n\t\t\tmap = { '': keypath };\n\t\t\topts = callback || {};\n\t\t} else {\n\t\t\tmap = {};\n\t\t\tmap[ keypath ] = callback;\n\t\t\topts = options || {};\n\t\t}\n\t}\n\n\tvar silent = false;\n\tObject.keys( map ).forEach( function (keypath) {\n\t\tvar callback = map[ keypath ];\n\t\tvar caller = function () {\n\t\t\tvar args = [], len = arguments.length;\n\t\t\twhile ( len-- ) args[ len ] = arguments[ len ];\n\n\t\t\tif ( silent ) { return; }\n\t\t\treturn callback.apply( this, args );\n\t\t};\n\n\t\tvar keypaths = keypath.split( ' ' );\n\t\tif ( keypaths.length > 1 ) { keypaths = keypaths.filter( function (k) { return k; } ); }\n\n\t\tkeypaths.forEach( function (keypath) {\n\t\t\topts.keypath = keypath;\n\t\t\tvar observer = createObserver( this$1, keypath, caller, opts );\n\t\t\tif ( observer ) { observers.push( observer ); }\n\t\t});\n\t});\n\n\t// add observers to the Ractive instance, so they can be\n\t// cancelled on ractive.teardown()\n\tthis._observers.push.apply( this._observers, observers );\n\n\treturn {\n\t\tcancel: function () { return observers.forEach( function (o) { return o.cancel(); } ); },\n\t\tisSilenced: function () { return silent; },\n\t\tsilence: function () { return silent = true; },\n\t\tresume: function () { return silent = false; }\n\t};\n}\n\nfunction createObserver ( ractive, keypath, callback, options ) {\n\tvar keys = splitKeypath( keypath );\n\tvar wildcardIndex = keys.indexOf( '*' );\n\tif ( !~wildcardIndex ) { wildcardIndex = keys.indexOf( '**' ); }\n\n\toptions.fragment = options.fragment || ractive.fragment;\n\n\tvar model;\n\tif ( !options.fragment ) {\n\t\tmodel = ractive.viewmodel.joinKey( keys[0] );\n\t} else {\n\t\t// .*.whatever relative wildcard is a special case because splitkeypath doesn't handle the leading .\n\t\tif ( ~keys[0].indexOf( '.*' ) ) {\n\t\t\tmodel = options.fragment.findContext();\n\t\t\twildcardIndex = 0;\n\t\t\tkeys[0] = keys[0].slice( 1 );\n\t\t} else {\n\t\t\tmodel = wildcardIndex === 0 ? options.fragment.findContext() : resolveReference( options.fragment, keys[0] );\n\t\t}\n\t}\n\n\t// the model may not exist key\n\tif ( !model ) { model = ractive.viewmodel.joinKey( keys[0] ); }\n\n\tif ( !~wildcardIndex ) {\n\t\tmodel = model.joinAll( keys.slice( 1 ) );\n\t\tif ( options.array ) {\n\t\t\treturn new ArrayObserver( ractive, model, callback, options );\n\t\t} else {\n\t\t\treturn new Observer( ractive, model, callback, options );\n\t\t}\n\t} else {\n\t\tvar double = keys.indexOf( '**' );\n\t\tif ( ~double ) {\n\t\t\tif ( double + 1 !== keys.length || ~keys.indexOf( '*' ) ) {\n\t\t\t\twarnOnceIfDebug( \"Recursive observers may only specify a single '**' at the end of the path.\" );\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tmodel = model.joinAll( keys.slice( 1, wildcardIndex ) );\n\n\t\treturn new PatternObserver( ractive, model, keys.slice( wildcardIndex ), callback, options );\n\t}\n}\n\nvar onceOptions = { init: false, once: true };\n\nfunction observeOnce ( keypath, callback, options ) {\n\tif ( isObject( keypath ) || typeof keypath === 'function' ) {\n\t\toptions = Object.assign( callback || {}, onceOptions );\n\t\treturn this.observe( keypath, options );\n\t}\n\n\toptions = Object.assign( options || {}, onceOptions );\n\treturn this.observe( keypath, callback, options );\n}\n\nvar trim = function (str) { return str.trim(); };\n\nvar notEmptyString = function (str) { return str !== ''; };\n\nfunction Ractive$off ( eventName, callback ) {\n\tvar this$1 = this;\n\n\t// if no event is specified, remove _all_ event listeners\n\tif ( !eventName ) {\n\t\tthis._subs = {};\n\t} else {\n\t\t// Handle multiple space-separated event names\n\t\tvar eventNames = eventName.split( ' ' ).map( trim ).filter( notEmptyString );\n\n\t\teventNames.forEach( function (event) {\n\t\t\tvar subs = this$1._subs[ event ];\n\t\t\t// if given a specific callback to remove, remove only it\n\t\t\tif ( subs && callback ) {\n\t\t\t\tvar entry = subs.find( function (s) { return s.callback === callback; } );\n\t\t\t\tif ( entry ) {\n\t\t\t\t\tremoveFromArray( subs, entry );\n\t\t\t\t\tentry.off = true;\n\n\t\t\t\t\tif ( event.indexOf( '.' ) ) { this$1._nsSubs--; }\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// otherwise, remove all listeners for this event\n\t\t\telse if ( subs ) {\n\t\t\t\tif ( event.indexOf( '.' ) ) { this$1._nsSubs -= subs.length; }\n\t\t\t\tsubs.length = 0;\n\t\t\t}\n\t\t});\n\t}\n\n\treturn this;\n}\n\nfunction Ractive$on ( eventName, callback ) {\n\tvar this$1 = this;\n\n\t// eventName may already be a map\n\tvar map = typeof eventName === 'object' ? eventName : {};\n\t// or it may be a string along with a callback\n\tif ( typeof eventName === 'string' ) { map[ eventName ] = callback; }\n\n\tvar silent = false;\n\tvar events = [];\n\n\tvar loop = function ( k ) {\n\t\tvar callback$1 = map[k];\n\t\tvar caller = function () {\n\t\t\tvar args = [], len = arguments.length;\n\t\t\twhile ( len-- ) args[ len ] = arguments[ len ];\n\n\t\t\tif ( !silent ) { return callback$1.apply( this, args ); }\n\t\t};\n\t\tvar entry = {\n\t\t\tcallback: callback$1,\n\t\t\thandler: caller\n\t\t};\n\n\t\tif ( map.hasOwnProperty( k ) ) {\n\t\t\tvar names = k.split( ' ' ).map( trim ).filter( notEmptyString );\n\t\t\tnames.forEach( function (n) {\n\t\t\t\t( this$1._subs[ n ] || ( this$1._subs[ n ] = [] ) ).push( entry );\n\t\t\t\tif ( n.indexOf( '.' ) ) { this$1._nsSubs++; }\n\t\t\t\tevents.push( [ n, entry ] );\n\t\t\t});\n\t\t}\n\t};\n\n\tfor ( var k in map ) loop( k );\n\n\treturn {\n\t\tcancel: function () { return events.forEach( function (e) { return this$1.off( e[0], e[1].callback ); } ); },\n\t\tisSilenced: function () { return silent; },\n\t\tsilence: function () { return silent = true; },\n\t\tresume: function () { return silent = false; }\n\t};\n}\n\nfunction Ractive$once ( eventName, handler ) {\n\tvar listener = this.on( eventName, function () {\n\t\thandler.apply( this, arguments );\n\t\tlistener.cancel();\n\t});\n\n\t// so we can still do listener.cancel() manually\n\treturn listener;\n}\n\nvar pop = makeArrayMethod( 'pop' ).path;\n\nvar push = makeArrayMethod( 'push' ).path;\n\nfunction readLink ( keypath, options ) {\n\tif ( options === void 0 ) options = {};\n\n\tvar path = splitKeypath( keypath );\n\n\tif ( this.viewmodel.has( path[0] ) ) {\n\t\tvar model = this.viewmodel.joinAll( path );\n\n\t\tif ( !model.isLink ) { return; }\n\n\t\twhile ( ( model = model.target ) && options.canonical !== false ) {\n\t\t\tif ( !model.isLink ) { break; }\n\t\t}\n\n\t\tif ( model ) { return { ractive: model.root.ractive, keypath: model.getKeypath() }; }\n\t}\n}\n\nvar PREFIX = '/* Ractive.js component styles */';\n\n// Holds current definitions of styles.\nvar styleDefinitions = [];\n\n// Flag to tell if we need to update the CSS\nvar isDirty = false;\n\n// These only make sense on the browser. See additional setup below.\nvar styleElement = null;\nvar useCssText = null;\n\nfunction addCSS( styleDefinition ) {\n\tstyleDefinitions.push( styleDefinition );\n\tisDirty = true;\n}\n\nfunction applyCSS() {\n\n\t// Apply only seems to make sense when we're in the DOM. Server-side renders\n\t// can call toCSS to get the updated CSS.\n\tif ( !doc || !isDirty ) { return; }\n\n\tif ( useCssText ) {\n\t\tstyleElement.styleSheet.cssText = getCSS( null );\n\t} else {\n\t\tstyleElement.innerHTML = getCSS( null );\n\t}\n\n\tisDirty = false;\n}\n\nfunction getCSS( cssIds ) {\n\n\tvar filteredStyleDefinitions = cssIds ? styleDefinitions.filter( function (style) { return ~cssIds.indexOf( style.id ); } ) : styleDefinitions;\n\n\treturn filteredStyleDefinitions.reduce( function ( styles, style ) { return (styles + \"\\n\\n/* {\" + (style.id) + \"} */\\n\" + (style.styles)); }, PREFIX );\n\n}\n\n// If we're on the browser, additional setup needed.\nif ( doc && ( !styleElement || !styleElement.parentNode ) ) {\n\n\tstyleElement = doc.createElement( 'style' );\n\tstyleElement.type = 'text/css';\n\n\tdoc.getElementsByTagName( 'head' )[ 0 ].appendChild( styleElement );\n\n\tuseCssText = !!styleElement.styleSheet;\n}\n\nfunction fillGaps ( target ) {\n\tvar sources = [], len = arguments.length - 1;\n\twhile ( len-- > 0 ) sources[ len ] = arguments[ len + 1 ];\n\n\n\tfor (var i = 0; i < sources.length; i++){\n\t\tvar source = sources[i];\n\t\tfor ( var key in source ) {\n\t\t\t// Source can be a prototype-less object.\n\t\t\tif ( key in target || !Object.prototype.hasOwnProperty.call( source, key ) ) { continue; }\n\t\t\ttarget[ key ] = source[ key ];\n\t\t}\n\t}\n\n\treturn target;\n}\n\nfunction toPairs ( obj ) {\n\tif ( obj === void 0 ) obj = {};\n\n\tvar pairs = [];\n\tfor ( var key in obj ) {\n\t\t// Source can be a prototype-less object.\n\t\tif ( !Object.prototype.hasOwnProperty.call( obj, key ) ) { continue; }\n\t\tpairs.push( [ key, obj[ key ] ] );\n\t}\n\treturn pairs;\n}\n\nvar adaptConfigurator = {\n\textend: function ( Parent, proto, options ) {\n\t\tproto.adapt = combine( proto.adapt, ensureArray( options.adapt ) );\n\t},\n\n\tinit: function init () {}\n};\n\nvar remove = /\\/\\*(?:[\\s\\S]*?)\\*\\//g;\nvar escape = /url\\(\\s*(['\"])(?:\\\\[\\s\\S]|(?!\\1).)*\\1\\s*\\)|url\\((?:\\\\[\\s\\S]|[^)])*\\)|(['\"])(?:\\\\[\\s\\S]|(?!\\2).)*\\2/gi;\nvar value = /\\0(\\d+)/g;\n\n// Removes comments and strings from the given CSS to make it easier to parse.\n// Callback receives the cleaned CSS and a function which can be used to put\n// the removed strings back in place after parsing is done.\nvar cleanCss = function ( css, callback, additionalReplaceRules ) {\n\tif ( additionalReplaceRules === void 0 ) additionalReplaceRules = [];\n\n\tvar values = [];\n\tvar reconstruct = function (css) { return css.replace( value, function ( match, n ) { return values[ n ]; } ); };\n\tcss = css.replace( escape, function (match) { return (\"\\u0000\" + (values.push( match ) - 1)); }).replace( remove, '' );\n\n\tadditionalReplaceRules.forEach( function ( pattern ) {\n\t\tcss = css.replace( pattern, function (match) { return (\"\\u0000\" + (values.push( match ) - 1)); } );\n\t});\n\n\treturn callback( css, reconstruct );\n};\n\nvar selectorsPattern = /(?:^|\\}|\\{)\\s*([^\\{\\}\\0]+)\\s*(?=\\{)/g;\nvar keyframesDeclarationPattern = /@keyframes\\s+[^\\{\\}]+\\s*\\{(?:[^{}]+|\\{[^{}]+})*}/gi;\nvar selectorUnitPattern = /((?:(?:\\[[^\\]]+\\])|(?:[^\\s\\+\\>~:]))+)((?:::?[^\\s\\+\\>\\~\\(:]+(?:\\([^\\)]+\\))?)*\\s*[\\s\\+\\>\\~]?)\\s*/g;\nvar excludePattern = /^(?:@|\\d+%)/;\nvar dataRvcGuidPattern = /\\[data-ractive-css~=\"\\{[a-z0-9-]+\\}\"]/g;\n\nfunction trim$1 ( str ) {\n\treturn str.trim();\n}\n\nfunction extractString ( unit ) {\n\treturn unit.str;\n}\n\nfunction transformSelector ( selector, parent ) {\n\tvar selectorUnits = [];\n\tvar match;\n\n\twhile ( match = selectorUnitPattern.exec( selector ) ) {\n\t\tselectorUnits.push({\n\t\t\tstr: match[0],\n\t\t\tbase: match[1],\n\t\t\tmodifiers: match[2]\n\t\t});\n\t}\n\n\t// For each simple selector within the selector, we need to create a version\n\t// that a) combines with the id, and b) is inside the id\n\tvar base = selectorUnits.map( extractString );\n\n\tvar transformed = [];\n\tvar i = selectorUnits.length;\n\n\twhile ( i-- ) {\n\t\tvar appended = base.slice();\n\n\t\t// Pseudo-selectors should go after the attribute selector\n\t\tvar unit = selectorUnits[i];\n\t\tappended[i] = unit.base + parent + unit.modifiers || '';\n\n\t\tvar prepended = base.slice();\n\t\tprepended[i] = parent + ' ' + prepended[i];\n\n\t\ttransformed.push( appended.join( ' ' ), prepended.join( ' ' ) );\n\t}\n\n\treturn transformed.join( ', ' );\n}\n\nfunction transformCss ( css, id ) {\n\tvar dataAttr = \"[data-ractive-css~=\\\"{\" + id + \"}\\\"]\";\n\n\tvar transformed;\n\n\tif ( dataRvcGuidPattern.test( css ) ) {\n\t\ttransformed = css.replace( dataRvcGuidPattern, dataAttr );\n\t} else {\n\t\ttransformed = cleanCss( css, function ( css, reconstruct ) {\n\t\t\tcss = css.replace( selectorsPattern, function ( match, $1 ) {\n\t\t\t\t// don't transform at-rules and keyframe declarations\n\t\t\t\tif ( excludePattern.test( $1 ) ) { return match; }\n\n\t\t\t\tvar selectors = $1.split( ',' ).map( trim$1 );\n\t\t\t\tvar transformed = selectors\n\t\t\t\t\t.map( function (selector) { return transformSelector( selector, dataAttr ); } )\n\t\t\t\t\t.join( ', ' ) + ' ';\n\n\t\t\t\treturn match.replace( $1, transformed );\n\t\t\t});\n\n\t\t\treturn reconstruct( css );\n\t\t}, [ keyframesDeclarationPattern ]);\n\t}\n\n\treturn transformed;\n}\n\nfunction s4() {\n\treturn Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n}\n\nfunction uuid() {\n\treturn s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n}\n\nvar hasCurly = /\\{/;\nvar cssConfigurator = {\n\tname: 'css',\n\n\t// Called when creating a new component definition\n\textend: function ( Parent, proto, options ) {\n\t\tif ( !options.css ) { return; }\n\t\tvar css = typeof options.css === 'string' && !hasCurly.test( options.css ) ?\n\t\t\t( getElement( options.css ) || options.css ) :\n\t\t\toptions.css;\n\n\t\tvar id = options.cssId || uuid();\n\n\t\tif ( typeof css === 'object' ) {\n\t\t\tcss = 'textContent' in css ? css.textContent : css.innerHTML;\n\t\t}\n\n\t\tif ( !css ) { return; }\n\n\t\tvar styles = options.noCssTransform ? css : transformCss( css, id );\n\n\t\tproto.cssId = id;\n\n\t\taddCSS( { id: id, styles: styles } );\n\t},\n\n\t// Called when creating a new component instance\n\tinit: function ( Parent, target, options ) {\n\t\tif ( !options.css ) { return; }\n\n\t\twarnIfDebug( \"\\nThe css option is currently not supported on a per-instance basis and will be discarded. Instead, we recommend instantiating from a component definition with a css option.\\n\\nconst Component = Ractive.extend({\\n\\t...\\n\\tcss: '/* your css */',\\n\\t...\\n});\\n\\nconst componentInstance = new Component({ ... })\\n\\t\\t\" );\n\t}\n\n};\n\nfunction validate ( data ) {\n\t// Warn if userOptions.data is a non-POJO\n\tif ( data && data.constructor !== Object ) {\n\t\tif ( typeof data === 'function' ) {\n\t\t\t// TODO do we need to support this in the new Ractive() case?\n\t\t} else if ( typeof data !== 'object' ) {\n\t\t\tfatal( (\"data option must be an object or a function, `\" + data + \"` is not valid\") );\n\t\t} else {\n\t\t\twarnIfDebug( 'If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged' );\n\t\t}\n\t}\n}\n\nvar dataConfigurator = {\n\tname: 'data',\n\n\textend: function ( Parent, proto, options ) {\n\t\tvar key;\n\t\tvar value;\n\n\t\t// check for non-primitives, which could cause mutation-related bugs\n\t\tif ( options.data && isObject( options.data ) ) {\n\t\t\tfor ( key in options.data ) {\n\t\t\t\tvalue = options.data[ key ];\n\n\t\t\t\tif ( value && typeof value === 'object' ) {\n\t\t\t\t\tif ( isObject( value ) || Array.isArray( value ) ) {\n\t\t\t\t\t\twarnIfDebug( \"Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\\n\\n  // this...\\n  data: function () {\\n    return {\\n      myObject: {}\\n    };\\n  })\\n\\n  // instead of this:\\n  data: {\\n    myObject: {}\\n  }\" );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tproto.data = combine$1( proto.data, options.data );\n\t},\n\n\tinit: function ( Parent, ractive, options ) {\n\t\tvar result = combine$1( Parent.prototype.data, options.data );\n\n\t\tif ( typeof result === 'function' ) { result = result.call( ractive ); }\n\n\t\t// bind functions to the ractive instance at the top level,\n\t\t// unless it's a non-POJO (in which case alarm bells should ring)\n\t\tif ( result && result.constructor === Object ) {\n\t\t\tfor ( var prop in result ) {\n\t\t\t\tif ( typeof result[ prop ] === 'function' ) {\n\t\t\t\t\tvar value = result[ prop ];\n\t\t\t\t\tresult[ prop ] = bind$1( value, ractive );\n\t\t\t\t\tresult[ prop ]._r_unbound = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result || {};\n\t},\n\n\treset: function reset ( ractive ) {\n\t\tvar result = this.init( ractive.constructor, ractive, ractive.viewmodel );\n\t\tractive.viewmodel.root.set( result );\n\t\treturn true;\n\t}\n};\n\nfunction combine$1 ( parentValue, childValue ) {\n\tvalidate( childValue );\n\n\tvar parentIsFn = typeof parentValue === 'function';\n\tvar childIsFn = typeof childValue === 'function';\n\n\t// Very important, otherwise child instance can become\n\t// the default data object on Ractive or a component.\n\t// then ractive.set() ends up setting on the prototype!\n\tif ( !childValue && !parentIsFn ) {\n\t\tchildValue = {};\n\t}\n\n\t// Fast path, where we just need to copy properties from\n\t// parent to child\n\tif ( !parentIsFn && !childIsFn ) {\n\t\treturn fromProperties( childValue, parentValue );\n\t}\n\n\treturn function () {\n\t\tvar child = childIsFn ? callDataFunction( childValue, this ) : childValue;\n\t\tvar parent = parentIsFn ? callDataFunction( parentValue, this ) : parentValue;\n\n\t\treturn fromProperties( child, parent );\n\t};\n}\n\nfunction callDataFunction ( fn, context ) {\n\tvar data = fn.call( context );\n\n\tif ( !data ) { return; }\n\n\tif ( typeof data !== 'object' ) {\n\t\tfatal( 'Data function must return an object' );\n\t}\n\n\tif ( data.constructor !== Object ) {\n\t\twarnOnceIfDebug( 'Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged' );\n\t}\n\n\treturn data;\n}\n\nfunction fromProperties ( primary, secondary ) {\n\tif ( primary && secondary ) {\n\t\tfor ( var key in secondary ) {\n\t\t\tif ( !( key in primary ) ) {\n\t\t\t\tprimary[ key ] = secondary[ key ];\n\t\t\t}\n\t\t}\n\n\t\treturn primary;\n\t}\n\n\treturn primary || secondary;\n}\n\nvar TEMPLATE_VERSION = 4;\n\nvar pattern = /\\$\\{([^\\}]+)\\}/g;\n\nfunction fromExpression ( body, length ) {\n\tif ( length === void 0 ) length = 0;\n\n\tvar args = new Array( length );\n\n\twhile ( length-- ) {\n\t\targs[length] = \"_\" + length;\n\t}\n\n\t// Functions created directly with new Function() look like this:\n\t//     function anonymous (_0 /**/) { return _0*2 }\n\t//\n\t// With this workaround, we get a little more compact:\n\t//     function (_0){return _0*2}\n\treturn new Function( [], (\"return function (\" + (args.join(',')) + \"){return(\" + body + \");};\") )();\n}\n\nfunction fromComputationString ( str, bindTo ) {\n\tvar hasThis;\n\n\tvar functionBody = 'return (' + str.replace( pattern, function ( match, keypath ) {\n\t\thasThis = true;\n\t\treturn (\"__ractive.get(\\\"\" + keypath + \"\\\")\");\n\t}) + ');';\n\n\tif ( hasThis ) { functionBody = \"var __ractive = this; \" + functionBody; }\n\tvar fn = new Function( functionBody );\n\treturn hasThis ? fn.bind( bindTo ) : fn;\n}\n\nvar functions = Object.create( null );\n\nfunction getFunction ( str, i ) {\n\tif ( functions[ str ] ) { return functions[ str ]; }\n\treturn functions[ str ] = createFunction( str, i );\n}\n\nfunction addFunctions( template ) {\n\tif ( !template ) { return; }\n\n\tvar exp = template.e;\n\n\tif ( !exp ) { return; }\n\n\tObject.keys( exp ).forEach( function ( str ) {\n\t\tif ( functions[ str ] ) { return; }\n\t\tfunctions[ str ] = exp[ str ];\n\t});\n}\n\nvar leadingWhitespace = /^\\s+/;\n\nvar ParseError = function ( message ) {\n\tthis.name = 'ParseError';\n\tthis.message = message;\n\ttry {\n\t\tthrow new Error(message);\n\t} catch (e) {\n\t\tthis.stack = e.stack;\n\t}\n};\n\nParseError.prototype = Error.prototype;\n\nvar Parser = function ( str, options ) {\n\tvar item;\n\tvar lineStart = 0;\n\n\tthis.str = str;\n\tthis.options = options || {};\n\tthis.pos = 0;\n\n\tthis.lines = this.str.split( '\\n' );\n\tthis.lineEnds = this.lines.map( function (line) {\n\t\tvar lineEnd = lineStart + line.length + 1; // +1 for the newline\n\n\t\tlineStart = lineEnd;\n\t\treturn lineEnd;\n\t}, 0 );\n\n\t// Custom init logic\n\tif ( this.init ) { this.init( str, options ); }\n\n\tvar items = [];\n\n\twhile ( ( this.pos < this.str.length ) && ( item = this.read() ) ) {\n\t\titems.push( item );\n\t}\n\n\tthis.leftover = this.remaining();\n\tthis.result = this.postProcess ? this.postProcess( items, options ) : items;\n};\n\nParser.prototype = {\n\tread: function read ( converters ) {\n\t\tvar this$1 = this;\n\n\t\tvar i, item;\n\n\t\tif ( !converters ) { converters = this.converters; }\n\n\t\tvar pos = this.pos;\n\n\t\tvar len = converters.length;\n\t\tfor ( i = 0; i < len; i += 1 ) {\n\t\t\tthis$1.pos = pos; // reset for each attempt\n\n\t\t\tif ( item = converters[i]( this$1 ) ) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\tgetContextMessage: function getContextMessage ( pos, message ) {\n\t\tvar ref = this.getLinePos( pos );\n\t\tvar lineNum = ref[0];\n\t\tvar columnNum = ref[1];\n\t\tif ( this.options.contextLines === -1 ) {\n\t\t\treturn [ lineNum, columnNum, (message + \" at line \" + lineNum + \" character \" + columnNum) ];\n\t\t}\n\n\t\tvar line = this.lines[ lineNum - 1 ];\n\n\t\tvar contextUp = '';\n\t\tvar contextDown = '';\n\t\tif ( this.options.contextLines ) {\n\t\t\tvar start = lineNum - 1 - this.options.contextLines < 0 ? 0 : lineNum - 1 - this.options.contextLines;\n\t\t\tcontextUp = this.lines.slice( start, lineNum - 1 - start ).join( '\\n' ).replace( /\\t/g, '  ' );\n\t\t\tcontextDown = this.lines.slice( lineNum, lineNum + this.options.contextLines ).join( '\\n' ).replace( /\\t/g, '  ' );\n\t\t\tif ( contextUp ) {\n\t\t\t\tcontextUp += '\\n';\n\t\t\t}\n\t\t\tif ( contextDown ) {\n\t\t\t\tcontextDown = '\\n' + contextDown;\n\t\t\t}\n\t\t}\n\n\t\tvar numTabs = 0;\n\t\tvar annotation = contextUp + line.replace( /\\t/g, function ( match, char ) {\n\t\t\tif ( char < columnNum ) {\n\t\t\t\tnumTabs += 1;\n\t\t\t}\n\n\t\t\treturn '  ';\n\t\t}) + '\\n' + new Array( columnNum + numTabs ).join( ' ' ) + '^----' + contextDown;\n\n\t\treturn [ lineNum, columnNum, (message + \" at line \" + lineNum + \" character \" + columnNum + \":\\n\" + annotation) ];\n\t},\n\n\tgetLinePos: function getLinePos ( char ) {\n\t\tvar this$1 = this;\n\n\t\tvar lineNum = 0;\n\t\tvar lineStart = 0;\n\n\t\twhile ( char >= this.lineEnds[ lineNum ] ) {\n\t\t\tlineStart = this$1.lineEnds[ lineNum ];\n\t\t\tlineNum += 1;\n\t\t}\n\n\t\tvar columnNum = char - lineStart;\n\t\treturn [ lineNum + 1, columnNum + 1, char ]; // line/col should be one-based, not zero-based!\n\t},\n\n\terror: function error ( message ) {\n\t\tvar ref = this.getContextMessage( this.pos, message );\n\t\tvar lineNum = ref[0];\n\t\tvar columnNum = ref[1];\n\t\tvar msg = ref[2];\n\n\t\tvar error = new ParseError( msg );\n\n\t\terror.line = lineNum;\n\t\terror.character = columnNum;\n\t\terror.shortMessage = message;\n\n\t\tthrow error;\n\t},\n\n\tmatchString: function matchString ( string ) {\n\t\tif ( this.str.substr( this.pos, string.length ) === string ) {\n\t\t\tthis.pos += string.length;\n\t\t\treturn string;\n\t\t}\n\t},\n\n\tmatchPattern: function matchPattern ( pattern ) {\n\t\tvar match;\n\n\t\tif ( match = pattern.exec( this.remaining() ) ) {\n\t\t\tthis.pos += match[0].length;\n\t\t\treturn match[1] || match[0];\n\t\t}\n\t},\n\n\tallowWhitespace: function allowWhitespace () {\n\t\tthis.matchPattern( leadingWhitespace );\n\t},\n\n\tremaining: function remaining () {\n\t\treturn this.str.substring( this.pos );\n\t},\n\n\tnextChar: function nextChar () {\n\t\treturn this.str.charAt( this.pos );\n\t},\n\n\twarn: function warn$$1 ( message ) {\n\t\tvar msg = this.getContextMessage( this.pos, message )[2];\n\n\t\twarnIfDebug( msg );\n\t}\n};\n\nParser.extend = function ( proto ) {\n\tvar Parent = this;\n\tvar Child = function ( str, options ) {\n\t\tParser.call( this, str, options );\n\t};\n\n\tChild.prototype = Object.create( Parent.prototype );\n\n\tfor ( var key in proto ) {\n\t\tif ( proto.hasOwnProperty( key ) ) {\n\t\t\tChild.prototype[ key ] = proto[ key ];\n\t\t}\n\t}\n\n\tChild.extend = Parser.extend;\n\treturn Child;\n};\n\nvar delimiterChangePattern = /^[^\\s=]+/;\nvar whitespacePattern = /^\\s+/;\n\nfunction readDelimiterChange ( parser ) {\n\tif ( !parser.matchString( '=' ) ) {\n\t\treturn null;\n\t}\n\n\tvar start = parser.pos;\n\n\t// allow whitespace before new opening delimiter\n\tparser.allowWhitespace();\n\n\tvar opening = parser.matchPattern( delimiterChangePattern );\n\tif ( !opening ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\t// allow whitespace (in fact, it's necessary...)\n\tif ( !parser.matchPattern( whitespacePattern ) ) {\n\t\treturn null;\n\t}\n\n\tvar closing = parser.matchPattern( delimiterChangePattern );\n\tif ( !closing ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\t// allow whitespace before closing '='\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( '=' ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\treturn [ opening, closing ];\n}\n\nvar regexpPattern = /^(\\/(?:[^\\n\\r\\u2028\\u2029/\\\\[]|\\\\.|\\[(?:[^\\n\\r\\u2028\\u2029\\]\\\\]|\\\\.)*])+\\/(?:([gimuy])(?![a-z]*\\2))*(?![a-zA-Z_$0-9]))/;\n\nfunction readNumberLiteral ( parser ) {\n\tvar result;\n\n\tif ( result = parser.matchPattern( regexpPattern ) ) {\n\t\treturn {\n\t\t\tt: REGEXP_LITERAL,\n\t\t\tv: result\n\t\t};\n\t}\n\n\treturn null;\n}\n\nvar pattern$1 = /[-/\\\\^$*+?.()|[\\]{}]/g;\n\nfunction escapeRegExp ( str ) {\n\treturn str.replace( pattern$1, '\\\\$&' );\n}\n\nvar regExpCache = {};\n\nvar getLowestIndex = function ( haystack, needles ) {\n\treturn haystack.search( regExpCache[needles.join()] || ( regExpCache[needles.join()] = new RegExp( needles.map( escapeRegExp ).join( '|' ) ) ) );\n};\n\n// https://github.com/kangax/html-minifier/issues/63#issuecomment-37763316\nvar booleanAttributes = /^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i;\nvar voidElementNames = /^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i;\n\nvar htmlEntities = { quot: 34, amp: 38, apos: 39, lt: 60, gt: 62, nbsp: 160, iexcl: 161, cent: 162, pound: 163, curren: 164, yen: 165, brvbar: 166, sect: 167, uml: 168, copy: 169, ordf: 170, laquo: 171, not: 172, shy: 173, reg: 174, macr: 175, deg: 176, plusmn: 177, sup2: 178, sup3: 179, acute: 180, micro: 181, para: 182, middot: 183, cedil: 184, sup1: 185, ordm: 186, raquo: 187, frac14: 188, frac12: 189, frac34: 190, iquest: 191, Agrave: 192, Aacute: 193, Acirc: 194, Atilde: 195, Auml: 196, Aring: 197, AElig: 198, Ccedil: 199, Egrave: 200, Eacute: 201, Ecirc: 202, Euml: 203, Igrave: 204, Iacute: 205, Icirc: 206, Iuml: 207, ETH: 208, Ntilde: 209, Ograve: 210, Oacute: 211, Ocirc: 212, Otilde: 213, Ouml: 214, times: 215, Oslash: 216, Ugrave: 217, Uacute: 218, Ucirc: 219, Uuml: 220, Yacute: 221, THORN: 222, szlig: 223, agrave: 224, aacute: 225, acirc: 226, atilde: 227, auml: 228, aring: 229, aelig: 230, ccedil: 231, egrave: 232, eacute: 233, ecirc: 234, euml: 235, igrave: 236, iacute: 237, icirc: 238, iuml: 239, eth: 240, ntilde: 241, ograve: 242, oacute: 243, ocirc: 244, otilde: 245, ouml: 246, divide: 247, oslash: 248, ugrave: 249, uacute: 250, ucirc: 251, uuml: 252, yacute: 253, thorn: 254, yuml: 255, OElig: 338, oelig: 339, Scaron: 352, scaron: 353, Yuml: 376, fnof: 402, circ: 710, tilde: 732, Alpha: 913, Beta: 914, Gamma: 915, Delta: 916, Epsilon: 917, Zeta: 918, Eta: 919, Theta: 920, Iota: 921, Kappa: 922, Lambda: 923, Mu: 924, Nu: 925, Xi: 926, Omicron: 927, Pi: 928, Rho: 929, Sigma: 931, Tau: 932, Upsilon: 933, Phi: 934, Chi: 935, Psi: 936, Omega: 937, alpha: 945, beta: 946, gamma: 947, delta: 948, epsilon: 949, zeta: 950, eta: 951, theta: 952, iota: 953, kappa: 954, lambda: 955, mu: 956, nu: 957, xi: 958, omicron: 959, pi: 960, rho: 961, sigmaf: 962, sigma: 963, tau: 964, upsilon: 965, phi: 966, chi: 967, psi: 968, omega: 969, thetasym: 977, upsih: 978, piv: 982, ensp: 8194, emsp: 8195, thinsp: 8201, zwnj: 8204, zwj: 8205, lrm: 8206, rlm: 8207, ndash: 8211, mdash: 8212, lsquo: 8216, rsquo: 8217, sbquo: 8218, ldquo: 8220, rdquo: 8221, bdquo: 8222, dagger: 8224, Dagger: 8225, bull: 8226, hellip: 8230, permil: 8240, prime: 8242, Prime: 8243, lsaquo: 8249, rsaquo: 8250, oline: 8254, frasl: 8260, euro: 8364, image: 8465, weierp: 8472, real: 8476, trade: 8482, alefsym: 8501, larr: 8592, uarr: 8593, rarr: 8594, darr: 8595, harr: 8596, crarr: 8629, lArr: 8656, uArr: 8657, rArr: 8658, dArr: 8659, hArr: 8660, forall: 8704, part: 8706, exist: 8707, empty: 8709, nabla: 8711, isin: 8712, notin: 8713, ni: 8715, prod: 8719, sum: 8721, minus: 8722, lowast: 8727, radic: 8730, prop: 8733, infin: 8734, ang: 8736, and: 8743, or: 8744, cap: 8745, cup: 8746, int: 8747, there4: 8756, sim: 8764, cong: 8773, asymp: 8776, ne: 8800, equiv: 8801, le: 8804, ge: 8805, sub: 8834, sup: 8835, nsub: 8836, sube: 8838, supe: 8839, oplus: 8853, otimes: 8855, perp: 8869, sdot: 8901, lceil: 8968, rceil: 8969, lfloor: 8970, rfloor: 8971, lang: 9001, rang: 9002, loz: 9674, spades: 9824, clubs: 9827, hearts: 9829, diams: 9830\t};\nvar controlCharacters = [ 8364, 129, 8218, 402, 8222, 8230, 8224, 8225, 710, 8240, 352, 8249, 338, 141, 381, 143, 144, 8216, 8217, 8220, 8221, 8226, 8211, 8212, 732, 8482, 353, 8250, 339, 157, 382, 376 ];\nvar entityPattern = new RegExp( '&(#?(?:x[\\\\w\\\\d]+|\\\\d+|' + Object.keys( htmlEntities ).join( '|' ) + '));?', 'g' );\nvar codePointSupport = typeof String.fromCodePoint === 'function';\nvar codeToChar = codePointSupport ? String.fromCodePoint : String.fromCharCode;\n\nfunction decodeCharacterReferences ( html ) {\n\treturn html.replace( entityPattern, function ( match, entity ) {\n\t\tvar code;\n\n\t\t// Handle named entities\n\t\tif ( entity[0] !== '#' ) {\n\t\t\tcode = htmlEntities[ entity ];\n\t\t} else if ( entity[1] === 'x' ) {\n\t\t\tcode = parseInt( entity.substring( 2 ), 16 );\n\t\t} else {\n\t\t\tcode = parseInt( entity.substring( 1 ), 10 );\n\t\t}\n\n\t\tif ( !code ) {\n\t\t\treturn match;\n\t\t}\n\n\t\treturn codeToChar( validateCode( code ) );\n\t});\n}\n\nvar lessThan = /</g;\nvar greaterThan = />/g;\nvar amp = /&/g;\nvar invalid = 65533;\n\nfunction escapeHtml ( str ) {\n\treturn str\n\t\t.replace( amp, '&amp;' )\n\t\t.replace( lessThan, '&lt;' )\n\t\t.replace( greaterThan, '&gt;' );\n}\n\n// some code points are verboten. If we were inserting HTML, the browser would replace the illegal\n// code points with alternatives in some cases - since we're bypassing that mechanism, we need\n// to replace them ourselves\n//\n// Source: http://en.wikipedia.org/wiki/Character_encodings_in_HTML#Illegal_characters\nfunction validateCode ( code ) {\n\tif ( !code ) {\n\t\treturn invalid;\n\t}\n\n\t// line feed becomes generic whitespace\n\tif ( code === 10 ) {\n\t\treturn 32;\n\t}\n\n\t// ASCII range. (Why someone would use HTML entities for ASCII characters I don't know, but...)\n\tif ( code < 128 ) {\n\t\treturn code;\n\t}\n\n\t// code points 128-159 are dealt with leniently by browsers, but they're incorrect. We need\n\t// to correct the mistake or we'll end up with missing  signs and so on\n\tif ( code <= 159 ) {\n\t\treturn controlCharacters[ code - 128 ];\n\t}\n\n\t// basic multilingual plane\n\tif ( code < 55296 ) {\n\t\treturn code;\n\t}\n\n\t// UTF-16 surrogate halves\n\tif ( code <= 57343 ) {\n\t\treturn invalid;\n\t}\n\n\t// rest of the basic multilingual plane\n\tif ( code <= 65535 ) {\n\t\treturn code;\n\t} else if ( !codePointSupport ) {\n\t\treturn invalid;\n\t}\n\n\t// supplementary multilingual plane 0x10000 - 0x1ffff\n\tif ( code >= 65536 && code <= 131071 ) {\n\t\treturn code;\n\t}\n\n\t// supplementary ideographic plane 0x20000 - 0x2ffff\n\tif ( code >= 131072 && code <= 196607 ) {\n\t\treturn code;\n\t}\n\n\treturn invalid;\n}\n\nvar expectedExpression = 'Expected a JavaScript expression';\nvar expectedParen = 'Expected closing paren';\n\n// bulletproof number regex from https://gist.github.com/Rich-Harris/7544330\nvar numberPattern = /^(?:[+-]?)0*(?:(?:(?:[1-9]\\d*)?\\.\\d+)|(?:(?:0|[1-9]\\d*)\\.)|(?:0|[1-9]\\d*))(?:[eE][+-]?\\d+)?/;\n\nfunction readNumberLiteral$1 ( parser ) {\n\tvar result;\n\n\tif ( result = parser.matchPattern( numberPattern ) ) {\n\t\treturn {\n\t\t\tt: NUMBER_LITERAL,\n\t\t\tv: result\n\t\t};\n\t}\n\n\treturn null;\n}\n\nfunction readBooleanLiteral ( parser ) {\n\tvar remaining = parser.remaining();\n\n\tif ( remaining.substr( 0, 4 ) === 'true' ) {\n\t\tparser.pos += 4;\n\t\treturn {\n\t\t\tt: BOOLEAN_LITERAL,\n\t\t\tv: 'true'\n\t\t};\n\t}\n\n\tif ( remaining.substr( 0, 5 ) === 'false' ) {\n\t\tparser.pos += 5;\n\t\treturn {\n\t\t\tt: BOOLEAN_LITERAL,\n\t\t\tv: 'false'\n\t\t};\n\t}\n\n\treturn null;\n}\n\n// Match one or more characters until: \", ', \\, or EOL/EOF.\n// EOL/EOF is written as (?!.) (meaning there's no non-newline char next).\nvar stringMiddlePattern = /^(?=.)[^\"'\\\\]+?(?:(?!.)|(?=[\"'\\\\]))/;\n\n// Match one escape sequence, including the backslash.\nvar escapeSequencePattern = /^\\\\(?:[`'\"\\\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/;\n\n// Match one ES5 line continuation (backslash + line terminator).\nvar lineContinuationPattern = /^\\\\(?:\\r\\n|[\\u000A\\u000D\\u2028\\u2029])/;\n\n// Helper for defining getDoubleQuotedString and getSingleQuotedString.\nvar makeQuotedStringMatcher = function ( okQuote ) {\n\treturn function ( parser ) {\n\t\tvar literal = '\"';\n\t\tvar done = false;\n\t\tvar next;\n\n\t\twhile ( !done ) {\n\t\t\tnext = ( parser.matchPattern( stringMiddlePattern ) || parser.matchPattern( escapeSequencePattern ) ||\n\t\t\t\tparser.matchString( okQuote ) );\n\t\t\tif ( next ) {\n\t\t\t\tif ( next === \"\\\"\" ) {\n\t\t\t\t\tliteral += \"\\\\\\\"\";\n\t\t\t\t} else if ( next === \"\\\\'\" ) {\n\t\t\t\t\tliteral += \"'\";\n\t\t\t\t} else {\n\t\t\t\t\tliteral += next;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnext = parser.matchPattern( lineContinuationPattern );\n\t\t\t\tif ( next ) {\n\t\t\t\t\t// convert \\(newline-like) into a \\u escape, which is allowed in JSON\n\t\t\t\t\tliteral += '\\\\u' + ( '000' + next.charCodeAt(1).toString(16) ).slice( -4 );\n\t\t\t\t} else {\n\t\t\t\t\tdone = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tliteral += '\"';\n\n\t\t// use JSON.parse to interpret escapes\n\t\treturn JSON.parse( literal );\n\t};\n};\n\nvar singleMatcher = makeQuotedStringMatcher( \"\\\"\" );\nvar doubleMatcher = makeQuotedStringMatcher( \"'\" );\n\nvar readStringLiteral = function ( parser ) {\n\tvar start = parser.pos;\n\tvar quote = parser.matchString( \"'\" ) || parser.matchString( \"\\\"\" );\n\n\tif ( quote ) {\n\t\tvar string = ( quote === \"'\" ? singleMatcher : doubleMatcher )( parser );\n\n\t\tif ( !parser.matchString( quote ) ) {\n\t\t\tparser.pos = start;\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\tt: STRING_LITERAL,\n\t\t\tv: string\n\t\t};\n\t}\n\n\treturn null;\n};\n\n// Match one or more characters until: \", ', or \\\nvar stringMiddlePattern$1 = /^[^`\"\\\\\\$]+?(?:(?=[`\"\\\\\\$]))/;\n\nvar escapes = /[\\r\\n\\t\\b\\f]/g;\nfunction getString ( literal ) {\n\treturn JSON.parse( (\"\\\"\" + (literal.replace( escapes, escapeChar )) + \"\\\"\") );\n}\n\nfunction escapeChar ( c ) {\n\tswitch ( c ) {\n\t\tcase '\\n': return '\\\\n';\n\t\tcase '\\r': return '\\\\r';\n\t\tcase '\\t': return '\\\\t';\n\t\tcase '\\b': return '\\\\b';\n\t\tcase '\\f': return '\\\\f';\n\t}\n}\n\nfunction readTemplateStringLiteral ( parser ) {\n\tif ( !parser.matchString( '`' ) ) { return null; }\n\n\tvar literal = '';\n\tvar done = false;\n\tvar next;\n\tvar parts = [];\n\n\twhile ( !done ) {\n\t\tnext = parser.matchPattern( stringMiddlePattern$1 ) || parser.matchPattern( escapeSequencePattern ) ||\n\t\t\tparser.matchString( '$' ) || parser.matchString( '\"' );\n\t\tif ( next ) {\n\t\t\tif ( next === \"\\\"\" ) {\n\t\t\t\tliteral += \"\\\\\\\"\";\n\t\t\t} else if ( next === '\\\\`' ) {\n\t\t\t\tliteral += '`';\n\t\t\t} else if ( next === '$' ) {\n\t\t\t\tif ( parser.matchString( '{' ) ) {\n\t\t\t\t\tparts.push({ t: STRING_LITERAL, v: getString( literal ) });\n\t\t\t\t\tliteral = '';\n\n\t\t\t\t\tparser.allowWhitespace();\n\t\t\t\t\tvar expr = readExpression( parser );\n\n\t\t\t\t\tif ( !expr ) { parser.error( 'Expected valid expression' ); }\n\n\t\t\t\t\tparts.push({ t: BRACKETED, x: expr });\n\n\t\t\t\t\tparser.allowWhitespace();\n\t\t\t\t\tif ( !parser.matchString( '}' ) ) { parser.error( \"Expected closing '}' after interpolated expression\" ); }\n\t\t\t\t} else {\n\t\t\t\t\tliteral += '$';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tliteral += next;\n\t\t\t}\n\t\t} else {\n\t\t\tnext = parser.matchPattern( lineContinuationPattern );\n\t\t\tif ( next ) {\n\t\t\t\t// convert \\(newline-like) into a \\u escape, which is allowed in JSON\n\t\t\t\tliteral += '\\\\u' + ( '000' + next.charCodeAt(1).toString(16) ).slice( -4 );\n\t\t\t} else {\n\t\t\t\tdone = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( literal.length ) { parts.push({ t: STRING_LITERAL, v: getString( literal ) }); }\n\n\tif ( !parser.matchString( '`' ) ) { parser.error( \"Expected closing '`'\" ); }\n\n\tif ( parts.length === 1 ) {\n\t\treturn parts[0];\n\t} else {\n\t\tvar result = parts.pop();\n\t\tvar part;\n\n\t\twhile ( part = parts.pop() ) {\n\t\t\tresult = {\n\t\t\t\tt: INFIX_OPERATOR,\n\t\t\t\ts: '+',\n\t\t\t\to: [ part, result ]\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tt: BRACKETED,\n\t\t\tx: result\n\t\t};\n\t}\n}\n\nvar name = /^[a-zA-Z_$][a-zA-Z_$0-9]*/;\nvar spreadPattern = /^\\s*\\.{3}/;\nvar legalReference = /^(?:[a-zA-Z$_0-9]|\\\\\\.)+(?:(?:\\.(?:[a-zA-Z$_0-9]|\\\\\\.)+)|(?:\\[[0-9]+\\]))*/;\nvar relaxedName = /^[a-zA-Z_$][-\\/a-zA-Z_$0-9]*(?:\\.(?:[a-zA-Z_$][-\\/a-zA-Z_$0-9]*))*/;\n\nvar identifier = /^[a-zA-Z_$][a-zA-Z_$0-9]*$/;\n\n// http://mathiasbynens.be/notes/javascript-properties\n// can be any name, string literal, or number literal\nfunction readKey ( parser ) {\n\tvar token;\n\n\tif ( token = readStringLiteral( parser ) ) {\n\t\treturn identifier.test( token.v ) ? token.v : '\"' + token.v.replace( /\"/g, '\\\\\"' ) + '\"';\n\t}\n\n\tif ( token = readNumberLiteral$1( parser ) ) {\n\t\treturn token.v;\n\t}\n\n\tif ( token = parser.matchPattern( name ) ) {\n\t\treturn token;\n\t}\n\n\treturn null;\n}\n\nfunction readKeyValuePair ( parser ) {\n\tvar spread;\n\tvar start = parser.pos;\n\n\t// allow whitespace between '{' and key\n\tparser.allowWhitespace();\n\n\tvar refKey = parser.nextChar() !== '\\'' && parser.nextChar() !== '\"';\n\tif ( refKey ) { spread = parser.matchPattern( spreadPattern ); }\n\n\tvar key = spread ? readExpression( parser ) : readKey( parser );\n\tif ( key === null ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\t// allow whitespace between key and ':'\n\tparser.allowWhitespace();\n\n\t// es2015 shorthand property\n\tif ( refKey && ( parser.nextChar() === ',' || parser.nextChar() === '}' ) ) {\n\t\tif ( !spread && !name.test( key ) ) {\n\t\t\tparser.error( (\"Expected a valid reference, but found '\" + key + \"' instead.\") );\n\t\t}\n\n\t\tvar pair = {\n\t\t\tt: KEY_VALUE_PAIR,\n\t\t\tk: key,\n\t\t\tv: {\n\t\t\t\tt: REFERENCE,\n\t\t\t\tn: key\n\t\t\t}\n\t\t};\n\n\t\tif ( spread ) {\n\t\t\tpair.p = true;\n\t\t}\n\n\t\treturn pair;\n\t}\n\n\n\t// next character must be ':'\n\tif ( !parser.matchString( ':' ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\t// allow whitespace between ':' and value\n\tparser.allowWhitespace();\n\n\t// next expression must be a, well... expression\n\tvar value = readExpression( parser );\n\tif ( value === null ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tt: KEY_VALUE_PAIR,\n\t\tk: key,\n\t\tv: value\n\t};\n}\n\nfunction readKeyValuePairs ( parser ) {\n\tvar start = parser.pos;\n\n\tvar pair = readKeyValuePair( parser );\n\tif ( pair === null ) {\n\t\treturn null;\n\t}\n\n\tvar pairs = [ pair ];\n\n\tif ( parser.matchString( ',' ) ) {\n\t\tvar keyValuePairs = readKeyValuePairs( parser );\n\n\t\tif ( !keyValuePairs ) {\n\t\t\tparser.pos = start;\n\t\t\treturn null;\n\t\t}\n\n\t\treturn pairs.concat( keyValuePairs );\n\t}\n\n\treturn pairs;\n}\n\nvar readObjectLiteral = function ( parser ) {\n\tvar start = parser.pos;\n\n\t// allow whitespace\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( '{' ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\tvar keyValuePairs = readKeyValuePairs( parser );\n\n\t// allow whitespace between final value and '}'\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( '}' ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tt: OBJECT_LITERAL,\n\t\tm: keyValuePairs\n\t};\n};\n\nvar readArrayLiteral = function ( parser ) {\n\tvar start = parser.pos;\n\n\t// allow whitespace before '['\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( '[' ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\tvar expressionList = readExpressionList( parser, true );\n\n\tif ( !parser.matchString( ']' ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tt: ARRAY_LITERAL,\n\t\tm: expressionList\n\t};\n};\n\nfunction readLiteral ( parser ) {\n\treturn readNumberLiteral$1( parser )         ||\n\t       readBooleanLiteral( parser )        ||\n\t       readStringLiteral( parser )         ||\n\t       readTemplateStringLiteral( parser ) ||\n\t       readObjectLiteral( parser )         ||\n\t       readArrayLiteral( parser )          ||\n\t       readNumberLiteral( parser );\n}\n\n// if a reference is a browser global, we don't deference it later, so it needs special treatment\nvar globals = /^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null|Object|Number|String|Boolean)\\b/;\n\n// keywords are not valid references, with the exception of `this`\nvar keywords = /^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;\n\nvar prefixPattern = /^(?:\\@\\.|\\@|~\\/|(?:\\^\\^\\/(?:\\^\\^\\/)*(?:\\.\\.\\/)*)|(?:\\.\\.\\/)+|\\.\\/(?:\\.\\.\\/)*|\\.)/;\nvar specials = /^(key|index|keypath|rootpath|this|global|shared|context|event|node|local)/;\n\nfunction readReference ( parser ) {\n\tvar prefix, name$$1, global, reference, lastDotIndex;\n\n\tvar startPos = parser.pos;\n\n\tprefix = parser.matchPattern( prefixPattern ) || '';\n\tname$$1 = ( !prefix && parser.relaxedNames && parser.matchPattern( relaxedName ) ) ||\n\t\t\tparser.matchPattern( legalReference );\n\tvar actual = prefix.length + ( ( name$$1 && name$$1.length ) || 0 );\n\n\tif ( prefix === '@.' ) {\n\t\tprefix = '@';\n\t\tif ( name$$1 ) { name$$1 = 'this.' + name$$1; }\n\t\telse { name$$1 = 'this'; }\n\t}\n\n\tif ( !name$$1 && prefix ) {\n\t\tname$$1 = prefix;\n\t\tprefix = '';\n\t}\n\n\tif ( !name$$1 ) {\n\t\treturn null;\n\t}\n\n\tif ( prefix === '@' ) {\n\t\tif ( !specials.test( name$$1 ) ) {\n\t\t\tparser.error( (\"Unrecognized special reference @\" + name$$1) );\n\t\t} else if ( ( ~name$$1.indexOf( 'event' ) || ~name$$1.indexOf( 'node' ) ) && !parser.inEvent ) {\n\t\t\tparser.error( \"@event and @node are only valid references within an event directive\" );\n\t\t} else if ( ~name$$1.indexOf( 'context' ) ) {\n\t\t\tparser.pos = parser.pos - ( name$$1.length - 7 );\n\t\t\treturn {\n\t\t\t\tt: BRACKETED,\n\t\t\t\tx: {\n\t\t\t\t\tt: REFERENCE,\n\t\t\t\t\tn: '@context'\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n\n\t// bug out if it's a keyword (exception for ancestor/restricted refs - see https://github.com/ractivejs/ractive/issues/1497)\n\tif ( !prefix && !parser.relaxedNames && keywords.test( name$$1 ) ) {\n\t\tparser.pos = startPos;\n\t\treturn null;\n\t}\n\n\t// if this is a browser global, stop here\n\tif ( !prefix && globals.test( name$$1 ) ) {\n\t\tglobal = globals.exec( name$$1 )[0];\n\t\tparser.pos = startPos + global.length;\n\n\t\treturn {\n\t\t\tt: GLOBAL,\n\t\t\tv: global\n\t\t};\n\t}\n\n\treference = ( prefix || '' ) + normalise( name$$1 );\n\n\tif ( parser.matchString( '(' ) ) {\n\t\t// if this is a method invocation (as opposed to a function) we need\n\t\t// to strip the method name from the reference combo, else the context\n\t\t// will be wrong\n\t\t// but only if the reference was actually a member and not a refinement\n\t\tlastDotIndex = reference.lastIndexOf( '.' );\n\t\tif ( lastDotIndex !== -1 && name$$1[ name$$1.length - 1 ] !== ']' ) {\n\t\t\tvar refLength = reference.length;\n\t\t\treference = reference.substr( 0, lastDotIndex );\n\t\t\tparser.pos = startPos + ( actual - ( refLength - lastDotIndex ) );\n\t\t} else {\n\t\t\tparser.pos -= 1;\n\t\t}\n\t}\n\n\treturn {\n\t\tt: REFERENCE,\n\t\tn: reference.replace( /^this\\./, './' ).replace( /^this$/, '.' )\n\t};\n}\n\nfunction readBracketedExpression ( parser ) {\n\tif ( !parser.matchString( '(' ) ) { return null; }\n\n\tparser.allowWhitespace();\n\n\tvar expr = readExpression( parser );\n\n\tif ( !expr ) { parser.error( expectedExpression ); }\n\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( ')' ) ) { parser.error( expectedParen ); }\n\n\treturn {\n\t\tt: BRACKETED,\n\t\tx: expr\n\t};\n}\n\nvar readPrimary = function ( parser ) {\n\treturn readLiteral( parser )\n\t\t|| readReference( parser )\n\t\t|| readBracketedExpression( parser );\n};\n\nfunction readRefinement ( parser ) {\n\t// some things call for strict refinement (partial names), meaning no space between reference and refinement\n\tif ( !parser.strictRefinement ) {\n\t\tparser.allowWhitespace();\n\t}\n\n\t// \".\" name\n\tif ( parser.matchString( '.' ) ) {\n\t\tparser.allowWhitespace();\n\n\t\tvar name$$1 = parser.matchPattern( name );\n\t\tif ( name$$1 ) {\n\t\t\treturn {\n\t\t\t\tt: REFINEMENT,\n\t\t\t\tn: name$$1\n\t\t\t};\n\t\t}\n\n\t\tparser.error( 'Expected a property name' );\n\t}\n\n\t// \"[\" expression \"]\"\n\tif ( parser.matchString( '[' ) ) {\n\t\tparser.allowWhitespace();\n\n\t\tvar expr = readExpression( parser );\n\t\tif ( !expr ) { parser.error( expectedExpression ); }\n\n\t\tparser.allowWhitespace();\n\n\t\tif ( !parser.matchString( ']' ) ) { parser.error( \"Expected ']'\" ); }\n\n\t\treturn {\n\t\t\tt: REFINEMENT,\n\t\t\tx: expr\n\t\t};\n\t}\n\n\treturn null;\n}\n\nvar readMemberOrInvocation = function ( parser ) {\n\tvar expression = readPrimary( parser );\n\n\tif ( !expression ) { return null; }\n\n\twhile ( expression ) {\n\t\tvar refinement = readRefinement( parser );\n\t\tif ( refinement ) {\n\t\t\texpression = {\n\t\t\t\tt: MEMBER,\n\t\t\t\tx: expression,\n\t\t\t\tr: refinement\n\t\t\t};\n\t\t}\n\n\t\telse if ( parser.matchString( '(' ) ) {\n\t\t\tparser.allowWhitespace();\n\t\t\tvar expressionList = readExpressionList( parser, true );\n\n\t\t\tparser.allowWhitespace();\n\n\t\t\tif ( !parser.matchString( ')' ) ) {\n\t\t\t\tparser.error( expectedParen );\n\t\t\t}\n\n\t\t\texpression = {\n\t\t\t\tt: INVOCATION,\n\t\t\t\tx: expression\n\t\t\t};\n\n\t\t\tif ( expressionList ) { expression.o = expressionList; }\n\t\t}\n\n\t\telse {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn expression;\n};\n\nvar readTypeOf;\n\nvar makePrefixSequenceMatcher = function ( symbol, fallthrough ) {\n\treturn function ( parser ) {\n\t\tvar expression;\n\n\t\tif ( expression = fallthrough( parser ) ) {\n\t\t\treturn expression;\n\t\t}\n\n\t\tif ( !parser.matchString( symbol ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tparser.allowWhitespace();\n\n\t\texpression = readExpression( parser );\n\t\tif ( !expression ) {\n\t\t\tparser.error( expectedExpression );\n\t\t}\n\n\t\treturn {\n\t\t\ts: symbol,\n\t\t\to: expression,\n\t\t\tt: PREFIX_OPERATOR\n\t\t};\n\t};\n};\n\n// create all prefix sequence matchers, return readTypeOf\n(function() {\n\tvar i, len, matcher, fallthrough;\n\n\tvar prefixOperators = '! ~ + - typeof'.split( ' ' );\n\n\tfallthrough = readMemberOrInvocation;\n\tfor ( i = 0, len = prefixOperators.length; i < len; i += 1 ) {\n\t\tmatcher = makePrefixSequenceMatcher( prefixOperators[i], fallthrough );\n\t\tfallthrough = matcher;\n\t}\n\n\t// typeof operator is higher precedence than multiplication, so provides the\n\t// fallthrough for the multiplication sequence matcher we're about to create\n\t// (we're skipping void and delete)\n\treadTypeOf = fallthrough;\n}());\n\nvar readTypeof = readTypeOf;\n\nvar readLogicalOr;\n\nvar makeInfixSequenceMatcher = function ( symbol, fallthrough ) {\n\treturn function ( parser ) {\n\t\t// > and / have to be quoted\n\t\tif ( parser.inUnquotedAttribute && ( symbol === '>' || symbol === '/' ) ) { return fallthrough( parser ); }\n\n\t\tvar start, left, right;\n\n\t\tleft = fallthrough( parser );\n\t\tif ( !left ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Loop to handle left-recursion in a case like `a * b * c` and produce\n\t\t// left association, i.e. `(a * b) * c`.  The matcher can't call itself\n\t\t// to parse `left` because that would be infinite regress.\n\t\twhile ( true ) {\n\t\t\tstart = parser.pos;\n\n\t\t\tparser.allowWhitespace();\n\n\t\t\tif ( !parser.matchString( symbol ) ) {\n\t\t\t\tparser.pos = start;\n\t\t\t\treturn left;\n\t\t\t}\n\n\t\t\t// special case - in operator must not be followed by [a-zA-Z_$0-9]\n\t\t\tif ( symbol === 'in' && /[a-zA-Z_$0-9]/.test( parser.remaining().charAt( 0 ) ) ) {\n\t\t\t\tparser.pos = start;\n\t\t\t\treturn left;\n\t\t\t}\n\n\t\t\tparser.allowWhitespace();\n\n\t\t\t// right operand must also consist of only higher-precedence operators\n\t\t\tright = fallthrough( parser );\n\t\t\tif ( !right ) {\n\t\t\t\tparser.pos = start;\n\t\t\t\treturn left;\n\t\t\t}\n\n\t\t\tleft = {\n\t\t\t\tt: INFIX_OPERATOR,\n\t\t\t\ts: symbol,\n\t\t\t\to: [ left, right ]\n\t\t\t};\n\n\t\t\t// Loop back around.  If we don't see another occurrence of the symbol,\n\t\t\t// we'll return left.\n\t\t}\n\t};\n};\n\n// create all infix sequence matchers, and return readLogicalOr\n(function() {\n\tvar i, len, matcher, fallthrough;\n\n\t// All the infix operators on order of precedence (source: https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)\n\t// Each sequence matcher will initially fall through to its higher precedence\n\t// neighbour, and only attempt to match if one of the higher precedence operators\n\t// (or, ultimately, a literal, reference, or bracketed expression) already matched\n\tvar infixOperators = '* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||'.split( ' ' );\n\n\t// A typeof operator is higher precedence than multiplication\n\tfallthrough = readTypeof;\n\tfor ( i = 0, len = infixOperators.length; i < len; i += 1 ) {\n\t\tmatcher = makeInfixSequenceMatcher( infixOperators[i], fallthrough );\n\t\tfallthrough = matcher;\n\t}\n\n\t// Logical OR is the fallthrough for the conditional matcher\n\treadLogicalOr = fallthrough;\n}());\n\nvar readLogicalOr$1 = readLogicalOr;\n\n// The conditional operator is the lowest precedence operator, so we start here\nfunction getConditional ( parser ) {\n\tvar expression = readLogicalOr$1( parser );\n\tif ( !expression ) {\n\t\treturn null;\n\t}\n\n\tvar start = parser.pos;\n\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( '?' ) ) {\n\t\tparser.pos = start;\n\t\treturn expression;\n\t}\n\n\tparser.allowWhitespace();\n\n\tvar ifTrue = readExpression( parser );\n\tif ( !ifTrue ) {\n\t\tparser.error( expectedExpression );\n\t}\n\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( ':' ) ) {\n\t\tparser.error( 'Expected \":\"' );\n\t}\n\n\tparser.allowWhitespace();\n\n\tvar ifFalse = readExpression( parser );\n\tif ( !ifFalse ) {\n\t\tparser.error( expectedExpression );\n\t}\n\n\treturn {\n\t\tt: CONDITIONAL,\n\t\to: [ expression, ifTrue, ifFalse ]\n\t};\n}\n\nfunction readExpression ( parser ) {\n\t// The conditional operator is the lowest precedence operator (except yield,\n\t// assignment operators, and commas, none of which are supported), so we\n\t// start there. If it doesn't match, it 'falls through' to progressively\n\t// higher precedence operators, until it eventually matches (or fails to\n\t// match) a 'primary' - a literal or a reference. This way, the abstract syntax\n\t// tree has everything in its proper place, i.e. 2 + 3 * 4 === 14, not 20.\n\treturn getConditional( parser );\n}\n\nfunction readExpressionList ( parser, spread ) {\n\tvar isSpread;\n\tvar expressions = [];\n\n\tvar pos = parser.pos;\n\n\tdo {\n\t\tparser.allowWhitespace();\n\n\t\tif ( spread ) {\n\t\t\tisSpread = parser.matchPattern( spreadPattern );\n\t\t}\n\n\t\tvar expr = readExpression( parser );\n\n\t\tif ( expr === null && expressions.length ) {\n\t\t\tparser.error( expectedExpression );\n\t\t} else if ( expr === null ) {\n\t\t\tparser.pos = pos;\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( isSpread ) {\n\t\t\texpr.p = true;\n\t\t}\n\n\t\texpressions.push( expr );\n\n\t\tparser.allowWhitespace();\n\t} while ( parser.matchString( ',' ) );\n\n\treturn expressions;\n}\n\nfunction readExpressionOrReference ( parser, expectedFollowers ) {\n\tvar start = parser.pos;\n\tvar expression = readExpression( parser );\n\n\tif ( !expression ) {\n\t\t// valid reference but invalid expression e.g. `{{new}}`?\n\t\tvar ref = parser.matchPattern( /^(\\w+)/ );\n\t\tif ( ref ) {\n\t\t\treturn {\n\t\t\t\tt: REFERENCE,\n\t\t\t\tn: ref\n\t\t\t};\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfor ( var i = 0; i < expectedFollowers.length; i += 1 ) {\n\t\tif ( parser.remaining().substr( 0, expectedFollowers[i].length ) === expectedFollowers[i] ) {\n\t\t\treturn expression;\n\t\t}\n\t}\n\n\tparser.pos = start;\n\treturn readReference( parser );\n}\n\nfunction flattenExpression ( expression ) {\n\tvar refs;\n\tvar count = 0;\n\n\textractRefs( expression, refs = [] );\n\tvar stringified = stringify( expression );\n\n\treturn {\n\t\tr: refs,\n\t\ts: getVars(stringified)\n\t};\n\n\tfunction getVars(expr) {\n\t\tvar vars = [];\n\t\tfor ( var i = count - 1; i >= 0; i-- ) {\n\t\t\tvars.push( (\"x$\" + i) );\n\t\t}\n\t\treturn vars.length ? (\"(function(){var \" + (vars.join(',')) + \";return(\" + expr + \");})()\") : expr;\n\t}\n\n\tfunction stringify ( node ) {\n\t\tif ( typeof node === 'string' ) {\n\t\t\treturn node;\n\t\t}\n\n\t\tswitch ( node.t ) {\n\t\t\tcase BOOLEAN_LITERAL:\n\t\t\tcase GLOBAL:\n\t\t\tcase NUMBER_LITERAL:\n\t\t\tcase REGEXP_LITERAL:\n\t\t\t\treturn node.v;\n\n\t\t\tcase STRING_LITERAL:\n\t\t\t\treturn JSON.stringify( String( node.v ) );\n\n\t\t\tcase ARRAY_LITERAL:\n\t\t\t\tif ( node.m && hasSpread( node.m )) {\n\t\t\t\t\treturn (\"[].concat(\" + (makeSpread( node.m, '[', ']', stringify )) + \")\");\n\t\t\t\t} else {\n\t\t\t\t\treturn '[' + ( node.m ? node.m.map( stringify ).join( ',' ) : '' ) + ']';\n\t\t\t\t}\n\n\t\t\tcase OBJECT_LITERAL:\n\t\t\t\tif ( node.m && hasSpread( node.m ) ) {\n\t\t\t\t\treturn (\"Object.assign({},\" + (makeSpread( node.m, '{', '}', stringifyPair)) + \")\");\n\t\t\t\t} else {\n\t\t\t\t\treturn '{' + ( node.m ? node.m.map( function (n) { return ((n.k) + \":\" + (stringify( n.v ))); } ).join( ',' ) : '' ) + '}';\n\t\t\t\t}\n\n\t\t\tcase PREFIX_OPERATOR:\n\t\t\t\treturn ( node.s === 'typeof' ? 'typeof ' : node.s ) + stringify( node.o );\n\n\t\t\tcase INFIX_OPERATOR:\n\t\t\t\treturn stringify( node.o[0] ) + ( node.s.substr( 0, 2 ) === 'in' ? ' ' + node.s + ' ' : node.s ) + stringify( node.o[1] );\n\n\t\t\tcase INVOCATION:\n\t\t\t\tif ( node.o && hasSpread( node.o ) ) {\n\t\t\t\t\tvar id = count++;\n\t\t\t\t\treturn (\"(x$\" + id + \"=\" + (stringify(node.x)) + \").apply(x$\" + id + \",\" + (stringify({ t: ARRAY_LITERAL, m: node.o })) + \")\");\n\t\t\t\t} else {\n\t\t\t\t\treturn stringify( node.x ) + '(' + ( node.o ? node.o.map( stringify ).join( ',' ) : '' ) + ')';\n\t\t\t\t}\n\n\t\t\tcase BRACKETED:\n\t\t\t\treturn '(' + stringify( node.x ) + ')';\n\n\t\t\tcase MEMBER:\n\t\t\t\treturn stringify( node.x ) + stringify( node.r );\n\n\t\t\tcase REFINEMENT:\n\t\t\t\treturn ( node.n ? '.' + node.n : '[' + stringify( node.x ) + ']' );\n\n\t\t\tcase CONDITIONAL:\n\t\t\t\treturn stringify( node.o[0] ) + '?' + stringify( node.o[1] ) + ':' + stringify( node.o[2] );\n\n\t\t\tcase REFERENCE:\n\t\t\t\treturn '_' + refs.indexOf( node.n );\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'Expected legal JavaScript' );\n\t\t}\n\t}\n\n\tfunction stringifyPair ( node ) { return node.p ? stringify( node.k ) : ((node.k) + \":\" + (stringify( node.v ))); }\n\n\tfunction makeSpread ( list, open, close, fn ) {\n\t\tvar out = list.reduce( function ( a, c ) {\n\t\t\tif ( c.p ) {\n\t\t\t\ta.str += \"\" + (a.open ? close + ',' : a.str.length ? ',' : '') + (fn( c ));\n\t\t\t} else {\n\t\t\t\ta.str += \"\" + (!a.str.length ? open : !a.open ? ',' + open : ',') + (fn( c ));\n\t\t\t}\n\t\t\ta.open = !c.p;\n\t\t\treturn a;\n\t\t}, { open: false, str: '' } );\n\t\tif ( out.open ) { out.str += close; }\n\t\treturn out.str;\n\t}\n}\n\nfunction hasSpread ( list ) {\n\tfor ( var i = 0; i < list.length; i++ ) {\n\t\tif ( list[i].p ) { return true; }\n\t}\n\n\treturn false;\n}\n\n// TODO maybe refactor this?\nfunction extractRefs ( node, refs ) {\n\tif ( node.t === REFERENCE && typeof node.n === 'string' ) {\n\t\tif ( !~refs.indexOf( node.n ) ) {\n\t\t\trefs.unshift( node.n );\n\t\t}\n\t}\n\n\tvar list = node.o || node.m;\n\tif ( list ) {\n\t\tif ( isObject( list ) ) {\n\t\t\textractRefs( list, refs );\n\t\t} else {\n\t\t\tvar i = list.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\textractRefs( list[i], refs );\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( node.k && node.t === KEY_VALUE_PAIR && typeof node.k !== 'string' ) {\n\t\textractRefs( node.k, refs );\n\t}\n\n\tif ( node.x ) {\n\t\textractRefs( node.x, refs );\n\t}\n\n\tif ( node.r ) {\n\t\textractRefs( node.r, refs );\n\t}\n\n\tif ( node.v ) {\n\t\textractRefs( node.v, refs );\n\t}\n}\n\nfunction refineExpression ( expression, mustache ) {\n\tvar referenceExpression;\n\n\tif ( expression ) {\n\t\twhile ( expression.t === BRACKETED && expression.x ) {\n\t\t\texpression = expression.x;\n\t\t}\n\n\t\tif ( expression.t === REFERENCE ) {\n\t\t\tvar n = expression.n;\n\t\t\tif ( !~n.indexOf( '@context' ) ) {\n\t\t\t\tmustache.r = expression.n;\n\t\t\t} else {\n\t\t\t\tmustache.x = flattenExpression( expression );\n\t\t\t}\n\t\t} else {\n\t\t\tif ( referenceExpression = getReferenceExpression( expression ) ) {\n\t\t\t\tmustache.rx = referenceExpression;\n\t\t\t} else {\n\t\t\t\tmustache.x = flattenExpression( expression );\n\t\t\t}\n\t\t}\n\n\t\treturn mustache;\n\t}\n}\n\n// TODO refactor this! it's bewildering\nfunction getReferenceExpression ( expression ) {\n\tvar members = [];\n\tvar refinement;\n\n\twhile ( expression.t === MEMBER && expression.r.t === REFINEMENT ) {\n\t\trefinement = expression.r;\n\n\t\tif ( refinement.x ) {\n\t\t\tif ( refinement.x.t === REFERENCE ) {\n\t\t\t\tmembers.unshift( refinement.x );\n\t\t\t} else {\n\t\t\t\tmembers.unshift( flattenExpression( refinement.x ) );\n\t\t\t}\n\t\t} else {\n\t\t\tmembers.unshift( refinement.n );\n\t\t}\n\n\t\texpression = expression.x;\n\t}\n\n\tif ( expression.t !== REFERENCE ) {\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tr: expression.n,\n\t\tm: members\n\t};\n}\n\nvar attributeNamePattern = /^[^\\s\"'>\\/=]+/;\nvar onPattern = /^on/;\nvar eventPattern = /^on-([a-zA-Z\\*\\.$_]((?:[a-zA-Z\\*\\.$_0-9\\-]|\\\\-)+))$/;\nvar reservedEventNames = /^(?:change|reset|teardown|update|construct|config|init|render|complete|unrender|detach|insert|destruct|attachchild|detachchild)$/;\nvar decoratorPattern = /^as-([a-z-A-Z][-a-zA-Z_0-9]*)$/;\nvar transitionPattern = /^([a-zA-Z](?:(?!-in-out)[-a-zA-Z_0-9])*)-(in|out|in-out)$/;\nvar boundPattern = /^((bind|class)-(([-a-zA-Z0-9_])+))$/;\nvar directives = {\n\tlazy: { t: BINDING_FLAG, v: 'l' },\n\ttwoway: { t: BINDING_FLAG, v: 't' },\n\t'no-delegation': { t: DELEGATE_FLAG }\n};\nvar unquotedAttributeValueTextPattern = /^[^\\s\"'=<>\\/`]+/;\nvar proxyEvent = /^[^\\s\"'=<>@\\[\\]()]*/;\nvar whitespace = /^\\s+/;\n\nvar slashes = /\\\\/g;\nfunction splitEvent ( str ) {\n\tvar result = [];\n\tvar s = 0;\n\n\tfor ( var i = 0; i < str.length; i++ ) {\n\t\tif ( str[i] === '-' && str[ i - 1 ] !== '\\\\' ) {\n\t\t\tresult.push( str.substring( s, i ).replace( slashes, '' ) );\n\t\t\ts = i + 1;\n\t\t}\n\t}\n\n\tresult.push( str.substring( s ).replace( slashes, '' ) );\n\n\treturn result;\n}\n\nfunction readAttribute ( parser ) {\n\tvar name, i, nearest, idx;\n\n\tparser.allowWhitespace();\n\n\tname = parser.matchPattern( attributeNamePattern );\n\tif ( !name ) {\n\t\treturn null;\n\t}\n\n\t// check for accidental delimiter consumption e.g. <tag bool{{>attrs}} />\n\tnearest = name.length;\n\tfor ( i = 0; i < parser.tags.length; i++ ) {\n\t\tif ( ~( idx = name.indexOf( parser.tags[ i ].open ) ) ) {\n\t\t\tif ( idx < nearest ) { nearest = idx; }\n\t\t}\n\t}\n\tif ( nearest < name.length ) {\n\t\tparser.pos -= name.length - nearest;\n\t\tname = name.substr( 0, nearest );\n\t\tif ( !name ) { return null; }\n\t}\n\n\treturn { n: name };\n}\n\nfunction readAttributeValue ( parser ) {\n\tvar start = parser.pos;\n\n\t// next character must be `=`, `/`, `>` or whitespace\n\tif ( !/[=\\/>\\s]/.test( parser.nextChar() ) ) {\n\t\tparser.error( 'Expected `=`, `/`, `>` or whitespace' );\n\t}\n\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( '=' ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\tparser.allowWhitespace();\n\n\tvar valueStart = parser.pos;\n\tvar startDepth = parser.sectionDepth;\n\n\tvar value = readQuotedAttributeValue( parser, \"'\" ) ||\n\t\t\treadQuotedAttributeValue( parser, \"\\\"\" ) ||\n\t\t\treadUnquotedAttributeValue( parser );\n\n\tif ( value === null ) {\n\t\tparser.error( 'Expected valid attribute value' );\n\t}\n\n\tif ( parser.sectionDepth !== startDepth ) {\n\t\tparser.pos = valueStart;\n\t\tparser.error( 'An attribute value must contain as many opening section tags as closing section tags' );\n\t}\n\n\tif ( !value.length ) {\n\t\treturn '';\n\t}\n\n\tif ( value.length === 1 && typeof value[0] === 'string' ) {\n\t\treturn decodeCharacterReferences( value[0] );\n\t}\n\n\treturn value;\n}\n\nfunction readUnquotedAttributeValueToken ( parser ) {\n\tvar text, index;\n\n\tvar start = parser.pos;\n\n\ttext = parser.matchPattern( unquotedAttributeValueTextPattern );\n\n\tif ( !text ) {\n\t\treturn null;\n\t}\n\n\tvar haystack = text;\n\tvar needles = parser.tags.map( function (t) { return t.open; } ); // TODO refactor... we do this in readText.js as well\n\n\tif ( ( index = getLowestIndex( haystack, needles ) ) !== -1 ) {\n\t\ttext = text.substr( 0, index );\n\t\tparser.pos = start + text.length;\n\t}\n\n\treturn text;\n}\n\nfunction readUnquotedAttributeValue ( parser ) {\n\tparser.inAttribute = true;\n\n\tvar tokens = [];\n\n\tvar token = readMustache( parser ) || readUnquotedAttributeValueToken( parser );\n\twhile ( token ) {\n\t\ttokens.push( token );\n\t\ttoken = readMustache( parser ) || readUnquotedAttributeValueToken( parser );\n\t}\n\n\tif ( !tokens.length ) {\n\t\treturn null;\n\t}\n\n\tparser.inAttribute = false;\n\treturn tokens;\n}\n\nfunction readQuotedAttributeValue ( parser, quoteMark ) {\n\tvar start = parser.pos;\n\n\tif ( !parser.matchString( quoteMark ) ) {\n\t\treturn null;\n\t}\n\n\tparser.inAttribute = quoteMark;\n\n\tvar tokens = [];\n\n\tvar token = readMustache( parser ) || readQuotedStringToken( parser, quoteMark );\n\twhile ( token !== null ) {\n\t\ttokens.push( token );\n\t\ttoken = readMustache( parser ) || readQuotedStringToken( parser, quoteMark );\n\t}\n\n\tif ( !parser.matchString( quoteMark ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\tparser.inAttribute = false;\n\n\treturn tokens;\n}\n\nfunction readQuotedStringToken ( parser, quoteMark ) {\n\tvar haystack = parser.remaining();\n\n\tvar needles = parser.tags.map( function (t) { return t.open; } ); // TODO refactor... we do this in readText.js as well\n\tneedles.push( quoteMark );\n\n\tvar index = getLowestIndex( haystack, needles );\n\n\tif ( index === -1 ) {\n\t\tparser.error( 'Quoted attribute value must have a closing quote' );\n\t}\n\n\tif ( !index ) {\n\t\treturn null;\n\t}\n\n\tparser.pos += index;\n\treturn haystack.substr( 0, index );\n}\n\nfunction readAttributeOrDirective ( parser ) {\n\tvar match, directive;\n\n\tvar attribute = readAttribute( parser, false );\n\n\tif ( !attribute ) { return null; }\n\n\t\t// lazy, twoway\n\tif ( directive = directives[ attribute.n ] ) {\n\t\tattribute.t = directive.t;\n\t\tif ( directive.v ) { attribute.v = directive.v; }\n\t\tdelete attribute.n; // no name necessary\n\t\tparser.allowWhitespace();\n\t\tif ( parser.nextChar() === '=' ) { attribute.f = readAttributeValue( parser ); }\n\t}\n\n\t\t// decorators\n\telse if ( match = decoratorPattern.exec( attribute.n ) ) {\n\t\tattribute.n = match[1];\n\t\tattribute.t = DECORATOR;\n\t\treadArguments( parser, attribute );\n\t}\n\n\t\t// transitions\n\telse if ( match = transitionPattern.exec( attribute.n ) ) {\n\t\tattribute.n = match[1];\n\t\tattribute.t = TRANSITION;\n\t\treadArguments( parser, attribute );\n\t\tattribute.v = match[2] === 'in-out' ? 't0' : match[2] === 'in' ? 't1' : 't2';\n\t}\n\n\t\t// on-click etc\n\telse if ( match = eventPattern.exec( attribute.n ) ) {\n\t\tattribute.n = splitEvent( match[1] );\n\t\tattribute.t = EVENT;\n\n\t\tparser.inEvent = true;\n\n\t\t\t// check for a proxy event\n\t\tif ( !readProxyEvent( parser, attribute ) ) {\n\t\t\t\t// otherwise, it's an expression\n\t\t\treadArguments( parser, attribute, true );\n\t\t} else if ( reservedEventNames.test( attribute.f ) ) {\n\t\t\tparser.pos -= attribute.f.length;\n\t\t\tparser.error( 'Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, complete, detach, insert, destruct, attachchild, detachchild)' );\n\t\t}\n\n\t\tparser.inEvent = false;\n\t}\n\n\t\t// bound directives\n\telse if ( match = boundPattern.exec( attribute.n ) ){\n\t\tvar bind = match[2] === 'bind';\n\t\tattribute.n = bind ? match[3] : match[1];\n\t\tattribute.t = ATTRIBUTE;\n\t\treadArguments( parser, attribute, false, true );\n\n\t\tif ( !attribute.f ) {\n\t\t\tif ( !bind ) {\n\t\t\t\tattribute.f = [{ t: INTERPOLATOR, x: { r: [], s: 'true' } }];\n\t\t\t} else {\n\t\t\t\tattribute.f = [{ t: INTERPOLATOR, r: match[3] }];\n\t\t\t}\n\t\t}\n\t}\n\n\telse {\n\t\tparser.allowWhitespace();\n\t\tvar value = parser.nextChar() === '=' ? readAttributeValue( parser ) : null;\n\t\tattribute.f = value != null ? value : attribute.f;\n\n\t\tif ( parser.sanitizeEventAttributes && onPattern.test( attribute.n ) ) {\n\t\t\treturn { exclude: true };\n\t\t} else {\n\t\t\tattribute.f = attribute.f || ( attribute.f === '' ? '' : 0 );\n\t\t\tattribute.t = ATTRIBUTE;\n\t\t}\n\t}\n\n\treturn attribute;\n}\n\nfunction readProxyEvent ( parser, attribute ) {\n\tvar start = parser.pos;\n\tif ( !parser.matchString( '=' ) ) { parser.error( \"Missing required directive arguments\" ); }\n\n\tvar quote = parser.matchString( \"'\" ) || parser.matchString( \"\\\"\" );\n\tparser.allowWhitespace();\n\tvar proxy = parser.matchPattern( proxyEvent );\n\n\tif ( proxy !== undefined ) {\n\t\tif ( quote ) {\n\t\t\tparser.allowWhitespace();\n\t\t\tif ( !parser.matchString( quote ) ) { parser.pos = start; }\n\t\t\telse { return ( attribute.f = proxy ) || true; }\n\t\t} else if ( !parser.matchPattern( whitespace ) ) {\n\t\t\tparser.pos = start;\n\t\t} else {\n\t\t\treturn ( attribute.f = proxy ) || true;\n\t\t}\n\t} else {\n\t\tparser.pos = start;\n\t}\n}\n\nfunction readArguments ( parser, attribute, required, single ) {\n\tif ( required === void 0 ) required = false;\n\tif ( single === void 0 ) single = false;\n\n\tparser.allowWhitespace();\n\tif ( !parser.matchString( '=' ) ) {\n\t\tif ( required ) { parser.error( \"Missing required directive arguments\" ); }\n\t\treturn;\n\t}\n\tparser.allowWhitespace();\n\n\tvar quote = parser.matchString( '\"' ) || parser.matchString( \"'\" );\n\tvar spread = parser.spreadArgs;\n\tparser.spreadArgs = true;\n\tparser.inUnquotedAttribute = !quote;\n\tvar expr = single ? readExpressionOrReference( parser, [ quote || ' ', '/', '>' ] ) : { m: readExpressionList( parser ), t: ARRAY_LITERAL };\n\tparser.inUnquotedAttribute = false;\n\tparser.spreadArgs = spread;\n\n\tif ( quote ) {\n\t\tparser.allowWhitespace();\n\t\tif ( parser.matchString( quote ) !== quote ) { parser.error( (\"Expected matching quote '\" + quote + \"'\") ); }\n\t}\n\n\tif ( single ) {\n\t\tvar interpolator = { t: INTERPOLATOR };\n\t\trefineExpression( expr, interpolator );\n\t\tattribute.f = [interpolator];\n\t} else {\n\t\tattribute.f = flattenExpression( expr );\n\t}\n}\n\nvar delimiterChangeToken = { t: DELIMCHANGE, exclude: true };\n\nfunction readMustache ( parser ) {\n\tvar mustache, i;\n\n\t// If we're inside a <script> or <style> tag, and we're not\n\t// interpolating, bug out\n\tif ( parser.interpolate[ parser.inside ] === false ) {\n\t\treturn null;\n\t}\n\n\tfor ( i = 0; i < parser.tags.length; i += 1 ) {\n\t\tif ( mustache = readMustacheOfType( parser, parser.tags[i] ) ) {\n\t\t\treturn mustache;\n\t\t}\n\t}\n\n\tif ( parser.inTag && !parser.inAttribute ) {\n\t\tmustache = readAttributeOrDirective( parser );\n\t\tif ( mustache ) {\n\t\t\tparser.allowWhitespace();\n\t\t\treturn mustache;\n\t\t}\n\t}\n}\n\nfunction readMustacheOfType ( parser, tag ) {\n\tvar mustache, reader, i;\n\n\tvar start = parser.pos;\n\n\tif ( parser.matchString( '\\\\' + tag.open ) ) {\n\t\tif ( start === 0 || parser.str[ start - 1 ] !== '\\\\' ) {\n\t\t\treturn tag.open;\n\t\t}\n\t} else if ( !parser.matchString( tag.open ) ) {\n\t\treturn null;\n\t}\n\n\t// delimiter change?\n\tif ( mustache = readDelimiterChange( parser ) ) {\n\t\t// find closing delimiter or abort...\n\t\tif ( !parser.matchString( tag.close ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// ...then make the switch\n\t\ttag.open = mustache[0];\n\t\ttag.close = mustache[1];\n\t\tparser.sortMustacheTags();\n\n\t\treturn delimiterChangeToken;\n\t}\n\n\tparser.allowWhitespace();\n\n\t// illegal section closer\n\tif ( parser.matchString( '/' ) ) {\n\t\tparser.pos -= 1;\n\t\tvar rewind = parser.pos;\n\t\tif ( !readNumberLiteral( parser ) ) {\n\t\t\tparser.pos = rewind - ( tag.close.length );\n\t\t\tif ( parser.inAttribute ) {\n\t\t\t\tparser.pos = start;\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\tparser.error( 'Attempted to close a section that wasn\\'t open' );\n\t\t\t}\n\t\t} else {\n\t\t\tparser.pos = rewind;\n\t\t}\n\t}\n\n\tfor ( i = 0; i < tag.readers.length; i += 1 ) {\n\t\treader = tag.readers[i];\n\n\t\tif ( mustache = reader( parser, tag ) ) {\n\t\t\tif ( tag.isStatic ) {\n\t\t\t\tmustache.s = 1;\n\t\t\t}\n\n\t\t\tif ( parser.includeLinePositions ) {\n\t\t\t\tmustache.p = parser.getLinePos( start );\n\t\t\t}\n\n\t\t\treturn mustache;\n\t\t}\n\t}\n\n\tparser.pos = start;\n\treturn null;\n}\n\nfunction readTriple ( parser, tag ) {\n\tvar expression = readExpression( parser );\n\n\tif ( !expression ) {\n\t\treturn null;\n\t}\n\n\tif ( !parser.matchString( tag.close ) ) {\n\t\tparser.error( (\"Expected closing delimiter '\" + (tag.close) + \"'\") );\n\t}\n\n\tvar triple = { t: TRIPLE };\n\trefineExpression( expression, triple ); // TODO handle this differently - it's mysterious\n\n\treturn triple;\n}\n\nfunction readUnescaped ( parser, tag ) {\n\tif ( !parser.matchString( '&' ) ) {\n\t\treturn null;\n\t}\n\n\tparser.allowWhitespace();\n\n\tvar expression = readExpression( parser );\n\n\tif ( !expression ) {\n\t\treturn null;\n\t}\n\n\tif ( !parser.matchString( tag.close ) ) {\n\t\tparser.error( (\"Expected closing delimiter '\" + (tag.close) + \"'\") );\n\t}\n\n\tvar triple = { t: TRIPLE };\n\trefineExpression( expression, triple ); // TODO handle this differently - it's mysterious\n\n\treturn triple;\n}\n\nvar legalAlias = /^(?:[a-zA-Z$_0-9]|\\\\\\.)+(?:(?:(?:[a-zA-Z$_0-9]|\\\\\\.)+)|(?:\\[[0-9]+\\]))*/;\nvar asRE = /^as/i;\n\nfunction readAliases( parser ) {\n\tvar aliases = [];\n\tvar alias;\n\tvar start = parser.pos;\n\n\tparser.allowWhitespace();\n\n\talias = readAlias( parser );\n\n\tif ( alias ) {\n\t\talias.x = refineExpression( alias.x, {} );\n\t\taliases.push( alias );\n\n\t\tparser.allowWhitespace();\n\n\t\twhile ( parser.matchString(',') ) {\n\t\t\talias = readAlias( parser );\n\n\t\t\tif ( !alias ) {\n\t\t\t\tparser.error( 'Expected another alias.' );\n\t\t\t}\n\n\t\t\talias.x = refineExpression( alias.x, {} );\n\t\t\taliases.push( alias );\n\n\t\t\tparser.allowWhitespace();\n\t\t}\n\n\t\treturn aliases;\n\t}\n\n\tparser.pos = start;\n\treturn null;\n}\n\nfunction readAlias( parser ) {\n\tvar start = parser.pos;\n\n\tparser.allowWhitespace();\n\n\tvar expr = readExpression( parser, [] );\n\n\tif ( !expr ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchPattern( asRE ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\tparser.allowWhitespace();\n\n\tvar alias = parser.matchPattern( legalAlias );\n\n\tif ( !alias ) {\n\t\tparser.error( 'Expected a legal alias name.' );\n\t}\n\n\treturn { n: alias, x: expr };\n}\n\nfunction readPartial ( parser, tag ) {\n\tvar type = parser.matchString( '>' ) || parser.matchString( 'yield' );\n\tvar partial = { t: type === '>' ? PARTIAL : YIELDER };\n\tvar aliases;\n\n\tif ( !type ) { return null; }\n\n\tparser.allowWhitespace();\n\n\tif ( type === '>' || !( aliases = parser.matchString( 'with' ) ) ) {\n\t\t// Partial names can include hyphens, so we can't use readExpression\n\t\t// blindly. Instead, we use the `relaxedNames` flag to indicate that\n\t\t// `foo-bar` should be read as a single name, rather than 'subtract\n\t\t// bar from foo'\n\t\tparser.relaxedNames = parser.strictRefinement = true;\n\t\tvar expression = readExpression( parser );\n\t\tparser.relaxedNames = parser.strictRefinement = false;\n\n\t\tif ( !expression && type === '>' ) { return null; }\n\n\t\tif ( expression ) {\n\t\t\trefineExpression( expression, partial ); // TODO...\n\t\t\tparser.allowWhitespace();\n\t\t\tif ( type !== '>' ) { aliases = parser.matchString( 'with' ); }\n\t\t}\n\t}\n\n\tparser.allowWhitespace();\n\n\t// check for alias context e.g. `{{>foo bar as bat, bip as bop}}`\n\tif ( aliases || type === '>' ) {\n\t\taliases = readAliases( parser );\n\t\tif ( aliases && aliases.length ) {\n\t\t\tpartial.z = aliases;\n\t\t}\n\n\t\t// otherwise check for literal context e.g. `{{>foo bar}}` then\n\t\t// turn it into `{{#with bar}}{{>foo}}{{/with}}`\n\t\telse if ( type === '>' ) {\n\t\t\tvar context = readExpression( parser );\n\t\t\tif ( context) {\n\t\t\t\tpartial.c = {};\n\t\t\t\trefineExpression( context, partial.c );\n\t\t\t}\n\t\t}\n\n\t\telse {\n\t\t\t// {{yield with}} requires some aliases\n\t\t\tparser.error( \"Expected one or more aliases\" );\n\t\t}\n\t}\n\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( tag.close ) ) {\n\t\tparser.error( (\"Expected closing delimiter '\" + (tag.close) + \"'\") );\n\t}\n\n\treturn partial;\n}\n\nfunction readComment ( parser, tag ) {\n\tif ( !parser.matchString( '!' ) ) {\n\t\treturn null;\n\t}\n\n\tvar index = parser.remaining().indexOf( tag.close );\n\n\tif ( index !== -1 ) {\n\t\tparser.pos += index + tag.close.length;\n\t\treturn { t: COMMENT };\n\t}\n}\n\nfunction readInterpolator ( parser, tag ) {\n\tvar expression, err;\n\n\tvar start = parser.pos;\n\n\t// TODO would be good for perf if we could do away with the try-catch\n\ttry {\n\t\texpression = readExpressionOrReference( parser, [ tag.close ] );\n\t} catch ( e ) {\n\t\terr = e;\n\t}\n\n\tif ( !expression ) {\n\t\tif ( parser.str.charAt( start ) === '!' ) {\n\t\t\t// special case - comment\n\t\t\tparser.pos = start;\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( err ) {\n\t\t\tthrow err;\n\t\t}\n\t}\n\n\tif ( !parser.matchString( tag.close ) ) {\n\t\tparser.error( (\"Expected closing delimiter '\" + (tag.close) + \"' after reference\") );\n\n\t\tif ( !expression ) {\n\t\t\t// special case - comment\n\t\t\tif ( parser.nextChar() === '!' ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tparser.error( \"Expected expression or legal reference\" );\n\t\t}\n\t}\n\n\tvar interpolator = { t: INTERPOLATOR };\n\trefineExpression( expression, interpolator ); // TODO handle this differently - it's mysterious\n\n\treturn interpolator;\n}\n\nfunction readClosing ( parser, tag ) {\n\tvar start = parser.pos;\n\n\tif ( !parser.matchString( tag.open ) ) {\n\t\treturn null;\n\t}\n\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( '/' ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\tparser.allowWhitespace();\n\n\tvar remaining = parser.remaining();\n\tvar index = remaining.indexOf( tag.close );\n\n\tif ( index !== -1 ) {\n\t\tvar closing = {\n\t\t\tt: CLOSING,\n\t\t\tr: remaining.substr( 0, index ).split( ' ' )[0]\n\t\t};\n\n\t\tparser.pos += index;\n\n\t\tif ( !parser.matchString( tag.close ) ) {\n\t\t\tparser.error( (\"Expected closing delimiter '\" + (tag.close) + \"'\") );\n\t\t}\n\n\t\treturn closing;\n\t}\n\n\tparser.pos = start;\n\treturn null;\n}\n\nvar elsePattern = /^\\s*else\\s*/;\n\nfunction readElse ( parser, tag ) {\n\tvar start = parser.pos;\n\n\tif ( !parser.matchString( tag.open ) ) {\n\t\treturn null;\n\t}\n\n\tif ( !parser.matchPattern( elsePattern ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\tif ( !parser.matchString( tag.close ) ) {\n\t\tparser.error( (\"Expected closing delimiter '\" + (tag.close) + \"'\") );\n\t}\n\n\treturn {\n\t\tt: ELSE\n\t};\n}\n\nvar elsePattern$1 = /^\\s*elseif\\s+/;\n\nfunction readElseIf ( parser, tag ) {\n\tvar start = parser.pos;\n\n\tif ( !parser.matchString( tag.open ) ) {\n\t\treturn null;\n\t}\n\n\tif ( !parser.matchPattern( elsePattern$1 ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\tvar expression = readExpression( parser );\n\n\tif ( !parser.matchString( tag.close ) ) {\n\t\tparser.error( (\"Expected closing delimiter '\" + (tag.close) + \"'\") );\n\t}\n\n\treturn {\n\t\tt: ELSEIF,\n\t\tx: expression\n\t};\n}\n\nvar handlebarsBlockCodes = {\n\teach:    SECTION_EACH,\n\tif:      SECTION_IF,\n\twith:    SECTION_IF_WITH,\n\tunless:  SECTION_UNLESS\n};\n\nvar indexRefPattern = /^\\s*:\\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/;\nvar keyIndexRefPattern = /^\\s*,\\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/;\nvar handlebarsBlockPattern = new RegExp( '^(' + Object.keys( handlebarsBlockCodes ).join( '|' ) + ')\\\\b' );\n\nfunction readSection ( parser, tag ) {\n\tvar expression, section, child, children, hasElse, block, unlessBlock, closed, i, expectedClose;\n\tvar aliasOnly = false;\n\n\tvar start = parser.pos;\n\n\tif ( parser.matchString( '^' ) ) {\n\t\t// watch out for parent context refs - {{^^/^^/foo}}\n\t\tif ( parser.matchString( '^/' ) ){\n\t\t\tparser.pos = start;\n\t\t\treturn null;\n\t\t}\n\t\tsection = { t: SECTION, f: [], n: SECTION_UNLESS };\n\t} else if ( parser.matchString( '#' ) ) {\n\t\tsection = { t: SECTION, f: [] };\n\n\t\tif ( parser.matchString( 'partial' ) ) {\n\t\t\tparser.pos = start - parser.standardDelimiters[0].length;\n\t\t\tparser.error( 'Partial definitions can only be at the top level of the template, or immediately inside components' );\n\t\t}\n\n\t\tif ( block = parser.matchPattern( handlebarsBlockPattern ) ) {\n\t\t\texpectedClose = block;\n\t\t\tsection.n = handlebarsBlockCodes[ block ];\n\t\t}\n\t} else {\n\t\treturn null;\n\t}\n\n\tparser.allowWhitespace();\n\n\tif ( block === 'with' ) {\n\t\tvar aliases = readAliases( parser );\n\t\tif ( aliases ) {\n\t\t\taliasOnly = true;\n\t\t\tsection.z = aliases;\n\t\t\tsection.t = ALIAS;\n\t\t}\n\t} else if ( block === 'each' ) {\n\t\tvar alias = readAlias( parser );\n\t\tif ( alias ) {\n\t\t\tsection.z = [ { n: alias.n, x: { r: '.' } } ];\n\t\t\texpression = alias.x;\n\t\t}\n\t}\n\n\tif ( !aliasOnly ) {\n\t\tif ( !expression ) { expression = readExpression( parser ); }\n\n\t\tif ( !expression ) {\n\t\t\tparser.error( 'Expected expression' );\n\t\t}\n\n\t\t// optional index and key references\n\t\tif ( i = parser.matchPattern( indexRefPattern ) ) {\n\t\t\tvar extra;\n\n\t\t\tif ( extra = parser.matchPattern( keyIndexRefPattern ) ) {\n\t\t\t\tsection.i = i + ',' + extra;\n\t\t\t} else {\n\t\t\t\tsection.i = i;\n\t\t\t}\n\t\t}\n\n\t\tif ( !block && expression.n ) {\n\t\t\texpectedClose = expression.n;\n\t\t}\n\t}\n\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( tag.close ) ) {\n\t\tparser.error( (\"Expected closing delimiter '\" + (tag.close) + \"'\") );\n\t}\n\n\tparser.sectionDepth += 1;\n\tchildren = section.f;\n\n\tvar pos;\n\tdo {\n\t\tpos = parser.pos;\n\t\tif ( child = readClosing( parser, tag ) ) {\n\t\t\tif ( expectedClose && child.r !== expectedClose ) {\n\t\t\t\tif ( !block ) {\n\t\t\t\t\tif ( child.r ) { parser.warn( (\"Expected \" + (tag.open) + \"/\" + expectedClose + (tag.close) + \" but found \" + (tag.open) + \"/\" + (child.r) + (tag.close)) ); }\n\t\t\t\t} else {\n\t\t\t\t\tparser.pos = pos;\n\t\t\t\t\tparser.error( (\"Expected \" + (tag.open) + \"/\" + expectedClose + (tag.close)) );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tparser.sectionDepth -= 1;\n\t\t\tclosed = true;\n\t\t}\n\n\t\telse if ( !aliasOnly && ( child = readElseIf( parser, tag ) ) ) {\n\t\t\tif ( section.n === SECTION_UNLESS ) {\n\t\t\t\tparser.error( '{{else}} not allowed in {{#unless}}' );\n\t\t\t}\n\n\t\t\tif ( hasElse ) {\n\t\t\t\tparser.error( 'illegal {{elseif...}} after {{else}}' );\n\t\t\t}\n\n\t\t\tif ( !unlessBlock ) {\n\t\t\t\tunlessBlock = [];\n\t\t\t}\n\n\t\t\tvar mustache = {\n\t\t\t\tt: SECTION,\n\t\t\t\tn: SECTION_IF,\n\t\t\t\tf: children = []\n\t\t\t};\n\t\t\trefineExpression( child.x, mustache );\n\n\t\t\tunlessBlock.push( mustache );\n\t\t}\n\n\t\telse if ( !aliasOnly && ( child = readElse( parser, tag ) ) ) {\n\t\t\tif ( section.n === SECTION_UNLESS ) {\n\t\t\t\tparser.error( '{{else}} not allowed in {{#unless}}' );\n\t\t\t}\n\n\t\t\tif ( hasElse ) {\n\t\t\t\tparser.error( 'there can only be one {{else}} block, at the end of a section' );\n\t\t\t}\n\n\t\t\thasElse = true;\n\n\t\t\t// use an unless block if there's no elseif\n\t\t\tif ( !unlessBlock ) {\n\t\t\t\tunlessBlock = [];\n\t\t\t}\n\n\t\t\tunlessBlock.push({\n\t\t\t\tt: SECTION,\n\t\t\t\tn: SECTION_UNLESS,\n\t\t\t\tf: children = []\n\t\t\t});\n\t\t}\n\n\t\telse {\n\t\t\tchild = parser.read( READERS );\n\n\t\t\tif ( !child ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tchildren.push( child );\n\t\t}\n\t} while ( !closed );\n\n\tif ( unlessBlock ) {\n\t\tsection.l = unlessBlock;\n\t}\n\n\tif ( !aliasOnly ) {\n\t\trefineExpression( expression, section );\n\t}\n\n\t// TODO if a section is empty it should be discarded. Don't do\n\t// that here though - we need to clean everything up first, as\n\t// it may contain removeable whitespace. As a temporary measure,\n\t// to pass the existing tests, remove empty `f` arrays\n\tif ( !section.f.length ) {\n\t\tdelete section.f;\n\t}\n\n\treturn section;\n}\n\nvar OPEN_COMMENT = '<!--';\nvar CLOSE_COMMENT = '-->';\n\nfunction readHtmlComment ( parser ) {\n\tvar start = parser.pos;\n\n\tif ( parser.textOnlyMode || !parser.matchString( OPEN_COMMENT ) ) {\n\t\treturn null;\n\t}\n\n\tvar remaining = parser.remaining();\n\tvar endIndex = remaining.indexOf( CLOSE_COMMENT );\n\n\tif ( endIndex === -1 ) {\n\t\tparser.error( 'Illegal HTML - expected closing comment sequence (\\'-->\\')' );\n\t}\n\n\tvar content = remaining.substr( 0, endIndex );\n\tparser.pos += endIndex + 3;\n\n\tvar comment = {\n\t\tt: COMMENT,\n\t\tc: content\n\t};\n\n\tif ( parser.includeLinePositions ) {\n\t\tcomment.p = parser.getLinePos( start );\n\t}\n\n\treturn comment;\n}\n\nvar leadingLinebreak = /^[ \\t\\f\\r\\n]*\\r?\\n/;\nvar trailingLinebreak = /\\r?\\n[ \\t\\f\\r\\n]*$/;\n\nvar stripStandalones = function ( items ) {\n\tvar i, current, backOne, backTwo, lastSectionItem;\n\n\tfor ( i=1; i<items.length; i+=1 ) {\n\t\tcurrent = items[i];\n\t\tbackOne = items[i-1];\n\t\tbackTwo = items[i-2];\n\n\t\t// if we're at the end of a [text][comment][text] sequence...\n\t\tif ( isString( current ) && isComment( backOne ) && isString( backTwo ) ) {\n\n\t\t\t// ... and the comment is a standalone (i.e. line breaks either side)...\n\t\t\tif ( trailingLinebreak.test( backTwo ) && leadingLinebreak.test( current ) ) {\n\n\t\t\t\t// ... then we want to remove the whitespace after the first line break\n\t\t\t\titems[i-2] = backTwo.replace( trailingLinebreak, '\\n' );\n\n\t\t\t\t// and the leading line break of the second text token\n\t\t\t\titems[i] = current.replace( leadingLinebreak, '' );\n\t\t\t}\n\t\t}\n\n\t\t// if the current item is a section, and it is preceded by a linebreak, and\n\t\t// its first item is a linebreak...\n\t\tif ( isSection( current ) && isString( backOne ) ) {\n\t\t\tif ( trailingLinebreak.test( backOne ) && isString( current.f[0] ) && leadingLinebreak.test( current.f[0] ) ) {\n\t\t\t\titems[i-1] = backOne.replace( trailingLinebreak, '\\n' );\n\t\t\t\tcurrent.f[0] = current.f[0].replace( leadingLinebreak, '' );\n\t\t\t}\n\t\t}\n\n\t\t// if the last item was a section, and it is followed by a linebreak, and\n\t\t// its last item is a linebreak...\n\t\tif ( isString( current ) && isSection( backOne ) ) {\n\t\t\tlastSectionItem = lastItem( backOne.f );\n\n\t\t\tif ( isString( lastSectionItem ) && trailingLinebreak.test( lastSectionItem ) && leadingLinebreak.test( current ) ) {\n\t\t\t\tbackOne.f[ backOne.f.length - 1 ] = lastSectionItem.replace( trailingLinebreak, '\\n' );\n\t\t\t\titems[i] = current.replace( leadingLinebreak, '' );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn items;\n};\n\nfunction isString ( item ) {\n\treturn typeof item === 'string';\n}\n\nfunction isComment ( item ) {\n\treturn item.t === COMMENT || item.t === DELIMCHANGE;\n}\n\nfunction isSection ( item ) {\n\treturn ( item.t === SECTION || item.t === INVERTED ) && item.f;\n}\n\nvar trimWhitespace = function ( items, leadingPattern, trailingPattern ) {\n\tvar item;\n\n\tif ( leadingPattern ) {\n\t\titem = items[0];\n\t\tif ( typeof item === 'string' ) {\n\t\t\titem = item.replace( leadingPattern, '' );\n\n\t\t\tif ( !item ) {\n\t\t\t\titems.shift();\n\t\t\t} else {\n\t\t\t\titems[0] = item;\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( trailingPattern ) {\n\t\titem = lastItem( items );\n\t\tif ( typeof item === 'string' ) {\n\t\t\titem = item.replace( trailingPattern, '' );\n\n\t\t\tif ( !item ) {\n\t\t\t\titems.pop();\n\t\t\t} else {\n\t\t\t\titems[ items.length - 1 ] = item;\n\t\t\t}\n\t\t}\n\t}\n};\n\nvar contiguousWhitespace = /[ \\t\\f\\r\\n]+/g;\nvar preserveWhitespaceElements = /^(?:pre|script|style|textarea)$/i;\nvar leadingWhitespace$1 = /^[ \\t\\f\\r\\n]+/;\nvar trailingWhitespace = /[ \\t\\f\\r\\n]+$/;\nvar leadingNewLine = /^(?:\\r\\n|\\r|\\n)/;\nvar trailingNewLine = /(?:\\r\\n|\\r|\\n)$/;\n\nfunction cleanup ( items, stripComments, preserveWhitespace, removeLeadingWhitespace, removeTrailingWhitespace ) {\n\tif ( typeof items === 'string' ) { return; }\n\n\tvar i,\n\t\titem,\n\t\tpreviousItem,\n\t\tnextItem,\n\t\tpreserveWhitespaceInsideFragment,\n\t\tremoveLeadingWhitespaceInsideFragment,\n\t\tremoveTrailingWhitespaceInsideFragment;\n\n\t// First pass - remove standalones and comments etc\n\tstripStandalones( items );\n\n\ti = items.length;\n\twhile ( i-- ) {\n\t\titem = items[i];\n\n\t\t// Remove delimiter changes, unsafe elements etc\n\t\tif ( item.exclude ) {\n\t\t\titems.splice( i, 1 );\n\t\t}\n\n\t\t// Remove comments, unless we want to keep them\n\t\telse if ( stripComments && item.t === COMMENT ) {\n\t\t\titems.splice( i, 1 );\n\t\t}\n\t}\n\n\t// If necessary, remove leading and trailing whitespace\n\ttrimWhitespace( items, removeLeadingWhitespace ? leadingWhitespace$1 : null, removeTrailingWhitespace ? trailingWhitespace : null );\n\n\ti = items.length;\n\twhile ( i-- ) {\n\t\titem = items[i];\n\n\t\t// Recurse\n\t\tif ( item.f ) {\n\t\t\tvar isPreserveWhitespaceElement = item.t === ELEMENT && preserveWhitespaceElements.test( item.e );\n\t\t\tpreserveWhitespaceInsideFragment = preserveWhitespace || isPreserveWhitespaceElement;\n\n\t\t\tif ( !preserveWhitespace && isPreserveWhitespaceElement ) {\n\t\t\t\ttrimWhitespace( item.f, leadingNewLine, trailingNewLine );\n\t\t\t}\n\n\t\t\tif ( !preserveWhitespaceInsideFragment ) {\n\t\t\t\tpreviousItem = items[ i - 1 ];\n\t\t\t\tnextItem = items[ i + 1 ];\n\n\t\t\t\t// if the previous item was a text item with trailing whitespace,\n\t\t\t\t// remove leading whitespace inside the fragment\n\t\t\t\tif ( !previousItem || ( typeof previousItem === 'string' && trailingWhitespace.test( previousItem ) ) ) {\n\t\t\t\t\tremoveLeadingWhitespaceInsideFragment = true;\n\t\t\t\t}\n\n\t\t\t\t// and vice versa\n\t\t\t\tif ( !nextItem || ( typeof nextItem === 'string' && leadingWhitespace$1.test( nextItem ) ) ) {\n\t\t\t\t\tremoveTrailingWhitespaceInsideFragment = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcleanup( item.f, stripComments, preserveWhitespaceInsideFragment, removeLeadingWhitespaceInsideFragment, removeTrailingWhitespaceInsideFragment );\n\t\t}\n\n\t\t// Split if-else blocks into two (an if, and an unless)\n\t\tif ( item.l ) {\n\t\t\tcleanup( item.l, stripComments, preserveWhitespace, removeLeadingWhitespaceInsideFragment, removeTrailingWhitespaceInsideFragment );\n\n\t\t\titem.l.forEach( function (s) { return s.l = 1; } );\n\t\t\titem.l.unshift( i + 1, 0 );\n\t\t\titems.splice.apply( items, item.l );\n\t\t\tdelete item.l; // TODO would be nice if there was a way around this\n\t\t}\n\n\t\t// Clean up conditional attributes\n\t\tif ( item.m ) {\n\t\t\tcleanup( item.m, stripComments, preserveWhitespace, removeLeadingWhitespaceInsideFragment, removeTrailingWhitespaceInsideFragment );\n\t\t\tif ( item.m.length < 1 ) { delete item.m; }\n\t\t}\n\t}\n\n\t// final pass - fuse text nodes together\n\ti = items.length;\n\twhile ( i-- ) {\n\t\tif ( typeof items[i] === 'string' ) {\n\t\t\tif ( typeof items[i+1] === 'string' ) {\n\t\t\t\titems[i] = items[i] + items[i+1];\n\t\t\t\titems.splice( i + 1, 1 );\n\t\t\t}\n\n\t\t\tif ( !preserveWhitespace ) {\n\t\t\t\titems[i] = items[i].replace( contiguousWhitespace, ' ' );\n\t\t\t}\n\n\t\t\tif ( items[i] === '' ) {\n\t\t\t\titems.splice( i, 1 );\n\t\t\t}\n\t\t}\n\t}\n}\n\nvar closingTagPattern = /^([a-zA-Z]{1,}:?[a-zA-Z0-9\\-]*)\\s*\\>/;\n\nfunction readClosingTag ( parser ) {\n\tvar tag;\n\n\tvar start = parser.pos;\n\n\t// are we looking at a closing tag?\n\tif ( !parser.matchString( '</' ) ) {\n\t\treturn null;\n\t}\n\n\tif ( tag = parser.matchPattern( closingTagPattern ) ) {\n\t\tif ( parser.inside && tag !== parser.inside ) {\n\t\t\tparser.pos = start;\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\tt: CLOSING_TAG,\n\t\t\te: tag\n\t\t};\n\t}\n\n\t// We have an illegal closing tag, report it\n\tparser.pos -= 2;\n\tparser.error( 'Illegal closing tag' );\n}\n\nvar tagNamePattern = /^[a-zA-Z]{1,}:?[a-zA-Z0-9\\-]*/;\nvar anchorPattern = /^[a-zA-Z_$][-a-zA-Z0-9_$]*/;\nvar validTagNameFollower = /^[\\s\\n\\/>]/;\nvar exclude = { exclude: true };\n\n// based on http://developers.whatwg.org/syntax.html#syntax-tag-omission\nvar disallowedContents = {\n\tli: [ 'li' ],\n\tdt: [ 'dt', 'dd' ],\n\tdd: [ 'dt', 'dd' ],\n\tp: 'address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul'.split( ' ' ),\n\trt: [ 'rt', 'rp' ],\n\trp: [ 'rt', 'rp' ],\n\toptgroup: [ 'optgroup' ],\n\toption: [ 'option', 'optgroup' ],\n\tthead: [ 'tbody', 'tfoot' ],\n\ttbody: [ 'tbody', 'tfoot' ],\n\ttfoot: [ 'tbody' ],\n\ttr: [ 'tr', 'tbody' ],\n\ttd: [ 'td', 'th', 'tr' ],\n\tth: [ 'td', 'th', 'tr' ]\n};\n\nfunction readElement$1 ( parser ) {\n\tvar attribute, selfClosing, children, partials, hasPartials, child, closed, pos, remaining, closingTag, anchor;\n\n\tvar start = parser.pos;\n\n\tif ( parser.inside || parser.inAttribute || parser.textOnlyMode ) {\n\t\treturn null;\n\t}\n\n\tif ( !parser.matchString( '<' ) ) {\n\t\treturn null;\n\t}\n\n\t// if this is a closing tag, abort straight away\n\tif ( parser.nextChar() === '/' ) {\n\t\treturn null;\n\t}\n\n\tvar element = {};\n\tif ( parser.includeLinePositions ) {\n\t\telement.p = parser.getLinePos( start );\n\t}\n\n\t// check for doctype decl\n\tif ( parser.matchString( '!' ) ) {\n\t\telement.t = DOCTYPE;\n\t\tif ( !parser.matchPattern( /^doctype/i ) ) {\n\t\t\tparser.error( 'Expected DOCTYPE declaration' );\n\t\t}\n\n\t\telement.a = parser.matchPattern( /^(.+?)>/ );\n\t\treturn element;\n\t}\n\t// check for anchor\n\telse if ( anchor = parser.matchString( '#' ) ) {\n\t\tparser.allowWhitespace();\n\t\telement.t = ANCHOR;\n\t\telement.n = parser.matchPattern( anchorPattern );\n\t}\n\t// otherwise, it's an element/component\n\telse {\n\t\telement.t = ELEMENT;\n\n\t\t// element name\n\t\telement.e = parser.matchPattern( tagNamePattern );\n\t\tif ( !element.e ) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t// next character must be whitespace, closing solidus or '>'\n\tif ( !validTagNameFollower.test( parser.nextChar() ) ) {\n\t\tparser.error( 'Illegal tag name' );\n\t}\n\n\tparser.allowWhitespace();\n\n\tparser.inTag = true;\n\n\t// directives and attributes\n\twhile ( attribute = readMustache( parser ) ) {\n\t\tif ( attribute !== false ) {\n\t\t\tif ( !element.m ) { element.m = []; }\n\t\t\telement.m.push( attribute );\n\t\t}\n\n\t\tparser.allowWhitespace();\n\t}\n\n\tparser.inTag = false;\n\n\t// allow whitespace before closing solidus\n\tparser.allowWhitespace();\n\n\t// self-closing solidus?\n\tif ( parser.matchString( '/' ) ) {\n\t\tselfClosing = true;\n\t}\n\n\t// closing angle bracket\n\tif ( !parser.matchString( '>' ) ) {\n\t\treturn null;\n\t}\n\n\tvar lowerCaseName = ( element.e || element.n ).toLowerCase();\n\tvar preserveWhitespace = parser.preserveWhitespace;\n\n\tif ( !selfClosing && ( anchor || !voidElementNames.test( element.e ) ) ) {\n\t\tif ( !anchor ) {\n\t\t\tparser.elementStack.push( lowerCaseName );\n\n\t\t\t// Special case - if we open a script element, further tags should\n\t\t\t// be ignored unless they're a closing script element\n\t\t\tif ( lowerCaseName in parser.interpolate ) {\n\t\t\t\tparser.inside = lowerCaseName;\n\t\t\t}\n\t\t}\n\n\t\tchildren = [];\n\t\tpartials = Object.create( null );\n\n\t\tdo {\n\t\t\tpos = parser.pos;\n\t\t\tremaining = parser.remaining();\n\n\t\t\tif ( !remaining ) {\n\t\t\t\tparser.error( (\"Missing end \" + (parser.elementStack.length > 1 ? 'tags' : 'tag') + \" (\" + (parser.elementStack.reverse().map( function (x) { return (\"</\" + x + \">\"); } ).join( '' )) + \")\") );\n\t\t\t}\n\n\t\t\t// if for example we're in an <li> element, and we see another\n\t\t\t// <li> tag, close the first so they become siblings\n\t\t\tif ( !anchor && !canContain( lowerCaseName, remaining ) ) {\n\t\t\t\tclosed = true;\n\t\t\t}\n\n\t\t\t// closing tag\n\t\t\telse if ( !anchor && ( closingTag = readClosingTag( parser ) ) ) {\n\t\t\t\tclosed = true;\n\n\t\t\t\tvar closingTagName = closingTag.e.toLowerCase();\n\n\t\t\t\t// if this *isn't* the closing tag for the current element...\n\t\t\t\tif ( closingTagName !== lowerCaseName ) {\n\t\t\t\t\t// rewind parser\n\t\t\t\t\tparser.pos = pos;\n\n\t\t\t\t\t// if it doesn't close a parent tag, error\n\t\t\t\t\tif ( !~parser.elementStack.indexOf( closingTagName ) ) {\n\t\t\t\t\t\tvar errorMessage = 'Unexpected closing tag';\n\n\t\t\t\t\t\t// add additional help for void elements, since component names\n\t\t\t\t\t\t// might clash with them\n\t\t\t\t\t\tif ( voidElementNames.test( closingTagName ) ) {\n\t\t\t\t\t\t\terrorMessage += \" (<\" + closingTagName + \"> is a void element - it cannot contain children)\";\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tparser.error( errorMessage );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\telse if ( anchor && readAnchorClose( parser, element.n ) ) {\n\t\t\t\tclosed = true;\n\t\t\t}\n\n\t\t\t// implicit close by closing section tag. TODO clean this up\n\t\t\telse if ( child = readClosing( parser, { open: parser.standardDelimiters[0], close: parser.standardDelimiters[1] } ) ) {\n\t\t\t\tclosed = true;\n\t\t\t\tparser.pos = pos;\n\t\t\t}\n\n\t\t\telse {\n\t\t\t\tif ( child = parser.read( PARTIAL_READERS ) ) {\n\t\t\t\t\tif ( partials[ child.n ] ) {\n\t\t\t\t\t\tparser.pos = pos;\n\t\t\t\t\t\tparser.error( 'Duplicate partial definition' );\n\t\t\t\t\t}\n\n\t\t\t\t\tcleanup( child.f, parser.stripComments, preserveWhitespace, !preserveWhitespace, !preserveWhitespace );\n\n\t\t\t\t\tpartials[ child.n ] = child.f;\n\t\t\t\t\thasPartials = true;\n\t\t\t\t}\n\n\t\t\t\telse {\n\t\t\t\t\tif ( child = parser.read( READERS ) ) {\n\t\t\t\t\t\tchildren.push( child );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclosed = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} while ( !closed );\n\n\t\tif ( children.length ) {\n\t\t\telement.f = children;\n\t\t}\n\n\t\tif ( hasPartials ) {\n\t\t\telement.p = partials;\n\t\t}\n\n\t\tparser.elementStack.pop();\n\t}\n\n\tparser.inside = null;\n\n\tif ( parser.sanitizeElements && parser.sanitizeElements.indexOf( lowerCaseName ) !== -1 ) {\n\t\treturn exclude;\n\t}\n\n\treturn element;\n}\n\nfunction canContain ( name, remaining ) {\n\tvar match = /^<([a-zA-Z][a-zA-Z0-9]*)/.exec( remaining );\n\tvar disallowed = disallowedContents[ name ];\n\n\tif ( !match || !disallowed ) {\n\t\treturn true;\n\t}\n\n\treturn !~disallowed.indexOf( match[1].toLowerCase() );\n}\n\nfunction readAnchorClose ( parser, name ) {\n\tvar pos = parser.pos;\n\tif ( !parser.matchString( '</' ) ) {\n\t\treturn null;\n\t}\n\n\tparser.matchString( '#' );\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( name ) ) {\n\t\tparser.pos = pos;\n\t\treturn null;\n\t}\n\n\tparser.allowWhitespace();\n\n\tif ( !parser.matchString( '>' ) ) {\n\t\tparser.pos = pos;\n\t\treturn null;\n\t}\n\n\treturn true;\n}\n\nfunction readText ( parser ) {\n\tvar index, disallowed, barrier;\n\n\tvar remaining = parser.remaining();\n\n\tif ( parser.textOnlyMode ) {\n\t\tdisallowed = parser.tags.map( function (t) { return t.open; } );\n\t\tdisallowed = disallowed.concat( parser.tags.map( function (t) { return '\\\\' + t.open; } ) );\n\n\t\tindex = getLowestIndex( remaining, disallowed );\n\t} else {\n\t\tbarrier = parser.inside ? '</' + parser.inside : '<';\n\n\t\tif ( parser.inside && !parser.interpolate[ parser.inside ] ) {\n\t\t\tindex = remaining.indexOf( barrier );\n\t\t} else {\n\t\t\tdisallowed = parser.tags.map( function (t) { return t.open; } );\n\t\t\tdisallowed = disallowed.concat( parser.tags.map( function (t) { return '\\\\' + t.open; } ) );\n\n\t\t\t// http://developers.whatwg.org/syntax.html#syntax-attributes\n\t\t\tif ( parser.inAttribute === true ) {\n\t\t\t\t// we're inside an unquoted attribute value\n\t\t\t\tdisallowed.push( \"\\\"\", \"'\", \"=\", \"<\", \">\", '`' );\n\t\t\t} else if ( parser.inAttribute ) {\n\t\t\t\t// quoted attribute value\n\t\t\t\tdisallowed.push( parser.inAttribute );\n\t\t\t} else {\n\t\t\t\tdisallowed.push( barrier );\n\t\t\t}\n\n\t\t\tindex = getLowestIndex( remaining, disallowed );\n\t\t}\n\t}\n\n\tif ( !index ) {\n\t\treturn null;\n\t}\n\n\tif ( index === -1 ) {\n\t\tindex = remaining.length;\n\t}\n\n\tparser.pos += index;\n\n\tif ( ( parser.inside && parser.inside !== 'textarea' ) || parser.textOnlyMode ) {\n\t\treturn remaining.substr( 0, index );\n\t} else {\n\t\treturn decodeCharacterReferences( remaining.substr( 0, index ) );\n\t}\n}\n\nvar partialDefinitionSectionPattern = /^\\s*#\\s*partial\\s+/;\n\nfunction readPartialDefinitionSection ( parser ) {\n\tvar child, closed;\n\n\tvar start = parser.pos;\n\n\tvar delimiters = parser.standardDelimiters;\n\n\tif ( !parser.matchString( delimiters[0] ) ) {\n\t\treturn null;\n\t}\n\n\tif ( !parser.matchPattern( partialDefinitionSectionPattern ) ) {\n\t\tparser.pos = start;\n\t\treturn null;\n\t}\n\n\tvar name = parser.matchPattern( /^[a-zA-Z_$][a-zA-Z_$0-9\\-\\/]*/ );\n\n\tif ( !name ) {\n\t\tparser.error( 'expected legal partial name' );\n\t}\n\n\tparser.allowWhitespace();\n\tif ( !parser.matchString( delimiters[1] ) ) {\n\t\tparser.error( (\"Expected closing delimiter '\" + (delimiters[1]) + \"'\") );\n\t}\n\n\tvar content = [];\n\n\tvar open = delimiters[0];\n\tvar close = delimiters[1];\n\n\tdo {\n\t\tif ( child = readClosing( parser, { open: open, close: close }) ) {\n\t\t\tif ( child.r !== 'partial' ) {\n\t\t\t\tparser.error( (\"Expected \" + open + \"/partial\" + close) );\n\t\t\t}\n\n\t\t\tclosed = true;\n\t\t}\n\n\t\telse {\n\t\t\tchild = parser.read( READERS );\n\n\t\t\tif ( !child ) {\n\t\t\t\tparser.error( (\"Expected \" + open + \"/partial\" + close) );\n\t\t\t}\n\n\t\t\tcontent.push( child );\n\t\t}\n\t} while ( !closed );\n\n\treturn {\n\t\tt: INLINE_PARTIAL,\n\t\tn: name,\n\t\tf: content\n\t};\n}\n\nfunction readTemplate ( parser ) {\n\tvar fragment = [];\n\tvar partials = Object.create( null );\n\tvar hasPartials = false;\n\n\tvar preserveWhitespace = parser.preserveWhitespace;\n\n\twhile ( parser.pos < parser.str.length ) {\n\t\tvar pos = parser.pos;\n\t\tvar item = (void 0), partial = (void 0);\n\n\t\tif ( partial = parser.read( PARTIAL_READERS ) ) {\n\t\t\tif ( partials[ partial.n ] ) {\n\t\t\t\tparser.pos = pos;\n\t\t\t\tparser.error( 'Duplicated partial definition' );\n\t\t\t}\n\n\t\t\tcleanup( partial.f, parser.stripComments, preserveWhitespace, !preserveWhitespace, !preserveWhitespace );\n\n\t\t\tpartials[ partial.n ] = partial.f;\n\t\t\thasPartials = true;\n\t\t} else if ( item = parser.read( READERS ) ) {\n\t\t\tfragment.push( item );\n\t\t} else  {\n\t\t\tparser.error( 'Unexpected template content' );\n\t\t}\n\t}\n\n\tvar result = {\n\t\tv: TEMPLATE_VERSION,\n\t\tt: fragment\n\t};\n\n\tif ( hasPartials ) {\n\t\tresult.p = partials;\n\t}\n\n\treturn result;\n}\n\nfunction insertExpressions ( obj, expr ) {\n\n\tObject.keys( obj ).forEach( function (key) {\n\t\tif  ( isExpression( key, obj ) ) { return addTo( obj, expr ); }\n\n\t\tvar ref = obj[ key ];\n\t\tif ( hasChildren( ref ) ) { insertExpressions( ref, expr ); }\n\t});\n}\n\nfunction isExpression( key, obj ) {\n\treturn key === 's' && Array.isArray( obj.r );\n}\n\nfunction addTo( obj, expr ) {\n\tvar s = obj.s;\n\tvar r = obj.r;\n\tif ( !expr[ s ] ) { expr[ s ] = fromExpression( s, r.length ); }\n}\n\nfunction hasChildren( ref ) {\n\treturn Array.isArray( ref ) || isObject( ref );\n}\n\nvar shared = {};\n\n// See https://github.com/ractivejs/template-spec for information\n// about the Ractive template specification\n\nvar STANDARD_READERS = [ readPartial, readUnescaped, readSection, readInterpolator, readComment ];\nvar TRIPLE_READERS = [ readTriple ];\nvar STATIC_READERS = [ readUnescaped, readSection, readInterpolator ]; // TODO does it make sense to have a static section?\n\nvar READERS = [ readMustache, readHtmlComment, readElement$1, readText ];\nvar PARTIAL_READERS = [ readPartialDefinitionSection ];\n\nvar defaultInterpolate = [ 'script', 'style', 'template' ];\n\nvar StandardParser = Parser.extend({\n\tinit: function init ( str, options ) {\n\t\tvar this$1 = this;\n\n\t\tvar tripleDelimiters = options.tripleDelimiters || shared.defaults.tripleDelimiters;\n\t\tvar staticDelimiters = options.staticDelimiters || shared.defaults.staticDelimiters;\n\t\tvar staticTripleDelimiters = options.staticTripleDelimiters || shared.defaults.staticTripleDelimiters;\n\n\t\tthis.standardDelimiters = options.delimiters || shared.defaults.delimiters;\n\n\t\tthis.tags = [\n\t\t\t{ isStatic: false, isTriple: false, open: this.standardDelimiters[0], close: this.standardDelimiters[1], readers: STANDARD_READERS },\n\t\t\t{ isStatic: false, isTriple: true,  open: tripleDelimiters[0],        close: tripleDelimiters[1],        readers: TRIPLE_READERS },\n\t\t\t{ isStatic: true,  isTriple: false, open: staticDelimiters[0],        close: staticDelimiters[1],        readers: STATIC_READERS },\n\t\t\t{ isStatic: true,  isTriple: true,  open: staticTripleDelimiters[0],  close: staticTripleDelimiters[1],  readers: TRIPLE_READERS }\n\t\t];\n\n\t\tthis.contextLines = options.contextLines || shared.defaults.contextLines;\n\n\t\tthis.sortMustacheTags();\n\n\t\tthis.sectionDepth = 0;\n\t\tthis.elementStack = [];\n\n\t\tthis.interpolate = Object.create( options.interpolate || shared.defaults.interpolate || {} );\n\t\tthis.interpolate.textarea = true;\n\t\tdefaultInterpolate.forEach( function (t) { return this$1.interpolate[ t ] = !options.interpolate || options.interpolate[ t ] !== false; } );\n\n\t\tif ( options.sanitize === true ) {\n\t\t\toptions.sanitize = {\n\t\t\t\t// blacklist from https://code.google.com/p/google-caja/source/browse/trunk/src/com/google/caja/lang/html/html4-elements-whitelist.json\n\t\t\t\telements: 'applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title'.split( ' ' ),\n\t\t\t\teventAttributes: true\n\t\t\t};\n\t\t}\n\n\t\tthis.stripComments = options.stripComments !== false;\n\t\tthis.preserveWhitespace = options.preserveWhitespace;\n\t\tthis.sanitizeElements = options.sanitize && options.sanitize.elements;\n\t\tthis.sanitizeEventAttributes = options.sanitize && options.sanitize.eventAttributes;\n\t\tthis.includeLinePositions = options.includeLinePositions;\n\t\tthis.textOnlyMode = options.textOnlyMode;\n\t\tthis.csp = options.csp;\n\n\t\tthis.transforms = options.transforms || options.parserTransforms;\n\t\tif ( this.transforms ) {\n\t\t\tthis.transforms = this.transforms.concat( shared.defaults.parserTransforms );\n\t\t} else {\n\t\t\tthis.transforms = shared.defaults.parserTransforms;\n\t\t}\n\t},\n\n\tpostProcess: function postProcess ( result ) {\n\t\t// special case - empty string\n\t\tif ( !result.length ) {\n\t\t\treturn { t: [], v: TEMPLATE_VERSION };\n\t\t}\n\n\t\tif ( this.sectionDepth > 0 ) {\n\t\t\tthis.error( 'A section was left open' );\n\t\t}\n\n\t\tcleanup( result[0].t, this.stripComments, this.preserveWhitespace, !this.preserveWhitespace, !this.preserveWhitespace );\n\n\t\tvar transforms = this.transforms;\n\t\tif ( transforms.length ) {\n\t\t\tvar tlen = transforms.length;\n\t\t\tvar walk = function ( fragment ) {\n\t\t\t\tvar len = fragment.length;\n\n\t\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\t\tvar node = fragment[i];\n\n\t\t\t\t\tif ( node.t === ELEMENT ) {\n\t\t\t\t\t\tfor ( var j = 0; j < tlen; j++ ) {\n\t\t\t\t\t\t\tvar res = transforms[j].call( shared.Ractive, node );\n\t\t\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t} else if ( res.remove ) {\n\t\t\t\t\t\t\t\tfragment.splice( i--, 1 );\n\t\t\t\t\t\t\t\tlen--;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t} else if ( res.replace ) {\n\t\t\t\t\t\t\t\tif ( Array.isArray( res.replace ) ) {\n\t\t\t\t\t\t\t\t\tfragment.splice.apply( fragment, [ i--, 1 ].concat( res.replace ) );\n\t\t\t\t\t\t\t\t\tlen += res.replace.length - 1;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tfragment[i--] = node = res.replace;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// watch for partials\n\t\t\t\t\t\tif ( node.p ) {\n\t\t\t\t\t\t\tfor ( var k in node.p ) { walk( node.p[k] ); }\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( node.f ) { walk( node.f ); }\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// process the root fragment\n\t\t\twalk( result[0].t );\n\n\t\t\t// watch for root partials\n\t\t\tif ( result[0].p ) {\n\t\t\t\tfor ( var k in result[0].p ) { walk( result[0].p[k] ); }\n\t\t\t}\n\t\t}\n\n\t\tif ( this.csp !== false ) {\n\t\t\tvar expr = {};\n\t\t\tinsertExpressions( result[0].t, expr );\n\t\t\tif ( Object.keys( expr ).length ) { result[0].e = expr; }\n\t\t}\n\n\t\treturn result[0];\n\t},\n\n\tconverters: [\n\t\treadTemplate\n\t],\n\n\tsortMustacheTags: function sortMustacheTags () {\n\t\t// Sort in order of descending opening delimiter length (longer first),\n\t\t// to protect against opening delimiters being substrings of each other\n\t\tthis.tags.sort( function ( a, b ) {\n\t\t\treturn b.open.length - a.open.length;\n\t\t});\n\t}\n});\n\nfunction parse ( template, options ) {\n\treturn new StandardParser( template, options || {} ).result;\n}\n\nvar parseOptions = [\n\t'delimiters',\n\t'tripleDelimiters',\n\t'staticDelimiters',\n\t'staticTripleDelimiters',\n\t'csp',\n\t'interpolate',\n\t'preserveWhitespace',\n\t'sanitize',\n\t'stripComments',\n\t'contextLines'\n];\n\nvar TEMPLATE_INSTRUCTIONS = \"Either preparse or use a ractive runtime source that includes the parser. \";\n\nvar COMPUTATION_INSTRUCTIONS = \"Either include a version of Ractive that can parse or convert your computation strings to functions.\";\n\n\nfunction throwNoParse ( method, error, instructions ) {\n\tif ( !method ) {\n\t\tfatal( (\"Missing Ractive.parse - cannot parse \" + error + \". \" + instructions) );\n\t}\n}\n\nfunction createFunction ( body, length ) {\n\tthrowNoParse( fromExpression, 'new expression function', TEMPLATE_INSTRUCTIONS );\n\treturn fromExpression( body, length );\n}\n\nfunction createFunctionFromString ( str, bindTo ) {\n\tthrowNoParse( fromComputationString, 'compution string \"${str}\"', COMPUTATION_INSTRUCTIONS );\n\treturn fromComputationString( str, bindTo );\n}\n\nvar parser = {\n\n\tfromId: function fromId ( id, options ) {\n\t\tif ( !doc ) {\n\t\t\tif ( options && options.noThrow ) { return; }\n\t\t\tthrow new Error( (\"Cannot retrieve template #\" + id + \" as Ractive is not running in a browser.\") );\n\t\t}\n\n\t\tif ( id ) { id = id.replace( /^#/, '' ); }\n\n\t\tvar template;\n\n\t\tif ( !( template = doc.getElementById( id ) )) {\n\t\t\tif ( options && options.noThrow ) { return; }\n\t\t\tthrow new Error( (\"Could not find template element with id #\" + id) );\n\t\t}\n\n\t\tif ( template.tagName.toUpperCase() !== 'SCRIPT' ) {\n\t\t\tif ( options && options.noThrow ) { return; }\n\t\t\tthrow new Error( (\"Template element with id #\" + id + \", must be a <script> element\") );\n\t\t}\n\n\t\treturn ( 'textContent' in template ? template.textContent : template.innerHTML );\n\n\t},\n\n\tisParsed: function isParsed ( template) {\n\t\treturn !( typeof template === 'string' );\n\t},\n\n\tgetParseOptions: function getParseOptions ( ractive ) {\n\t\t// Could be Ractive or a Component\n\t\tif ( ractive.defaults ) { ractive = ractive.defaults; }\n\n\t\treturn parseOptions.reduce( function ( val, key ) {\n\t\t\tval[ key ] = ractive[ key ];\n\t\t\treturn val;\n\t\t}, {});\n\t},\n\n\tparse: function parse$1 ( template, options ) {\n\t\tthrowNoParse( parse, 'template', TEMPLATE_INSTRUCTIONS );\n\t\tvar parsed = parse( template, options );\n\t\taddFunctions( parsed );\n\t\treturn parsed;\n\t},\n\n\tparseFor: function parseFor( template, ractive ) {\n\t\treturn this.parse( template, this.getParseOptions( ractive ) );\n\t}\n};\n\nvar templateConfigurator = {\n\tname: 'template',\n\n\textend: function extend ( Parent, proto, options ) {\n\t\t// only assign if exists\n\t\tif ( 'template' in options ) {\n\t\t\tvar template = options.template;\n\n\t\t\tif ( typeof template === 'function' ) {\n\t\t\t\tproto.template = template;\n\t\t\t} else {\n\t\t\t\tproto.template = parseTemplate( template, proto );\n\t\t\t}\n\t\t}\n\t},\n\n\tinit: function init ( Parent, ractive, options ) {\n\t\t// TODO because of prototypal inheritance, we might just be able to use\n\t\t// ractive.template, and not bother passing through the Parent object.\n\t\t// At present that breaks the test mocks' expectations\n\t\tvar template = 'template' in options ? options.template : Parent.prototype.template;\n\t\ttemplate = template || { v: TEMPLATE_VERSION, t: [] };\n\n\t\tif ( typeof template === 'function' ) {\n\t\t\tvar fn = template;\n\t\t\ttemplate = getDynamicTemplate( ractive, fn );\n\n\t\t\tractive._config.template = {\n\t\t\t\tfn: fn,\n\t\t\t\tresult: template\n\t\t\t};\n\t\t}\n\n\t\ttemplate = parseTemplate( template, ractive );\n\n\t\t// TODO the naming of this is confusing - ractive.template refers to [...],\n\t\t// but Component.prototype.template refers to {v:1,t:[],p:[]}...\n\t\t// it's unnecessary, because the developer never needs to access\n\t\t// ractive.template\n\t\tractive.template = template.t;\n\n\t\tif ( template.p ) {\n\t\t\textendPartials( ractive.partials, template.p );\n\t\t}\n\t},\n\n\treset: function reset ( ractive ) {\n\t\tvar result = resetValue( ractive );\n\n\t\tif ( result ) {\n\t\t\tvar parsed = parseTemplate( result, ractive );\n\n\t\t\tractive.template = parsed.t;\n\t\t\textendPartials( ractive.partials, parsed.p, true );\n\n\t\t\treturn true;\n\t\t}\n\t}\n};\n\nfunction resetValue ( ractive ) {\n\tvar initial = ractive._config.template;\n\n\t// If this isn't a dynamic template, there's nothing to do\n\tif ( !initial || !initial.fn ) {\n\t\treturn;\n\t}\n\n\tvar result = getDynamicTemplate( ractive, initial.fn );\n\n\t// TODO deep equality check to prevent unnecessary re-rendering\n\t// in the case of already-parsed templates\n\tif ( result !== initial.result ) {\n\t\tinitial.result = result;\n\t\treturn result;\n\t}\n}\n\nfunction getDynamicTemplate ( ractive, fn ) {\n\treturn fn.call( ractive, {\n\t\tfromId: parser.fromId,\n\t\tisParsed: parser.isParsed,\n\t\tparse: function parse ( template, options ) {\n\t\t\tif ( options === void 0 ) options = parser.getParseOptions( ractive );\n\n\t\t\treturn parser.parse( template, options );\n\t\t}\n\t});\n}\n\nfunction parseTemplate ( template, ractive ) {\n\tif ( typeof template === 'string' ) {\n\t\t// parse will validate and add expression functions\n\t\ttemplate = parseAsString( template, ractive );\n\t}\n\telse {\n\t\t// need to validate and add exp for already parsed template\n\t\tvalidate$1( template );\n\t\taddFunctions( template );\n\t}\n\n\treturn template;\n}\n\nfunction parseAsString ( template, ractive ) {\n\t// ID of an element containing the template?\n\tif ( template[0] === '#' ) {\n\t\ttemplate = parser.fromId( template );\n\t}\n\n\treturn parser.parseFor( template, ractive );\n}\n\nfunction validate$1( template ) {\n\n\t// Check that the template even exists\n\tif ( template == undefined ) {\n\t\tthrow new Error( (\"The template cannot be \" + template + \".\") );\n\t}\n\n\t// Check the parsed template has a version at all\n\telse if ( typeof template.v !== 'number' ) {\n\t\tthrow new Error( 'The template parser was passed a non-string template, but the template doesn\\'t have a version.  Make sure you\\'re passing in the template you think you are.' );\n\t}\n\n\t// Check we're using the correct version\n\telse if ( template.v !== TEMPLATE_VERSION ) {\n\t\tthrow new Error( (\"Mismatched template version (expected \" + TEMPLATE_VERSION + \", got \" + (template.v) + \") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app\") );\n\t}\n}\n\nfunction extendPartials ( existingPartials, newPartials, overwrite ) {\n\tif ( !newPartials ) { return; }\n\n\t// TODO there's an ambiguity here - we need to overwrite in the `reset()`\n\t// case, but not initially...\n\n\tfor ( var key in newPartials ) {\n\t\tif ( overwrite || !existingPartials.hasOwnProperty( key ) ) {\n\t\t\texistingPartials[ key ] = newPartials[ key ];\n\t\t}\n\t}\n}\n\nvar registryNames = [\n\t'adaptors',\n\t'components',\n\t'computed',\n\t'decorators',\n\t'easing',\n\t'events',\n\t'interpolators',\n\t'partials',\n\t'transitions'\n];\n\nvar Registry = function Registry ( name, useDefaults ) {\n\tthis.name = name;\n\tthis.useDefaults = useDefaults;\n};\n\nRegistry.prototype.extend = function extend ( Parent, proto, options ) {\n\tthis.configure(\n\t\tthis.useDefaults ? Parent.defaults : Parent,\n\t\tthis.useDefaults ? proto : proto.constructor,\n\t\toptions );\n};\n\nRegistry.prototype.init = function init () {\n\t// noop\n};\n\nRegistry.prototype.configure = function configure ( Parent, target, options ) {\n\tvar name = this.name;\n\tvar option = options[ name ];\n\n\tvar registry = Object.create( Parent[name] );\n\n\tfor ( var key in option ) {\n\t\tregistry[ key ] = option[ key ];\n\t}\n\n\ttarget[ name ] = registry;\n};\n\nRegistry.prototype.reset = function reset ( ractive ) {\n\tvar registry = ractive[ this.name ];\n\tvar changed = false;\n\n\tObject.keys( registry ).forEach( function (key) {\n\t\tvar item = registry[ key ];\n\n\t\tif ( item._fn ) {\n\t\t\tif ( item._fn.isOwner ) {\n\t\t\t\tregistry[key] = item._fn;\n\t\t\t} else {\n\t\t\t\tdelete registry[key];\n\t\t\t}\n\t\t\tchanged = true;\n\t\t}\n\t});\n\n\treturn changed;\n};\n\nvar registries = registryNames.map( function (name) { return new Registry( name, name === 'computed' ); } );\n\nfunction wrap ( parent, name, method ) {\n\tif ( !/_super/.test( method ) ) { return method; }\n\n\tfunction wrapper () {\n\t\tvar superMethod = getSuperMethod( wrapper._parent, name );\n\t\tvar hasSuper = '_super' in this;\n\t\tvar oldSuper = this._super;\n\n\t\tthis._super = superMethod;\n\n\t\tvar result = method.apply( this, arguments );\n\n\t\tif ( hasSuper ) {\n\t\t\tthis._super = oldSuper;\n\t\t} else {\n\t\t\tdelete this._super;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\twrapper._parent = parent;\n\twrapper._method = method;\n\n\treturn wrapper;\n}\n\nfunction getSuperMethod ( parent, name ) {\n\tif ( name in parent ) {\n\t\tvar value = parent[ name ];\n\n\t\treturn typeof value === 'function' ?\n\t\t\tvalue :\n\t\t\tfunction () { return value; };\n\t}\n\n\treturn noop;\n}\n\nfunction getMessage( deprecated, correct, isError ) {\n\treturn \"options.\" + deprecated + \" has been deprecated in favour of options.\" + correct + \".\"\n\t\t+ ( isError ? (\" You cannot specify both options, please use options.\" + correct + \".\") : '' );\n}\n\nfunction deprecateOption ( options, deprecatedOption, correct ) {\n\tif ( deprecatedOption in options ) {\n\t\tif( !( correct in options ) ) {\n\t\t\twarnIfDebug( getMessage( deprecatedOption, correct ) );\n\t\t\toptions[ correct ] = options[ deprecatedOption ];\n\t\t} else {\n\t\t\tthrow new Error( getMessage( deprecatedOption, correct, true ) );\n\t\t}\n\t}\n}\n\nfunction deprecate ( options ) {\n\tdeprecateOption( options, 'beforeInit', 'onconstruct' );\n\tdeprecateOption( options, 'init', 'onrender' );\n\tdeprecateOption( options, 'complete', 'oncomplete' );\n\tdeprecateOption( options, 'eventDefinitions', 'events' );\n\n\t// Using extend with Component instead of options,\n\t// like Human.extend( Spider ) means adaptors as a registry\n\t// gets copied to options. So we have to check if actually an array\n\tif ( Array.isArray( options.adaptors ) ) {\n\t\tdeprecateOption( options, 'adaptors', 'adapt' );\n\t}\n}\n\nvar custom = {\n\tadapt: adaptConfigurator,\n\tcss: cssConfigurator,\n\tdata: dataConfigurator,\n\ttemplate: templateConfigurator\n};\n\nvar defaultKeys = Object.keys( defaults );\n\nvar isStandardKey = makeObj( defaultKeys.filter( function (key) { return !custom[ key ]; } ) );\n\n// blacklisted keys that we don't double extend\nvar isBlacklisted = makeObj( defaultKeys.concat( registries.map( function (r) { return r.name; } ), [ 'on', 'observe', 'attributes' ] ) );\n\nvar order = [].concat(\n\tdefaultKeys.filter( function (key) { return !registries[ key ] && !custom[ key ]; } ),\n\tregistries,\n\t//custom.data,\n\tcustom.template,\n\tcustom.css\n);\n\nvar config = {\n\textend: function ( Parent, proto, options ) { return configure( 'extend', Parent, proto, options ); },\n\n\tinit: function ( Parent, ractive, options ) { return configure( 'init', Parent, ractive, options ); },\n\n\treset: function (ractive) {\n\t\treturn order.filter( function (c) {\n\t\t\treturn c.reset && c.reset( ractive );\n\t\t}).map( function (c) { return c.name; } );\n\t},\n\n\t// this defines the order. TODO this isn't used anywhere in the codebase,\n\t// only in the test suite - should get rid of it\n\torder: order\n};\n\nfunction configure ( method, Parent, target, options ) {\n\tdeprecate( options );\n\n\tfor ( var key in options ) {\n\t\tif ( isStandardKey.hasOwnProperty( key ) ) {\n\t\t\tvar value = options[ key ];\n\n\t\t\t// warn the developer if they passed a function and ignore its value\n\n\t\t\t// NOTE: we allow some functions on \"el\" because we duck type element lists\n\t\t\t// and some libraries or ef'ed-up virtual browsers (phantomJS) return a\n\t\t\t// function object as the result of querySelector methods\n\t\t\tif ( key !== 'el' && typeof value === 'function' ) {\n\t\t\t\twarnIfDebug( (key + \" is a Ractive option that does not expect a function and will be ignored\"),\n\t\t\t\t\tmethod === 'init' ? target : null );\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttarget[ key ] = value;\n\t\t\t}\n\t\t}\n\t}\n\n\t// disallow combination of `append` and `enhance`\n\tif ( options.append && options.enhance ) {\n\t\tthrow new Error( 'Cannot use append and enhance at the same time' );\n\t}\n\n\tregistries.forEach( function (registry) {\n\t\tregistry[ method ]( Parent, target, options );\n\t});\n\n\tadaptConfigurator[ method ]( Parent, target, options );\n\ttemplateConfigurator[ method ]( Parent, target, options );\n\tcssConfigurator[ method ]( Parent, target, options );\n\n\textendOtherMethods( Parent.prototype, target, options );\n}\n\nvar _super = /\\b_super\\b/;\nfunction extendOtherMethods ( parent, target, options ) {\n\tfor ( var key in options ) {\n\t\tif ( !isBlacklisted[ key ] && options.hasOwnProperty( key ) ) {\n\t\t\tvar member = options[ key ];\n\n\t\t\t// if this is a method that overwrites a method, wrap it:\n\t\t\tif ( typeof member === 'function' ) {\n\t\t\t\tif ( key in RactiveProto && !_super.test( member.toString() ) ) {\n\t\t\t\t\twarnIfDebug( (\"Overriding Ractive prototype function '\" + key + \"' without calling the '\" + _super + \"' method can be very dangerous.\") );\n\t\t\t\t}\n\t\t\t\tmember = wrap( parent, key, member );\n\t\t\t}\n\n\t\t\ttarget[ key ] = member;\n\t\t}\n\t}\n}\n\nfunction makeObj ( array ) {\n\tvar obj = {};\n\tarray.forEach( function (x) { return obj[x] = true; } );\n\treturn obj;\n}\n\nvar Item = function Item ( options ) {\n\tthis.parentFragment = options.parentFragment;\n\tthis.ractive = options.parentFragment.ractive;\n\n\tthis.template = options.template;\n\tthis.index = options.index;\n\tthis.type = options.template.t;\n\n\tthis.dirty = false;\n};\n\nItem.prototype.bubble = function bubble () {\n\tif ( !this.dirty ) {\n\t\tthis.dirty = true;\n\t\tthis.parentFragment.bubble();\n\t}\n};\n\nItem.prototype.destroyed = function destroyed () {\n\tif ( this.fragment ) { this.fragment.destroyed(); }\n};\n\nItem.prototype.find = function find () {\n\treturn null;\n};\n\nItem.prototype.findComponent = function findComponent () {\n\treturn null;\n};\n\nItem.prototype.findNextNode = function findNextNode () {\n\treturn this.parentFragment.findNextNode( this );\n};\n\nItem.prototype.shuffled = function shuffled () {\n\tif ( this.fragment ) { this.fragment.shuffled(); }\n};\n\nItem.prototype.valueOf = function valueOf () {\n\treturn this.toString();\n};\n\nItem.prototype.findAll = noop;\nItem.prototype.findAllComponents = noop;\n\nvar ContainerItem = (function (Item) {\n\tfunction ContainerItem ( options ) {\n\t\tItem.call( this, options );\n\t}\n\n\tif ( Item ) ContainerItem.__proto__ = Item;\n\tContainerItem.prototype = Object.create( Item && Item.prototype );\n\tContainerItem.prototype.constructor = ContainerItem;\n\n\tContainerItem.prototype.detach = function detach () {\n\t\treturn this.fragment ? this.fragment.detach() : createDocumentFragment();\n\t};\n\n\tContainerItem.prototype.find = function find ( selector ) {\n\t\tif ( this.fragment ) {\n\t\t\treturn this.fragment.find( selector );\n\t\t}\n\t};\n\n\tContainerItem.prototype.findAll = function findAll ( selector, options ) {\n\t\tif ( this.fragment ) {\n\t\t\tthis.fragment.findAll( selector, options );\n\t\t}\n\t};\n\n\tContainerItem.prototype.findComponent = function findComponent ( name ) {\n\t\tif ( this.fragment ) {\n\t\t\treturn this.fragment.findComponent( name );\n\t\t}\n\t};\n\n\tContainerItem.prototype.findAllComponents = function findAllComponents ( name, options ) {\n\t\tif ( this.fragment ) {\n\t\t\tthis.fragment.findAllComponents( name, options );\n\t\t}\n\t};\n\n\tContainerItem.prototype.firstNode = function firstNode ( skipParent ) {\n\t\treturn this.fragment && this.fragment.firstNode( skipParent );\n\t};\n\n\tContainerItem.prototype.toString = function toString ( escape ) {\n\t\treturn this.fragment ? this.fragment.toString( escape ) : '';\n\t};\n\n\treturn ContainerItem;\n}(Item));\n\nvar ComputationChild = (function (Model$$1) {\n\tfunction ComputationChild ( parent, key ) {\n\t\tModel$$1.call( this, parent, key );\n\n\t\tthis.isReadonly = !this.root.ractive.syncComputedChildren;\n\t\tthis.dirty = true;\n\t}\n\n\tif ( Model$$1 ) ComputationChild.__proto__ = Model$$1;\n\tComputationChild.prototype = Object.create( Model$$1 && Model$$1.prototype );\n\tComputationChild.prototype.constructor = ComputationChild;\n\n\tComputationChild.prototype.applyValue = function applyValue ( value ) {\n\t\tModel$$1.prototype.applyValue.call( this, value );\n\n\t\tif ( !this.isReadonly ) {\n\t\t\tvar source = this.parent;\n\t\t\t// computed models don't have a shuffle method\n\t\t\twhile ( source && source.shuffle ) {\n\t\t\t\tsource = source.parent;\n\t\t\t}\n\n\t\t\tif ( source ) {\n\t\t\t\tsource.dependencies.forEach( mark );\n\t\t\t}\n\t\t}\n\t};\n\n\tComputationChild.prototype.get = function get ( shouldCapture ) {\n\t\tif ( shouldCapture ) { capture( this ); }\n\n\t\tif ( this.dirty ) {\n\t\t\tthis.dirty = false;\n\t\t\tvar parentValue = this.parent.get();\n\t\t\tthis.value = parentValue ? parentValue[ this.key ] : undefined;\n\t\t}\n\n\t\treturn this.value;\n\t};\n\n\tComputationChild.prototype.handleChange = function handleChange$1 () {\n\t\tthis.dirty = true;\n\n\t\tif ( this.boundValue ) { this.boundValue = null; }\n\n\t\tthis.links.forEach( marked );\n\t\tthis.deps.forEach( handleChange );\n\t\tthis.children.forEach( handleChange );\n\t};\n\n\tComputationChild.prototype.joinKey = function joinKey ( key ) {\n\t\tif ( key === undefined || key === '' ) { return this; }\n\n\t\tif ( !this.childByKey.hasOwnProperty( key ) ) {\n\t\t\tvar child = new ComputationChild( this, key );\n\t\t\tthis.children.push( child );\n\t\t\tthis.childByKey[ key ] = child;\n\t\t}\n\n\t\treturn this.childByKey[ key ];\n\t};\n\n\treturn ComputationChild;\n}(Model));\n\n/* global console */\n/* eslint no-console:\"off\" */\n\nvar Computation = (function (Model$$1) {\n\tfunction Computation ( viewmodel, signature, key ) {\n\t\tModel$$1.call( this, null, null );\n\n\t\tthis.root = this.parent = viewmodel;\n\t\tthis.signature = signature;\n\n\t\tthis.key = key; // not actually used, but helps with debugging\n\t\tthis.isExpression = key && key[0] === '@';\n\n\t\tthis.isReadonly = !this.signature.setter;\n\n\t\tthis.context = viewmodel.computationContext;\n\n\t\tthis.dependencies = [];\n\n\t\tthis.children = [];\n\t\tthis.childByKey = {};\n\n\t\tthis.deps = [];\n\n\t\tthis.dirty = true;\n\n\t\t// TODO: is there a less hackish way to do this?\n\t\tthis.shuffle = undefined;\n\t}\n\n\tif ( Model$$1 ) Computation.__proto__ = Model$$1;\n\tComputation.prototype = Object.create( Model$$1 && Model$$1.prototype );\n\tComputation.prototype.constructor = Computation;\n\n\tComputation.prototype.get = function get ( shouldCapture ) {\n\t\tif ( shouldCapture ) { capture( this ); }\n\n\t\tif ( this.dirty ) {\n\t\t\tthis.dirty = false;\n\t\t\tvar old = this.value;\n\t\t\tthis.value = this.getValue();\n\t\t\tif ( !isEqual( old, this.value ) ) { this.notifyUpstream(); }\n\t\t\tif ( this.wrapper ) { this.newWrapperValue = this.value; }\n\t\t\tthis.adapt();\n\t\t}\n\n\t\t// if capturing, this value needs to be unwrapped because it's for external use\n\t\treturn maybeBind( this, shouldCapture && this.wrapper ? this.wrapperValue : this.value );\n\t};\n\n\tComputation.prototype.getValue = function getValue () {\n\t\tstartCapturing();\n\t\tvar result;\n\n\t\ttry {\n\t\t\tresult = this.signature.getter.call( this.context );\n\t\t} catch ( err ) {\n\t\t\twarnIfDebug( (\"Failed to compute \" + (this.getKeypath()) + \": \" + (err.message || err)) );\n\n\t\t\t// TODO this is all well and good in Chrome, but...\n\t\t\t// ...also, should encapsulate this stuff better, and only\n\t\t\t// show it if Ractive.DEBUG\n\t\t\tif ( hasConsole ) {\n\t\t\t\tif ( console.groupCollapsed ) { console.groupCollapsed( '%cshow details', 'color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;' ); }\n\t\t\t\tvar sig = this.signature;\n\t\t\t\tconsole.error( ((err.name) + \": \" + (err.message) + \"\\n\\n\" + (sig.getterString) + (sig.getterUseStack ? '\\n\\n' + err.stack : '')) );\n\t\t\t\tif ( console.groupCollapsed ) { console.groupEnd(); }\n\t\t\t}\n\t\t}\n\n\t\tvar dependencies = stopCapturing();\n\t\tthis.setDependencies( dependencies );\n\n\t\treturn result;\n\t};\n\n\tComputation.prototype.mark = function mark () {\n\t\tthis.handleChange();\n\t};\n\n\tComputation.prototype.rebind = function rebind ( next, previous ) {\n\t\t// computations will grab all of their deps again automagically\n\t\tif ( next !== previous ) { this.handleChange(); }\n\t};\n\n\tComputation.prototype.set = function set ( value ) {\n\t\tif ( this.isReadonly ) {\n\t\t\tthrow new Error( (\"Cannot set read-only computed value '\" + (this.key) + \"'\") );\n\t\t}\n\n\t\tthis.signature.setter( value );\n\t\tthis.mark();\n\t};\n\n\tComputation.prototype.setDependencies = function setDependencies ( dependencies ) {\n\t\tvar this$1 = this;\n\n\t\t// unregister any soft dependencies we no longer have\n\t\tvar i = this.dependencies.length;\n\t\twhile ( i-- ) {\n\t\t\tvar model = this$1.dependencies[i];\n\t\t\tif ( !~dependencies.indexOf( model ) ) { model.unregister( this$1 ); }\n\t\t}\n\n\t\t// and add any new ones\n\t\ti = dependencies.length;\n\t\twhile ( i-- ) {\n\t\t\tvar model$1 = dependencies[i];\n\t\t\tif ( !~this$1.dependencies.indexOf( model$1 ) ) { model$1.register( this$1 ); }\n\t\t}\n\n\t\tthis.dependencies = dependencies;\n\t};\n\n\tComputation.prototype.teardown = function teardown () {\n\t\tvar this$1 = this;\n\n\t\tvar i = this.dependencies.length;\n\t\twhile ( i-- ) {\n\t\t\tif ( this$1.dependencies[i] ) { this$1.dependencies[i].unregister( this$1 ); }\n\t\t}\n\t\tif ( this.root.computations[this.key] === this ) { delete this.root.computations[this.key]; }\n\t\tModel$$1.prototype.teardown.call(this);\n\t};\n\n\treturn Computation;\n}(Model));\n\nvar prototype$1 = Computation.prototype;\nvar child = ComputationChild.prototype;\nprototype$1.handleChange = child.handleChange;\nprototype$1.joinKey = child.joinKey;\n\nvar ExpressionProxy = (function (Model$$1) {\n\tfunction ExpressionProxy ( fragment, template ) {\n\t\tvar this$1 = this;\n\n\t\tModel$$1.call( this, fragment.ractive.viewmodel, null );\n\n\t\tthis.fragment = fragment;\n\t\tthis.template = template;\n\n\t\tthis.isReadonly = true;\n\t\tthis.dirty = true;\n\n\t\tthis.fn = getFunction( template.s, template.r.length );\n\n\t\tthis.models = this.template.r.map( function (ref) {\n\t\t\treturn resolveReference( this$1.fragment, ref );\n\t\t});\n\t\tthis.dependencies = [];\n\n\t\tthis.shuffle = undefined;\n\n\t\tthis.bubble();\n\t}\n\n\tif ( Model$$1 ) ExpressionProxy.__proto__ = Model$$1;\n\tExpressionProxy.prototype = Object.create( Model$$1 && Model$$1.prototype );\n\tExpressionProxy.prototype.constructor = ExpressionProxy;\n\n\tExpressionProxy.prototype.bubble = function bubble ( actuallyChanged ) {\n\t\tif ( actuallyChanged === void 0 ) actuallyChanged = true;\n\n\t\t// refresh the keypath\n\t\tthis.keypath = undefined;\n\n\t\tif ( actuallyChanged ) {\n\t\t\tthis.handleChange();\n\t\t}\n\t};\n\n\tExpressionProxy.prototype.getKeypath = function getKeypath () {\n\t\tvar this$1 = this;\n\n\t\tif ( !this.template ) { return '@undefined'; }\n\t\tif ( !this.keypath ) {\n\t\t\tthis.keypath = '@' + this.template.s.replace( /_(\\d+)/g, function ( match, i ) {\n\t\t\t\tif ( i >= this$1.models.length ) { return match; }\n\n\t\t\t\tvar model = this$1.models[i];\n\t\t\t\treturn model ? model.getKeypath() : '@undefined';\n\t\t\t});\n\t\t}\n\n\t\treturn this.keypath;\n\t};\n\n\tExpressionProxy.prototype.getValue = function getValue () {\n\t\tvar this$1 = this;\n\n\t\tstartCapturing();\n\t\tvar result;\n\n\t\ttry {\n\t\t\tvar params = this.models.map( function (m) { return m ? m.get( true ) : undefined; } );\n\t\t\tresult = this.fn.apply( this.fragment.ractive, params );\n\t\t} catch ( err ) {\n\t\t\twarnIfDebug( (\"Failed to compute \" + (this.getKeypath()) + \": \" + (err.message || err)) );\n\t\t}\n\n\t\tvar dependencies = stopCapturing();\n\t\t// remove missing deps\n\t\tthis.dependencies.filter( function (d) { return !~dependencies.indexOf( d ); } ).forEach( function (d) {\n\t\t\td.unregister( this$1 );\n\t\t\tremoveFromArray( this$1.dependencies, d );\n\t\t});\n\t\t// register new deps\n\t\tdependencies.filter( function (d) { return !~this$1.dependencies.indexOf( d ); } ).forEach( function (d) {\n\t\t\td.register( this$1 );\n\t\t\tthis$1.dependencies.push( d );\n\t\t});\n\n\t\treturn result;\n\t};\n\n\tExpressionProxy.prototype.rebind = function rebind ( next, previous, safe ) {\n\t\tvar idx = this.models.indexOf( previous );\n\n\t\tif ( ~idx ) {\n\t\t\tnext = rebindMatch( this.template.r[idx], next, previous );\n\t\t\tif ( next !== previous ) {\n\t\t\t\tprevious.unregister( this );\n\t\t\t\tthis.models.splice( idx, 1, next );\n\t\t\t\tif ( next ) { next.addShuffleRegister( this, 'mark' ); }\n\t\t\t}\n\t\t}\n\t\tthis.bubble( !safe );\n\t};\n\n\tExpressionProxy.prototype.retrieve = function retrieve () {\n\t\treturn this.get();\n\t};\n\n\tExpressionProxy.prototype.teardown = function teardown () {\n\t\tvar this$1 = this;\n\n\t\tthis.unbind();\n\t\tthis.fragment = undefined;\n\t\tif ( this.dependencies ) { this.dependencies.forEach( function (d) { return d.unregister( this$1 ); } ); }\n\t\tModel$$1.prototype.teardown.call(this);\n\t};\n\n\tExpressionProxy.prototype.unreference = function unreference () {\n\t\tModel$$1.prototype.unreference.call(this);\n\t\tif ( !this.deps.length && !this.refs ) { this.teardown(); }\n\t};\n\n\tExpressionProxy.prototype.unregister = function unregister ( dep ) {\n\t\tModel$$1.prototype.unregister.call( this, dep );\n\t\tif ( !this.deps.length && !this.refs ) { this.teardown(); }\n\t};\n\n\treturn ExpressionProxy;\n}(Model));\n\nvar prototype = ExpressionProxy.prototype;\nvar computation = Computation.prototype;\nprototype.get = computation.get;\nprototype.handleChange = computation.handleChange;\nprototype.joinKey = computation.joinKey;\nprototype.mark = computation.mark;\nprototype.unbind = noop;\n\nvar ReferenceExpressionChild = (function (Model$$1) {\n\tfunction ReferenceExpressionChild ( parent, key ) {\n\t\tModel$$1.call ( this, parent, key );\n\t}\n\n\tif ( Model$$1 ) ReferenceExpressionChild.__proto__ = Model$$1;\n\tReferenceExpressionChild.prototype = Object.create( Model$$1 && Model$$1.prototype );\n\tReferenceExpressionChild.prototype.constructor = ReferenceExpressionChild;\n\n\tReferenceExpressionChild.prototype.applyValue = function applyValue ( value ) {\n\t\tif ( isEqual( value, this.value ) ) { return; }\n\n\t\tvar parent = this.parent;\n\t\tvar keys = [ this.key ];\n\t\twhile ( parent ) {\n\t\t\tif ( parent.base ) {\n\t\t\t\tvar target = parent.model.joinAll( keys );\n\t\t\t\ttarget.applyValue( value );\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tkeys.unshift( parent.key );\n\n\t\t\tparent = parent.parent;\n\t\t}\n\t};\n\n\tReferenceExpressionChild.prototype.joinKey = function joinKey ( key ) {\n\t\tif ( key === undefined || key === '' ) { return this; }\n\n\t\tif ( !this.childByKey.hasOwnProperty( key ) ) {\n\t\t\tvar child = new ReferenceExpressionChild( this, key );\n\t\t\tthis.children.push( child );\n\t\t\tthis.childByKey[ key ] = child;\n\t\t}\n\n\t\treturn this.childByKey[ key ];\n\t};\n\n\tReferenceExpressionChild.prototype.retrieve = function retrieve () {\n\t\tvar parent = this.parent.get();\n\t\treturn parent && parent[ this.key ];\n\t};\n\n\treturn ReferenceExpressionChild;\n}(Model));\n\nvar ReferenceExpressionProxy = (function (Model$$1) {\n\tfunction ReferenceExpressionProxy ( fragment, template ) {\n\t\tvar this$1 = this;\n\n\t\tModel$$1.call( this, null, null );\n\t\tthis.dirty = true;\n\t\tthis.root = fragment.ractive.viewmodel;\n\t\tthis.template = template;\n\n\t\tthis.base = resolve( fragment, template );\n\n\t\tvar intermediary = this.intermediary = {\n\t\t\thandleChange: function () { return this$1.handleChange(); },\n\t\t\trebind: function ( next, previous ) {\n\t\t\t\tif ( previous === this$1.base ) {\n\t\t\t\t\tnext = rebindMatch( template, next, previous );\n\t\t\t\t\tif ( next !== this$1.base ) {\n\t\t\t\t\t\tthis$1.base.unregister( intermediary );\n\t\t\t\t\t\tthis$1.base = next;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar idx = this$1.members.indexOf( previous );\n\t\t\t\t\tif ( ~idx ) {\n\t\t\t\t\t\t// only direct references will rebind... expressions handle themselves\n\t\t\t\t\t\tnext = rebindMatch( template.m[idx].n, next, previous );\n\t\t\t\t\t\tif ( next !== this$1.members[idx] ) {\n\t\t\t\t\t\t\tthis$1.members.splice( idx, 1, next );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( next !== previous ) { previous.unregister( intermediary ); }\n\t\t\t\tif ( next ) { next.addShuffleTask( function () { return next.register( intermediary ); } ); }\n\n\t\t\t\tthis$1.bubble();\n\t\t\t}\n\t\t};\n\n\t\tthis.members = template.m.map( function ( template ) {\n\t\t\tif ( typeof template === 'string' ) {\n\t\t\t\treturn { get: function () { return template; } };\n\t\t\t}\n\n\t\t\tvar model;\n\n\t\t\tif ( template.t === REFERENCE ) {\n\t\t\t\tmodel = resolveReference( fragment, template.n );\n\t\t\t\tmodel.register( intermediary );\n\n\t\t\t\treturn model;\n\t\t\t}\n\n\t\t\tmodel = new ExpressionProxy( fragment, template );\n\t\t\tmodel.register( intermediary );\n\t\t\treturn model;\n\t\t});\n\n\t\tthis.bubble();\n\t}\n\n\tif ( Model$$1 ) ReferenceExpressionProxy.__proto__ = Model$$1;\n\tReferenceExpressionProxy.prototype = Object.create( Model$$1 && Model$$1.prototype );\n\tReferenceExpressionProxy.prototype.constructor = ReferenceExpressionProxy;\n\n\tReferenceExpressionProxy.prototype.bubble = function bubble () {\n\t\tif ( !this.base ) { return; }\n\t\tif ( !this.dirty ) { this.handleChange(); }\n\t};\n\n\tReferenceExpressionProxy.prototype.get = function get ( shouldCapture ) {\n\t\tif ( this.dirty ) {\n\t\t\tthis.bubble();\n\n\t\t\tvar keys = this.members.map( function (m) { return escapeKey( String( m.get() ) ); } );\n\t\t\tvar model = this.base.joinAll( keys );\n\n\t\t\tif ( model !== this.model ) {\n\t\t\t\tif ( this.model ) {\n\t\t\t\t\tthis.model.unregister( this );\n\t\t\t\t\tthis.model.unregisterTwowayBinding( this );\n\t\t\t\t}\n\n\t\t\t\tthis.model = model;\n\t\t\t\tthis.parent = model.parent;\n\t\t\t\tthis.model.register( this );\n\t\t\t\tthis.model.registerTwowayBinding( this );\n\n\t\t\t\tif ( this.keypathModel ) { this.keypathModel.handleChange(); }\n\t\t\t}\n\n\t\t\tthis.value = this.model.get( shouldCapture );\n\t\t\tthis.dirty = false;\n\t\t\tthis.mark();\n\t\t\treturn this.value;\n\t\t} else {\n\t\t\treturn this.model ? this.model.get( shouldCapture ) : undefined;\n\t\t}\n\t};\n\n\t// indirect two-way bindings\n\tReferenceExpressionProxy.prototype.getValue = function getValue () {\n\t\tvar this$1 = this;\n\n\t\tthis.value = this.model ? this.model.get() : undefined;\n\n\t\tvar i = this.bindings.length;\n\t\twhile ( i-- ) {\n\t\t\tvar value = this$1.bindings[i].getValue();\n\t\t\tif ( value !== this$1.value ) { return value; }\n\t\t}\n\n\t\t// check one-way bindings\n\t\tvar oneway = findBoundValue( this.deps );\n\t\tif ( oneway ) { return oneway.value; }\n\n\t\treturn this.value;\n\t};\n\n\tReferenceExpressionProxy.prototype.getKeypath = function getKeypath () {\n\t\treturn this.model ? this.model.getKeypath() : '@undefined';\n\t};\n\n\tReferenceExpressionProxy.prototype.handleChange = function handleChange$$1 () {\n\t\tthis.dirty = true;\n\t\tthis.mark();\n\t};\n\n\tReferenceExpressionProxy.prototype.joinKey = function joinKey ( key ) {\n\t\tif ( key === undefined || key === '' ) { return this; }\n\n\t\tif ( !this.childByKey.hasOwnProperty( key ) ) {\n\t\t\tvar child = new ReferenceExpressionChild( this, key );\n\t\t\tthis.children.push( child );\n\t\t\tthis.childByKey[ key ] = child;\n\t\t}\n\n\t\treturn this.childByKey[ key ];\n\t};\n\n\tReferenceExpressionProxy.prototype.mark = function mark$1 () {\n\t\tif ( this.dirty ) {\n\t\t\tthis.deps.forEach( handleChange );\n\t\t}\n\n\t\tthis.links.forEach( marked );\n\t\tthis.children.forEach( mark );\n\t};\n\n\tReferenceExpressionProxy.prototype.retrieve = function retrieve () {\n\t\treturn this.value;\n\t};\n\n\tReferenceExpressionProxy.prototype.set = function set ( value ) {\n\t\tthis.model.set( value );\n\t};\n\n\tReferenceExpressionProxy.prototype.teardown = function teardown$$1 () {\n\t\tvar this$1 = this;\n\n\t\tif ( this.model ) {\n\t\t\tthis.model.unregister( this );\n\t\t\tthis.model.unregisterTwowayBinding( this );\n\t\t}\n\t\tif ( this.members ) {\n\t\t\tthis.members.forEach( function (m) { return m && m.unregister && m.unregister( this$1 ); } );\n\t\t}\n\t};\n\n\tReferenceExpressionProxy.prototype.unreference = function unreference () {\n\t\tModel$$1.prototype.unreference.call(this);\n\t\tif ( !this.deps.length && !this.refs ) { this.teardown(); }\n\t};\n\n\tReferenceExpressionProxy.prototype.unregister = function unregister ( dep ) {\n\t\tModel$$1.prototype.unregister.call( this, dep );\n\t\tif ( !this.deps.length && !this.refs ) { this.teardown(); }\n\t};\n\n\treturn ReferenceExpressionProxy;\n}(Model));\n\nReferenceExpressionProxy.prototype.rebind = noop;\n\nfunction resolve ( fragment, template ) {\n\tif ( template.r ) {\n\t\treturn resolveReference( fragment, template.r );\n\t}\n\n\telse if ( template.x ) {\n\t\treturn new ExpressionProxy( fragment, template.x );\n\t}\n\n\telse if ( template.rx ) {\n\t\treturn new ReferenceExpressionProxy( fragment, template.rx );\n\t}\n}\n\nfunction resolveAliases( aliases, fragment ) {\n\tvar resolved = {};\n\n\tfor ( var i = 0; i < aliases.length; i++ ) {\n\t\tresolved[ aliases[i].n ] = resolve( fragment, aliases[i].x );\n\t}\n\n\tfor ( var k in resolved ) {\n\t\tresolved[k].reference();\n\t}\n\n\treturn resolved;\n}\n\nvar Alias = (function (ContainerItem$$1) {\n\tfunction Alias ( options ) {\n\t\tContainerItem$$1.call( this, options );\n\n\t\tthis.fragment = null;\n\t}\n\n\tif ( ContainerItem$$1 ) Alias.__proto__ = ContainerItem$$1;\n\tAlias.prototype = Object.create( ContainerItem$$1 && ContainerItem$$1.prototype );\n\tAlias.prototype.constructor = Alias;\n\n\tAlias.prototype.bind = function bind () {\n\t\tthis.fragment = new Fragment({\n\t\t\towner: this,\n\t\t\ttemplate: this.template.f\n\t\t});\n\n\t\tthis.fragment.aliases = resolveAliases( this.template.z, this.parentFragment );\n\t\tthis.fragment.bind();\n\t};\n\n\tAlias.prototype.render = function render ( target ) {\n\t\tthis.rendered = true;\n\t\tif ( this.fragment ) { this.fragment.render( target ); }\n\t};\n\n\tAlias.prototype.unbind = function unbind () {\n\t\tvar this$1 = this;\n\n\t\tfor ( var k in this$1.fragment.aliases ) {\n\t\t\tthis$1.fragment.aliases[k].unreference();\n\t\t}\n\n\t\tthis.fragment.aliases = {};\n\t\tif ( this.fragment ) { this.fragment.unbind(); }\n\t};\n\n\tAlias.prototype.unrender = function unrender ( shouldDestroy ) {\n\t\tif ( this.rendered && this.fragment ) { this.fragment.unrender( shouldDestroy ); }\n\t\tthis.rendered = false;\n\t};\n\n\tAlias.prototype.update = function update () {\n\t\tif ( this.dirty ) {\n\t\t\tthis.dirty = false;\n\t\t\tthis.fragment.update();\n\t\t}\n\t};\n\n\treturn Alias;\n}(ContainerItem));\n\nvar space = /\\s+/;\n\nfunction readStyle ( css ) {\n\tif ( typeof css !== 'string' ) { return {}; }\n\n\treturn cleanCss( css, function ( css, reconstruct ) {\n\t\treturn css.split( ';' )\n\t\t\t.filter( function (rule) { return !!rule.trim(); } )\n\t\t\t.map( reconstruct )\n\t\t\t.reduce(function ( rules, rule ) {\n\t\t\t\tvar i = rule.indexOf(':');\n\t\t\t\tvar name = rule.substr( 0, i ).trim();\n\t\t\t\trules[ name ] = rule.substr( i + 1 ).trim();\n\t\t\t\treturn rules;\n\t\t\t}, {});\n\t});\n}\n\nfunction readClass ( str ) {\n\tvar list = str.split( space );\n\n  // remove any empty entries\n\tvar i = list.length;\n\twhile ( i-- ) {\n\t\tif ( !list[i] ) { list.splice( i, 1 ); }\n\t}\n\n\treturn list;\n}\n\nvar hyphenateCamel = function ( camelCaseStr ) {\n\treturn camelCaseStr.replace( /([A-Z])/g, function ( match, $1 ) {\n\t\treturn '-' + $1.toLowerCase();\n\t});\n};\n\nvar textTypes = [ undefined, 'text', 'search', 'url', 'email', 'hidden', 'password', 'search', 'reset', 'submit' ];\n\nfunction getUpdateDelegate ( attribute ) {\n\tvar element = attribute.element;\n\tvar name = attribute.name;\n\n\tif ( name === 'value' ) {\n\t\tif ( attribute.interpolator ) { attribute.interpolator.bound = true; }\n\n\t\t// special case - selects\n\t\tif ( element.name === 'select' && name === 'value' ) {\n\t\t\treturn element.getAttribute( 'multiple' ) ? updateMultipleSelectValue : updateSelectValue;\n\t\t}\n\n\t\tif ( element.name === 'textarea' ) { return updateStringValue; }\n\n\t\t// special case - contenteditable\n\t\tif ( element.getAttribute( 'contenteditable' ) != null ) { return updateContentEditableValue; }\n\n\t\t// special case - <input>\n\t\tif ( element.name === 'input' ) {\n\t\t\tvar type = element.getAttribute( 'type' );\n\n\t\t\t// type='file' value='{{fileList}}'>\n\t\t\tif ( type === 'file' ) { return noop; } // read-only\n\n\t\t\t// type='radio' name='{{twoway}}'\n\t\t\tif ( type === 'radio' && element.binding && element.binding.attribute.name === 'name' ) { return updateRadioValue; }\n\n\t\t\tif ( ~textTypes.indexOf( type ) ) { return updateStringValue; }\n\t\t}\n\n\t\treturn updateValue;\n\t}\n\n\tvar node = element.node;\n\n\t// special case - <input type='radio' name='{{twoway}}' value='foo'>\n\tif ( attribute.isTwoway && name === 'name' ) {\n\t\tif ( node.type === 'radio' ) { return updateRadioName; }\n\t\tif ( node.type === 'checkbox' ) { return updateCheckboxName; }\n\t}\n\n\tif ( name === 'style' ) { return updateStyleAttribute; }\n\n\tif ( name.indexOf( 'style-' ) === 0 ) { return updateInlineStyle; }\n\n\t// special case - class names. IE fucks things up, again\n\tif ( name === 'class' && ( !node.namespaceURI || node.namespaceURI === html ) ) { return updateClassName; }\n\n\tif ( name.indexOf( 'class-' ) === 0 ) { return updateInlineClass; }\n\n\tif ( attribute.isBoolean ) {\n\t\tvar type$1 = element.getAttribute( 'type' );\n\t\tif ( attribute.interpolator && name === 'checked' && ( type$1 === 'checkbox' || type$1 === 'radio' ) ) { attribute.interpolator.bound = true; }\n\t\treturn updateBoolean;\n\t}\n\n\tif ( attribute.namespace && attribute.namespace !== attribute.node.namespaceURI ) { return updateNamespacedAttribute; }\n\n\treturn updateAttribute;\n}\n\nfunction updateMultipleSelectValue ( reset ) {\n\tvar value = this.getValue();\n\n\tif ( !Array.isArray( value ) ) { value = [ value ]; }\n\n\tvar options = this.node.options;\n\tvar i = options.length;\n\n\tif ( reset ) {\n\t\twhile ( i-- ) { options[i].selected = false; }\n\t} else {\n\t\twhile ( i-- ) {\n\t\t\tvar option = options[i];\n\t\t\tvar optionValue = option._ractive ?\n\t\t\t\toption._ractive.value :\n\t\t\t\toption.value; // options inserted via a triple don't have _ractive\n\n\t\t\toption.selected = arrayContains( value, optionValue );\n\t\t}\n\t}\n}\n\nfunction updateSelectValue ( reset ) {\n\tvar value = this.getValue();\n\n\tif ( !this.locked ) { // TODO is locked still a thing?\n\t\tthis.node._ractive.value = value;\n\n\t\tvar options = this.node.options;\n\t\tvar i = options.length;\n\t\tvar wasSelected = false;\n\n\t\tif ( reset ) {\n\t\t\twhile ( i-- ) { options[i].selected = false; }\n\t\t} else {\n\t\t\twhile ( i-- ) {\n\t\t\t\tvar option = options[i];\n\t\t\t\tvar optionValue = option._ractive ?\n\t\t\t\t\toption._ractive.value :\n\t\t\t\t\toption.value; // options inserted via a triple don't have _ractive\n\t\t\t\tif ( option.disabled && option.selected ) { wasSelected = true; }\n\n\t\t\t\tif ( optionValue == value ) { // double equals as we may be comparing numbers with strings\n\t\t\t\t\toption.selected = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( !wasSelected ) { this.node.selectedIndex = -1; }\n\t}\n}\n\n\nfunction updateContentEditableValue ( reset ) {\n\tvar value = this.getValue();\n\n\tif ( !this.locked ) {\n\t\tif ( reset ) { this.node.innerHTML = ''; }\n\t\telse { this.node.innerHTML = value === undefined ? '' : value; }\n\t}\n}\n\nfunction updateRadioValue ( reset ) {\n\tvar node = this.node;\n\tvar wasChecked = node.checked;\n\n\tvar value = this.getValue();\n\n\tif ( reset ) { return node.checked = false; }\n\n\t//node.value = this.element.getAttribute( 'value' );\n\tnode.value = this.node._ractive.value = value;\n\tnode.checked = this.element.compare( value, this.element.getAttribute( 'name' ) );\n\n\t// This is a special case - if the input was checked, and the value\n\t// changed so that it's no longer checked, the twoway binding is\n\t// most likely out of date. To fix it we have to jump through some\n\t// hoops... this is a little kludgy but it works\n\tif ( wasChecked && !node.checked && this.element.binding && this.element.binding.rendered ) {\n\t\tthis.element.binding.group.model.set( this.element.binding.group.getValue() );\n\t}\n}\n\nfunction updateValue ( reset ) {\n\tif ( !this.locked ) {\n\t\tif ( reset ) {\n\t\t\tthis.node.removeAttribute( 'value' );\n\t\t\tthis.node.value = this.node._ractive.value = null;\n\t\t} else {\n\t\t\tvar value = this.getValue();\n\n\t\t\tthis.node.value = this.node._ractive.value = value;\n\t\t\tthis.node.setAttribute( 'value', safeToStringValue( value ) );\n\t\t}\n\t}\n}\n\nfunction updateStringValue ( reset ) {\n\tif ( !this.locked ) {\n\t\tif ( reset ) {\n\t\t\tthis.node._ractive.value = '';\n\t\t\tthis.node.removeAttribute( 'value' );\n\t\t} else {\n\t\t\tvar value = this.getValue();\n\n\t\t\tthis.node._ractive.value = value;\n\n\t\t\tthis.node.value = safeToStringValue( value );\n\t\t\tthis.node.setAttribute( 'value', safeToStringValue( value ) );\n\t\t}\n\t}\n}\n\nfunction updateRadioName ( reset ) {\n\tif ( reset ) { this.node.checked = false; }\n\telse { this.node.checked = this.element.compare( this.getValue(), this.element.binding.getValue() ); }\n}\n\nfunction updateCheckboxName ( reset ) {\n\tvar ref = this;\n\tvar element = ref.element;\n\tvar node = ref.node;\n\tvar binding = element.binding;\n\n\tvar value = this.getValue();\n\tvar valueAttribute = element.getAttribute( 'value' );\n\n\tif ( reset ) {\n\t\t// TODO: WAT?\n\t}\n\n\tif ( !Array.isArray( value ) ) {\n\t\tbinding.isChecked = node.checked = element.compare( value, valueAttribute );\n\t} else {\n\t\tvar i = value.length;\n\t\twhile ( i-- ) {\n\t\t\tif ( element.compare ( valueAttribute, value[i] ) ) {\n\t\t\t\tbinding.isChecked = node.checked = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tbinding.isChecked = node.checked = false;\n\t}\n}\n\nfunction updateStyleAttribute ( reset ) {\n\tvar props = reset ? {} : readStyle( this.getValue() || '' );\n\tvar style = this.node.style;\n\tvar keys = Object.keys( props );\n\tvar prev = this.previous || [];\n\n\tvar i = 0;\n\twhile ( i < keys.length ) {\n\t\tif ( keys[i] in style ) {\n\t\t\tvar safe = props[ keys[i] ].replace( '!important', '' );\n\t\t\tstyle.setProperty( keys[i], safe, safe.length !== props[ keys[i] ].length ? 'important' : '' );\n\t\t}\n\t\ti++;\n\t}\n\n\t// remove now-missing attrs\n\ti = prev.length;\n\twhile ( i-- ) {\n\t\tif ( !~keys.indexOf( prev[i] ) && prev[i] in style ) { style.setProperty( prev[i], '', '' ); }\n\t}\n\n\tthis.previous = keys;\n}\n\nfunction updateInlineStyle ( reset ) {\n\tif ( !this.style ) {\n\t\tthis.style = hyphenateCamel( this.name.substr( 6 ) );\n\t}\n\n\tvar value = reset ? '' : safeToStringValue( this.getValue() );\n\tvar safe = value.replace( '!important', '' );\n\tthis.node.style.setProperty( this.style, safe, safe.length !== value.length ? 'important' : '' );\n}\n\nfunction updateClassName ( reset ) {\n\tvar value = reset ? [] : readClass( safeToStringValue( this.getValue() ) );\n\n\t// watch out for werdo svg elements\n\tvar cls = this.node.className;\n\tcls = cls.baseVal !== undefined ? cls.baseVal : cls;\n\n\tvar attr = readClass( cls );\n\tvar prev = this.previous || attr.slice( 0 );\n\n\tvar className = value.concat( attr.filter( function (c) { return !~prev.indexOf( c ); } ) ).join( ' ' );\n\n\tif ( className !== cls ) {\n\t\tif ( typeof this.node.className !== 'string' ) {\n\t\t\tthis.node.className.baseVal = className;\n\t\t} else {\n\t\t\tthis.node.className = className;\n\t\t}\n\t}\n\n\tthis.previous = value;\n}\n\nfunction updateInlineClass ( reset ) {\n\tvar name = this.name.substr( 6 );\n\n\t// watch out for werdo svg elements\n\tvar cls = this.node.className;\n\tcls = cls.baseVal !== undefined ? cls.baseVal : cls;\n\n\tvar attr = readClass( cls );\n\tvar value = reset ? false : this.getValue();\n\n\tif ( !this.inlineClass ) { this.inlineClass = name; }\n\n\tif ( value && !~attr.indexOf( name ) ) { attr.push( name ); }\n\telse if ( !value && ~attr.indexOf( name ) ) { attr.splice( attr.indexOf( name ), 1 ); }\n\n\tif ( typeof this.node.className !== 'string' ) {\n\t\tthis.node.className.baseVal = attr.join( ' ' );\n\t} else {\n\t\tthis.node.className = attr.join( ' ' );\n\t}\n}\n\nfunction updateBoolean ( reset ) {\n\t// with two-way binding, only update if the change wasn't initiated by the user\n\t// otherwise the cursor will often be sent to the wrong place\n\tif ( !this.locked ) {\n\t\tif ( reset ) {\n\t\t\tif ( this.useProperty ) { this.node[ this.propertyName ] = false; }\n\t\t\tthis.node.removeAttribute( this.propertyName );\n\t\t} else {\n\t\t\tif ( this.useProperty ) {\n\t\t\t\tthis.node[ this.propertyName ] = this.getValue();\n\t\t\t} else {\n\t\t\t\tif ( this.getValue() ) {\n\t\t\t\t\tthis.node.setAttribute( this.propertyName, '' );\n\t\t\t\t} else {\n\t\t\t\t\tthis.node.removeAttribute( this.propertyName );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction updateAttribute ( reset ) {\n\tif ( reset ) { this.node.removeAttribute( this.name ); }\n\telse { this.node.setAttribute( this.name, safeToStringValue( this.getString() ) ); }\n}\n\nfunction updateNamespacedAttribute ( reset ) {\n\tif ( reset ) { this.node.removeAttributeNS( this.namespace, this.name.slice( this.name.indexOf( ':' ) + 1 ) ); }\n\telse { this.node.setAttributeNS( this.namespace, this.name.slice( this.name.indexOf( ':' ) + 1 ), safeToStringValue( this.getString() ) ); }\n}\n\nvar propertyNames = {\n\t'accept-charset': 'acceptCharset',\n\taccesskey: 'accessKey',\n\tbgcolor: 'bgColor',\n\tclass: 'className',\n\tcodebase: 'codeBase',\n\tcolspan: 'colSpan',\n\tcontenteditable: 'contentEditable',\n\tdatetime: 'dateTime',\n\tdirname: 'dirName',\n\tfor: 'htmlFor',\n\t'http-equiv': 'httpEquiv',\n\tismap: 'isMap',\n\tmaxlength: 'maxLength',\n\tnovalidate: 'noValidate',\n\tpubdate: 'pubDate',\n\treadonly: 'readOnly',\n\trowspan: 'rowSpan',\n\ttabindex: 'tabIndex',\n\tusemap: 'useMap'\n};\n\nvar div$1 = doc ? createElement( 'div' ) : null;\n\nvar attributes = false;\nfunction inAttributes() { return attributes; }\nfunction doInAttributes( fn ) {\n\tattributes = true;\n\tfn();\n\tattributes = false;\n}\n\nvar ConditionalAttribute = (function (Item$$1) {\n\tfunction ConditionalAttribute ( options ) {\n\t\tItem$$1.call( this, options );\n\n\t\tthis.attributes = [];\n\n\t\tthis.owner = options.owner;\n\n\t\tthis.fragment = new Fragment({\n\t\t\tractive: this.ractive,\n\t\t\towner: this,\n\t\t\ttemplate: this.template\n\t\t});\n\t\t// this fragment can't participate in node-y things\n\t\tthis.fragment.findNextNode = noop;\n\n\t\tthis.dirty = false;\n\t}\n\n\tif ( Item$$1 ) ConditionalAttribute.__proto__ = Item$$1;\n\tConditionalAttribute.prototype = Object.create( Item$$1 && Item$$1.prototype );\n\tConditionalAttribute.prototype.constructor = ConditionalAttribute;\n\n\tConditionalAttribute.prototype.bind = function bind () {\n\t\tthis.fragment.bind();\n\t};\n\n\tConditionalAttribute.prototype.bubble = function bubble () {\n\t\tif ( !this.dirty ) {\n\t\t\tthis.dirty = true;\n\t\t\tthis.owner.bubble();\n\t\t}\n\t};\n\n\tConditionalAttribute.prototype.render = function render () {\n\t\tthis.node = this.owner.node;\n\t\tif ( this.node ) {\n\t\t\tthis.isSvg = this.node.namespaceURI === svg$1;\n\t\t}\n\n\t\tattributes = true;\n\t\tif ( !this.rendered ) { this.fragment.render(); }\n\n\t\tthis.rendered = true;\n\t\tthis.dirty = true; // TODO this seems hacky, but necessary for tests to pass in browser AND node.js\n\t\tthis.update();\n\t\tattributes = false;\n\t};\n\n\tConditionalAttribute.prototype.toString = function toString () {\n\t\treturn this.fragment.toString();\n\t};\n\n\tConditionalAttribute.prototype.unbind = function unbind () {\n\t\tthis.fragment.unbind();\n\t};\n\n\tConditionalAttribute.prototype.unrender = function unrender () {\n\t\tthis.rendered = false;\n\t\tthis.fragment.unrender();\n\t};\n\n\tConditionalAttribute.prototype.update = function update () {\n\t\tvar this$1 = this;\n\n\t\tvar str;\n\t\tvar attrs;\n\n\t\tif ( this.dirty ) {\n\t\t\tthis.dirty = false;\n\n\t\t\tvar current = attributes;\n\t\t\tattributes = true;\n\t\t\tthis.fragment.update();\n\t\t\tattributes = current || false;\n\n\t\t\tif ( this.rendered && this.node ) {\n\t\t\t\tstr = this.fragment.toString();\n\t\t\t\tattrs = parseAttributes( str, this.isSvg );\n\n\t\t\t\t// any attributes that previously existed but no longer do\n\t\t\t\t// must be removed\n\t\t\t\tthis.attributes.filter( function (a) { return notIn( attrs, a ); } ).forEach( function (a) {\n\t\t\t\t\tthis$1.node.removeAttribute( a.name );\n\t\t\t\t});\n\n\t\t\t\tattrs.forEach( function (a) {\n\t\t\t\t\tthis$1.node.setAttribute( a.name, a.value );\n\t\t\t\t});\n\n\t\t\t\tthis.attributes = attrs;\n\t\t\t}\n\t\t}\n\t};\n\n\treturn ConditionalAttribute;\n}(Item));\n\nfunction parseAttributes ( str, isSvg ) {\n\tvar tagName = isSvg ? 'svg' : 'div';\n\treturn str\n\t\t? (div$1.innerHTML = \"<\" + tagName + \" \" + str + \"></\" + tagName + \">\") &&\n\t\t\ttoArray(div$1.childNodes[0].attributes)\n\t\t: [];\n}\n\nfunction notIn ( haystack, needle ) {\n\tvar i = haystack.length;\n\n\twhile ( i-- ) {\n\t\tif ( haystack[i].name === needle.name ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nfunction lookupNamespace ( node, prefix ) {\n\tvar qualified = \"xmlns:\" + prefix;\n\n\twhile ( node ) {\n\t\tif ( node.hasAttribute && node.hasAttribute( qualified ) ) { return node.getAttribute( qualified ); }\n\t\tnode = node.parentNode;\n\t}\n\n\treturn namespaces[ prefix ];\n}\n\nvar attribute = false;\nfunction inAttribute () { return attribute; }\n\nvar Attribute = (function (Item$$1) {\n\tfunction Attribute ( options ) {\n\t\tItem$$1.call( this, options );\n\n\t\tthis.name = options.template.n;\n\t\tthis.namespace = null;\n\n\t\tthis.owner = options.owner || options.parentFragment.owner || options.element || findElement( options.parentFragment );\n\t\tthis.element = options.element || (this.owner.attributeByName ? this.owner : findElement( options.parentFragment ) );\n\t\tthis.parentFragment = options.parentFragment; // shared\n\t\tthis.ractive = this.parentFragment.ractive;\n\n\t\tthis.rendered = false;\n\t\tthis.updateDelegate = null;\n\t\tthis.fragment = null;\n\n\t\tthis.element.attributeByName[ this.name ] = this;\n\n\t\tif ( !Array.isArray( options.template.f ) ) {\n\t\t\tthis.value = options.template.f;\n\t\t\tif ( this.value === 0 ) {\n\t\t\t\tthis.value = '';\n\t\t\t}\n\t\t} else {\n\t\t\tthis.fragment = new Fragment({\n\t\t\t\towner: this,\n\t\t\t\ttemplate: options.template.f\n\t\t\t});\n\t\t}\n\n\t\tthis.interpolator = this.fragment &&\n\t\t\tthis.fragment.items.length === 1 &&\n\t\t\tthis.fragment.items[0].type === INTERPOLATOR &&\n\t\t\tthis.fragment.items[0];\n\n\t\tif ( this.interpolator ) { this.interpolator.owner = this; }\n\t}\n\n\tif ( Item$$1 ) Attribute.__proto__ = Item$$1;\n\tAttribute.prototype = Object.create( Item$$1 && Item$$1.prototype );\n\tAttribute.prototype.constructor = Attribute;\n\n\tAttribute.prototype.bind = function bind () {\n\t\tif ( this.fragment ) {\n\t\t\tthis.fragment.bind();\n\t\t}\n\t};\n\n\tAttribute.prototype.bubble = function bubble () {\n\t\tif ( !this.dirty ) {\n\t\t\tthis.parentFragment.bubble();\n\t\t\tthis.element.bubble();\n\t\t\tthis.dirty = true;\n\t\t}\n\t};\n\n\tAttribute.prototype.getString = function getString () {\n\t\tattribute = true;\n\t\tvar value = this.fragment ?\n\t\t\tthis.fragment.toString() :\n\t\t\tthis.value != null ? '' + this.value : '';\n\t\tattribute = false;\n\t\treturn value;\n\t};\n\n\t// TODO could getValue ever be called for a static attribute,\n\t// or can we assume that this.fragment exists?\n\tAttribute.prototype.getValue = function getValue () {\n\t\tattribute = true;\n\t\tvar value = this.fragment ? this.fragment.valueOf() : booleanAttributes.test( this.name ) ? true : this.value;\n\t\tattribute = false;\n\t\treturn value;\n\t};\n\n\tAttribute.prototype.render = function render () {\n\t\tvar node = this.element.node;\n\t\tthis.node = node;\n\n\t\t// should we use direct property access, or setAttribute?\n\t\tif ( !node.namespaceURI || node.namespaceURI === namespaces.html ) {\n\t\t\tthis.propertyName = propertyNames[ this.name ] || this.name;\n\n\t\t\tif ( node[ this.propertyName ] !== undefined ) {\n\t\t\t\tthis.useProperty = true;\n\t\t\t}\n\n\t\t\t// is attribute a boolean attribute or 'value'? If so we're better off doing e.g.\n\t\t\t// node.selected = true rather than node.setAttribute( 'selected', '' )\n\t\t\tif ( booleanAttributes.test( this.name ) || this.isTwoway ) {\n\t\t\t\tthis.isBoolean = true;\n\t\t\t}\n\n\t\t\tif ( this.propertyName === 'value' ) {\n\t\t\t\tnode._ractive.value = this.value;\n\t\t\t}\n\t\t}\n\n\t\tif ( node.namespaceURI ) {\n\t\t\tvar index = this.name.indexOf( ':' );\n\t\t\tif ( index !== -1 ) {\n\t\t\t\tthis.namespace = lookupNamespace( node, this.name.slice( 0, index ) );\n\t\t\t} else {\n\t\t\t\tthis.namespace = node.namespaceURI;\n\t\t\t}\n\t\t}\n\n\t\tthis.rendered = true;\n\t\tthis.updateDelegate = getUpdateDelegate( this );\n\t\tthis.updateDelegate();\n\t};\n\n\tAttribute.prototype.toString = function toString () {\n\t\tif ( inAttributes() ) { return ''; }\n\t\tattribute = true;\n\n\t\tvar value = this.getValue();\n\n\t\t// Special case - select and textarea values (should not be stringified)\n\t\tif ( this.name === 'value' && ( this.element.getAttribute( 'contenteditable' ) !== undefined || ( this.element.name === 'select' || this.element.name === 'textarea' ) ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Special case  bound radio `name` attributes\n\t\tif ( this.name === 'name' && this.element.name === 'input' && this.interpolator && this.element.getAttribute( 'type' ) === 'radio' ) {\n\t\t\treturn (\"name=\\\"{{\" + (this.interpolator.model.getKeypath()) + \"}}\\\"\");\n\t\t}\n\n\t\t// Special case - style and class attributes and directives\n\t\tif ( this.owner === this.element && ( this.name === 'style' || this.name === 'class' || this.style || this.inlineClass ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !this.rendered && this.owner === this.element && ( !this.name.indexOf( 'style-' ) || !this.name.indexOf( 'class-' ) ) ) {\n\t\t\tif ( !this.name.indexOf( 'style-' ) ) {\n\t\t\t\tthis.style = hyphenateCamel( this.name.substr( 6 ) );\n\t\t\t} else {\n\t\t\t\tthis.inlineClass = this.name.substr( 6 );\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tif ( booleanAttributes.test( this.name ) ) { return value ? this.name : ''; }\n\t\tif ( value == null ) { return ''; }\n\n\t\tvar str = safeAttributeString( this.getString() );\n\t\tattribute = false;\n\n\t\treturn str ?\n\t\t\t((this.name) + \"=\\\"\" + str + \"\\\"\") :\n\t\t\tthis.name;\n\t};\n\n\tAttribute.prototype.unbind = function unbind () {\n\t\tif ( this.fragment ) { this.fragment.unbind(); }\n\t};\n\n\tAttribute.prototype.unrender = function unrender () {\n\t\tthis.updateDelegate( true );\n\n\t\tthis.rendered = false;\n\t};\n\n\tAttribute.prototype.update = function update () {\n\t\tif ( this.dirty ) {\n\t\t\tthis.dirty = false;\n\t\t\tif ( this.fragment ) { this.fragment.update(); }\n\t\t\tif ( this.rendered ) { this.updateDelegate(); }\n\t\t\tif ( this.isTwoway && !this.locked ) {\n\t\t\t\tthis.interpolator.twowayBinding.lastVal( true, this.interpolator.model.get() );\n\t\t\t}\n\t\t}\n\t};\n\n\treturn Attribute;\n}(Item));\n\nvar BindingFlag = (function (Item$$1) {\n\tfunction BindingFlag ( options ) {\n\t\tItem$$1.call( this, options );\n\n\t\tthis.owner = options.owner || options.parentFragment.owner || findElement( options.parentFragment );\n\t\tthis.element = this.owner.attributeByName ? this.owner : findElement( options.parentFragment );\n\t\tthis.flag = options.template.v === 'l' ? 'lazy' : 'twoway';\n\n\t\tif ( this.element.type === ELEMENT ) {\n\t\t\tif ( Array.isArray( options.template.f ) ) {\n\t\t\t\tthis.fragment = new Fragment({\n\t\t\t\t\towner: this,\n\t\t\t\t\ttemplate: options.template.f\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.interpolator = this.fragment &&\n\t\t\t\t\t\t\t\tthis.fragment.items.length === 1 &&\n\t\t\t\t\t\t\t\tthis.fragment.items[0].type === INTERPOLATOR &&\n\t\t\t\t\t\t\t\tthis.fragment.items[0];\n\t\t}\n\t}\n\n\tif ( Item$$1 ) BindingFlag.__proto__ = Item$$1;\n\tBindingFlag.prototype = Object.create( Item$$1 && Item$$1.prototype );\n\tBindingFlag.prototype.constructor = BindingFlag;\n\n\tBindingFlag.prototype.bind = function bind () {\n\t\tif ( this.fragment ) { this.fragment.bind(); }\n\t\tset$1( this, this.getValue(), true );\n\t};\n\n\tBindingFlag.prototype.bubble = function bubble () {\n\t\tif ( !this.dirty ) {\n\t\t\tthis.element.bubble();\n\t\t\tthis.dirty = true;\n\t\t}\n\t};\n\n\tBindingFlag.prototype.getValue = function getValue () {\n\t\tif ( this.fragment ) { return this.fragment.valueOf(); }\n\t\telse if ( 'value' in this ) { return this.value; }\n\t\telse if ( 'f' in this.template ) { return this.template.f; }\n\t\telse { return true; }\n\t};\n\n\tBindingFlag.prototype.render = function render () {\n\t\tset$1( this, this.getValue(), true );\n\t};\n\n\tBindingFlag.prototype.toString = function toString () { return ''; };\n\n\tBindingFlag.prototype.unbind = function unbind () {\n\t\tif ( this.fragment ) { this.fragment.unbind(); }\n\n\t\tdelete this.element[ this.flag ];\n\t};\n\n\tBindingFlag.prototype.unrender = function unrender () {\n\t\tif ( this.element.rendered ) { this.element.recreateTwowayBinding(); }\n\t};\n\n\tBindingFlag.prototype.update = function update () {\n\t\tif ( this.dirty ) {\n\t\t\tif ( this.fragment ) { this.fragment.update(); }\n\t\t\tset$1( this, this.getValue(), true );\n\t\t}\n\t};\n\n\treturn BindingFlag;\n}(Item));\n\nfunction set$1 ( flag, value, update ) {\n\tif ( value === 0 ) {\n\t\tflag.value = true;\n\t} else if ( value === 'true' ) {\n\t\tflag.value = true;\n\t} else if ( value === 'false' || value === '0' ) {\n\t\tflag.value = false;\n\t} else {\n\t\tflag.value = value;\n\t}\n\n\tvar current = flag.element[ flag.flag ];\n\tflag.element[ flag.flag ] = flag.value;\n\tif ( update && !flag.element.attributes.binding && current !== flag.value ) {\n\t\tflag.element.recreateTwowayBinding();\n\t}\n\n\treturn flag.value;\n}\n\nvar RactiveModel = (function (Model$$1) {\n\tfunction RactiveModel ( ractive ) {\n\t\tModel$$1.call( this, null, '' );\n\t\tthis.value = ractive;\n\t\tthis.isRoot = true;\n\t\tthis.root = this;\n\t\tthis.adaptors = [];\n\t\tthis.ractive = ractive;\n\t}\n\n\tif ( Model$$1 ) RactiveModel.__proto__ = Model$$1;\n\tRactiveModel.prototype = Object.create( Model$$1 && Model$$1.prototype );\n\tRactiveModel.prototype.constructor = RactiveModel;\n\n\tRactiveModel.prototype.joinKey = function joinKey ( key ) {\n\t\tvar model = Model$$1.prototype.joinKey.call( this, key );\n\n\t\tif ( ( key === 'root' || key === 'parent' ) && !model.isLink ) { return initLink( model, key ); }\n\t\telse if ( key === 'data' ) { return this.ractive.viewmodel; }\n\n\t\treturn model;\n\t};\n\n\tRactiveModel.prototype.getKeypath = function getKeypath () {\n\t\treturn '@this';\n\t};\n\n\tRactiveModel.prototype.retrieve = function retrieve () {\n\t\treturn this.ractive;\n\t};\n\n\treturn RactiveModel;\n}(Model));\n\nfunction initLink ( model, key ) {\n\tmodel.applyValue = function ( value ) {\n\t\tthis.parent.value[ key ] = value;\n\t\tif ( value && value.viewmodel ) {\n\t\t\tthis.link( value.viewmodel.getRactiveModel(), key );\n\t\t\tthis._link.markedAll();\n\t\t} else {\n\t\t\tthis.link( Object.create( Missing ), key );\n\t\t\tthis._link.markedAll();\n\t\t}\n\t};\n\n\tmodel.applyValue( model.parent.ractive[ key ], key );\n\tmodel._link.set = function (v) { return model.applyValue( v ); };\n\tmodel._link.applyValue = function (v) { return model.applyValue( v ); };\n\treturn model._link;\n}\n\nvar hasProp$1 = Object.prototype.hasOwnProperty;\n\nvar RootModel = (function (Model$$1) {\n\tfunction RootModel ( options ) {\n\t\tModel$$1.call( this, null, null );\n\n\t\tthis.isRoot = true;\n\t\tthis.root = this;\n\t\tthis.ractive = options.ractive; // TODO sever this link\n\n\t\tthis.value = options.data;\n\t\tthis.adaptors = options.adapt;\n\t\tthis.adapt();\n\n\t\tthis.computationContext = options.ractive;\n\t\tthis.computations = {};\n\t}\n\n\tif ( Model$$1 ) RootModel.__proto__ = Model$$1;\n\tRootModel.prototype = Object.create( Model$$1 && Model$$1.prototype );\n\tRootModel.prototype.constructor = RootModel;\n\n\tRootModel.prototype.attached = function attached ( fragment ) {\n\t\tattachImplicits( this, fragment );\n\t};\n\n\tRootModel.prototype.compute = function compute ( key, signature ) {\n\t\tvar computation = new Computation( this, signature, key );\n\t\tthis.computations[ escapeKey( key ) ] = computation;\n\n\t\treturn computation;\n\t};\n\n\tRootModel.prototype.createLink = function createLink ( keypath, target, targetPath, options ) {\n\t\tvar this$1 = this;\n\n\t\tvar keys = splitKeypath( keypath );\n\n\t\tvar model = this;\n\t\twhile ( keys.length ) {\n\t\t\tvar key = keys.shift();\n\t\t\tmodel = this$1.childByKey[ key ] || this$1.joinKey( key );\n\t\t}\n\n\t\treturn model.link( target, targetPath, options );\n\t};\n\n\tRootModel.prototype.detached = function detached () {\n\t\tdetachImplicits( this );\n\t};\n\n\tRootModel.prototype.get = function get ( shouldCapture, options ) {\n\t\tvar this$1 = this;\n\n\t\tif ( shouldCapture ) { capture( this ); }\n\n\t\tif ( !options || options.virtual !== false ) {\n\t\t\tvar result = this.getVirtual();\n\t\t\tvar keys = Object.keys( this.computations );\n\t\t\tvar i = keys.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tresult[ keys[i] ] = this$1.computations[ keys[i] ].get();\n\t\t\t}\n\n\t\t\treturn result;\n\t\t} else {\n\t\t\treturn this.value;\n\t\t}\n\t};\n\n\tRootModel.prototype.getKeypath = function getKeypath () {\n\t\treturn '';\n\t};\n\n\tRootModel.prototype.getRactiveModel = function getRactiveModel () {\n\t\treturn this.ractiveModel || ( this.ractiveModel = new RactiveModel( this.ractive ) );\n\t};\n\n\tRootModel.prototype.getValueChildren = function getValueChildren () {\n\t\tvar this$1 = this;\n\n\t\tvar children = Model$$1.prototype.getValueChildren.call( this, this.value );\n\n\t\tthis.children.forEach( function (child) {\n\t\t\tif ( child._link ) {\n\t\t\t\tvar idx = children.indexOf( child );\n\t\t\t\tif ( ~idx ) { children.splice( idx, 1, child._link ); }\n\t\t\t\telse { children.push( child._link ); }\n\t\t\t}\n\t\t});\n\n\t\tfor ( var k in this$1.computations ) {\n\t\t\tchildren.push( this$1.computations[k] );\n\t\t}\n\n\t\treturn children;\n\t};\n\n\tRootModel.prototype.has = function has ( key ) {\n\t\tvar value = this.value;\n\t\tvar unescapedKey = unescapeKey( key );\n\n\t\tif ( unescapedKey === '@this' || unescapedKey === '@global' || unescapedKey === '@shared' ) { return true; }\n\t\tif ( unescapedKey[0] === '~' && unescapedKey[1] === '/' ) { unescapedKey = unescapedKey.slice( 2 ); }\n\t\tif ( hasProp$1.call( value, unescapedKey ) ) { return true; }\n\n\t\t// mappings/links and computations\n\t\tif ( key in this.computations || this.childByKey[unescapedKey] && this.childByKey[unescapedKey]._link ) { return true; }\n\n\t\t// We climb up the constructor chain to find if one of them contains the unescapedKey\n\t\tvar constructor = value.constructor;\n\t\twhile ( constructor !== Function && constructor !== Array && constructor !== Object ) {\n\t\t\tif ( hasProp$1.call( constructor.prototype, unescapedKey ) ) { return true; }\n\t\t\tconstructor = constructor.constructor;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tRootModel.prototype.joinKey = function joinKey ( key, opts ) {\n\t\tif ( key[0] === '@' ) {\n\t\t\tif ( key === '@this' || key === '@' ) { return this.getRactiveModel(); }\n\t\t\tif ( key === '@global' ) { return GlobalModel; }\n\t\t\tif ( key === '@shared' ) { return SharedModel$1; }\n\t\t\treturn;\n\t\t}\n\n\t\tif ( key[0] === '~' && key[1] === '/' ) { key = key.slice( 2 ); }\n\n\t\treturn this.computations.hasOwnProperty( key ) ? this.computations[ key ] :\n\t\t       Model$$1.prototype.joinKey.call( this, key, opts );\n\t};\n\n\t// TODO: this should go away\n\tRootModel.prototype.map = function map ( localKey, origin, options ) {\n\t\tvar local = this.joinKey( localKey );\n\t\tlocal.link( origin, localKey, options );\n\t};\n\n\tRootModel.prototype.set = function set ( value ) {\n\t\t// TODO wrapping root node is a baaaad idea. We should prevent this\n\t\tvar wrapper = this.wrapper;\n\t\tif ( wrapper ) {\n\t\t\tvar shouldTeardown = !wrapper.reset || wrapper.reset( value ) === false;\n\n\t\t\tif ( shouldTeardown ) {\n\t\t\t\twrapper.teardown();\n\t\t\t\tthis.wrapper = null;\n\t\t\t\tthis.value = value;\n\t\t\t\tthis.adapt();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.value = value;\n\t\t\tthis.adapt();\n\t\t}\n\n\t\tthis.deps.forEach( handleChange );\n\t\tthis.children.forEach( mark );\n\t};\n\n\tRootModel.prototype.retrieve = function retrieve () {\n\t\treturn this.wrapper ? this.wrapper.get() : this.value;\n\t};\n\n\tRootModel.prototype.teardown = function teardown$$1 () {\n\t\tvar this$1 = this;\n\n\t\tModel$$1.prototype.teardown.call(this);\n\t\tfor ( var k in this$1.computations ) {\n\t\t\tthis$1.computations[ k ].teardown();\n\t\t}\n\t};\n\n\treturn RootModel;\n}(Model));\n\nRootModel.prototype.update = noop;\n\nfunction attachImplicits ( model, fragment ) {\n\tif ( model._link && model._link.implicit && model._link.isDetached() ) {\n\t\tmodel.attach( fragment );\n\t}\n\n\t// look for virtual children to relink and cascade\n\tfor ( var k in model.childByKey ) {\n\t\tif ( k in model.value ) {\n\t\t\tattachImplicits( model.childByKey[k], fragment );\n\t\t} else if ( !model.childByKey[k]._link || model.childByKey[k]._link.isDetached() ) {\n\t\t\tvar mdl = resolveReference( fragment, k );\n\t\t\tif ( mdl ) {\n\t\t\t\tmodel.childByKey[k].link( mdl, k, { implicit: true } );\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction detachImplicits ( model ) {\n\tif ( model._link && model._link.implicit ) {\n\t\tmodel.unlink();\n\t}\n\n\tfor ( var k in model.childByKey ) {\n\t\tdetachImplicits( model.childByKey[k] );\n\t}\n}\n\nfunction getComputationSignature ( ractive, key, signature ) {\n\tvar getter;\n\tvar setter;\n\n\t// useful for debugging\n\tvar getterString;\n\tvar getterUseStack;\n\tvar setterString;\n\n\tif ( typeof signature === 'function' ) {\n\t\tgetter = bind$1( signature, ractive );\n\t\tgetterString = signature.toString();\n\t\tgetterUseStack = true;\n\t}\n\n\tif ( typeof signature === 'string' ) {\n\t\tgetter = createFunctionFromString( signature, ractive );\n\t\tgetterString = signature;\n\t}\n\n\tif ( typeof signature === 'object' ) {\n\t\tif ( typeof signature.get === 'string' ) {\n\t\t\tgetter = createFunctionFromString( signature.get, ractive );\n\t\t\tgetterString = signature.get;\n\t\t} else if ( typeof signature.get === 'function' ) {\n\t\t\tgetter = bind$1( signature.get, ractive );\n\t\t\tgetterString = signature.get.toString();\n\t\t\tgetterUseStack = true;\n\t\t} else {\n\t\t\tfatal( '`%s` computation must have a `get()` method', key );\n\t\t}\n\n\t\tif ( typeof signature.set === 'function' ) {\n\t\t\tsetter = bind$1( signature.set, ractive );\n\t\t\tsetterString = signature.set.toString();\n\t\t}\n\t}\n\n\treturn {\n\t\tgetter: getter,\n\t\tsetter: setter,\n\t\tgetterString: getterString,\n\t\tsetterString: setterString,\n\t\tgetterUseStack: getterUseStack\n\t};\n}\n\nvar constructHook = new Hook( 'construct' );\n\nvar registryNames$1 = [\n\t'adaptors',\n\t'components',\n\t'decorators',\n\t'easing',\n\t'events',\n\t'interpolators',\n\t'partials',\n\t'transitions'\n];\n\nvar uid = 0;\n\nfunction construct ( ractive, options ) {\n\tif ( Ractive.DEBUG ) { welcome(); }\n\n\tinitialiseProperties( ractive );\n\thandleAttributes( ractive );\n\n\t// if there's not a delegation setting, inherit from parent if it's not default\n\tif ( !options.hasOwnProperty( 'delegate' ) && ractive.parent && ractive.parent.delegate !== ractive.delegate ) {\n\t\tractive.delegate = false;\n\t}\n\n\t// TODO don't allow `onconstruct` with `new Ractive()`, there's no need for it\n\tconstructHook.fire( ractive, options );\n\n\t// Add registries\n\tvar i = registryNames$1.length;\n\twhile ( i-- ) {\n\t\tvar name = registryNames$1[ i ];\n\t\tractive[ name ] = Object.assign( Object.create( ractive.constructor[ name ] || null ), options[ name ] );\n\t}\n\n\tif ( ractive._attributePartial ) {\n\t\tractive.partials['extra-attributes'] = ractive._attributePartial;\n\t\tdelete ractive._attributePartial;\n\t}\n\n\t// Create a viewmodel\n\tvar viewmodel = new RootModel({\n\t\tadapt: getAdaptors( ractive, ractive.adapt, options ),\n\t\tdata: dataConfigurator.init( ractive.constructor, ractive, options ),\n\t\tractive: ractive\n\t});\n\n\tractive.viewmodel = viewmodel;\n\n\t// Add computed properties\n\tvar computed = Object.assign( Object.create( ractive.constructor.prototype.computed ), options.computed );\n\n\tfor ( var key in computed ) {\n\t\tif ( key === '__proto__' ) { continue; }\n\t\tvar signature = getComputationSignature( ractive, key, computed[ key ] );\n\t\tviewmodel.compute( key, signature );\n\t}\n}\n\nfunction getAdaptors ( ractive, protoAdapt, options ) {\n\tprotoAdapt = protoAdapt.map( lookup );\n\tvar adapt = ensureArray( options.adapt ).map( lookup );\n\n\tvar srcs = [ protoAdapt, adapt ];\n\tif ( ractive.parent && !ractive.isolated ) {\n\t\tsrcs.push( ractive.parent.viewmodel.adaptors );\n\t}\n\n\treturn combine.apply( null, srcs );\n\n\tfunction lookup ( adaptor ) {\n\t\tif ( typeof adaptor === 'string' ) {\n\t\t\tadaptor = findInViewHierarchy( 'adaptors', ractive, adaptor );\n\n\t\t\tif ( !adaptor ) {\n\t\t\t\tfatal( missingPlugin( adaptor, 'adaptor' ) );\n\t\t\t}\n\t\t}\n\n\t\treturn adaptor;\n\t}\n}\n\nfunction initialiseProperties ( ractive ) {\n\t// Generate a unique identifier, for places where you'd use a weak map if it\n\t// existed\n\tractive._guid = 'r-' + uid++;\n\n\t// events\n\tractive._subs = Object.create( null );\n\tractive._nsSubs = 0;\n\n\t// storage for item configuration from instantiation to reset,\n\t// like dynamic functions or original values\n\tractive._config = {};\n\n\t// events\n\tractive.event = null;\n\tractive._eventQueue = [];\n\n\t// observers\n\tractive._observers = [];\n\n\t// external children\n\tractive._children = [];\n\tractive._children.byName = {};\n\tractive.children = ractive._children;\n\n\tif ( !ractive.component ) {\n\t\tractive.root = ractive;\n\t\tractive.parent = ractive.container = null; // TODO container still applicable?\n\t}\n}\n\nfunction handleAttributes ( ractive ) {\n\tvar component = ractive.component;\n\tvar attributes = ractive.constructor.attributes;\n\n\tif ( attributes && component ) {\n\t\tvar tpl = component.template;\n\t\tvar attrs = tpl.m ? tpl.m.slice() : [];\n\n\t\t// grab all of the passed attribute names\n\t\tvar props = attrs.filter( function (a) { return a.t === ATTRIBUTE; } ).map( function (a) { return a.n; } );\n\n\t\t// warn about missing requireds\n\t\tattributes.required.forEach( function (p) {\n\t\t\tif ( !~props.indexOf( p ) ) {\n\t\t\t\twarnIfDebug( (\"Component '\" + (component.name) + \"' requires attribute '\" + p + \"' to be provided\") );\n\t\t\t}\n\t\t});\n\n\t\t// set up a partial containing non-property attributes\n\t\tvar all = attributes.optional.concat( attributes.required );\n\t\tvar partial = [];\n\t\tvar i = attrs.length;\n\t\twhile ( i-- ) {\n\t\t\tvar a = attrs[i];\n\t\t\tif ( a.t === ATTRIBUTE && !~all.indexOf( a.n ) ) {\n\t\t\t\tif ( attributes.mapAll ) {\n\t\t\t\t\t// map the attribute if requested and make the extra attribute in the partial refer to the mapping\n\t\t\t\t\tpartial.unshift({ t: ATTRIBUTE, n: a.n, f: [{ t: INTERPOLATOR, r: (\"~/\" + (a.n)) }] });\n\t\t\t\t} else {\n\t\t\t\t\t// transfer the attribute to the extra attributes partal\n\t\t\t\t\tpartial.unshift( attrs.splice( i, 1 )[0] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( partial.length ) { component.template = { t: tpl.t, e: tpl.e, f: tpl.f, m: attrs, p: tpl.p }; }\n\t\tractive._attributePartial = partial;\n\t}\n}\n\nvar teardownHook = new Hook( 'teardown' );\nvar destructHook = new Hook( 'destruct' );\n\n// Teardown. This goes through the root fragment and all its children, removing observers\n// and generally cleaning up after itself\n\nfunction Ractive$teardown () {\n\tvar this$1 = this;\n\n\tif ( this.torndown ) {\n\t\twarnIfDebug( 'ractive.teardown() was called on a Ractive instance that was already torn down' );\n\t\treturn Promise.resolve();\n\t}\n\n\tthis.shouldDestroy = true;\n\treturn teardown$1( this, function () { return this$1.fragment.rendered ? this$1.unrender() : Promise.resolve(); } );\n}\n\nfunction teardown$1 ( instance, getPromise ) {\n\tinstance.torndown = true;\n\tinstance.viewmodel.teardown();\n\tinstance.fragment.unbind();\n\tinstance._observers.slice().forEach( cancel );\n\n\tif ( instance.el && instance.el.__ractive_instances__ ) {\n\t\tremoveFromArray( instance.el.__ractive_instances__, instance );\n\t}\n\n\tvar promise = getPromise();\n\n\tteardownHook.fire( instance );\n\tpromise.then( function () { return destructHook.fire( instance ); } );\n\n\treturn promise;\n}\n\nvar Component = (function (Item$$1) {\n\tfunction Component ( options, ComponentConstructor ) {\n\t\tvar this$1 = this;\n\n\t\tItem$$1.call( this, options );\n\t\tthis.isAnchor = this.template.t === ANCHOR;\n\t\tthis.type = this.isAnchor ? ANCHOR : COMPONENT; // override ELEMENT from super\n\n\t\tvar partials = options.template.p || {};\n\t\tif ( !( 'content' in partials ) ) { partials.content = options.template.f || []; }\n\t\tthis._partials = partials; // TEMP\n\n\t\tif ( this.isAnchor ) {\n\t\t\tthis.name = options.template.n;\n\n\t\t\tthis.addChild = addChild;\n\t\t\tthis.removeChild = removeChild;\n\t\t} else {\n\t\t\tvar instance = Object.create( ComponentConstructor.prototype );\n\n\t\t\tthis.instance = instance;\n\t\t\tthis.name = options.template.e;\n\n\t\t\tif ( instance.el ) {\n\t\t\t\twarnIfDebug( (\"The <\" + (this.name) + \"> component has a default 'el' property; it has been disregarded\") );\n\t\t\t}\n\n\t\t\t// find container\n\t\t\tvar fragment = options.parentFragment;\n\t\t\tvar container;\n\t\t\twhile ( fragment ) {\n\t\t\t\tif ( fragment.owner.type === YIELDER ) {\n\t\t\t\t\tcontainer = fragment.owner.container;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tfragment = fragment.parent;\n\t\t\t}\n\n\t\t\t// add component-instance-specific properties\n\t\t\tinstance.parent = this.parentFragment.ractive;\n\t\t\tinstance.container = container || null;\n\t\t\tinstance.root = instance.parent.root;\n\t\t\tinstance.component = this;\n\n\t\t\tconstruct( this.instance, { partials: partials });\n\n\t\t\t// for hackability, this could be an open option\n\t\t\t// for any ractive instance, but for now, just\n\t\t\t// for components and just for ractive...\n\t\t\tinstance._inlinePartials = partials;\n\t\t}\n\n\t\tthis.attributeByName = {};\n\n\t\tthis.events = [];\n\t\tthis.attributes = [];\n\t\tvar leftovers = [];\n\t\t( this.template.m || [] ).forEach( function (template) {\n\t\t\tswitch ( template.t ) {\n\t\t\t\tcase ATTRIBUTE:\n\t\t\t\tcase EVENT:\n\t\t\t\t\tthis$1.attributes.push( createItem({\n\t\t\t\t\t\towner: this$1,\n\t\t\t\t\t\tparentFragment: this$1.parentFragment,\n\t\t\t\t\t\ttemplate: template\n\t\t\t\t\t}) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase TRANSITION:\n\t\t\t\tcase BINDING_FLAG:\n\t\t\t\tcase DECORATOR:\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tleftovers.push( template );\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\tif ( leftovers.length ) {\n\t\t\tthis.attributes.push( new ConditionalAttribute({\n\t\t\t\towner: this,\n\t\t\t\tparentFragment: this.parentFragment,\n\t\t\t\ttemplate: leftovers\n\t\t\t}) );\n\t\t}\n\n\t\tthis.eventHandlers = [];\n\t}\n\n\tif ( Item$$1 ) Component.__proto__ = Item$$1;\n\tComponent.prototype = Object.create( Item$$1 && Item$$1.prototype );\n\tComponent.prototype.constructor = Component;\n\n\tComponent.prototype.bind = function bind$1 () {\n\t\tif ( !this.isAnchor ) {\n\t\t\tthis.attributes.forEach( bind );\n\n\t\t\tinitialise( this.instance, {\n\t\t\t\tpartials: this._partials\n\t\t\t}, {\n\t\t\t\tcssIds: this.parentFragment.cssIds\n\t\t\t});\n\n\t\t\tthis.eventHandlers.forEach( bind );\n\n\t\t\tthis.bound = true;\n\t\t}\n\t};\n\n\tComponent.prototype.bubble = function bubble () {\n\t\tif ( !this.dirty ) {\n\t\t\tthis.dirty = true;\n\t\t\tthis.parentFragment.bubble();\n\t\t}\n\t};\n\n\tComponent.prototype.destroyed = function destroyed$$1 () {\n\t\tif ( !this.isAnchor && this.instance.fragment ) { this.instance.fragment.destroyed(); }\n\t};\n\n\tComponent.prototype.detach = function detach () {\n\t\tif ( this.isAnchor ) {\n\t\t\tif ( this.instance ) { return this.instance.fragment.detach(); }\n\t\t\treturn createDocumentFragment();\n\t\t}\n\n\t\treturn this.instance.fragment.detach();\n\t};\n\n\tComponent.prototype.find = function find ( selector, options ) {\n\t\tif ( this.instance ) { return this.instance.fragment.find( selector, options ); }\n\t};\n\n\tComponent.prototype.findAll = function findAll ( selector, options ) {\n\t\tif ( this.instance ) { this.instance.fragment.findAll( selector, options ); }\n\t};\n\n\tComponent.prototype.findComponent = function findComponent ( name, options ) {\n\t\tif ( !name || this.name === name ) { return this.instance; }\n\n\t\tif ( this.instance.fragment ) {\n\t\t\treturn this.instance.fragment.findComponent( name, options );\n\t\t}\n\t};\n\n\tComponent.prototype.findAllComponents = function findAllComponents ( name, options ) {\n\t\tvar result = options.result;\n\n\t\tif ( this.instance && ( !name || this.name === name ) ) {\n\t\t\tresult.push( this.instance );\n\t\t}\n\n\t\tif ( this.instance ) { this.instance.findAllComponents( name, options ); }\n\t};\n\n\tComponent.prototype.firstNode = function firstNode ( skipParent ) {\n\t\tif ( this.instance ) { return this.instance.fragment.firstNode( skipParent ); }\n\t};\n\n\tComponent.prototype.getContext = function getContext$$1 () {\n\t\tvar assigns = [], len = arguments.length;\n\t\twhile ( len-- ) assigns[ len ] = arguments[ len ];\n\n\t\tassigns.unshift( this );\n\t\treturn getRactiveContext.apply( null, assigns );\n\t};\n\n\tComponent.prototype.render = function render$1$$1 ( target, occupants ) {\n\t\tif ( this.isAnchor ) {\n\t\t\tthis.rendered = true;\n\t\t\tthis.target = target;\n\n\t\t\tif ( !checking.length ) {\n\t\t\t\tchecking.push( this.ractive );\n\t\t\t\tif ( occupants ) {\n\t\t\t\t\tthis.occupants = occupants;\n\t\t\t\t\tcheckAnchors();\n\t\t\t\t\tthis.occupants = null;\n\t\t\t\t} else {\n\t\t\t\t\trunloop.scheduleTask( checkAnchors, true );\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\trender$1( this.instance, target, null, occupants );\n\n\t\t\tthis.attributes.forEach( render );\n\t\t\tthis.eventHandlers.forEach( render );\n\n\t\t\tthis.rendered = true;\n\t\t}\n\t};\n\n\tComponent.prototype.toString = function toString$$1 () {\n\t\tif ( this.instance ) { return this.instance.toHTML(); }\n\t};\n\n\tComponent.prototype.unbind = function unbind$1 () {\n\t\tif ( !this.isAnchor ) {\n\t\t\tthis.bound = false;\n\n\t\t\tthis.attributes.forEach( unbind );\n\n\t\t\tteardown$1( this.instance, function () { return runloop.promise(); } );\n\t\t}\n\t};\n\n\tComponent.prototype.unrender = function unrender$1 ( shouldDestroy ) {\n\t\tthis.shouldDestroy = shouldDestroy;\n\n\t\tif ( this.isAnchor ) {\n\t\t\tif ( this.item ) { unrenderItem( this, this.item ); }\n\t\t\tthis.target = null;\n\t\t\tif ( !checking.length ) {\n\t\t\t\tchecking.push( this.ractive );\n\t\t\t\trunloop.scheduleTask( checkAnchors, true );\n\t\t\t}\n\t\t} else {\n\t\t\tthis.instance.unrender();\n\t\t\tthis.instance.el = this.instance.target = null;\n\t\t\tthis.attributes.forEach( unrender );\n\t\t\tthis.eventHandlers.forEach( unrender );\n\t\t}\n\n\t\tthis.rendered = false;\n\t};\n\n\tComponent.prototype.update = function update$1 () {\n\t\tthis.dirty = false;\n\t\tif ( this.instance ) {\n\t\t\tthis.instance.fragment.update();\n\t\t\tthis.attributes.forEach( update );\n\t\t\tthis.eventHandlers.forEach( update );\n\t\t}\n\t};\n\n\treturn Component;\n}(Item));\n\nfunction addChild ( meta ) {\n\tif ( this.item ) { this.removeChild( this.item ); }\n\n\tvar child = meta.instance;\n\tmeta.anchor = this;\n\n\tmeta.parentFragment = this.parentFragment;\n\tmeta.name = meta.nameOption || this.name;\n\tthis.name = meta.name;\n\n\n\tif ( !child.isolated ) { child.viewmodel.attached( this.parentFragment ); }\n\n\t// render as necessary\n\tif ( this.rendered ) {\n\t\trenderItem( this, meta );\n\t}\n}\n\nfunction removeChild ( meta ) {\n\t// unrender as necessary\n\tif ( this.item === meta ) {\n\t\tunrenderItem( this, meta );\n\t\tthis.name = this.template.n;\n\t}\n}\n\nfunction renderItem ( anchor, meta ) {\n\tif ( !anchor.rendered ) { return; }\n\n\tmeta.shouldDestroy = false;\n\tmeta.parentFragment = anchor.parentFragment;\n\n\tanchor.item = meta;\n\tanchor.instance = meta.instance;\n\tvar nextNode = anchor.parentFragment.findNextNode( anchor );\n\n\tif ( meta.instance.fragment.rendered ) {\n\t\tmeta.instance.unrender();\n\t}\n\n\tmeta.partials = meta.instance.partials;\n\tmeta.instance.partials = Object.assign( {}, meta.partials, anchor._partials );\n\n\tmeta.instance.fragment.unbind();\n\tmeta.instance.fragment.bind( meta.instance.viewmodel );\n\n\tanchor.attributes.forEach( bind );\n\tanchor.eventHandlers.forEach( bind );\n\tanchor.attributes.forEach( render );\n\tanchor.eventHandlers.forEach( render );\n\n\tvar target = anchor.parentFragment.findParentNode();\n\trender$1( meta.instance, target, target.contains( nextNode ) ? nextNode : null, anchor.occupants );\n\n\tif ( meta.lastBound !== anchor ) {\n\t\tmeta.lastBound = anchor;\n\t}\n}\n\nfunction unrenderItem ( anchor, meta ) {\n\tif ( !anchor.rendered ) { return; }\n\n\tmeta.shouldDestroy = true;\n\tmeta.instance.unrender();\n\n\tanchor.eventHandlers.forEach( unrender );\n\tanchor.attributes.forEach( unrender );\n\tanchor.eventHandlers.forEach( unbind );\n\tanchor.attributes.forEach( unbind );\n\n\tmeta.instance.el = meta.instance.anchor = null;\n\tmeta.parentFragment = null;\n\tmeta.anchor = null;\n\tanchor.item = null;\n\tanchor.instance = null;\n}\n\nvar checking = [];\nfunction checkAnchors () {\n\tvar list = checking;\n\tchecking = [];\n\n\tlist.forEach( updateAnchors );\n}\n\nfunction setupArgsFn ( item, template, fragment, opts ) {\n\tif ( opts === void 0 ) opts = {};\n\n\tif ( template && template.f && template.f.s ) {\n\t\titem.fn = getFunction( template.f.s, template.f.r.length );\n\t\tif ( opts.register === true ) {\n\t\t\titem.models = resolveArgs( item, template, fragment, opts );\n\t\t}\n\t}\n}\n\nfunction resolveArgs ( item, template, fragment, opts ) {\n\tif ( opts === void 0 ) opts = {};\n\n\treturn template.f.r.map( function ( ref, i ) {\n\t\tvar model;\n\n\t\tif ( opts.specialRef && ( model = opts.specialRef( ref, i ) ) ) { return model; }\n\n\t\tmodel = resolveReference( fragment, ref );\n\t\tif ( opts.register === true ) {\n\t\t\tmodel.register( item );\n\t\t}\n\n\t\treturn model;\n\t});\n}\n\nfunction teardownArgsFn ( item, template ) {\n\tif ( template && template.f && template.f.s ) {\n\t\tif ( item.models ) { item.models.forEach( function (m) {\n\t\t\tif ( m && m.unregister ) { m.unregister( item ); }\n\t\t}); }\n\t\titem.models = null;\n\t}\n}\n\nvar missingDecorator = {\n\tupdate: noop,\n\tteardown: noop\n};\n\nvar Decorator = function Decorator ( options ) {\n\tthis.owner = options.owner || options.parentFragment.owner || findElement( options.parentFragment );\n\tthis.element = this.owner.attributeByName ? this.owner : findElement( options.parentFragment );\n\tthis.parentFragment = this.owner.parentFragment;\n\tthis.ractive = this.owner.ractive;\n\tvar template = this.template = options.template;\n\n\tthis.name = template.n;\n\n\tthis.node = null;\n\tthis.intermediary = null;\n\n\tthis.element.decorators.push( this );\n};\n\nDecorator.prototype.bind = function bind () {\n\tsetupArgsFn( this, this.template, this.parentFragment, { register: true } );\n};\n\nDecorator.prototype.bubble = function bubble () {\n\tif ( !this.dirty ) {\n\t\tthis.dirty = true;\n\t\tthis.owner.bubble();\n\t}\n};\n\nDecorator.prototype.destroyed = function destroyed () {\n\tif ( this.intermediary ) { this.intermediary.teardown(); }\n\tthis.shouldDestroy = true;\n};\n\nDecorator.prototype.handleChange = function handleChange () { this.bubble(); };\n\nDecorator.prototype.rebind = function rebind ( next, previous, safe ) {\n\tvar idx = this.models.indexOf( previous );\n\tif ( !~idx ) { return; }\n\n\tnext = rebindMatch( this.template.f.r[ idx ], next, previous );\n\tif ( next === previous ) { return; }\n\n\tprevious.unregister( this );\n\tthis.models.splice( idx, 1, next );\n\tif ( next ) { next.addShuffleRegister( this, 'mark' ); }\n\n\tif ( !safe ) { this.bubble(); }\n};\n\nDecorator.prototype.render = function render () {\n\t\tvar this$1 = this;\n\n\trunloop.scheduleTask( function () {\n\t\tvar fn = findInViewHierarchy( 'decorators', this$1.ractive, this$1.name );\n\n\t\tif ( !fn ) {\n\t\t\twarnOnce( missingPlugin( this$1.name, 'decorator' ) );\n\t\t\tthis$1.intermediary = missingDecorator;\n\t\t\treturn;\n\t\t}\n\n\t\tthis$1.node = this$1.element.node;\n\n\t\tvar args;\n\t\tif ( this$1.fn ) {\n\t\t\targs = this$1.models.map( function (model) {\n\t\t\t\tif ( !model ) { return undefined; }\n\n\t\t\t\treturn model.get();\n\t\t\t});\n\t\t\targs = this$1.fn.apply( this$1.ractive, args );\n\t\t}\n\n\t\tthis$1.intermediary = fn.apply( this$1.ractive, [ this$1.node ].concat( args ) );\n\n\t\tif ( !this$1.intermediary || !this$1.intermediary.teardown ) {\n\t\t\tthrow new Error( (\"The '\" + (this$1.name) + \"' decorator must return an object with a teardown method\") );\n\t\t}\n\n\t\t// watch out for decorators that cause their host element to be unrendered\n\t\tif ( this$1.shouldDestroy ) { this$1.destroyed(); }\n\t}, true );\n\tthis.rendered = true;\n};\n\nDecorator.prototype.toString = function toString () { return ''; };\n\nDecorator.prototype.unbind = function unbind () {\n\tteardownArgsFn( this, this.template );\n};\n\nDecorator.prototype.unrender = function unrender ( shouldDestroy ) {\n\tif ( ( !shouldDestroy || this.element.rendered ) && this.intermediary ) { this.intermediary.teardown(); }\n\tthis.rendered = false;\n};\n\nDecorator.prototype.update = function update () {\n\tif ( !this.dirty ) { return; }\n\n\tthis.dirty = false;\n\n\tif ( this.intermediary ) {\n\t\tif ( !this.intermediary.update ) {\n\t\t\tthis.unrender();\n\t\t\tthis.render();\n\t\t}\n\t\telse {\n\t\t\tvar args = this.models.map( function (model) { return model && model.get(); } );\n\t\t\tthis.intermediary.update.apply( this.ractive, this.fn.apply( this.ractive, args ) );\n\t\t}\n\t}\n};\n\nvar Doctype = (function (Item$$1) {\n\tfunction Doctype () {\n\t\tItem$$1.apply(this, arguments);\n\t}\n\n\tif ( Item$$1 ) Doctype.__proto__ = Item$$1;\n\tDoctype.prototype = Object.create( Item$$1 && Item$$1.prototype );\n\tDoctype.prototype.constructor = Doctype;\n\n\tDoctype.prototype.toString = function toString () {\n\t\treturn '<!DOCTYPE' + this.template.a + '>';\n\t};\n\n\treturn Doctype;\n}(Item));\n\nvar proto$1 = Doctype.prototype;\nproto$1.bind = proto$1.render = proto$1.teardown = proto$1.unbind = proto$1.unrender = proto$1.update = noop;\n\nvar Binding = function Binding ( element, name ) {\n\tif ( name === void 0 ) name = 'value';\n\n\tthis.element = element;\n\tthis.ractive = element.ractive;\n\tthis.attribute = element.attributeByName[ name ];\n\n\tvar interpolator = this.attribute.interpolator;\n\tinterpolator.twowayBinding = this;\n\n\tvar model = interpolator.model;\n\n\tif ( model.isReadonly ) {\n\t\tvar keypath = model.getKeypath().replace( /^@/, '' );\n\t\twarnOnceIfDebug( (\"Cannot use two-way binding on <\" + (element.name) + \"> element: \" + keypath + \" is read-only. To suppress this warning use <\" + (element.name) + \" twoway='false'...>\"), { ractive: this.ractive });\n\t\treturn false;\n\t}\n\n\tthis.attribute.isTwoway = true;\n\tthis.model = model;\n\n\t// initialise value, if it's undefined\n\tvar value = model.get();\n\tthis.wasUndefined = value === undefined;\n\n\tif ( value === undefined && this.getInitialValue ) {\n\t\tvalue = this.getInitialValue();\n\t\tmodel.set( value );\n\t}\n\tthis.lastVal( true, value );\n\n\tvar parentForm = findElement( this.element, false, 'form' );\n\tif ( parentForm ) {\n\t\tthis.resetValue = value;\n\t\tparentForm.formBindings.push( this );\n\t}\n};\n\nBinding.prototype.bind = function bind () {\n\tthis.model.registerTwowayBinding( this );\n};\n\nBinding.prototype.handleChange = function handleChange () {\n\t\tvar this$1 = this;\n\n\tvar value = this.getValue();\n\tif ( this.lastVal() === value ) { return; }\n\n\trunloop.start( this.root );\n\tthis.attribute.locked = true;\n\tthis.model.set( value );\n\tthis.lastVal( true, value );\n\n\t// if the value changes before observers fire, unlock to be updatable cause something weird and potentially freezy is up\n\tif ( this.model.get() !== value ) { this.attribute.locked = false; }\n\telse { runloop.scheduleTask( function () { return this$1.attribute.locked = false; } ); }\n\n\trunloop.end();\n};\n\nBinding.prototype.lastVal = function lastVal ( setting, value ) {\n\tif ( setting ) { this.lastValue = value; }\n\telse { return this.lastValue; }\n};\n\nBinding.prototype.rebind = function rebind ( next, previous ) {\n\t\tvar this$1 = this;\n\n\tif ( this.model && this.model === previous ) { previous.unregisterTwowayBinding( this ); }\n\tif ( next ) {\n\t\tthis.model = next;\n\t\trunloop.scheduleTask( function () { return next.registerTwowayBinding( this$1 ); } );\n\t}\n};\n\nBinding.prototype.render = function render () {\n\tthis.node = this.element.node;\n\tthis.node._ractive.binding = this;\n\tthis.rendered = true; // TODO is this used anywhere?\n};\n\nBinding.prototype.setFromNode = function setFromNode ( node ) {\n\tthis.model.set( node.value );\n};\n\nBinding.prototype.unbind = function unbind () {\n\tthis.model.unregisterTwowayBinding( this );\n};\n\nBinding.prototype.unrender = noop;\n\n// This is the handler for DOM events that would lead to a change in the model\n// (i.e. change, sometimes, input, and occasionally click and keyup)\nfunction handleDomEvent () {\n\tthis._ractive.binding.handleChange();\n}\n\nvar CheckboxBinding = (function (Binding$$1) {\n\tfunction CheckboxBinding ( element ) {\n\t\tBinding$$1.call( this, element, 'checked' );\n\t}\n\n\tif ( Binding$$1 ) CheckboxBinding.__proto__ = Binding$$1;\n\tCheckboxBinding.prototype = Object.create( Binding$$1 && Binding$$1.prototype );\n\tCheckboxBinding.prototype.constructor = CheckboxBinding;\n\n\tCheckboxBinding.prototype.render = function render () {\n\t\tBinding$$1.prototype.render.call(this);\n\n\t\tthis.node.addEventListener( 'change', handleDomEvent, false );\n\n\t\tif ( this.node.attachEvent ) {\n\t\t\tthis.node.addEventListener( 'click', handleDomEvent, false );\n\t\t}\n\t};\n\n\tCheckboxBinding.prototype.unrender = function unrender () {\n\t\tthis.node.removeEventListener( 'change', handleDomEvent, false );\n\t\tthis.node.removeEventListener( 'click', handleDomEvent, false );\n\t};\n\n\tCheckboxBinding.prototype.getInitialValue = function getInitialValue () {\n\t\treturn !!this.element.getAttribute( 'checked' );\n\t};\n\n\tCheckboxBinding.prototype.getValue = function getValue () {\n\t\treturn this.node.checked;\n\t};\n\n\tCheckboxBinding.prototype.setFromNode = function setFromNode ( node ) {\n\t\tthis.model.set( node.checked );\n\t};\n\n\treturn CheckboxBinding;\n}(Binding));\n\nfunction getBindingGroup ( group, model, getValue ) {\n\tvar hash = group + \"-bindingGroup\";\n\treturn model[hash] || ( model[ hash ] = new BindingGroup( hash, model, getValue ) );\n}\n\nvar BindingGroup = function BindingGroup ( hash, model, getValue ) {\n\tvar this$1 = this;\n\n\tthis.model = model;\n\tthis.hash = hash;\n\tthis.getValue = function () {\n\t\tthis$1.value = getValue.call(this$1);\n\t\treturn this$1.value;\n\t};\n\n\tthis.bindings = [];\n};\n\nBindingGroup.prototype.add = function add ( binding ) {\n\tthis.bindings.push( binding );\n};\n\nBindingGroup.prototype.bind = function bind () {\n\tthis.value = this.model.get();\n\tthis.model.registerTwowayBinding( this );\n\tthis.bound = true;\n};\n\nBindingGroup.prototype.remove = function remove ( binding ) {\n\tremoveFromArray( this.bindings, binding );\n\tif ( !this.bindings.length ) {\n\t\tthis.unbind();\n\t}\n};\n\nBindingGroup.prototype.unbind = function unbind () {\n\tthis.model.unregisterTwowayBinding( this );\n\tthis.bound = false;\n\tdelete this.model[this.hash];\n};\n\nBindingGroup.prototype.rebind = Binding.prototype.rebind;\n\nvar push$1 = [].push;\n\nfunction getValue() {\n\tvar this$1 = this;\n\n\tvar all = this.bindings.filter(function (b) { return b.node && b.node.checked; }).map(function (b) { return b.element.getAttribute( 'value' ); });\n\tvar res = [];\n\tall.forEach(function (v) { if ( !this$1.bindings[0].arrayContains( res, v ) ) { res.push( v ); } });\n\treturn res;\n}\n\nvar CheckboxNameBinding = (function (Binding$$1) {\n\tfunction CheckboxNameBinding ( element ) {\n\t\tBinding$$1.call( this, element, 'name' );\n\n\t\tthis.checkboxName = true; // so that ractive.updateModel() knows what to do with this\n\n\t\t// Each input has a reference to an array containing it and its\n\t\t// group, as two-way binding depends on being able to ascertain\n\t\t// the status of all inputs within the group\n\t\tthis.group = getBindingGroup( 'checkboxes', this.model, getValue );\n\t\tthis.group.add( this );\n\n\t\tif ( this.noInitialValue ) {\n\t\t\tthis.group.noInitialValue = true;\n\t\t}\n\n\t\t// If no initial value was set, and this input is checked, we\n\t\t// update the model\n\t\tif ( this.group.noInitialValue && this.element.getAttribute( 'checked' ) ) {\n\t\t\tvar existingValue = this.model.get();\n\t\t\tvar bindingValue = this.element.getAttribute( 'value' );\n\n\t\t\tif ( !this.arrayContains( existingValue, bindingValue ) ) {\n\t\t\t\tpush$1.call( existingValue, bindingValue ); // to avoid triggering runloop with array adaptor\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( Binding$$1 ) CheckboxNameBinding.__proto__ = Binding$$1;\n\tCheckboxNameBinding.prototype = Object.create( Binding$$1 && Binding$$1.prototype );\n\tCheckboxNameBinding.prototype.constructor = CheckboxNameBinding;\n\n\tCheckboxNameBinding.prototype.bind = function bind () {\n\t\tif ( !this.group.bound ) {\n\t\t\tthis.group.bind();\n\t\t}\n\t};\n\n\tCheckboxNameBinding.prototype.getInitialValue = function getInitialValue () {\n\t\t// This only gets called once per group (of inputs that\n\t\t// share a name), because it only gets called if there\n\t\t// isn't an initial value. By the same token, we can make\n\t\t// a note of that fact that there was no initial value,\n\t\t// and populate it using any `checked` attributes that\n\t\t// exist (which users should avoid, but which we should\n\t\t// support anyway to avoid breaking expectations)\n\t\tthis.noInitialValue = true; // TODO are noInitialValue and wasUndefined the same thing?\n\t\treturn [];\n\t};\n\n\tCheckboxNameBinding.prototype.getValue = function getValue () {\n\t\treturn this.group.value;\n\t};\n\n\tCheckboxNameBinding.prototype.handleChange = function handleChange () {\n\t\tthis.isChecked = this.element.node.checked;\n\t\tthis.group.value = this.model.get();\n\t\tvar value = this.element.getAttribute( 'value' );\n\t\tif ( this.isChecked && !this.arrayContains( this.group.value, value ) ) {\n\t\t\tthis.group.value.push( value );\n\t\t} else if ( !this.isChecked && this.arrayContains( this.group.value, value ) ) {\n\t\t\tthis.removeFromArray( this.group.value, value );\n\t\t}\n\t\t// make sure super knows there's a change\n\t\tthis.lastValue = null;\n\t\tBinding$$1.prototype.handleChange.call(this);\n\t};\n\n\tCheckboxNameBinding.prototype.render = function render () {\n\t\tBinding$$1.prototype.render.call(this);\n\n\t\tvar node = this.node;\n\n\t\tvar existingValue = this.model.get();\n\t\tvar bindingValue = this.element.getAttribute( 'value' );\n\n\t\tif ( Array.isArray( existingValue ) ) {\n\t\t\tthis.isChecked = this.arrayContains( existingValue, bindingValue );\n\t\t} else {\n\t\t\tthis.isChecked = this.element.compare( existingValue, bindingValue );\n\t\t}\n\t\tnode.name = '{{' + this.model.getKeypath() + '}}';\n\t\tnode.checked = this.isChecked;\n\n\t\tnode.addEventListener( 'change', handleDomEvent, false );\n\n\t\t// in case of IE emergency, bind to click event as well\n\t\tif ( node.attachEvent ) {\n\t\t\tnode.addEventListener( 'click', handleDomEvent, false );\n\t\t}\n\t};\n\n\tCheckboxNameBinding.prototype.setFromNode = function setFromNode ( node ) {\n\t\tthis.group.bindings.forEach( function (binding) { return binding.wasUndefined = true; } );\n\n\t\tif ( node.checked ) {\n\t\t\tvar valueSoFar = this.group.getValue();\n\t\t\tvalueSoFar.push( this.element.getAttribute( 'value' ) );\n\n\t\t\tthis.group.model.set( valueSoFar );\n\t\t}\n\t};\n\n\tCheckboxNameBinding.prototype.unbind = function unbind () {\n\t\tthis.group.remove( this );\n\t};\n\n\tCheckboxNameBinding.prototype.unrender = function unrender () {\n\t\tvar node = this.element.node;\n\n\t\tnode.removeEventListener( 'change', handleDomEvent, false );\n\t\tnode.removeEventListener( 'click', handleDomEvent, false );\n\t};\n\n\tCheckboxNameBinding.prototype.arrayContains = function arrayContains ( selectValue, optionValue ) {\n\t\tvar this$1 = this;\n\n\t\tvar i = selectValue.length;\n\t\twhile ( i-- ) {\n\t\t\tif ( this$1.element.compare( optionValue, selectValue[i] ) ) { return true; }\n\t\t}\n\t\treturn false;\n\t};\n\n\tCheckboxNameBinding.prototype.removeFromArray = function removeFromArray ( array, item ) {\n\t\tvar this$1 = this;\n\n\t\tif (!array) { return; }\n\t\tvar i = array.length;\n\t\twhile( i-- ) {\n\t\t\tif ( this$1.element.compare( item, array[i] ) ) {\n\t\t\t\tarray.splice( i, 1 );\n\t\t\t}\n\t\t}\n\t};\n\n\treturn CheckboxNameBinding;\n}(Binding));\n\nvar ContentEditableBinding = (function (Binding$$1) {\n\tfunction ContentEditableBinding () {\n\t\tBinding$$1.apply(this, arguments);\n\t}\n\n\tif ( Binding$$1 ) ContentEditableBinding.__proto__ = Binding$$1;\n\tContentEditableBinding.prototype = Object.create( Binding$$1 && Binding$$1.prototype );\n\tContentEditableBinding.prototype.constructor = ContentEditableBinding;\n\n\tContentEditableBinding.prototype.getInitialValue = function getInitialValue () {\n\t\treturn this.element.fragment ? this.element.fragment.toString() : '';\n\t};\n\n\tContentEditableBinding.prototype.getValue = function getValue () {\n\t\treturn this.element.node.innerHTML;\n\t};\n\n\tContentEditableBinding.prototype.render = function render () {\n\t\tBinding$$1.prototype.render.call(this);\n\n\t\tvar node = this.node;\n\n\t\tnode.addEventListener( 'change', handleDomEvent, false );\n\t\tnode.addEventListener( 'blur', handleDomEvent, false );\n\n\t\tif ( !this.ractive.lazy ) {\n\t\t\tnode.addEventListener( 'input', handleDomEvent, false );\n\n\t\t\tif ( node.attachEvent ) {\n\t\t\t\tnode.addEventListener( 'keyup', handleDomEvent, false );\n\t\t\t}\n\t\t}\n\t};\n\n\tContentEditableBinding.prototype.setFromNode = function setFromNode ( node ) {\n\t\tthis.model.set( node.innerHTML );\n\t};\n\n\tContentEditableBinding.prototype.unrender = function unrender () {\n\t\tvar node = this.node;\n\n\t\tnode.removeEventListener( 'blur', handleDomEvent, false );\n\t\tnode.removeEventListener( 'change', handleDomEvent, false );\n\t\tnode.removeEventListener( 'input', handleDomEvent, false );\n\t\tnode.removeEventListener( 'keyup', handleDomEvent, false );\n\t};\n\n\treturn ContentEditableBinding;\n}(Binding));\n\nfunction handleBlur () {\n\thandleDomEvent.call( this );\n\n\tvar value = this._ractive.binding.model.get();\n\tthis.value = value == undefined ? '' : value;\n}\n\nfunction handleDelay ( delay ) {\n\tvar timeout;\n\n\treturn function () {\n\t\tvar this$1 = this;\n\n\t\tif ( timeout ) { clearTimeout( timeout ); }\n\n\t\ttimeout = setTimeout( function () {\n\t\t\tvar binding = this$1._ractive.binding;\n\t\t\tif ( binding.rendered ) { handleDomEvent.call( this$1 ); }\n\t\t\ttimeout = null;\n\t\t}, delay );\n\t};\n}\n\nvar GenericBinding = (function (Binding$$1) {\n\tfunction GenericBinding () {\n\t\tBinding$$1.apply(this, arguments);\n\t}\n\n\tif ( Binding$$1 ) GenericBinding.__proto__ = Binding$$1;\n\tGenericBinding.prototype = Object.create( Binding$$1 && Binding$$1.prototype );\n\tGenericBinding.prototype.constructor = GenericBinding;\n\n\tGenericBinding.prototype.getInitialValue = function getInitialValue () {\n\t\treturn '';\n\t};\n\n\tGenericBinding.prototype.getValue = function getValue () {\n\t\treturn this.node.value;\n\t};\n\n\tGenericBinding.prototype.render = function render () {\n\t\tBinding$$1.prototype.render.call(this);\n\n\t\t// any lazy setting for this element overrides the root\n\t\t// if the value is a number, it's a timeout\n\t\tvar lazy = this.ractive.lazy;\n\t\tvar timeout = false;\n\n\t\tif ( 'lazy' in this.element ) {\n\t\t\tlazy = this.element.lazy;\n\t\t}\n\n\t\tif ( isNumeric( lazy ) ) {\n\t\t\ttimeout = +lazy;\n\t\t\tlazy = false;\n\t\t}\n\n\t\tthis.handler = timeout ? handleDelay( timeout ) : handleDomEvent;\n\n\t\tvar node = this.node;\n\n\t\tnode.addEventListener( 'change', handleDomEvent, false );\n\n\t\tif ( !lazy ) {\n\t\t\tnode.addEventListener( 'input', this.handler, false );\n\n\t\t\tif ( node.attachEvent ) {\n\t\t\t\tnode.addEventListener( 'keyup', this.handler, false );\n\t\t\t}\n\t\t}\n\n\t\tnode.addEventListener( 'blur', handleBlur, false );\n\t};\n\n\tGenericBinding.prototype.unrender = function unrender () {\n\t\tvar node = this.element.node;\n\t\tthis.rendered = false;\n\n\t\tnode.removeEventListener( 'change', handleDomEvent, false );\n\t\tnode.removeEventListener( 'input', this.handler, false );\n\t\tnode.removeEventListener( 'keyup', this.handler, false );\n\t\tnode.removeEventListener( 'blur', handleBlur, false );\n\t};\n\n\treturn GenericBinding;\n}(Binding));\n\nvar FileBinding = (function (GenericBinding$$1) {\n\tfunction FileBinding () {\n\t\tGenericBinding$$1.apply(this, arguments);\n\t}\n\n\tif ( GenericBinding$$1 ) FileBinding.__proto__ = GenericBinding$$1;\n\tFileBinding.prototype = Object.create( GenericBinding$$1 && GenericBinding$$1.prototype );\n\tFileBinding.prototype.constructor = FileBinding;\n\n\tFileBinding.prototype.getInitialValue = function getInitialValue () {\n\t\treturn undefined;\n\t};\n\n\tFileBinding.prototype.getValue = function getValue () {\n\t\treturn this.node.files;\n\t};\n\n\tFileBinding.prototype.render = function render () {\n\t\tthis.element.lazy = false;\n\t\tGenericBinding$$1.prototype.render.call(this);\n\t};\n\n\tFileBinding.prototype.setFromNode = function setFromNode ( node ) {\n\t\tthis.model.set( node.files );\n\t};\n\n\treturn FileBinding;\n}(GenericBinding));\n\nfunction getSelectedOptions ( select ) {\n\treturn select.selectedOptions\n\t\t? toArray( select.selectedOptions )\n\t\t: select.options\n\t\t\t? toArray( select.options ).filter( function (option) { return option.selected; } )\n\t\t\t: [];\n}\n\nvar MultipleSelectBinding = (function (Binding$$1) {\n\tfunction MultipleSelectBinding () {\n\t\tBinding$$1.apply(this, arguments);\n\t}\n\n\tif ( Binding$$1 ) MultipleSelectBinding.__proto__ = Binding$$1;\n\tMultipleSelectBinding.prototype = Object.create( Binding$$1 && Binding$$1.prototype );\n\tMultipleSelectBinding.prototype.constructor = MultipleSelectBinding;\n\n\tMultipleSelectBinding.prototype.getInitialValue = function getInitialValue () {\n\t\treturn this.element.options\n\t\t\t.filter( function (option) { return option.getAttribute( 'selected' ); } )\n\t\t\t.map( function (option) { return option.getAttribute( 'value' ); } );\n\t};\n\n\tMultipleSelectBinding.prototype.getValue = function getValue () {\n\t\tvar options = this.element.node.options;\n\t\tvar len = options.length;\n\n\t\tvar selectedValues = [];\n\n\t\tfor ( var i = 0; i < len; i += 1 ) {\n\t\t\tvar option = options[i];\n\n\t\t\tif ( option.selected ) {\n\t\t\t\tvar optionValue = option._ractive ? option._ractive.value : option.value;\n\t\t\t\tselectedValues.push( optionValue );\n\t\t\t}\n\t\t}\n\n\t\treturn selectedValues;\n\t};\n\n\tMultipleSelectBinding.prototype.handleChange = function handleChange () {\n\t\tvar attribute = this.attribute;\n\t\tvar previousValue = attribute.getValue();\n\n\t\tvar value = this.getValue();\n\n\t\tif ( previousValue === undefined || !arrayContentsMatch( value, previousValue ) ) {\n\t\t\tBinding$$1.prototype.handleChange.call(this);\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tMultipleSelectBinding.prototype.render = function render () {\n\t\tBinding$$1.prototype.render.call(this);\n\n\t\tthis.node.addEventListener( 'change', handleDomEvent, false );\n\n\t\tif ( this.model.get() === undefined ) {\n\t\t\t// get value from DOM, if possible\n\t\t\tthis.handleChange();\n\t\t}\n\t};\n\n\tMultipleSelectBinding.prototype.setFromNode = function setFromNode ( node ) {\n\t\tvar selectedOptions = getSelectedOptions( node );\n\t\tvar i = selectedOptions.length;\n\t\tvar result = new Array( i );\n\n\t\twhile ( i-- ) {\n\t\t\tvar option = selectedOptions[i];\n\t\t\tresult[i] = option._ractive ? option._ractive.value : option.value;\n\t\t}\n\n\t\tthis.model.set( result );\n\t};\n\n\tMultipleSelectBinding.prototype.unrender = function unrender () {\n\t\tthis.node.removeEventListener( 'change', handleDomEvent, false );\n\t};\n\n\treturn MultipleSelectBinding;\n}(Binding));\n\nvar NumericBinding = (function (GenericBinding$$1) {\n\tfunction NumericBinding () {\n\t\tGenericBinding$$1.apply(this, arguments);\n\t}\n\n\tif ( GenericBinding$$1 ) NumericBinding.__proto__ = GenericBinding$$1;\n\tNumericBinding.prototype = Object.create( GenericBinding$$1 && GenericBinding$$1.prototype );\n\tNumericBinding.prototype.constructor = NumericBinding;\n\n\tNumericBinding.prototype.getInitialValue = function getInitialValue () {\n\t\treturn undefined;\n\t};\n\n\tNumericBinding.prototype.getValue = function getValue () {\n\t\tvar value = parseFloat( this.node.value );\n\t\treturn isNaN( value ) ? undefined : value;\n\t};\n\n\tNumericBinding.prototype.setFromNode = function setFromNode ( node ) {\n\t\tvar value = parseFloat( node.value );\n\t\tif ( !isNaN( value ) ) { this.model.set( value ); }\n\t};\n\n\treturn NumericBinding;\n}(GenericBinding));\n\nvar siblings = {};\n\nfunction getSiblings ( hash ) {\n\treturn siblings[ hash ] || ( siblings[ hash ] = [] );\n}\n\nvar RadioBinding = (function (Binding$$1) {\n\tfunction RadioBinding ( element ) {\n\t\tBinding$$1.call( this, element, 'checked' );\n\n\t\tthis.siblings = getSiblings( this.ractive._guid + this.element.getAttribute( 'name' ) );\n\t\tthis.siblings.push( this );\n\t}\n\n\tif ( Binding$$1 ) RadioBinding.__proto__ = Binding$$1;\n\tRadioBinding.prototype = Object.create( Binding$$1 && Binding$$1.prototype );\n\tRadioBinding.prototype.constructor = RadioBinding;\n\n\tRadioBinding.prototype.getValue = function getValue () {\n\t\treturn this.node.checked;\n\t};\n\n\tRadioBinding.prototype.handleChange = function handleChange () {\n\t\trunloop.start( this.root );\n\n\t\tthis.siblings.forEach( function (binding) {\n\t\t\tbinding.model.set( binding.getValue() );\n\t\t});\n\n\t\trunloop.end();\n\t};\n\n\tRadioBinding.prototype.render = function render () {\n\t\tBinding$$1.prototype.render.call(this);\n\n\t\tthis.node.addEventListener( 'change', handleDomEvent, false );\n\n\t\tif ( this.node.attachEvent ) {\n\t\t\tthis.node.addEventListener( 'click', handleDomEvent, false );\n\t\t}\n\t};\n\n\tRadioBinding.prototype.setFromNode = function setFromNode ( node ) {\n\t\tthis.model.set( node.checked );\n\t};\n\n\tRadioBinding.prototype.unbind = function unbind () {\n\t\tremoveFromArray( this.siblings, this );\n\t};\n\n\tRadioBinding.prototype.unrender = function unrender () {\n\t\tthis.node.removeEventListener( 'change', handleDomEvent, false );\n\t\tthis.node.removeEventListener( 'click', handleDomEvent, false );\n\t};\n\n\treturn RadioBinding;\n}(Binding));\n\nfunction getValue$1() {\n\tvar checked = this.bindings.filter( function (b) { return b.node.checked; } );\n\tif ( checked.length > 0 ) {\n\t\treturn checked[0].element.getAttribute( 'value' );\n\t}\n}\n\nvar RadioNameBinding = (function (Binding$$1) {\n\tfunction RadioNameBinding ( element ) {\n\t\tBinding$$1.call( this, element, 'name' );\n\n\t\tthis.group = getBindingGroup( 'radioname', this.model, getValue$1 );\n\t\tthis.group.add( this );\n\n\t\tif ( element.checked ) {\n\t\t\tthis.group.value = this.getValue();\n\t\t}\n\t}\n\n\tif ( Binding$$1 ) RadioNameBinding.__proto__ = Binding$$1;\n\tRadioNameBinding.prototype = Object.create( Binding$$1 && Binding$$1.prototype );\n\tRadioNameBinding.prototype.constructor = RadioNameBinding;\n\n\tRadioNameBinding.prototype.bind = function bind () {\n\t\tvar this$1 = this;\n\n\t\tif ( !this.group.bound ) {\n\t\t\tthis.group.bind();\n\t\t}\n\n\t\t// update name keypath when necessary\n\t\tthis.nameAttributeBinding = {\n\t\t\thandleChange: function () { return this$1.node.name = \"{{\" + (this$1.model.getKeypath()) + \"}}\"; },\n\t\t\trebind: noop\n\t\t};\n\n\t\tthis.model.getKeypathModel().register( this.nameAttributeBinding );\n\t};\n\n\tRadioNameBinding.prototype.getInitialValue = function getInitialValue () {\n\t\tif ( this.element.getAttribute( 'checked' ) ) {\n\t\t\treturn this.element.getAttribute( 'value' );\n\t\t}\n\t};\n\n\tRadioNameBinding.prototype.getValue = function getValue () {\n\t\treturn this.element.getAttribute( 'value' );\n\t};\n\n\tRadioNameBinding.prototype.handleChange = function handleChange () {\n\t\t// If this <input> is the one that's checked, then the value of its\n\t\t// `name` model gets set to its value\n\t\tif ( this.node.checked ) {\n\t\t\tthis.group.value = this.getValue();\n\t\t\tBinding$$1.prototype.handleChange.call(this);\n\t\t}\n\t};\n\n\tRadioNameBinding.prototype.lastVal = function lastVal ( setting, value ) {\n\t\tif ( !this.group ) { return; }\n\t\tif ( setting ) { this.group.lastValue = value; }\n\t\telse { return this.group.lastValue; }\n\t};\n\n\tRadioNameBinding.prototype.render = function render () {\n\t\tBinding$$1.prototype.render.call(this);\n\n\t\tvar node = this.node;\n\n\t\tnode.name = \"{{\" + (this.model.getKeypath()) + \"}}\";\n\t\tnode.checked = this.element.compare ( this.model.get(), this.element.getAttribute( 'value' ) );\n\n\t\tnode.addEventListener( 'change', handleDomEvent, false );\n\n\t\tif ( node.attachEvent ) {\n\t\t\tnode.addEventListener( 'click', handleDomEvent, false );\n\t\t}\n\t};\n\n\tRadioNameBinding.prototype.setFromNode = function setFromNode ( node ) {\n\t\tif ( node.checked ) {\n\t\t\tthis.group.model.set( this.element.getAttribute( 'value' ) );\n\t\t}\n\t};\n\n\tRadioNameBinding.prototype.unbind = function unbind () {\n\t\tthis.group.remove( this );\n\n\t\tthis.model.getKeypathModel().unregister( this.nameAttributeBinding );\n\t};\n\n\tRadioNameBinding.prototype.unrender = function unrender () {\n\t\tvar node = this.node;\n\n\t\tnode.removeEventListener( 'change', handleDomEvent, false );\n\t\tnode.removeEventListener( 'click', handleDomEvent, false );\n\t};\n\n\treturn RadioNameBinding;\n}(Binding));\n\nvar SingleSelectBinding = (function (Binding$$1) {\n\tfunction SingleSelectBinding () {\n\t\tBinding$$1.apply(this, arguments);\n\t}\n\n\tif ( Binding$$1 ) SingleSelectBinding.__proto__ = Binding$$1;\n\tSingleSelectBinding.prototype = Object.create( Binding$$1 && Binding$$1.prototype );\n\tSingleSelectBinding.prototype.constructor = SingleSelectBinding;\n\n\tSingleSelectBinding.prototype.forceUpdate = function forceUpdate () {\n\t\tvar this$1 = this;\n\n\t\tvar value = this.getValue();\n\n\t\tif ( value !== undefined ) {\n\t\t\tthis.attribute.locked = true;\n\t\t\trunloop.scheduleTask( function () { return this$1.attribute.locked = false; } );\n\t\t\tthis.model.set( value );\n\t\t}\n\t};\n\n\tSingleSelectBinding.prototype.getInitialValue = function getInitialValue () {\n\t\tif ( this.element.getAttribute( 'value' ) !== undefined ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar options = this.element.options;\n\t\tvar len = options.length;\n\n\t\tif ( !len ) { return; }\n\n\t\tvar value;\n\t\tvar optionWasSelected;\n\t\tvar i = len;\n\n\t\t// take the final selected option...\n\t\twhile ( i-- ) {\n\t\t\tvar option = options[i];\n\n\t\t\tif ( option.getAttribute( 'selected' ) ) {\n\t\t\t\tif ( !option.getAttribute( 'disabled' ) ) {\n\t\t\t\t\tvalue = option.getAttribute( 'value' );\n\t\t\t\t}\n\n\t\t\t\toptionWasSelected = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// or the first non-disabled option, if none are selected\n\t\tif ( !optionWasSelected ) {\n\t\t\twhile ( ++i < len ) {\n\t\t\t\tif ( !options[i].getAttribute( 'disabled' ) ) {\n\t\t\t\t\tvalue = options[i].getAttribute( 'value' );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// This is an optimisation (aka hack) that allows us to forgo some\n\t\t// other more expensive work\n\t\t// TODO does it still work? seems at odds with new architecture\n\t\tif ( value !== undefined ) {\n\t\t\tthis.element.attributeByName.value.value = value;\n\t\t}\n\n\t\treturn value;\n\t};\n\n\tSingleSelectBinding.prototype.getValue = function getValue () {\n\t\tvar options = this.node.options;\n\t\tvar len = options.length;\n\n\t\tvar i;\n\t\tfor ( i = 0; i < len; i += 1 ) {\n\t\t\tvar option = options[i];\n\n\t\t\tif ( options[i].selected && !options[i].disabled ) {\n\t\t\t\treturn option._ractive ? option._ractive.value : option.value;\n\t\t\t}\n\t\t}\n\t};\n\n\tSingleSelectBinding.prototype.render = function render () {\n\t\tBinding$$1.prototype.render.call(this);\n\t\tthis.node.addEventListener( 'change', handleDomEvent, false );\n\t};\n\n\tSingleSelectBinding.prototype.setFromNode = function setFromNode ( node ) {\n\t\tvar option = getSelectedOptions( node )[0];\n\t\tthis.model.set( option._ractive ? option._ractive.value : option.value );\n\t};\n\n\tSingleSelectBinding.prototype.unrender = function unrender () {\n\t\tthis.node.removeEventListener( 'change', handleDomEvent, false );\n\t};\n\n\treturn SingleSelectBinding;\n}(Binding));\n\nfunction isBindable ( attribute ) {\n\n\t// The fragment must be a single non-string fragment\n\tif ( !attribute || !attribute.template.f || !attribute.template.f.length === 1 || attribute.template.f[0].s ) { return false; }\n\n\t// A binding is an interpolator `{{ }}`, yey.\n\tif ( attribute.template.f[0].t === INTERPOLATOR ) { return true; }\n\n\t// The above is probably the only true case. For the rest, show an appropriate\n\t// warning before returning false.\n\n\t// You can't bind a triple curly. HTML values on an attribute makes no sense.\n\tif ( attribute.template.f[0].t === TRIPLE ) { warnIfDebug( 'It is not possible create a binding using a triple mustache.' ); }\n\n\treturn false;\n}\n\nfunction selectBinding ( element ) {\n\tvar name = element.name;\n\tvar attributes = element.attributeByName;\n\tvar isBindableByValue = isBindable( attributes.value );\n\tvar isBindableByContentEditable = isBindable( attributes.contenteditable );\n\tvar isContentEditable =  element.getAttribute( 'contenteditable' );\n\n\t// contenteditable\n\t// Bind if the contenteditable is true or a binding that may become true.\n\tif ( ( isContentEditable || isBindableByContentEditable ) && isBindableByValue ) { return ContentEditableBinding; }\n\n\t// <input>\n\tif ( name === 'input' ) {\n\t\tvar type = element.getAttribute( 'type' );\n\n\t\tif ( type === 'radio' ) {\n\t\t\tvar isBindableByName = isBindable( attributes.name );\n\t\t\tvar isBindableByChecked = isBindable( attributes.checked );\n\n\t\t\t// For radios we can either bind the name or checked, but not both.\n\t\t\t// Name binding is handed instead.\n\t\t\tif ( isBindableByName && isBindableByChecked ) {\n\t\t\t\twarnIfDebug( 'A radio input can have two-way binding on its name attribute, or its checked attribute - not both', { ractive: element.root });\n\t\t\t\treturn RadioNameBinding;\n\t\t\t}\n\n\t\t\tif ( isBindableByName ) { return RadioNameBinding; }\n\n\t\t\tif ( isBindableByChecked ) { return RadioBinding; }\n\n\t\t\t// Dead end. Unknown binding on radio input.\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( type === 'checkbox' ) {\n\t\t\tvar isBindableByName$1 = isBindable( attributes.name );\n\t\t\tvar isBindableByChecked$1 = isBindable( attributes.checked );\n\n\t\t\t// A checkbox with bindings for both name and checked. Checked treated as\n\t\t\t// the checkbox value, name is treated as a regular binding.\n\t\t\t//\n\t\t\t// See https://github.com/ractivejs/ractive/issues/1749\n\t\t\tif ( isBindableByName$1 && isBindableByChecked$1 ) { return CheckboxBinding; }\n\n\t\t\tif ( isBindableByName$1 ) { return CheckboxNameBinding; }\n\n\t\t\tif ( isBindableByChecked$1 ) { return CheckboxBinding; }\n\n\t\t\t// Dead end. Unknown binding on checkbox input.\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( type === 'file' && isBindableByValue ) { return FileBinding; }\n\n\t\tif ( type === 'number' && isBindableByValue ) { return NumericBinding; }\n\n\t\tif ( type === 'range' && isBindableByValue ) { return NumericBinding; }\n\n\t\t// Some input of unknown type (browser usually falls back to text).\n\t\tif ( isBindableByValue ) { return GenericBinding; }\n\n\t\t// Dead end. Some unknown input and an unbindable.\n\t\treturn null;\n\t}\n\n\t// <select>\n\tif ( name === 'select' && isBindableByValue ){\n\t\treturn element.getAttribute( 'multiple' ) ? MultipleSelectBinding : SingleSelectBinding;\n\t}\n\n\t// <textarea>\n\tif ( name === 'textarea' && isBindableByValue ) { return GenericBinding; }\n\n\t// Dead end. Some unbindable element.\n\treturn null;\n}\n\nvar DOMEvent = function DOMEvent ( name, owner, delegate ) {\n\tif ( name.indexOf( '*' ) !== -1 ) {\n\t\tfatal( (\"Only component proxy-events may contain \\\"*\\\" wildcards, <\" + (owner.name) + \" on-\" + name + \"=\\\"...\\\"/> is not valid\") );\n\t}\n\n\tthis.name = name;\n\tthis.owner = owner;\n\tthis.delegate = delegate;\n\tthis.node = null;\n\tthis.handler = null;\n};\n\nDOMEvent.prototype.listen = function listen ( directive ) {\n\tvar node = this.node = this.owner.node;\n\tvar name = this.name;\n\n\t// this is probably a custom event fired from a decorator or manually\n\tif ( !( (\"on\" + name) in node ) ) { return; }\n\n\tnode.addEventListener( name, this.handler = function( event ) {\n\t\tdirective.fire({\n\t\t\tnode: node,\n\t\t\toriginal: event,\n\t\t\tevent: event,\n\t\t\tname: name\n\t\t});\n\t}, this.delegate );\n};\n\nDOMEvent.prototype.unlisten = function unlisten () {\n\tif ( this.handler ) { this.node.removeEventListener( this.name, this.handler, false ); }\n};\n\nvar CustomEvent = function CustomEvent ( eventPlugin, owner, name ) {\n\tthis.eventPlugin = eventPlugin;\n\tthis.owner = owner;\n\tthis.name = name;\n\tthis.handler = null;\n};\n\nCustomEvent.prototype.listen = function listen ( directive ) {\n\t\tvar this$1 = this;\n\n\tvar node = this.owner.node;\n\n\tthis.handler = this.eventPlugin( node, function ( event ) {\n\t\t\tif ( event === void 0 ) event = {};\n\n\t\tif ( event.original ) { event.event = event.original; }\n\t\telse { event.original = event.event; }\n\n\t\tevent.name = this$1.name;\n\t\tevent.node = event.node || node;\n\t\tdirective.fire( event );\n\t});\n};\n\nCustomEvent.prototype.unlisten = function unlisten () {\n\tthis.handler.teardown();\n};\n\nvar RactiveEvent = function RactiveEvent ( component, name ) {\n\tthis.component = component;\n\tthis.name = name;\n\tthis.handler = null;\n};\n\nRactiveEvent.prototype.listen = function listen ( directive ) {\n\tvar ractive = this.component.instance;\n\n\tthis.handler = ractive.on( this.name, function () {\n\t\t\tvar args = [], len = arguments.length;\n\t\t\twhile ( len-- ) args[ len ] = arguments[ len ];\n\n\t\t// watch for reproxy\n\t\tif ( args[0] instanceof Context ) {\n\t\t\tvar ctx = args.shift();\n\t\t\tctx.component = ractive;\n\t\t\tdirective.fire( ctx, args );\n\t\t} else {\n\t\t\tdirective.fire( {}, args );\n\t\t}\n\n\t\t// cancel bubbling\n\t\treturn false;\n\t});\n};\n\nRactiveEvent.prototype.unlisten = function unlisten () {\n\tthis.handler.cancel();\n};\n\nvar specialPattern = /^(event|arguments|@node|@event|@context)(\\..+)?$/;\nvar dollarArgsPattern = /^\\$(\\d+)(\\..+)?$/;\n\nvar DelegateProxy = {\n\tfire: function fire ( event, args ) {\n\t\tif ( args === void 0 ) args = [];\n\n\t\tif ( event && event.event ) {\n\t\t\tvar ev = event.event;\n\n\t\t\t// TODO if IE<9 needs to be supported here, could probably walk to the element with a ractive proxy with a delegates property\n\t\t\tvar end = ev.currentTarget;\n\t\t\tvar node = ev.target;\n\t\t\tvar name = event.name;\n\t\t\tvar bubble = true;\n\n\t\t\t// starting with the origin node, walk up the DOM looking for ractive nodes with a matching event listener\n\t\t\twhile ( bubble && node && node !== end ) {\n\t\t\t\tvar el = node._ractive && node._ractive.proxy;\n\n\t\t\t\tif ( el ) {\n\t\t\t\t\t// set up the context for the handler\n\t\t\t\t\tevent.node = el.node;\n\t\t\t\t\tevent.name = name;\n\n\t\t\t\t\tel.events.forEach( function (ev) {\n\t\t\t\t\t\tif ( ev.delegate && ~ev.template.n.indexOf( name ) ) {\n\t\t\t\t\t\t\tbubble = ev.fire( event, args ) !== false && bubble;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tnode = node.parentNode;\n\t\t\t}\n\n\t\t\treturn bubble;\n\t\t}\n\t}\n};\n\nvar EventDirective = function EventDirective ( options ) {\n\tvar this$1 = this;\n\n\tthis.owner = options.owner || options.parentFragment.owner || findElement( options.parentFragment );\n\tthis.element = this.owner.attributeByName ? this.owner : findElement( options.parentFragment, true );\n\tthis.template = options.template;\n\tthis.parentFragment = options.parentFragment;\n\tthis.ractive = options.parentFragment.ractive;\n\tvar delegate = this.delegate = this.ractive.delegate && options.parentFragment.delegate;\n\tthis.events = [];\n\n\tif ( this.element.type === COMPONENT || this.element.type === ANCHOR ) {\n\t\tthis.template.n.forEach( function (n) {\n\t\t\tthis$1.events.push( new RactiveEvent( this$1.element, n ) );\n\t\t});\n\t} else {\n\t\t// make sure the delegate element has a storag object\n\t\tif ( delegate && !delegate.delegates ) { delegate.delegates = {}; }\n\n\t\tthis.template.n.forEach( function (n) {\n\t\t\tvar fn = findInViewHierarchy( 'events', this$1.ractive, n );\n\t\t\tif ( fn ) {\n\t\t\t\tthis$1.events.push( new CustomEvent( fn, this$1.element, n ) );\n\t\t\t} else {\n\t\t\t\tif ( delegate ) {\n\t\t\t\t\tif ( !delegate.delegates[n] ) {\n\t\t\t\t\t\tvar ev = new DOMEvent( n, delegate, true );\n\t\t\t\t\t\tdelegate.delegates[n] = ev;\n\t\t\t\t\t\t// if the element is already rendered, render the event too\n\t\t\t\t\t\tif ( delegate.rendered ) { ev.listen( DelegateProxy ); }\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis$1.events.push( new DOMEvent( n, this$1.element ) );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t// method calls\n\tthis.models = null;\n};\n\nEventDirective.prototype.bind = function bind () {\n\taddToArray( this.element.events, this );\n\n\tsetupArgsFn( this, this.template );\n\tif ( !this.fn ) { this.action = this.template.f; }\n};\n\nEventDirective.prototype.destroyed = function destroyed () {\n\tthis.events.forEach( function (e) { return e.unlisten(); } );\n};\n\nEventDirective.prototype.fire = function fire ( event, args ) {\n\t\tvar this$1 = this;\n\t\tif ( args === void 0 ) args = [];\n\n\tvar context = this.element.getContext( event );\n\n\tif ( this.fn ) {\n\t\tvar values = [];\n\n\t\tvar models = resolveArgs( this, this.template, this.parentFragment, {\n\t\t\tspecialRef: function specialRef ( ref ) {\n\t\t\t\tvar specialMatch = specialPattern.exec( ref );\n\t\t\t\tif ( specialMatch ) {\n\t\t\t\t\t// on-click=\"foo(event.node)\"\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspecial: specialMatch[1],\n\t\t\t\t\t\tkeys: specialMatch[2] ? splitKeypath( specialMatch[2].substr(1) ) : []\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tvar dollarMatch = dollarArgsPattern.exec( ref );\n\t\t\t\tif ( dollarMatch ) {\n\t\t\t\t\t// on-click=\"foo($1)\"\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspecial: 'arguments',\n\t\t\t\t\t\tkeys: [ dollarMatch[1] - 1 ].concat( dollarMatch[2] ? splitKeypath( dollarMatch[2].substr( 1 ) ) : [] )\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif ( models ) {\n\t\t\tmodels.forEach( function (model) {\n\t\t\t\tif ( !model ) { return values.push( undefined ); }\n\n\t\t\t\tif ( model.special ) {\n\t\t\t\t\tvar which = model.special;\n\t\t\t\t\tvar obj;\n\n\t\t\t\t\tif ( which === '@node' ) {\n\t\t\t\t\t\tobj = this$1.element.node;\n\t\t\t\t\t} else if ( which === '@event' ) {\n\t\t\t\t\t\tobj = event && event.event;\n\t\t\t\t\t} else if ( which === 'event' ) {\n\t\t\t\t\t\twarnOnceIfDebug( \"The event reference available to event directives is deprecated and should be replaced with @context and @event\" );\n\t\t\t\t\t\tobj = context;\n\t\t\t\t\t} else if ( which === '@context' ) {\n\t\t\t\t\t\tobj = context;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tobj = args;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar keys = model.keys.slice();\n\n\t\t\t\t\twhile ( obj && keys.length ) { obj = obj[ keys.shift() ]; }\n\t\t\t\t\treturn values.push( obj );\n\t\t\t\t}\n\n\t\t\t\tif ( model.wrapper ) {\n\t\t\t\t\treturn values.push( model.wrapperValue );\n\t\t\t\t}\n\n\t\t\t\tvalues.push( model.get() );\n\t\t\t});\n\t\t}\n\n\t\t// make event available as `this.event`\n\t\tvar ractive = this.ractive;\n\t\tvar oldEvent = ractive.event;\n\n\t\tractive.event = context;\n\t\tvar returned = this.fn.apply( ractive, values );\n\t\tvar result = returned.pop();\n\n\t\t// Auto prevent and stop if return is explicitly false\n\t\tif ( result === false ) {\n\t\t\tvar original = event ? event.original : undefined;\n\t\t\tif ( original ) {\n\t\t\t\toriginal.preventDefault && original.preventDefault();\n\t\t\t\toriginal.stopPropagation && original.stopPropagation();\n\t\t\t} else {\n\t\t\t\twarnOnceIfDebug( (\"handler '\" + (this.template.n.join( ' ' )) + \"' returned false, but there is no event available to cancel\") );\n\t\t\t}\n\t\t}\n\n\t\t// watch for proxy events\n\t\telse if ( !returned.length && Array.isArray( result ) && typeof result[0] === 'string' ) {\n\t\t\tresult = fireEvent( this.ractive, result.shift(), context, result );\n\t\t}\n\n\t\tractive.event = oldEvent;\n\n\t\treturn result;\n\t}\n\n\telse {\n\t\treturn fireEvent( this.ractive, this.action, context, args);\n\t}\n};\n\nEventDirective.prototype.handleChange = function handleChange () {};\n\nEventDirective.prototype.render = function render () {\n\t\tvar this$1 = this;\n\n\t// render events after everything else, so they fire after bindings\n\trunloop.scheduleTask( function () { return this$1.events.forEach( function (e) { return e.listen( this$1 ); }, true ); } );\n};\n\nEventDirective.prototype.toString = function toString () { return ''; };\n\nEventDirective.prototype.unbind = function unbind () {\n\tremoveFromArray( this.element.events, this );\n};\n\nEventDirective.prototype.unrender = function unrender () {\n\tthis.events.forEach( function (e) { return e.unlisten(); } );\n};\n\nEventDirective.prototype.update = noop;\n\nvar endsWithSemi = /;\\s*$/;\n\nvar Element = (function (ContainerItem$$1) {\n\tfunction Element ( options ) {\n\t\tvar this$1 = this;\n\n\t\tContainerItem$$1.call( this, options );\n\n\t\tthis.name = options.template.e.toLowerCase();\n\t\tthis.isVoid = voidElementNames.test( this.name );\n\n\t\t// find parent element\n\t\tthis.parent = findElement( this.parentFragment, false );\n\n\t\tif ( this.parent && this.parent.name === 'option' ) {\n\t\t\tthrow new Error( (\"An <option> element cannot contain other elements (encountered <\" + (this.name) + \">)\") );\n\t\t}\n\n\t\tthis.decorators = [];\n\t\tthis.events = [];\n\n\t\t// create attributes\n\t\tthis.attributeByName = {};\n\n\t\tthis.attributes = [];\n\t\tvar leftovers = [];\n\t\t( this.template.m || [] ).forEach( function (template) {\n\t\t\tswitch ( template.t ) {\n\t\t\t\tcase ATTRIBUTE:\n\t\t\t\tcase BINDING_FLAG:\n\t\t\t\tcase DECORATOR:\n\t\t\t\tcase EVENT:\n\t\t\t\tcase TRANSITION:\n\t\t\t\t\tthis$1.attributes.push( createItem({\n\t\t\t\t\t\towner: this$1,\n\t\t\t\t\t\tparentFragment: this$1.parentFragment,\n\t\t\t\t\t\ttemplate: template\n\t\t\t\t\t}) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase DELEGATE_FLAG:\n\t\t\t\t  this$1.delegate = false;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tleftovers.push( template );\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\tif ( leftovers.length ) {\n\t\t\tthis.attributes.push( new ConditionalAttribute({\n\t\t\t\towner: this,\n\t\t\t\tparentFragment: this.parentFragment,\n\t\t\t\ttemplate: leftovers\n\t\t\t}) );\n\t\t}\n\n\t\tthis.attributes.sort( sortAttributes );\n\n\t\t// create children\n\t\tif ( options.template.f && !options.deferContent ) {\n\t\t\tthis.fragment = new Fragment({\n\t\t\t\ttemplate: options.template.f,\n\t\t\t\towner: this,\n\t\t\t\tcssIds: null\n\t\t\t});\n\t\t}\n\n\t\tthis.binding = null; // filled in later\n\t}\n\n\tif ( ContainerItem$$1 ) Element.__proto__ = ContainerItem$$1;\n\tElement.prototype = Object.create( ContainerItem$$1 && ContainerItem$$1.prototype );\n\tElement.prototype.constructor = Element;\n\n\tElement.prototype.bind = function bind$1 () {\n\t\tthis.attributes.binding = true;\n\t\tthis.attributes.forEach( bind );\n\t\tthis.attributes.binding = false;\n\n\t\tif ( this.fragment ) { this.fragment.bind(); }\n\n\t\t// create two-way binding if necessary\n\t\tif ( !this.binding ) { this.recreateTwowayBinding(); }\n\t};\n\n\tElement.prototype.createTwowayBinding = function createTwowayBinding () {\n\t\tif ( 'twoway' in this ? this.twoway : this.ractive.twoway ) {\n\t\t\tvar Binding = selectBinding( this );\n\t\t\tif ( Binding ) {\n\t\t\t\tvar binding = new Binding( this );\n\t\t\t\tif ( binding && binding.model ) { return binding; }\n\t\t\t}\n\t\t}\n\t};\n\n\tElement.prototype.destroyed = function destroyed$1 () {\n\t\tvar this$1 = this;\n\n\t\tthis.attributes.forEach( destroyed );\n\t\tfor ( var ev in this$1.delegates ) {\n\t\t\tthis$1.delegates[ev].unlisten();\n\t\t}\n\t\tif ( this.fragment ) { this.fragment.destroyed(); }\n\t};\n\n\tElement.prototype.detach = function detach () {\n\t\t// if this element is no longer rendered, the transitions are complete and the attributes can be torn down\n\t\tif ( !this.rendered ) { this.destroyed(); }\n\n\t\treturn detachNode( this.node );\n\t};\n\n\tElement.prototype.find = function find ( selector, options ) {\n\t\tif ( this.node && matches( this.node, selector ) ) { return this.node; }\n\t\tif ( this.fragment ) {\n\t\t\treturn this.fragment.find( selector, options );\n\t\t}\n\t};\n\n\tElement.prototype.findAll = function findAll ( selector, options ) {\n\t\tvar result = options.result;\n\n\t\tif ( matches( this.node, selector ) ) {\n\t\t\tresult.push( this.node );\n\t\t}\n\n\t\tif ( this.fragment ) {\n\t\t\tthis.fragment.findAll( selector, options );\n\t\t}\n\t};\n\n\tElement.prototype.findNextNode = function findNextNode () {\n\t\treturn null;\n\t};\n\n\tElement.prototype.firstNode = function firstNode () {\n\t\treturn this.node;\n\t};\n\n\tElement.prototype.getAttribute = function getAttribute ( name ) {\n\t\tvar attribute = this.attributeByName[ name ];\n\t\treturn attribute ? attribute.getValue() : undefined;\n\t};\n\n\tElement.prototype.getContext = function getContext () {\n\t\tvar assigns = [], len = arguments.length;\n\t\twhile ( len-- ) assigns[ len ] = arguments[ len ];\n\n\t\tif ( this.fragment ) { return (ref = this.fragment).getContext.apply( ref, assigns ); }\n\n\t\tif ( !this.ctx ) { this.ctx = new Context( this.parentFragment, this ); }\n\t\tassigns.unshift( Object.create( this.ctx ) );\n\t\treturn Object.assign.apply( null, assigns );\n\t\tvar ref;\n\t};\n\n\tElement.prototype.recreateTwowayBinding = function recreateTwowayBinding () {\n\t\tif ( this.binding ) {\n\t\t\tthis.binding.unbind();\n\t\t\tthis.binding.unrender();\n\t\t}\n\n\t\tif ( this.binding = this.createTwowayBinding() ) {\n\t\t\tthis.binding.bind();\n\t\t\tif ( this.rendered ) { this.binding.render(); }\n\t\t}\n\t};\n\n\tElement.prototype.render = function render$1 ( target, occupants ) {\n\t\tvar this$1 = this;\n\n\t\t// TODO determine correct namespace\n\t\tthis.namespace = getNamespace( this );\n\n\t\tvar node;\n\t\tvar existing = false;\n\n\t\tif ( occupants ) {\n\t\t\tvar n;\n\t\t\twhile ( ( n = occupants.shift() ) ) {\n\t\t\t\tif ( n.nodeName.toUpperCase() === this$1.template.e.toUpperCase() && n.namespaceURI === this$1.namespace ) {\n\t\t\t\t\tthis$1.node = node = n;\n\t\t\t\t\texisting = true;\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tdetachNode( n );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( !node ) {\n\t\t\tvar name = this.template.e;\n\t\t\tnode = createElement( this.namespace === html ? name.toLowerCase() : name, this.namespace, this.getAttribute( 'is' ) );\n\t\t\tthis.node = node;\n\t\t}\n\n\t\t// tie the node to this vdom element\n\t\tObject.defineProperty( node, '_ractive', {\n\t\t\tvalue: {\n\t\t\t\tproxy: this\n\t\t\t}\n\t\t});\n\n\t\t// Is this a top-level node of a component? If so, we may need to add\n\t\t// a data-ractive-css attribute, for CSS encapsulation\n\t\tif ( this.parentFragment.cssIds ) {\n\t\t\tnode.setAttribute( 'data-ractive-css', this.parentFragment.cssIds.map( function (x) { return (\"{\" + x + \"}\"); } ).join( ' ' ) );\n\t\t}\n\n\t\tif ( existing && this.foundNode ) { this.foundNode( node ); }\n\n\t\t// register intro before rendering content so children can find the intro\n\t\tvar intro = this.intro;\n\t\tif ( intro && intro.shouldFire( 'intro' ) ) {\n\t\t\tintro.isIntro = true;\n\t\t\tintro.isOutro = false;\n\t\t\trunloop.registerTransition( intro );\n\t\t}\n\n\t\tif ( this.fragment ) {\n\t\t\tvar children = existing ? toArray( node.childNodes ) : undefined;\n\n\t\t\tthis.fragment.render( node, children );\n\n\t\t\t// clean up leftover children\n\t\t\tif ( children ) {\n\t\t\t\tchildren.forEach( detachNode );\n\t\t\t}\n\t\t}\n\n\t\tif ( existing ) {\n\t\t\t// store initial values for two-way binding\n\t\t\tif ( this.binding && this.binding.wasUndefined ) { this.binding.setFromNode( node ); }\n\t\t\t// remove unused attributes\n\t\t\tvar i = node.attributes.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tvar name$1 = node.attributes[i].name;\n\t\t\t\tif ( !( name$1 in this$1.attributeByName ) ){ node.removeAttribute( name$1 ); }\n\t\t\t}\n\t\t}\n\n\t\tthis.attributes.forEach( render );\n\t\tif ( this.delegates ) {\n\t\t\tfor ( var ev in this$1.delegates ) {\n\t\t\t\tthis$1.delegates[ev].listen( DelegateProxy );\n\t\t\t}\n\t\t}\n\n\t\tif ( this.binding ) { this.binding.render(); }\n\n\t\tif ( !existing ) {\n\t\t\ttarget.appendChild( node );\n\t\t}\n\n\t\tthis.rendered = true;\n\t};\n\n\tElement.prototype.toString = function toString$$1 () {\n\t\tvar tagName = this.template.e;\n\n\t\tvar attrs = this.attributes.map( stringifyAttribute ).join( '' );\n\n\t\t// Special case - selected options\n\t\tif ( this.name === 'option' && this.isSelected() ) {\n\t\t\tattrs += ' selected';\n\t\t}\n\n\t\t// Special case - two-way radio name bindings\n\t\tif ( this.name === 'input' && inputIsCheckedRadio( this ) ) {\n\t\t\tattrs += ' checked';\n\t\t}\n\n\t\t// Special case style and class attributes and directives\n\t\tvar style, cls;\n\t\tthis.attributes.forEach( function (attr) {\n\t\t\tif ( attr.name === 'class' ) {\n\t\t\t\tcls = ( cls || '' ) + ( cls ? ' ' : '' ) + safeAttributeString( attr.getString() );\n\t\t\t} else if ( attr.name === 'style' ) {\n\t\t\t\tstyle = ( style || '' ) + ( style ? ' ' : '' ) + safeAttributeString( attr.getString() );\n\t\t\t\tif ( style && !endsWithSemi.test( style ) ) { style += ';'; }\n\t\t\t} else if ( attr.style ) {\n\t\t\t\tstyle = ( style || '' ) + ( style ? ' ' : '' ) +  (attr.style) + \": \" + (safeAttributeString( attr.getString() )) + \";\";\n\t\t\t} else if ( attr.inlineClass && attr.getValue() ) {\n\t\t\t\tcls = ( cls || '' ) + ( cls ? ' ' : '' ) + attr.inlineClass;\n\t\t\t}\n\t\t});\n\t\t// put classes first, then inline style\n\t\tif ( style !== undefined ) { attrs = ' style' + ( style ? (\"=\\\"\" + style + \"\\\"\") : '' ) + attrs; }\n\t\tif ( cls !== undefined ) { attrs = ' class' + (cls ? (\"=\\\"\" + cls + \"\\\"\") : '') + attrs; }\n\n\t\tif ( this.parentFragment.cssIds ) {\n\t\t\tattrs += \" data-ractive-css=\\\"\" + (this.parentFragment.cssIds.map( function (x) { return (\"{\" + x + \"}\"); } ).join( ' ' )) + \"\\\"\";\n\t\t}\n\n\t\tvar str = \"<\" + tagName + attrs + \">\";\n\n\t\tif ( this.isVoid ) { return str; }\n\n\t\t// Special case - textarea\n\t\tif ( this.name === 'textarea' && this.getAttribute( 'value' ) !== undefined ) {\n\t\t\tstr += escapeHtml( this.getAttribute( 'value' ) );\n\t\t}\n\n\t\t// Special case - contenteditable\n\t\telse if ( this.getAttribute( 'contenteditable' ) !== undefined ) {\n\t\t\tstr += ( this.getAttribute( 'value' ) || '' );\n\t\t}\n\n\t\tif ( this.fragment ) {\n\t\t\tstr += this.fragment.toString( !/^(?:script|style)$/i.test( this.template.e ) ); // escape text unless script/style\n\t\t}\n\n\t\tstr += \"</\" + tagName + \">\";\n\t\treturn str;\n\t};\n\n\tElement.prototype.unbind = function unbind$1 () {\n\t\tthis.attributes.unbinding = true;\n\t\tthis.attributes.forEach( unbind );\n\t\tthis.attributes.unbinding = false;\n\n\t\tif ( this.binding ) { this.binding.unbind(); }\n\t\tif ( this.fragment ) { this.fragment.unbind(); }\n\t};\n\n\tElement.prototype.unrender = function unrender$$1 ( shouldDestroy ) {\n\t\tif ( !this.rendered ) { return; }\n\t\tthis.rendered = false;\n\n\t\t// unrendering before intro completed? complete it now\n\t\t// TODO should be an API for aborting transitions\n\t\tvar transition = this.intro;\n\t\tif ( transition && transition.complete ) { transition.complete(); }\n\n\t\t// Detach as soon as we can\n\t\tif ( this.name === 'option' ) {\n\t\t\t// <option> elements detach immediately, so that\n\t\t\t// their parent <select> element syncs correctly, and\n\t\t\t// since option elements can't have transitions anyway\n\t\t\tthis.detach();\n\t\t} else if ( shouldDestroy ) {\n\t\t\trunloop.detachWhenReady( this );\n\t\t}\n\n\t\t// outro transition\n\t\tvar outro = this.outro;\n\t\tif ( outro && outro.shouldFire( 'outro' ) ) {\n\t\t\toutro.isIntro = false;\n\t\t\toutro.isOutro = true;\n\t\t\trunloop.registerTransition( outro );\n\t\t}\n\n\t\tif ( this.fragment ) { this.fragment.unrender(); }\n\n\t\tif ( this.binding ) { this.binding.unrender(); }\n\t};\n\n\tElement.prototype.update = function update$1 () {\n\t\tif ( this.dirty ) {\n\t\t\tthis.dirty = false;\n\n\t\t\tthis.attributes.forEach( update );\n\n\t\t\tif ( this.fragment ) { this.fragment.update(); }\n\t\t}\n\t};\n\n\treturn Element;\n}(ContainerItem));\n\nvar toFront = [ 'min', 'max', 'class', 'type' ];\nfunction sortAttributes ( left, right ) {\n\tleft = left.name;\n\tright = right.name;\n\tvar l = left === 'value' ? 1 : ~toFront.indexOf( left );\n\tvar r = right === 'value' ? 1 : ~toFront.indexOf( right );\n\treturn l < r ? -1 : l > r ? 1 : 0;\n}\n\nfunction inputIsCheckedRadio ( element ) {\n\tvar nameAttr = element.attributeByName.name;\n\treturn element.getAttribute( 'type' ) === 'radio' &&\n\t\t( nameAttr || {} ).interpolator &&\n\t\telement.getAttribute( 'value' ) === nameAttr.interpolator.model.get();\n}\n\nfunction stringifyAttribute ( attribute ) {\n\tvar str = attribute.toString();\n\treturn str ? ' ' + str : '';\n}\n\nfunction getNamespace ( element ) {\n\t// Use specified namespace...\n\tvar xmlns$$1 = element.getAttribute( 'xmlns' );\n\tif ( xmlns$$1 ) { return xmlns$$1; }\n\n\t// ...or SVG namespace, if this is an <svg> element\n\tif ( element.name === 'svg' ) { return svg$1; }\n\n\tvar parent = element.parent;\n\n\tif ( parent ) {\n\t\t// ...or HTML, if the parent is a <foreignObject>\n\t\tif ( parent.name === 'foreignobject' ) { return html; }\n\n\t\t// ...or inherit from the parent node\n\t\treturn parent.node.namespaceURI;\n\t}\n\n\treturn element.ractive.el.namespaceURI;\n}\n\nvar Form = (function (Element$$1) {\n\tfunction Form ( options ) {\n\t\tElement$$1.call( this, options );\n\t\tthis.formBindings = [];\n\t}\n\n\tif ( Element$$1 ) Form.__proto__ = Element$$1;\n\tForm.prototype = Object.create( Element$$1 && Element$$1.prototype );\n\tForm.prototype.constructor = Form;\n\n\tForm.prototype.render = function render ( target, occupants ) {\n\t\tElement$$1.prototype.render.call( this, target, occupants );\n\t\tthis.node.addEventListener( 'reset', handleReset, false );\n\t};\n\n\tForm.prototype.unrender = function unrender ( shouldDestroy ) {\n\t\tthis.node.removeEventListener( 'reset', handleReset, false );\n\t\tElement$$1.prototype.unrender.call( this, shouldDestroy );\n\t};\n\n\treturn Form;\n}(Element));\n\nfunction handleReset () {\n\tvar element = this._ractive.proxy;\n\n\trunloop.start();\n\telement.formBindings.forEach( updateModel );\n\trunloop.end();\n}\n\nfunction updateModel ( binding ) {\n\tbinding.model.set( binding.resetValue );\n}\n\nfunction progressiveText ( item, target, occupants, text ) {\n\tif ( occupants ) {\n\t\tvar n = occupants[0];\n\t\tif ( n && n.nodeType === 3 ) {\n\t\t\tvar idx = n.nodeValue.indexOf( text );\n\t\t\toccupants.shift();\n\n\t\t\tif ( idx === 0 ) {\n\t\t\t\tif ( n.nodeValue.length !== text.length ) {\n\t\t\t\t\toccupants.unshift( n.splitText( text.length ) );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tn.nodeValue = text;\n\t\t\t}\n\t\t} else {\n\t\t\tn = item.node = doc.createTextNode( text );\n\t\t\tif ( occupants[0] ) {\n\t\t\t\ttarget.insertBefore( n, occupants[0] );\n\t\t\t} else {\n\t\t\t\ttarget.appendChild( n );\n\t\t\t}\n\t\t}\n\n\t\titem.node = n;\n\t} else {\n\t\tif ( !item.node ) { item.node = doc.createTextNode( text ); }\n\t\ttarget.appendChild( item.node );\n\t}\n}\n\nvar Mustache = (function (Item$$1) {\n\tfunction Mustache ( options ) {\n\t\tItem$$1.call( this, options );\n\n\t\tthis.parentFragment = options.parentFragment;\n\t\tthis.template = options.template;\n\t\tthis.index = options.index;\n\t\tif ( options.owner ) { this.parent = options.owner; }\n\n\t\tthis.isStatic = !!options.template.s;\n\n\t\tthis.model = null;\n\t\tthis.dirty = false;\n\t}\n\n\tif ( Item$$1 ) Mustache.__proto__ = Item$$1;\n\tMustache.prototype = Object.create( Item$$1 && Item$$1.prototype );\n\tMustache.prototype.constructor = Mustache;\n\n\tMustache.prototype.bind = function bind () {\n\t\t// yield mustaches should resolve in container context\n\t\tvar start = this.containerFragment || this.parentFragment;\n\t\t// try to find a model for this view\n\t\tvar model = resolve( start, this.template );\n\n\t\tif ( model ) {\n\t\t\tvar value = model.get();\n\n\t\t\tif ( this.isStatic ) {\n\t\t\t\tthis.model = { get: function () { return value; } };\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmodel.register( this );\n\t\t\tthis.model = model;\n\t\t}\n\t};\n\n\tMustache.prototype.handleChange = function handleChange () {\n\t\tthis.bubble();\n\t};\n\n\tMustache.prototype.rebind = function rebind ( next, previous, safe ) {\n\t\tnext = rebindMatch( this.template, next, previous, this.parentFragment );\n\t\tif ( next === this.model ) { return false; }\n\n\t\tif ( this.model ) {\n\t\t\tthis.model.unregister( this );\n\t\t}\n\t\tif ( next ) { next.addShuffleRegister( this, 'mark' ); }\n\t\tthis.model = next;\n\t\tif ( !safe ) { this.handleChange(); }\n\t\treturn true;\n\t};\n\n\tMustache.prototype.unbind = function unbind () {\n\t\tif ( !this.isStatic ) {\n\t\t\tthis.model && this.model.unregister( this );\n\t\t\tthis.model = undefined;\n\t\t}\n\t};\n\n\treturn Mustache;\n}(Item));\n\nvar MustacheContainer = (function (ContainerItem$$1) {\n\tfunction MustacheContainer ( options ) {\n\t\tContainerItem$$1.call( this, options );\n\t}\n\n\tif ( ContainerItem$$1 ) MustacheContainer.__proto__ = ContainerItem$$1;\n\tMustacheContainer.prototype = Object.create( ContainerItem$$1 && ContainerItem$$1.prototype );\n\tMustacheContainer.prototype.constructor = MustacheContainer;\n\n\treturn MustacheContainer;\n}(ContainerItem));\nvar proto$2 = MustacheContainer.prototype;\nvar mustache = Mustache.prototype;\nproto$2.bind = mustache.bind;\nproto$2.handleChange = mustache.handleChange;\nproto$2.rebind = mustache.rebind;\nproto$2.unbind = mustache.unbind;\n\nvar Interpolator = (function (Mustache$$1) {\n\tfunction Interpolator () {\n\t\tMustache$$1.apply(this, arguments);\n\t}\n\n\tif ( Mustache$$1 ) Interpolator.__proto__ = Mustache$$1;\n\tInterpolator.prototype = Object.create( Mustache$$1 && Mustache$$1.prototype );\n\tInterpolator.prototype.constructor = Interpolator;\n\n\tInterpolator.prototype.bubble = function bubble () {\n\t\tif ( this.owner ) { this.owner.bubble(); }\n\t\tMustache$$1.prototype.bubble.call(this);\n\t};\n\n\tInterpolator.prototype.detach = function detach () {\n\t\treturn detachNode( this.node );\n\t};\n\n\tInterpolator.prototype.firstNode = function firstNode () {\n\t\treturn this.node;\n\t};\n\n\tInterpolator.prototype.getString = function getString () {\n\t\treturn this.model ? safeToStringValue( this.model.get() ) : '';\n\t};\n\n\tInterpolator.prototype.render = function render ( target, occupants ) {\n\t\tif ( inAttributes() ) { return; }\n\t\tvar value = this.getString();\n\n\t\tthis.rendered = true;\n\n\t\tprogressiveText( this, target, occupants, value );\n\t};\n\n\tInterpolator.prototype.toString = function toString ( escape ) {\n\t\tvar string = this.getString();\n\t\treturn escape ? escapeHtml( string ) : string;\n\t};\n\n\tInterpolator.prototype.unrender = function unrender ( shouldDestroy ) {\n\t\tif ( shouldDestroy ) { this.detach(); }\n\t\tthis.rendered = false;\n\t};\n\n\tInterpolator.prototype.update = function update () {\n\t\tif ( this.dirty ) {\n\t\t\tthis.dirty = false;\n\t\t\tif ( this.rendered ) {\n\t\t\t\tthis.node.data = this.getString();\n\t\t\t}\n\t\t}\n\t};\n\n\tInterpolator.prototype.valueOf = function valueOf () {\n\t\treturn this.model ? this.model.get() : undefined;\n\t};\n\n\treturn Interpolator;\n}(Mustache));\n\nvar Input = (function (Element$$1) {\n\tfunction Input () {\n\t\tElement$$1.apply(this, arguments);\n\t}\n\n\tif ( Element$$1 ) Input.__proto__ = Element$$1;\n\tInput.prototype = Object.create( Element$$1 && Element$$1.prototype );\n\tInput.prototype.constructor = Input;\n\n\tInput.prototype.render = function render ( target, occupants ) {\n\t\tElement$$1.prototype.render.call( this, target, occupants );\n\t\tthis.node.defaultValue = this.node.value;\n\t};\n\tInput.prototype.compare = function compare ( value, attrValue ) {\n\t\tvar comparator = this.getAttribute( 'value-comparator' );\n\t\tif ( comparator ) {\n\t\t\tif ( typeof comparator === 'function' ) {\n\t\t\t\treturn comparator( value, attrValue );\n\t\t\t}\n\t\t\tif (value && attrValue) {\n\t\t\t\treturn value[comparator] == attrValue[comparator];\n\t\t\t}\n\t\t}\n\t\treturn value == attrValue;\n\t};\n\n\treturn Input;\n}(Element));\n\n// simple JSON parser, without the restrictions of JSON parse\n// (i.e. having to double-quote keys).\n//\n// If passed a hash of values as the second argument, ${placeholders}\n// will be replaced with those values\n\nvar specials$1 = {\n\ttrue: true,\n\tfalse: false,\n\tnull: null,\n\tundefined: undefined\n};\n\nvar specialsPattern = new RegExp( '^(?:' + Object.keys( specials$1 ).join( '|' ) + ')' );\nvar numberPattern$1 = /^(?:[+-]?)(?:(?:(?:0|[1-9]\\d*)?\\.\\d+)|(?:(?:0|[1-9]\\d*)\\.)|(?:0|[1-9]\\d*))(?:[eE][+-]?\\d+)?/;\nvar placeholderPattern = /\\$\\{([^\\}]+)\\}/g;\nvar placeholderAtStartPattern = /^\\$\\{([^\\}]+)\\}/;\nvar onlyWhitespace = /^\\s*$/;\n\nvar JsonParser = Parser.extend({\n\tinit: function init ( str, options ) {\n\t\tthis.values = options.values;\n\t\tthis.allowWhitespace();\n\t},\n\n\tpostProcess: function postProcess ( result ) {\n\t\tif ( result.length !== 1 || !onlyWhitespace.test( this.leftover ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn { value: result[0].v };\n\t},\n\n\tconverters: [\n\t\tfunction getPlaceholder ( parser ) {\n\t\t\tif ( !parser.values ) { return null; }\n\n\t\t\tvar placeholder = parser.matchPattern( placeholderAtStartPattern );\n\n\t\t\tif ( placeholder && ( parser.values.hasOwnProperty( placeholder ) ) ) {\n\t\t\t\treturn { v: parser.values[ placeholder ] };\n\t\t\t}\n\t\t},\n\n\t\tfunction getSpecial ( parser ) {\n\t\t\tvar special = parser.matchPattern( specialsPattern );\n\t\t\tif ( special ) { return { v: specials$1[ special ] }; }\n\t\t},\n\n\t\tfunction getNumber ( parser ) {\n\t\t\tvar number = parser.matchPattern( numberPattern$1 );\n\t\t\tif ( number ) { return { v: +number }; }\n\t\t},\n\n\t\tfunction getString ( parser ) {\n\t\t\tvar stringLiteral = readStringLiteral( parser );\n\t\t\tvar values = parser.values;\n\n\t\t\tif ( stringLiteral && values ) {\n\t\t\t\treturn {\n\t\t\t\t\tv: stringLiteral.v.replace( placeholderPattern, function ( match, $1 ) { return ( $1 in values ? values[ $1 ] : $1 ); } )\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn stringLiteral;\n\t\t},\n\n\t\tfunction getObject ( parser ) {\n\t\t\tif ( !parser.matchString( '{' ) ) { return null; }\n\n\t\t\tvar result = {};\n\n\t\t\tparser.allowWhitespace();\n\n\t\t\tif ( parser.matchString( '}' ) ) {\n\t\t\t\treturn { v: result };\n\t\t\t}\n\n\t\t\tvar pair;\n\t\t\twhile ( pair = getKeyValuePair( parser ) ) {\n\t\t\t\tresult[ pair.key ] = pair.value;\n\n\t\t\t\tparser.allowWhitespace();\n\n\t\t\t\tif ( parser.matchString( '}' ) ) {\n\t\t\t\t\treturn { v: result };\n\t\t\t\t}\n\n\t\t\t\tif ( !parser.matchString( ',' ) ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tfunction getArray ( parser ) {\n\t\t\tif ( !parser.matchString( '[' ) ) { return null; }\n\n\t\t\tvar result = [];\n\n\t\t\tparser.allowWhitespace();\n\n\t\t\tif ( parser.matchString( ']' ) ) {\n\t\t\t\treturn { v: result };\n\t\t\t}\n\n\t\t\tvar valueToken;\n\t\t\twhile ( valueToken = parser.read() ) {\n\t\t\t\tresult.push( valueToken.v );\n\n\t\t\t\tparser.allowWhitespace();\n\n\t\t\t\tif ( parser.matchString( ']' ) ) {\n\t\t\t\t\treturn { v: result };\n\t\t\t\t}\n\n\t\t\t\tif ( !parser.matchString( ',' ) ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tparser.allowWhitespace();\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t]\n});\n\nfunction getKeyValuePair ( parser ) {\n\tparser.allowWhitespace();\n\n\tvar key = readKey( parser );\n\n\tif ( !key ) { return null; }\n\n\tvar pair = { key: key };\n\n\tparser.allowWhitespace();\n\tif ( !parser.matchString( ':' ) ) {\n\t\treturn null;\n\t}\n\tparser.allowWhitespace();\n\n\tvar valueToken = parser.read();\n\n\tif ( !valueToken ) { return null; }\n\n\tpair.value = valueToken.v;\n\treturn pair;\n}\n\nvar parseJSON = function ( str, values ) {\n\tvar parser = new JsonParser( str, { values: values });\n\treturn parser.result;\n};\n\nvar Mapping = (function (Item$$1) {\n\tfunction Mapping ( options ) {\n\t\tItem$$1.call( this, options );\n\n\t\tthis.name = options.template.n;\n\n\t\tthis.owner = options.owner || options.parentFragment.owner || options.element || findElement( options.parentFragment );\n\t\tthis.element = options.element || (this.owner.attributeByName ? this.owner : findElement( options.parentFragment ) );\n\t\tthis.parentFragment = this.element.parentFragment; // shared\n\t\tthis.ractive = this.parentFragment.ractive;\n\n\t\tthis.fragment = null;\n\n\t\tthis.element.attributeByName[ this.name ] = this;\n\n\t\tthis.value = options.template.f;\n\t}\n\n\tif ( Item$$1 ) Mapping.__proto__ = Item$$1;\n\tMapping.prototype = Object.create( Item$$1 && Item$$1.prototype );\n\tMapping.prototype.constructor = Mapping;\n\n\tMapping.prototype.bind = function bind () {\n\t\tif ( this.fragment ) {\n\t\t\tthis.fragment.bind();\n\t\t}\n\n\t\tvar template = this.template.f;\n\t\tvar viewmodel = this.element.instance.viewmodel;\n\n\t\tif ( template === 0 ) {\n\t\t\t// empty attributes are `true`\n\t\t\tviewmodel.joinKey( this.name ).set( true );\n\t\t}\n\n\t\telse if ( typeof template === 'string' ) {\n\t\t\tvar parsed = parseJSON( template );\n\t\t\tviewmodel.joinKey( this.name ).set( parsed ? parsed.value : template );\n\t\t}\n\n\t\telse if ( Array.isArray( template ) ) {\n\t\t\tcreateMapping( this, true );\n\t\t}\n\t};\n\n\tMapping.prototype.render = function render () {};\n\n\tMapping.prototype.unbind = function unbind () {\n\t\tif ( this.fragment ) { this.fragment.unbind(); }\n\t\tif ( this.model ) { this.model.unregister( this ); }\n\t\tif ( this.boundFragment ) { this.boundFragment.unbind(); }\n\n\t\tif ( this.element.bound ) {\n\t\t\tif ( this.link.target === this.model ) { this.link.owner.unlink(); }\n\t\t}\n\t};\n\n\tMapping.prototype.unrender = function unrender () {};\n\n\tMapping.prototype.update = function update () {\n\t\tif ( this.dirty ) {\n\t\t\tthis.dirty = false;\n\t\t\tif ( this.fragment ) { this.fragment.update(); }\n\t\t\tif ( this.boundFragment ) { this.boundFragment.update(); }\n\t\t\tif ( this.rendered ) { this.updateDelegate(); }\n\t\t}\n\t};\n\n\treturn Mapping;\n}(Item));\n\nfunction createMapping ( item ) {\n\tvar template = item.template.f;\n\tvar viewmodel = item.element.instance.viewmodel;\n\tvar childData = viewmodel.value;\n\n\tif ( template.length === 1 && template[0].t === INTERPOLATOR ) {\n\t\tvar model = resolve( item.parentFragment, template[0] );\n\t\tvar val = model.get( false );\n\n\t\t// if the interpolator is not static\n\t\tif ( !template[0].s ) {\n\t\t\titem.model = model;\n\t\t\titem.link = viewmodel.createLink( item.name, model, template[0].r );\n\n\t\t\t// initialize parent side of the mapping from child data\n\t\t\tif ( val === undefined && !model.isReadonly && item.name in childData ) {\n\t\t\t\tmodel.set( childData[ item.name ] );\n\t\t\t}\n\t\t}\n\n\t\t// copy non-object, non-computed vals through\n\t\telse if ( typeof val !== 'object' || template[0].x ) {\n\t\t\tviewmodel.joinKey( item.name ).set( val );\n\t\t}\n\n\t\t// warn about trying to copy an object\n\t\telse {\n\t\t\twarnIfDebug( (\"Cannot copy non-computed object value from static mapping '\" + (item.name) + \"'\") );\n\t\t}\n\t}\n\n\telse {\n\t\titem.boundFragment = new Fragment({\n\t\t\towner: item,\n\t\t\ttemplate: template\n\t\t}).bind();\n\n\t\titem.model = viewmodel.joinKey( item.name );\n\t\titem.model.set( item.boundFragment.valueOf() );\n\n\t\t// item is a *bit* of a hack\n\t\titem.boundFragment.bubble = function () {\n\t\t\tFragment.prototype.bubble.call( item.boundFragment );\n\t\t\t// defer this to avoid mucking around model deps if there happens to be an expression involved\n\t\t\trunloop.scheduleTask(function () {\n\t\t\t\titem.boundFragment.update();\n\t\t\t\titem.model.set( item.boundFragment.valueOf() );\n\t\t\t});\n\t\t};\n\t}\n}\n\nvar Option = (function (Element$$1) {\n\tfunction Option ( options ) {\n\t\tvar template = options.template;\n\t\tif ( !template.a ) { template.a = {}; }\n\n\t\t// If the value attribute is missing, use the element's content,\n\t\t// as long as it isn't disabled\n\t\tif ( template.a.value === undefined && !( 'disabled' in template.a ) ) {\n\t\t\ttemplate.a.value = template.f || '';\n\t\t}\n\n\t\tElement$$1.call( this, options );\n\n\t\tthis.select = findElement( this.parent || this.parentFragment, false, 'select' );\n\t}\n\n\tif ( Element$$1 ) Option.__proto__ = Element$$1;\n\tOption.prototype = Object.create( Element$$1 && Element$$1.prototype );\n\tOption.prototype.constructor = Option;\n\n\tOption.prototype.bind = function bind () {\n\t\tif ( !this.select ) {\n\t\t\tElement$$1.prototype.bind.call(this);\n\t\t\treturn;\n\t\t}\n\n\t\t// If the select has a value, it overrides the `selected` attribute on\n\t\t// this option - so we delete the attribute\n\t\tvar selectedAttribute = this.attributeByName.selected;\n\t\tif ( selectedAttribute && this.select.getAttribute( 'value' ) !== undefined ) {\n\t\t\tvar index = this.attributes.indexOf( selectedAttribute );\n\t\t\tthis.attributes.splice( index, 1 );\n\t\t\tdelete this.attributeByName.selected;\n\t\t}\n\n\t\tElement$$1.prototype.bind.call(this);\n\t\tthis.select.options.push( this );\n\t};\n\n\tOption.prototype.bubble = function bubble () {\n\t\t// if we're using content as value, may need to update here\n\t\tvar value = this.getAttribute( 'value' );\n\t\tif ( this.node && this.node.value !== value ) {\n\t\t\tthis.node._ractive.value = value;\n\t\t}\n\t\tElement$$1.prototype.bubble.call(this);\n\t};\n\n\tOption.prototype.getAttribute = function getAttribute ( name ) {\n\t\tvar attribute = this.attributeByName[ name ];\n\t\treturn attribute ? attribute.getValue() : name === 'value' && this.fragment ? this.fragment.valueOf() : undefined;\n\t};\n\n\tOption.prototype.isSelected = function isSelected () {\n\t\tvar this$1 = this;\n\n\t\tvar optionValue = this.getAttribute( 'value' );\n\n\t\tif ( optionValue === undefined || !this.select ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar selectValue = this.select.getAttribute( 'value' );\n\n\t\tif ( this.select.compare( selectValue, optionValue ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( this.select.getAttribute( 'multiple' ) && Array.isArray( selectValue ) ) {\n\t\t\tvar i = selectValue.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( this$1.select.compare( selectValue[i], optionValue ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tOption.prototype.render = function render ( target, occupants ) {\n\t\tElement$$1.prototype.render.call( this, target, occupants );\n\n\t\tif ( !this.attributeByName.value ) {\n\t\t\tthis.node._ractive.value = this.getAttribute( 'value' );\n\t\t}\n\t};\n\n\tOption.prototype.unbind = function unbind () {\n\t\tElement$$1.prototype.unbind.call(this);\n\n\t\tif ( this.select ) {\n\t\t\tremoveFromArray( this.select.options, this );\n\t\t}\n\t};\n\n\treturn Option;\n}(Element));\n\nfunction getPartialTemplate ( ractive, name, parentFragment ) {\n\t// If the partial in instance or view heirarchy instances, great\n\tvar partial = getPartialFromRegistry( ractive, name, parentFragment || {} );\n\tif ( partial ) { return partial; }\n\n\t// Does it exist on the page as a script tag?\n\tpartial = parser.fromId( name, { noThrow: true } );\n\tif ( partial ) {\n\t\t// parse and register to this ractive instance\n\t\tvar parsed = parser.parseFor( partial, ractive );\n\n\t\t// register extra partials on the ractive instance if they don't already exist\n\t\tif ( parsed.p ) { fillGaps( ractive.partials, parsed.p ); }\n\n\t\t// register (and return main partial if there are others in the template)\n\t\treturn ractive.partials[ name ] = parsed.t;\n\t}\n}\n\nfunction getPartialFromRegistry ( ractive, name, parentFragment ) {\n\t// if there was an instance up-hierarchy, cool\n\tvar partial = findParentPartial( name, parentFragment.owner );\n\tif ( partial ) { return partial; }\n\n\t// find first instance in the ractive or view hierarchy that has this partial\n\tvar instance = findInstance( 'partials', ractive, name );\n\n\tif ( !instance ) { return; }\n\n\tpartial = instance.partials[ name ];\n\n\t// partial is a function?\n\tvar fn;\n\tif ( typeof partial === 'function' ) {\n\t\tfn = partial.bind( instance );\n\t\tfn.isOwner = instance.partials.hasOwnProperty(name);\n\t\tpartial = fn.call( ractive, parser );\n\t}\n\n\tif ( !partial && partial !== '' ) {\n\t\twarnIfDebug( noRegistryFunctionReturn, name, 'partial', 'partial', { ractive: ractive });\n\t\treturn;\n\t}\n\n\t// If this was added manually to the registry,\n\t// but hasn't been parsed, parse it now\n\tif ( !parser.isParsed( partial ) ) {\n\t\t// use the parseOptions of the ractive instance on which it was found\n\t\tvar parsed = parser.parseFor( partial, instance );\n\n\t\t// Partials cannot contain nested partials!\n\t\t// TODO add a test for this\n\t\tif ( parsed.p ) {\n\t\t\twarnIfDebug( 'Partials ({{>%s}}) cannot contain nested inline partials', name, { ractive: ractive });\n\t\t}\n\n\t\t// if fn, use instance to store result, otherwise needs to go\n\t\t// in the correct point in prototype chain on instance or constructor\n\t\tvar target = fn ? instance : findOwner( instance, name );\n\n\t\t// may be a template with partials, which need to be registered and main template extracted\n\t\ttarget.partials[ name ] = partial = parsed.t;\n\t}\n\n\t// store for reset\n\tif ( fn ) { partial._fn = fn; }\n\n\treturn partial.v ? partial.t : partial;\n}\n\nfunction findOwner ( ractive, key ) {\n\treturn ractive.partials.hasOwnProperty( key )\n\t\t? ractive\n\t\t: findConstructor( ractive.constructor, key);\n}\n\nfunction findConstructor ( constructor, key ) {\n\tif ( !constructor ) { return; }\n\treturn constructor.partials.hasOwnProperty( key )\n\t\t? constructor\n\t\t: findConstructor( constructor._Parent, key );\n}\n\nfunction findParentPartial( name, parent ) {\n\tif ( parent ) {\n\t\tif ( parent.template && parent.template.p && parent.template.p[name] ) {\n\t\t\treturn parent.template.p[name];\n\t\t} else if ( parent.parentFragment && parent.parentFragment.owner ) {\n\t\t\treturn findParentPartial( name, parent.parentFragment.owner );\n\t\t}\n\t}\n}\n\nvar Partial = (function (MustacheContainer$$1) {\n\tfunction Partial ( options ) {\n\t\tMustacheContainer$$1.call( this, options );\n\n\t\tthis.yielder = options.template.t === YIELDER;\n\n\t\tif ( this.yielder ) {\n\t\t\tthis.container = options.parentFragment.ractive;\n\t\t\tthis.component = this.container.component;\n\n\t\t\tthis.containerFragment = options.parentFragment;\n\t\t\tthis.parentFragment = this.component.parentFragment;\n\n\t\t\t// {{yield}} is equivalent to {{yield content}}\n\t\t\tif ( !options.template.r && !options.template.rx && !options.template.x ) { options.template.r = 'content'; }\n\t\t}\n\t}\n\n\tif ( MustacheContainer$$1 ) Partial.__proto__ = MustacheContainer$$1;\n\tPartial.prototype = Object.create( MustacheContainer$$1 && MustacheContainer$$1.prototype );\n\tPartial.prototype.constructor = Partial;\n\n\tPartial.prototype.bind = function bind () {\n\t\tvar this$1 = this;\n\n\t\t// keep track of the reference name for future resets\n\t\tthis.refName = this.template.r;\n\n\t\t// name matches take priority over expressions\n\t\tvar template = this.refName ? getPartialTemplate( this.ractive, this.refName, this.parentFragment ) || null : null;\n\t\tvar templateObj;\n\n\t\tif ( template ) {\n\t\t\tthis.named = true;\n\t\t\tthis.setTemplate( this.template.r, template );\n\t\t}\n\n\t\tif ( !template ) {\n\t\t\tMustacheContainer$$1.prototype.bind.call(this);\n\t\t\tif ( ( templateObj = this.model.get() ) && typeof templateObj === 'object' && ( typeof templateObj.template === 'string' || Array.isArray( templateObj.t ) ) ) {\n\t\t\t\tif ( templateObj.template ) {\n\t\t\t\t\tthis.source = templateObj.template;\n\t\t\t\t\ttemplateObj = parsePartial( this.template.r, templateObj.template, this.ractive );\n\t\t\t\t} else {\n\t\t\t\t\tthis.source = templateObj.t;\n\t\t\t\t}\n\t\t\t\tthis.setTemplate( this.template.r, templateObj.t );\n\t\t\t} else if ( typeof this.model.get() !== 'string' && this.refName ) {\n\t\t\t\tthis.setTemplate( this.refName, template );\n\t\t\t} else {\n\t\t\t\tthis.setTemplate( this.model.get() );\n\t\t\t}\n\t\t}\n\n\t\tvar options = {\n\t\t\towner: this,\n\t\t\ttemplate: this.partialTemplate\n\t\t};\n\n\t\tif ( this.template.c ) {\n\t\t\toptions.template = [{ t: SECTION, n: SECTION_WITH, f: options.template }];\n\t\t\tfor ( var k in this$1.template.c ) {\n\t\t\t\toptions.template[0][k] = this$1.template.c[k];\n\t\t\t}\n\t\t}\n\n\t\tif ( this.yielder ) {\n\t\t\toptions.ractive = this.container.parent;\n\t\t}\n\n\t\tthis.fragment = new Fragment(options);\n\t\tif ( this.template.z ) {\n\t\t\tthis.fragment.aliases = resolveAliases( this.template.z, this.yielder ? this.containerFragment : this.parentFragment );\n\t\t}\n\t\tthis.fragment.bind();\n\t};\n\n\tPartial.prototype.bubble = function bubble () {\n\t\tif ( this.yielder && !this.dirty ) {\n\t\t\tthis.containerFragment.bubble();\n\t\t\tthis.dirty = true;\n\t\t} else {\n\t\t\tMustacheContainer$$1.prototype.bubble.call(this);\n\t\t}\n\t};\n\n\tPartial.prototype.findNextNode = function findNextNode () {\n\t\treturn this.yielder ? this.containerFragment.findNextNode( this ) : MustacheContainer$$1.prototype.findNextNode.call(this);\n\t};\n\n\tPartial.prototype.forceResetTemplate = function forceResetTemplate () {\n\t\tvar this$1 = this;\n\n\t\tthis.partialTemplate = undefined;\n\n\t\t// on reset, check for the reference name first\n\t\tif ( this.refName ) {\n\t\t\tthis.partialTemplate = getPartialTemplate( this.ractive, this.refName, this.parentFragment );\n\t\t}\n\n\t\t// then look for the resolved name\n\t\tif ( !this.partialTemplate ) {\n\t\t\tthis.partialTemplate = getPartialTemplate( this.ractive, this.name, this.parentFragment );\n\t\t}\n\n\t\tif ( !this.partialTemplate ) {\n\t\t\twarnOnceIfDebug( (\"Could not find template for partial '\" + (this.name) + \"'\") );\n\t\t\tthis.partialTemplate = [];\n\t\t}\n\n\t\tif ( this.inAttribute ) {\n\t\t\tdoInAttributes( function () { return this$1.fragment.resetTemplate( this$1.partialTemplate ); } );\n\t\t} else {\n\t\t\tthis.fragment.resetTemplate( this.partialTemplate );\n\t\t}\n\n\t\tthis.bubble();\n\t};\n\n\tPartial.prototype.render = function render ( target, occupants ) {\n\t\treturn this.fragment.render( target, occupants );\n\t};\n\n\tPartial.prototype.setTemplate = function setTemplate ( name, template ) {\n\t\tthis.name = name;\n\n\t\tif ( !template && template !== null ) { template = getPartialTemplate( this.ractive, name, this.parentFragment ); }\n\n\t\tif ( !template ) {\n\t\t\twarnOnceIfDebug( (\"Could not find template for partial '\" + name + \"'\") );\n\t\t}\n\n\t\tthis.partialTemplate = template || [];\n\t};\n\n\tPartial.prototype.unbind = function unbind () {\n\t\tMustacheContainer$$1.prototype.unbind.call(this);\n\t\tthis.fragment.aliases = {};\n\t\tthis.fragment.unbind();\n\t};\n\n\tPartial.prototype.unrender = function unrender ( shouldDestroy ) {\n\t\tthis.fragment.unrender( shouldDestroy );\n\t};\n\n\tPartial.prototype.update = function update () {\n\t\tvar template;\n\n\t\tif ( this.dirty ) {\n\t\t\tthis.dirty = false;\n\n\t\t\tif ( !this.named ) {\n\t\t\t\tif ( this.model ) {\n\t\t\t\t\ttemplate = this.model.get();\n\t\t\t\t}\n\n\t\t\t\tif ( template && typeof template === 'string' && template !== this.name ) {\n\t\t\t\t\tthis.setTemplate( template );\n\t\t\t\t\tthis.fragment.resetTemplate( this.partialTemplate );\n\t\t\t\t} else if ( template && typeof template === 'object' && ( typeof template.template === 'string' || Array.isArray( template.t ) ) ) {\n\t\t\t\t\tif ( template.t !== this.source && template.template !== this.source ) {\n\t\t\t\t\t\tif ( template.template ) {\n\t\t\t\t\t\t\tthis.source = template.template;\n\t\t\t\t\t\t\ttemplate = parsePartial( this.name, template.template, this.ractive );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.source = template.t;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.setTemplate( this.name, template.t );\n\t\t\t\t\t\tthis.fragment.resetTemplate( this.partialTemplate );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.fragment.update();\n\t\t}\n\t};\n\n\treturn Partial;\n}(MustacheContainer));\n\nfunction parsePartial( name, partial, ractive ) {\n\tvar parsed;\n\n\ttry {\n\t\tparsed = parser.parse( partial, parser.getParseOptions( ractive ) );\n\t} catch (e) {\n\t\twarnIfDebug( (\"Could not parse partial from expression '\" + name + \"'\\n\" + (e.message)) );\n\t}\n\n\treturn parsed || { t: [] };\n}\n\nvar RepeatedFragment = function RepeatedFragment ( options ) {\n\tthis.parent = options.owner.parentFragment;\n\n\t// bit of a hack, so reference resolution works without another\n\t// layer of indirection\n\tthis.parentFragment = this;\n\tthis.owner = options.owner;\n\tthis.ractive = this.parent.ractive;\n\tthis.delegate = this.parent.delegate || findElement( options.owner );\n\t// delegation disabled by directive\n\tif ( this.delegate && this.delegate.delegate === false ) { this.delegate = false; }\n\n\t// encapsulated styles should be inherited until they get applied by an element\n\tthis.cssIds = 'cssIds' in options ? options.cssIds : ( this.parent ? this.parent.cssIds : null );\n\n\tthis.context = null;\n\tthis.rendered = false;\n\tthis.iterations = [];\n\n\tthis.template = options.template;\n\n\tthis.indexRef = options.indexRef;\n\tthis.keyRef = options.keyRef;\n\n\tthis.pendingNewIndices = null;\n\tthis.previousIterations = null;\n\n\t// track array versus object so updates of type rest\n\tthis.isArray = false;\n};\n\nRepeatedFragment.prototype.bind = function bind$$1 ( context ) {\n\t\tvar this$1 = this;\n\n\tthis.context = context;\n\tvar value = context.get();\n\n\t// {{#each array}}...\n\tif ( this.isArray = Array.isArray( value ) ) {\n\t\t// we can't use map, because of sparse arrays\n\t\tthis.iterations = [];\n\t\tvar max = value.length;\n\t\tfor ( var i = 0; i < max; i += 1 ) {\n\t\t\tthis$1.iterations[i] = this$1.createIteration( i, i );\n\t\t}\n\t}\n\n\t// {{#each object}}...\n\telse if ( isObject( value ) ) {\n\t\tthis.isArray = false;\n\n\t\t// TODO this is a dreadful hack. There must be a neater way\n\t\tif ( this.indexRef ) {\n\t\t\tvar refs = this.indexRef.split( ',' );\n\t\t\tthis.keyRef = refs[0];\n\t\t\tthis.indexRef = refs[1];\n\t\t}\n\n\t\tthis.iterations = Object.keys( value ).map( function ( key, index ) {\n\t\t\treturn this$1.createIteration( key, index );\n\t\t});\n\t}\n\n\treturn this;\n};\n\nRepeatedFragment.prototype.bubble = function bubble ( index ) {\n\tif  ( !this.bubbled ) { this.bubbled = []; }\n\tthis.bubbled.push( index );\n\n\tthis.owner.bubble();\n};\n\nRepeatedFragment.prototype.createIteration = function createIteration ( key, index ) {\n\tvar fragment = new Fragment({\n\t\towner: this,\n\t\ttemplate: this.template\n\t});\n\n\tfragment.key = key;\n\tfragment.index = index;\n\tfragment.isIteration = true;\n\tfragment.delegate = this.delegate;\n\n\tvar model = this.context.joinKey( key );\n\n\t// set up an iteration alias if there is one\n\tif ( this.owner.template.z ) {\n\t\tfragment.aliases = {};\n\t\tfragment.aliases[ this.owner.template.z[0].n ] = model;\n\t}\n\n\treturn fragment.bind( model );\n};\n\nRepeatedFragment.prototype.destroyed = function destroyed$1 () {\n\tthis.iterations.forEach( destroyed );\n};\n\nRepeatedFragment.prototype.detach = function detach () {\n\tvar docFrag = createDocumentFragment();\n\tthis.iterations.forEach( function (fragment) { return docFrag.appendChild( fragment.detach() ); } );\n\treturn docFrag;\n};\n\nRepeatedFragment.prototype.find = function find ( selector, options ) {\n\treturn findMap( this.iterations, function (i) { return i.find( selector, options ); } );\n};\n\nRepeatedFragment.prototype.findAll = function findAll ( selector, options ) {\n\treturn this.iterations.forEach( function (i) { return i.findAll( selector, options ); } );\n};\n\nRepeatedFragment.prototype.findComponent = function findComponent ( name, options ) {\n\treturn findMap( this.iterations, function (i) { return i.findComponent( name, options ); } );\n};\n\nRepeatedFragment.prototype.findAllComponents = function findAllComponents ( name, options ) {\n\treturn this.iterations.forEach( function (i) { return i.findAllComponents( name, options ); } );\n};\n\nRepeatedFragment.prototype.findNextNode = function findNextNode ( iteration ) {\n\t\tvar this$1 = this;\n\n\tif ( iteration.index < this.iterations.length - 1 ) {\n\t\tfor ( var i = iteration.index + 1; i < this.iterations.length; i++ ) {\n\t\t\tvar node = this$1.iterations[ i ].firstNode( true );\n\t\t\tif ( node ) { return node; }\n\t\t}\n\t}\n\n\treturn this.owner.findNextNode();\n};\n\nRepeatedFragment.prototype.firstNode = function firstNode ( skipParent ) {\n\treturn this.iterations[0] ? this.iterations[0].firstNode( skipParent ) : null;\n};\n\nRepeatedFragment.prototype.rebind = function rebind ( next ) {\n\t\tvar this$1 = this;\n\n\tthis.context = next;\n\tthis.iterations.forEach( function (fragment) {\n\t\tvar model = next ? next.joinKey( fragment.key ) : undefined;\n\t\tfragment.context = model;\n\t\tif ( this$1.owner.template.z ) {\n\t\t\tfragment.aliases = {};\n\t\t\tfragment.aliases[ this$1.owner.template.z[0].n ] = model;\n\t\t}\n\t});\n};\n\nRepeatedFragment.prototype.render = function render$$1 ( target, occupants ) {\n\t// TODO use docFrag.cloneNode...\n\n\tvar xs = this.iterations;\n\tif ( xs ) {\n\t\tvar len = xs.length;\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\txs[i].render( target, occupants );\n\t\t}\n\t}\n\n\tthis.rendered = true;\n};\n\nRepeatedFragment.prototype.shuffle = function shuffle ( newIndices ) {\n\t\tvar this$1 = this;\n\n\tif ( !this.pendingNewIndices ) { this.previousIterations = this.iterations.slice(); }\n\n\tif ( !this.pendingNewIndices ) { this.pendingNewIndices = []; }\n\n\tthis.pendingNewIndices.push( newIndices );\n\n\tvar iterations = [];\n\n\tnewIndices.forEach( function ( newIndex, oldIndex ) {\n\t\tif ( newIndex === -1 ) { return; }\n\n\t\tvar fragment = this$1.iterations[ oldIndex ];\n\t\titerations[ newIndex ] = fragment;\n\n\t\tif ( newIndex !== oldIndex && fragment ) { fragment.dirty = true; }\n\t});\n\n\tthis.iterations = iterations;\n\n\tthis.bubble();\n};\n\nRepeatedFragment.prototype.shuffled = function shuffled$1 () {\n\tthis.iterations.forEach( shuffled );\n};\n\nRepeatedFragment.prototype.toString = function toString$1$$1 ( escape ) {\n\treturn this.iterations ?\n\t\tthis.iterations.map( escape ? toEscapedString : toString$1 ).join( '' ) :\n\t\t'';\n};\n\nRepeatedFragment.prototype.unbind = function unbind$1 () {\n\tthis.iterations.forEach( unbind );\n\treturn this;\n};\n\nRepeatedFragment.prototype.unrender = function unrender$1 ( shouldDestroy ) {\n\tthis.iterations.forEach( shouldDestroy ? unrenderAndDestroy : unrender );\n\tif ( this.pendingNewIndices && this.previousIterations ) {\n\t\tthis.previousIterations.forEach( function (fragment) {\n\t\t\tif ( fragment.rendered ) { shouldDestroy ? unrenderAndDestroy( fragment ) : unrender( fragment ); }\n\t\t});\n\t}\n\tthis.rendered = false;\n};\n\n// TODO smart update\nRepeatedFragment.prototype.update = function update$1 () {\n\t\tvar this$1 = this;\n\n\t// skip dirty check, since this is basically just a facade\n\n\tif ( this.pendingNewIndices ) {\n\t\tthis.bubbled.length = 0;\n\t\tthis.updatePostShuffle();\n\t\treturn;\n\t}\n\n\tif ( this.updating ) { return; }\n\tthis.updating = true;\n\n\tvar value = this.context.get();\n\tvar wasArray = this.isArray;\n\n\tvar toRemove;\n\tvar oldKeys;\n\tvar reset = true;\n\tvar i;\n\n\tif ( this.isArray = Array.isArray( value ) ) {\n\t\tif ( wasArray ) {\n\t\t\treset = false;\n\t\t\tif ( this.iterations.length > value.length ) {\n\t\t\t\ttoRemove = this.iterations.splice( value.length );\n\t\t\t}\n\t\t}\n\t} else if ( isObject( value ) && !wasArray ) {\n\t\treset = false;\n\t\ttoRemove = [];\n\t\toldKeys = {};\n\t\ti = this.iterations.length;\n\n\t\twhile ( i-- ) {\n\t\t\tvar fragment$1 = this$1.iterations[i];\n\t\t\tif ( fragment$1.key in value ) {\n\t\t\t\toldKeys[ fragment$1.key ] = true;\n\t\t\t} else {\n\t\t\t\tthis$1.iterations.splice( i, 1 );\n\t\t\t\ttoRemove.push( fragment$1 );\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( reset ) {\n\t\ttoRemove = this.iterations;\n\t\tthis.iterations = [];\n\t}\n\n\tif ( toRemove ) {\n\t\ttoRemove.forEach( function (fragment) {\n\t\t\tfragment.unbind();\n\t\t\tfragment.unrender( true );\n\t\t});\n\t}\n\n\t// update the remaining ones\n\tif ( !reset && this.isArray && this.bubbled && this.bubbled.length ) {\n\t\tthis.bubbled.forEach( function (i) { return this$1.iterations[i] && this$1.iterations[i].update(); } );\n\t} else {\n\t\tthis.iterations.forEach( update );\n\t}\n\n\tif ( this.bubbled ) { this.bubbled.length = 0; }\n\n\t// add new iterations\n\tvar newLength = Array.isArray( value ) ?\n\t\tvalue.length :\n\t\tisObject( value ) ?\n\t\t\tObject.keys( value ).length :\n\t\t\t0;\n\n\tvar docFrag;\n\tvar fragment;\n\n\tif ( newLength > this.iterations.length ) {\n\t\tdocFrag = this.rendered ? createDocumentFragment() : null;\n\t\ti = this.iterations.length;\n\n\t\tif ( Array.isArray( value ) ) {\n\t\t\twhile ( i < value.length ) {\n\t\t\t\tfragment = this$1.createIteration( i, i );\n\n\t\t\t\tthis$1.iterations.push( fragment );\n\t\t\t\tif ( this$1.rendered ) { fragment.render( docFrag ); }\n\n\t\t\t\ti += 1;\n\t\t\t}\n\t\t}\n\n\t\telse if ( isObject( value ) ) {\n\t\t\t// TODO this is a dreadful hack. There must be a neater way\n\t\t\tif ( this.indexRef && !this.keyRef ) {\n\t\t\t\tvar refs = this.indexRef.split( ',' );\n\t\t\t\tthis.keyRef = refs[0];\n\t\t\t\tthis.indexRef = refs[1];\n\t\t\t}\n\n\t\t\tObject.keys( value ).forEach( function (key) {\n\t\t\t\tif ( !oldKeys || !( key in oldKeys ) ) {\n\t\t\t\t\tfragment = this$1.createIteration( key, i );\n\n\t\t\t\t\tthis$1.iterations.push( fragment );\n\t\t\t\t\tif ( this$1.rendered ) { fragment.render( docFrag ); }\n\n\t\t\t\t\ti += 1;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif ( this.rendered ) {\n\t\t\tvar parentNode = this.parent.findParentNode();\n\t\t\tvar anchor = this.parent.findNextNode( this.owner );\n\n\t\t\tparentNode.insertBefore( docFrag, anchor );\n\t\t}\n\t}\n\n\tthis.updating = false;\n};\n\nRepeatedFragment.prototype.updatePostShuffle = function updatePostShuffle () {\n\t\tvar this$1 = this;\n\n\tvar newIndices = this.pendingNewIndices[ 0 ];\n\n\t// map first shuffle through\n\tthis.pendingNewIndices.slice( 1 ).forEach( function (indices) {\n\t\tnewIndices.forEach( function ( newIndex, oldIndex ) {\n\t\t\tnewIndices[ oldIndex ] = indices[ newIndex ];\n\t\t});\n\t});\n\n\t// This algorithm (for detaching incorrectly-ordered fragments from the DOM and\n\t// storing them in a document fragment for later reinsertion) seems a bit hokey,\n\t// but it seems to work for now\n\tvar len = this.context.get().length;\n\tvar oldLen = this.previousIterations.length;\n\tvar removed = {};\n\tvar i;\n\n\tnewIndices.forEach( function ( newIndex, oldIndex ) {\n\t\tvar fragment = this$1.previousIterations[ oldIndex ];\n\t\tthis$1.previousIterations[ oldIndex ] = null;\n\n\t\tif ( newIndex === -1 ) {\n\t\t\tremoved[ oldIndex ] = fragment;\n\t\t} else if ( fragment.index !== newIndex ) {\n\t\t\tvar model = this$1.context.joinKey( newIndex );\n\t\t\tfragment.index = fragment.key = newIndex;\n\t\t\tfragment.context = model;\n\t\t\tif ( this$1.owner.template.z ) {\n\t\t\t\tfragment.aliases = {};\n\t\t\t\tfragment.aliases[ this$1.owner.template.z[0].n ] = model;\n\t\t\t}\n\t\t}\n\t});\n\n\t// if the array was spliced outside of ractive, sometimes there are leftover fragments not in the newIndices\n\tthis.previousIterations.forEach( function ( frag, i ) {\n\t\tif ( frag ) { removed[ i ] = frag; }\n\t});\n\n\t// create new/move existing iterations\n\tvar docFrag = this.rendered ? createDocumentFragment() : null;\n\tvar parentNode = this.rendered ? this.parent.findParentNode() : null;\n\n\tvar contiguous = 'startIndex' in newIndices;\n\ti = contiguous ? newIndices.startIndex : 0;\n\n\tfor ( i; i < len; i++ ) {\n\t\tvar frag = this$1.iterations[i];\n\n\t\tif ( frag && contiguous ) {\n\t\t\t// attach any built-up iterations\n\t\t\tif ( this$1.rendered ) {\n\t\t\t\tif ( removed[i] ) { docFrag.appendChild( removed[i].detach() ); }\n\t\t\t\tif ( docFrag.childNodes.length  ) { parentNode.insertBefore( docFrag, frag.firstNode() ); }\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\n\t\tif ( !frag ) { this$1.iterations[i] = this$1.createIteration( i, i ); }\n\n\t\tif ( this$1.rendered ) {\n\t\t\tif ( removed[i] ) { docFrag.appendChild( removed[i].detach() ); }\n\n\t\t\tif ( frag ) { docFrag.appendChild( frag.detach() ); }\n\t\t\telse {\n\t\t\t\tthis$1.iterations[i].render( docFrag );\n\t\t\t}\n\t\t}\n\t}\n\n\t// append any leftovers\n\tif ( this.rendered ) {\n\t\tfor ( i = len; i < oldLen; i++ ) {\n\t\t\tif ( removed[i] ) { docFrag.appendChild( removed[i].detach() ); }\n\t\t}\n\n\t\tif ( docFrag.childNodes.length ) {\n\t\t\tparentNode.insertBefore( docFrag, this.owner.findNextNode() );\n\t\t}\n\t}\n\n\t// trigger removal on old nodes\n\tObject.keys( removed ).forEach( function (k) { return removed[k].unbind().unrender( true ); } );\n\n\tthis.iterations.forEach( update );\n\n\tthis.pendingNewIndices = null;\n\n\tthis.shuffled();\n};\n\nfunction isEmpty ( value ) {\n\treturn !value ||\n\t       ( Array.isArray( value ) && value.length === 0 ) ||\n\t\t   ( isObject( value ) && Object.keys( value ).length === 0 );\n}\n\nfunction getType ( value, hasIndexRef ) {\n\tif ( hasIndexRef || Array.isArray( value ) ) { return SECTION_EACH; }\n\tif ( isObject( value ) || typeof value === 'function' ) { return SECTION_IF_WITH; }\n\tif ( value === undefined ) { return null; }\n\treturn SECTION_IF;\n}\n\nvar Section = (function (MustacheContainer$$1) {\n\tfunction Section ( options ) {\n\t\tMustacheContainer$$1.call( this, options );\n\n\t\tthis.sectionType = options.template.n || null;\n\t\tthis.templateSectionType = this.sectionType;\n\t\tthis.subordinate = options.template.l === 1;\n\t\tthis.fragment = null;\n\t}\n\n\tif ( MustacheContainer$$1 ) Section.__proto__ = MustacheContainer$$1;\n\tSection.prototype = Object.create( MustacheContainer$$1 && MustacheContainer$$1.prototype );\n\tSection.prototype.constructor = Section;\n\n\tSection.prototype.bind = function bind () {\n\t\tMustacheContainer$$1.prototype.bind.call(this);\n\n\t\tif ( this.subordinate ) {\n\t\t\tthis.sibling = this.parentFragment.items[ this.parentFragment.items.indexOf( this ) - 1 ];\n\t\t\tthis.sibling.nextSibling = this;\n\t\t}\n\n\t\t// if we managed to bind, we need to create children\n\t\tif ( this.model ) {\n\t\t\tthis.dirty = true;\n\t\t\tthis.update();\n\t\t} else if ( this.sectionType && this.sectionType === SECTION_UNLESS && ( !this.sibling || !this.sibling.isTruthy() ) ) {\n\t\t\tthis.fragment = new Fragment({\n\t\t\t\towner: this,\n\t\t\t\ttemplate: this.template.f\n\t\t\t}).bind();\n\t\t}\n\t};\n\n\tSection.prototype.detach = function detach () {\n\t\tvar frag = this.fragment || this.detached;\n\t\treturn frag ? frag.detach() : MustacheContainer$$1.prototype.detach.call(this);\n\t};\n\n\tSection.prototype.isTruthy = function isTruthy () {\n\t\tif ( this.subordinate && this.sibling.isTruthy() ) { return true; }\n\t\tvar value = !this.model ? undefined : this.model.isRoot ? this.model.value : this.model.get();\n\t\treturn !!value && ( this.templateSectionType === SECTION_IF_WITH || !isEmpty( value ) );\n\t};\n\n\tSection.prototype.rebind = function rebind ( next, previous, safe ) {\n\t\tif ( MustacheContainer$$1.prototype.rebind.call( this, next, previous, safe ) ) {\n\t\t\tif ( this.fragment && this.sectionType !== SECTION_IF && this.sectionType !== SECTION_UNLESS ) {\n\t\t\t\tthis.fragment.rebind( next );\n\t\t\t}\n\t\t}\n\t};\n\n\tSection.prototype.render = function render ( target, occupants ) {\n\t\tthis.rendered = true;\n\t\tif ( this.fragment ) { this.fragment.render( target, occupants ); }\n\t};\n\n\tSection.prototype.shuffle = function shuffle ( newIndices ) {\n\t\tif ( this.fragment && this.sectionType === SECTION_EACH ) {\n\t\t\tthis.fragment.shuffle( newIndices );\n\t\t}\n\t};\n\n\tSection.prototype.unbind = function unbind () {\n\t\tMustacheContainer$$1.prototype.unbind.call(this);\n\t\tif ( this.fragment ) { this.fragment.unbind(); }\n\t};\n\n\tSection.prototype.unrender = function unrender ( shouldDestroy ) {\n\t\tif ( this.rendered && this.fragment ) { this.fragment.unrender( shouldDestroy ); }\n\t\tthis.rendered = false;\n\t};\n\n\tSection.prototype.update = function update () {\n\t\tvar this$1 = this;\n\n\t\tif ( !this.dirty ) { return; }\n\n\t\tif ( this.fragment && this.sectionType !== SECTION_IF && this.sectionType !== SECTION_UNLESS ) {\n\t\t\tthis.fragment.context = this.model;\n\t\t}\n\n\t\tif ( !this.model && this.sectionType !== SECTION_UNLESS ) { return; }\n\n\t\tthis.dirty = false;\n\n\t\tvar value = !this.model ? undefined : this.model.isRoot ? this.model.value : this.model.get();\n\t\tvar siblingFalsey = !this.subordinate || !this.sibling.isTruthy();\n\t\tvar lastType = this.sectionType;\n\n\t\t// watch for switching section types\n\t\tif ( this.sectionType === null || this.templateSectionType === null ) { this.sectionType = getType( value, this.template.i ); }\n\t\tif ( lastType && lastType !== this.sectionType && this.fragment ) {\n\t\t\tif ( this.rendered ) {\n\t\t\t\tthis.fragment.unbind().unrender( true );\n\t\t\t}\n\n\t\t\tthis.fragment = null;\n\t\t}\n\n\t\tvar newFragment;\n\n\t\tvar fragmentShouldExist = this.sectionType === SECTION_EACH || // each always gets a fragment, which may have no iterations\n\t\t                            this.sectionType === SECTION_WITH || // with (partial context) always gets a fragment\n\t\t                            ( siblingFalsey && ( this.sectionType === SECTION_UNLESS ? !this.isTruthy() : this.isTruthy() ) ); // if, unless, and if-with depend on siblings and the condition\n\n\t\tif ( fragmentShouldExist ) {\n\t\t\tif ( !this.fragment ) { this.fragment = this.detached; }\n\n\t\t\tif ( this.fragment ) {\n\t\t\t\t// check for detached fragment\n\t\t\t\tif ( this.detached ) {\n\t\t\t\t\tattach( this, this.fragment );\n\t\t\t\t\tthis.detached = false;\n\t\t\t\t\tthis.rendered = true;\n\t\t\t\t}\n\n\t\t\t\tthis.fragment.update();\n\t\t\t} else {\n\t\t\t\tif ( this.sectionType === SECTION_EACH ) {\n\t\t\t\t\tnewFragment = new RepeatedFragment({\n\t\t\t\t\t\towner: this,\n\t\t\t\t\t\ttemplate: this.template.f,\n\t\t\t\t\t\tindexRef: this.template.i\n\t\t\t\t\t}).bind( this.model );\n\t\t\t\t} else {\n\t\t\t\t\t// only with and if-with provide context - if and unless do not\n\t\t\t\t\tvar context = this.sectionType !== SECTION_IF && this.sectionType !== SECTION_UNLESS ? this.model : null;\n\t\t\t\t\tnewFragment = new Fragment({\n\t\t\t\t\t\towner: this,\n\t\t\t\t\t\ttemplate: this.template.f\n\t\t\t\t\t}).bind( context );\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif ( this.fragment && this.rendered ) {\n\t\t\t\tif ( keep !== true ) {\n\t\t\t\t\tthis.fragment.unbind().unrender( true );\n\t\t\t\t} else {\n\t\t\t\t\tthis.unrender( false );\n\t\t\t\t\tthis.detached = this.fragment;\n\t\t\t\t\trunloop.scheduleTask( function () { return this$1.detach(); } );\n\t\t\t\t}\n\t\t\t} else if ( this.fragment ) {\n\t\t\t\tthis.fragment.unbind();\n\t\t\t}\n\n\t\t\tthis.fragment = null;\n\t\t}\n\n\t\tif ( newFragment ) {\n\t\t\tif ( this.rendered ) {\n\t\t\t\tattach( this, newFragment );\n\t\t\t}\n\n\t\t\tthis.fragment = newFragment;\n\t\t}\n\n\t\tif ( this.nextSibling ) {\n\t\t\tthis.nextSibling.dirty = true;\n\t\t\tthis.nextSibling.update();\n\t\t}\n\t};\n\n\treturn Section;\n}(MustacheContainer));\n\nfunction attach ( section, fragment ) {\n\tvar anchor = section.parentFragment.findNextNode( section );\n\n\tif ( anchor ) {\n\t\tvar docFrag = createDocumentFragment();\n\t\tfragment.render( docFrag );\n\n\t\tanchor.parentNode.insertBefore( docFrag, anchor );\n\t} else {\n\t\tfragment.render( section.parentFragment.findParentNode() );\n\t}\n}\n\nvar Select = (function (Element$$1) {\n\tfunction Select ( options ) {\n\t\tElement$$1.call( this, options );\n\t\tthis.options = [];\n\t}\n\n\tif ( Element$$1 ) Select.__proto__ = Element$$1;\n\tSelect.prototype = Object.create( Element$$1 && Element$$1.prototype );\n\tSelect.prototype.constructor = Select;\n\n\tSelect.prototype.foundNode = function foundNode ( node ) {\n\t\tif ( this.binding ) {\n\t\t\tvar selectedOptions = getSelectedOptions( node );\n\n\t\t\tif ( selectedOptions.length > 0 ) {\n\t\t\t\tthis.selectedOptions = selectedOptions;\n\t\t\t}\n\t\t}\n\t};\n\n\tSelect.prototype.render = function render ( target, occupants ) {\n\t\tElement$$1.prototype.render.call( this, target, occupants );\n\t\tthis.sync();\n\n\t\tvar node = this.node;\n\n\t\tvar i = node.options.length;\n\t\twhile ( i-- ) {\n\t\t\tnode.options[i].defaultSelected = node.options[i].selected;\n\t\t}\n\n\t\tthis.rendered = true;\n\t};\n\n\tSelect.prototype.sync = function sync () {\n\t\tvar this$1 = this;\n\n\t\tvar selectNode = this.node;\n\n\t\tif ( !selectNode ) { return; }\n\n\t\tvar options = toArray( selectNode.options );\n\n\t\tif ( this.selectedOptions ) {\n\t\t\toptions.forEach( function (o) {\n\t\t\t\tif ( this$1.selectedOptions.indexOf( o ) >= 0 ) { o.selected = true; }\n\t\t\t\telse { o.selected = false; }\n\t\t\t});\n\t\t\tthis.binding.setFromNode( selectNode );\n\t\t\tdelete this.selectedOptions;\n\t\t\treturn;\n\t\t}\n\n\t\tvar selectValue = this.getAttribute( 'value' );\n\t\tvar isMultiple = this.getAttribute( 'multiple' );\n\t\tvar array = isMultiple && Array.isArray( selectValue );\n\n\t\t// If the <select> has a specified value, that should override\n\t\t// these options\n\t\tif ( selectValue !== undefined ) {\n\t\t\tvar optionWasSelected;\n\n\t\t\toptions.forEach( function (o) {\n\t\t\t\tvar optionValue = o._ractive ? o._ractive.value : o.value;\n\t\t\t\tvar shouldSelect = isMultiple ?\n\t\t\t\t\tarray && this$1.valueContains( selectValue, optionValue ) :\n\t\t\t\t\tthis$1.compare( selectValue, optionValue );\n\n\t\t\t\tif ( shouldSelect ) {\n\t\t\t\t\toptionWasSelected = true;\n\t\t\t\t}\n\n\t\t\t\to.selected = shouldSelect;\n\t\t\t});\n\n\t\t\tif ( !optionWasSelected && !isMultiple ) {\n\t\t\t\tif ( this.binding ) {\n\t\t\t\t\tthis.binding.forceUpdate();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Otherwise the value should be initialised according to which\n\t\t// <option> element is selected, if twoway binding is in effect\n\t\telse if ( this.binding ) {\n\t\t\tthis.binding.forceUpdate();\n\t\t}\n\t};\n\tSelect.prototype.valueContains = function valueContains ( selectValue, optionValue ) {\n\t\tvar this$1 = this;\n\n\t\tvar i = selectValue.length;\n\t\twhile ( i-- ) {\n\t\t\tif ( this$1.compare( optionValue, selectValue[i] ) ) { return true; }\n\t\t}\n\t};\n\tSelect.prototype.compare = function compare (optionValue, selectValue) {\n\t\tvar comparator = this.getAttribute( 'value-comparator' );\n\t\tif ( comparator ) {\n\t\t\tif (typeof comparator === 'function') {\n\t\t\t\treturn comparator( selectValue, optionValue );\n\t\t\t}\n\t\t\tif ( selectValue && optionValue ) {\n\t\t\t\treturn selectValue[comparator] == optionValue[comparator];\n\t\t\t}\n\t\t}\n\t\treturn selectValue == optionValue;\n\t};\n\tSelect.prototype.update = function update () {\n\t\tElement$$1.prototype.update.call(this);\n\t\tthis.sync();\n\t};\n\n\treturn Select;\n}(Element));\n\nvar Textarea = (function (Input$$1) {\n\tfunction Textarea( options ) {\n\t\tvar template = options.template;\n\n\t\toptions.deferContent = true;\n\n\t\tInput$$1.call( this, options );\n\n\t\t// check for single interpolator binding\n\t\tif ( !this.attributeByName.value ) {\n\t\t\tif ( template.f && isBindable( { template: template } ) ) {\n\t\t\t\tthis.attributes.push( createItem( {\n\t\t\t\t\towner: this,\n\t\t\t\t\ttemplate: { t: ATTRIBUTE, f: template.f, n: 'value' },\n\t\t\t\t\tparentFragment: this.parentFragment\n\t\t\t\t} ) );\n\t\t\t} else {\n\t\t\t\tthis.fragment = new Fragment({ owner: this, cssIds: null, template: template.f });\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( Input$$1 ) Textarea.__proto__ = Input$$1;\n\tTextarea.prototype = Object.create( Input$$1 && Input$$1.prototype );\n\tTextarea.prototype.constructor = Textarea;\n\n\tTextarea.prototype.bubble = function bubble () {\n\t\tvar this$1 = this;\n\n\t\tif ( !this.dirty ) {\n\t\t\tthis.dirty = true;\n\n\t\t\tif ( this.rendered && !this.binding && this.fragment ) {\n\t\t\t\trunloop.scheduleTask( function () {\n\t\t\t\t\tthis$1.dirty = false;\n\t\t\t\t\tthis$1.node.value = this$1.fragment.toString();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.parentFragment.bubble(); // default behaviour\n\t\t}\n\t};\n\n\treturn Textarea;\n}(Input));\n\nvar Text = (function (Item$$1) {\n\tfunction Text ( options ) {\n\t\tItem$$1.call( this, options );\n\t\tthis.type = TEXT;\n\t}\n\n\tif ( Item$$1 ) Text.__proto__ = Item$$1;\n\tText.prototype = Object.create( Item$$1 && Item$$1.prototype );\n\tText.prototype.constructor = Text;\n\n\tText.prototype.detach = function detach () {\n\t\treturn detachNode( this.node );\n\t};\n\n\tText.prototype.firstNode = function firstNode () {\n\t\treturn this.node;\n\t};\n\n\tText.prototype.render = function render ( target, occupants ) {\n\t\tif ( inAttributes() ) { return; }\n\t\tthis.rendered = true;\n\n\t\tprogressiveText( this, target, occupants, this.template );\n\t};\n\n\tText.prototype.toString = function toString ( escape ) {\n\t\treturn escape ? escapeHtml( this.template ) : this.template;\n\t};\n\n\tText.prototype.unrender = function unrender ( shouldDestroy ) {\n\t\tif ( this.rendered && shouldDestroy ) { this.detach(); }\n\t\tthis.rendered = false;\n\t};\n\n\tText.prototype.valueOf = function valueOf () {\n\t\treturn this.template;\n\t};\n\n\treturn Text;\n}(Item));\n\nvar proto$3 = Text.prototype;\nproto$3.bind = proto$3.unbind = proto$3.update = noop;\n\nvar camelizeHyphenated = function ( hyphenatedStr ) {\n\treturn hyphenatedStr.replace( /-([a-zA-Z])/g, function ( match, $1 ) {\n\t\treturn $1.toUpperCase();\n\t});\n};\n\nvar prefix;\n\nif ( !isClient ) {\n\tprefix = null;\n} else {\n\tvar prefixCache = {};\n\tvar testStyle = createElement( 'div' ).style;\n\n\tprefix = function ( prop ) {\n\t\tprop = camelizeHyphenated( prop );\n\n\t\tif ( !prefixCache[ prop ] ) {\n\t\t\tif ( testStyle[ prop ] !== undefined ) {\n\t\t\t\tprefixCache[ prop ] = prop;\n\t\t\t}\n\n\t\t\telse {\n\t\t\t\t// test vendors...\n\t\t\t\tvar capped = prop.charAt( 0 ).toUpperCase() + prop.substring( 1 );\n\n\t\t\t\tvar i = vendors.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tvar vendor = vendors[i];\n\t\t\t\t\tif ( testStyle[ vendor + capped ] !== undefined ) {\n\t\t\t\t\t\tprefixCache[ prop ] = vendor + capped;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn prefixCache[ prop ];\n\t};\n}\n\nvar prefix$1 = prefix;\n\nvar visible;\nvar hidden = 'hidden';\n\nif ( doc ) {\n\tvar prefix$2;\n\n\tif ( hidden in doc ) {\n\t\tprefix$2 = '';\n\t} else {\n\t\tvar i$1 = vendors.length;\n\t\twhile ( i$1-- ) {\n\t\t\tvar vendor = vendors[i$1];\n\t\t\thidden = vendor + 'Hidden';\n\n\t\t\tif ( hidden in doc ) {\n\t\t\t\tprefix$2 = vendor;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( prefix$2 !== undefined ) {\n\t\tdoc.addEventListener( prefix$2 + 'visibilitychange', onChange );\n\t\tonChange();\n\t} else {\n\t\t// gah, we're in an old browser\n\t\tif ( 'onfocusout' in doc ) {\n\t\t\tdoc.addEventListener( 'focusout', onHide );\n\t\t\tdoc.addEventListener( 'focusin', onShow );\n\t\t}\n\n\t\telse {\n\t\t\twin.addEventListener( 'pagehide', onHide );\n\t\t\twin.addEventListener( 'blur', onHide );\n\n\t\t\twin.addEventListener( 'pageshow', onShow );\n\t\t\twin.addEventListener( 'focus', onShow );\n\t\t}\n\n\t\tvisible = true; // until proven otherwise. Not ideal but hey\n\t}\n}\n\nfunction onChange () {\n\tvisible = !doc[ hidden ];\n}\n\nfunction onHide () {\n\tvisible = false;\n}\n\nfunction onShow () {\n\tvisible = true;\n}\n\nvar unprefixPattern = new RegExp( '^-(?:' + vendors.join( '|' ) + ')-' );\n\nvar unprefix = function ( prop ) {\n\treturn prop.replace( unprefixPattern, '' );\n};\n\nvar vendorPattern = new RegExp( '^(?:' + vendors.join( '|' ) + ')([A-Z])' );\n\nvar hyphenate = function ( str ) {\n\tif ( !str ) { return ''; } // edge case\n\n\tif ( vendorPattern.test( str ) ) { str = '-' + str; }\n\n\treturn str.replace( /[A-Z]/g, function (match) { return '-' + match.toLowerCase(); } );\n};\n\nvar createTransitions;\n\nif ( !isClient ) {\n\tcreateTransitions = null;\n} else {\n\tvar testStyle$1 = createElement( 'div' ).style;\n\tvar linear$1 = function (x) { return x; };\n\n\tvar canUseCssTransitions = {};\n\tvar cannotUseCssTransitions = {};\n\n\t// determine some facts about our environment\n\tvar TRANSITION$1;\n\tvar TRANSITIONEND;\n\tvar CSS_TRANSITIONS_ENABLED;\n\tvar TRANSITION_DURATION;\n\tvar TRANSITION_PROPERTY;\n\tvar TRANSITION_TIMING_FUNCTION;\n\n\tif ( testStyle$1.transition !== undefined ) {\n\t\tTRANSITION$1 = 'transition';\n\t\tTRANSITIONEND = 'transitionend';\n\t\tCSS_TRANSITIONS_ENABLED = true;\n\t} else if ( testStyle$1.webkitTransition !== undefined ) {\n\t\tTRANSITION$1 = 'webkitTransition';\n\t\tTRANSITIONEND = 'webkitTransitionEnd';\n\t\tCSS_TRANSITIONS_ENABLED = true;\n\t} else {\n\t\tCSS_TRANSITIONS_ENABLED = false;\n\t}\n\n\tif ( TRANSITION$1 ) {\n\t\tTRANSITION_DURATION = TRANSITION$1 + 'Duration';\n\t\tTRANSITION_PROPERTY = TRANSITION$1 + 'Property';\n\t\tTRANSITION_TIMING_FUNCTION = TRANSITION$1 + 'TimingFunction';\n\t}\n\n\tcreateTransitions = function ( t, to, options, changedProperties, resolve ) {\n\n\t\t// Wait a beat (otherwise the target styles will be applied immediately)\n\t\t// TODO use a fastdom-style mechanism?\n\t\tsetTimeout( function () {\n\t\t\tvar jsTransitionsComplete;\n\t\t\tvar cssTransitionsComplete;\n\t\t\tvar cssTimeout; // eslint-disable-line prefer-const\n\n\t\t\tfunction transitionDone () { clearTimeout( cssTimeout ); }\n\n\t\t\tfunction checkComplete () {\n\t\t\t\tif ( jsTransitionsComplete && cssTransitionsComplete ) {\n\t\t\t\t\tt.unregisterCompleteHandler( transitionDone );\n\t\t\t\t\t// will changes to events and fire have an unexpected consequence here?\n\t\t\t\t\tt.ractive.fire( t.name + ':end', t.node, t.isIntro );\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// this is used to keep track of which elements can use CSS to animate\n\t\t\t// which properties\n\t\t\tvar hashPrefix = ( t.node.namespaceURI || '' ) + t.node.tagName;\n\n\t\t\t// need to reset transition properties\n\t\t\tvar style = t.node.style;\n\t\t\tvar previous = {\n\t\t\t\tproperty: style[ TRANSITION_PROPERTY ],\n\t\t\t\ttiming: style[ TRANSITION_TIMING_FUNCTION ],\n\t\t\t\tduration: style[ TRANSITION_DURATION ]\n\t\t\t};\n\n\t\t\tstyle[ TRANSITION_PROPERTY ] = changedProperties.map( prefix$1 ).map( hyphenate ).join( ',' );\n\t\t\tvar easingName = hyphenate( options.easing || 'linear' );\n\t\t\tstyle[ TRANSITION_TIMING_FUNCTION ] = easingName;\n\t\t\tvar cssTiming = style[ TRANSITION_TIMING_FUNCTION ] === easingName;\n\t\t\tstyle[ TRANSITION_DURATION ] = ( options.duration / 1000 ) + 's';\n\n\t\t\tfunction transitionEndHandler ( event ) {\n\t\t\t\tvar index = changedProperties.indexOf( camelizeHyphenated( unprefix( event.propertyName ) ) );\n\n\t\t\t\tif ( index !== -1 ) {\n\t\t\t\t\tchangedProperties.splice( index, 1 );\n\t\t\t\t}\n\n\t\t\t\tif ( changedProperties.length ) {\n\t\t\t\t\t// still transitioning...\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tclearTimeout( cssTimeout );\n\t\t\t\tcssTransitionsDone();\n\t\t\t}\n\n\t\t\tfunction cssTransitionsDone () {\n\t\t\t\tstyle[ TRANSITION_PROPERTY ] = previous.property;\n\t\t\t\tstyle[ TRANSITION_TIMING_FUNCTION ] = previous.duration;\n\t\t\t\tstyle[ TRANSITION_DURATION ] = previous.timing;\n\n\t\t\t\tt.node.removeEventListener( TRANSITIONEND, transitionEndHandler, false );\n\n\t\t\t\tcssTransitionsComplete = true;\n\t\t\t\tcheckComplete();\n\t\t\t}\n\n\t\t\tt.node.addEventListener( TRANSITIONEND, transitionEndHandler, false );\n\n\t\t\t// safety net in case transitionend never fires\n\t\t\tcssTimeout = setTimeout( function () {\n\t\t\t\tchangedProperties = [];\n\t\t\t\tcssTransitionsDone();\n\t\t\t}, options.duration + ( options.delay || 0 ) + 50 );\n\t\t\tt.registerCompleteHandler( transitionDone );\n\n\t\t\tsetTimeout( function () {\n\t\t\t\tvar i = changedProperties.length;\n\t\t\t\tvar hash;\n\t\t\t\tvar originalValue;\n\t\t\t\tvar index;\n\t\t\t\tvar propertiesToTransitionInJs = [];\n\t\t\t\tvar prop;\n\t\t\t\tvar suffix;\n\t\t\t\tvar interpolator;\n\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tprop = changedProperties[i];\n\t\t\t\t\thash = hashPrefix + prop;\n\n\t\t\t\t\tif ( cssTiming && CSS_TRANSITIONS_ENABLED && !cannotUseCssTransitions[ hash ] ) {\n\t\t\t\t\t\tstyle[ prefix$1( prop ) ] = to[ prop ];\n\n\t\t\t\t\t\t// If we're not sure if CSS transitions are supported for\n\t\t\t\t\t\t// this tag/property combo, find out now\n\t\t\t\t\t\tif ( !canUseCssTransitions[ hash ] ) {\n\t\t\t\t\t\t\toriginalValue = t.getStyle( prop );\n\n\t\t\t\t\t\t\t// if this property is transitionable in this browser,\n\t\t\t\t\t\t\t// the current style will be different from the target style\n\t\t\t\t\t\t\tcanUseCssTransitions[ hash ] = ( t.getStyle( prop ) != to[ prop ] );\n\t\t\t\t\t\t\tcannotUseCssTransitions[ hash ] = !canUseCssTransitions[ hash ];\n\n\t\t\t\t\t\t\t// Reset, if we're going to use timers after all\n\t\t\t\t\t\t\tif ( cannotUseCssTransitions[ hash ] ) {\n\t\t\t\t\t\t\t\tstyle[ prefix$1( prop ) ] = originalValue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !cssTiming || !CSS_TRANSITIONS_ENABLED || cannotUseCssTransitions[ hash ] ) {\n\t\t\t\t\t\t// we need to fall back to timer-based stuff\n\t\t\t\t\t\tif ( originalValue === undefined ) {\n\t\t\t\t\t\t\toriginalValue = t.getStyle( prop );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// need to remove this from changedProperties, otherwise transitionEndHandler\n\t\t\t\t\t\t// will get confused\n\t\t\t\t\t\tindex = changedProperties.indexOf( prop );\n\t\t\t\t\t\tif ( index === -1 ) {\n\t\t\t\t\t\t\twarnIfDebug( 'Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!', { node: t.node });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tchangedProperties.splice( index, 1 );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// TODO Determine whether this property is animatable at all\n\n\t\t\t\t\t\tsuffix = /[^\\d]*$/.exec( to[ prop ] )[0];\n\t\t\t\t\t\tinterpolator = interpolate( parseFloat( originalValue ), parseFloat( to[ prop ] ) ) || ( function () { return to[ prop ]; } );\n\n\t\t\t\t\t\t// ...then kick off a timer-based transition\n\t\t\t\t\t\tpropertiesToTransitionInJs.push({\n\t\t\t\t\t\t\tname: prefix$1( prop ),\n\t\t\t\t\t\t\tinterpolator: interpolator,\n\t\t\t\t\t\t\tsuffix: suffix\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// javascript transitions\n\t\t\t\tif ( propertiesToTransitionInJs.length ) {\n\t\t\t\t\tvar easing;\n\n\t\t\t\t\tif ( typeof options.easing === 'string' ) {\n\t\t\t\t\t\teasing = t.ractive.easing[ options.easing ];\n\n\t\t\t\t\t\tif ( !easing ) {\n\t\t\t\t\t\t\twarnOnceIfDebug( missingPlugin( options.easing, 'easing' ) );\n\t\t\t\t\t\t\teasing = linear$1;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if ( typeof options.easing === 'function' ) {\n\t\t\t\t\t\teasing = options.easing;\n\t\t\t\t\t} else {\n\t\t\t\t\t\teasing = linear$1;\n\t\t\t\t\t}\n\n\t\t\t\t\tnew Ticker({\n\t\t\t\t\t\tduration: options.duration,\n\t\t\t\t\t\teasing: easing,\n\t\t\t\t\t\tstep: function step ( pos ) {\n\t\t\t\t\t\t\tvar i = propertiesToTransitionInJs.length;\n\t\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\t\tvar prop = propertiesToTransitionInJs[i];\n\t\t\t\t\t\t\t\tt.node.style[ prop.name ] = prop.interpolator( pos ) + prop.suffix;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcomplete: function complete () {\n\t\t\t\t\t\t\tjsTransitionsComplete = true;\n\t\t\t\t\t\t\tcheckComplete();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tjsTransitionsComplete = true;\n\t\t\t\t}\n\n\t\t\t\tif ( !changedProperties.length ) {\n\t\t\t\t\t// We need to cancel the transitionEndHandler, and deal with\n\t\t\t\t\t// the fact that it will never fire\n\t\t\t\t\tt.node.removeEventListener( TRANSITIONEND, transitionEndHandler, false );\n\t\t\t\t\tcssTransitionsComplete = true;\n\t\t\t\t\tcheckComplete();\n\t\t\t\t}\n\t\t\t}, 0 );\n\t\t}, options.delay || 0 );\n\t};\n}\n\nvar createTransitions$1 = createTransitions;\n\nfunction resetStyle ( node, style ) {\n\tif ( style ) {\n\t\tnode.setAttribute( 'style', style );\n\t} else {\n\t\t// Next line is necessary, to remove empty style attribute!\n\t\t// See http://stackoverflow.com/a/7167553\n\t\tnode.getAttribute( 'style' );\n\t\tnode.removeAttribute( 'style' );\n\t}\n}\n\nvar getComputedStyle = win && win.getComputedStyle;\nvar resolved = Promise.resolve();\n\nvar names = {\n\tt0: 'intro-outro',\n\tt1: 'intro',\n\tt2: 'outro'\n};\n\nvar Transition = function Transition ( options ) {\n\tthis.owner = options.owner || options.parentFragment.owner || findElement( options.parentFragment );\n\tthis.element = this.owner.attributeByName ? this.owner : findElement( options.parentFragment );\n\tthis.ractive = this.owner.ractive;\n\tthis.template = options.template;\n\tthis.parentFragment = options.parentFragment;\n\tthis.options = options;\n\tthis.onComplete = [];\n};\n\nTransition.prototype.animateStyle = function animateStyle ( style, value, options ) {\n\t\tvar this$1 = this;\n\n\tif ( arguments.length === 4 ) {\n\t\tthrow new Error( 't.animateStyle() returns a promise - use .then() instead of passing a callback' );\n\t}\n\n\t// Special case - page isn't visible. Don't animate anything, because\n\t// that way you'll never get CSS transitionend events\n\tif ( !visible ) {\n\t\tthis.setStyle( style, value );\n\t\treturn resolved;\n\t}\n\n\tvar to;\n\n\tif ( typeof style === 'string' ) {\n\t\tto = {};\n\t\tto[ style ] = value;\n\t} else {\n\t\tto = style;\n\n\t\t// shuffle arguments\n\t\toptions = value;\n\t}\n\n\t// As of 0.3.9, transition authors should supply an `option` object with\n\t// `duration` and `easing` properties (and optional `delay`), plus a\n\t// callback function that gets called after the animation completes\n\n\t// TODO remove this check in a future version\n\tif ( !options ) {\n\t\twarnOnceIfDebug( 'The \"%s\" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340', this.name );\n\t\toptions = this;\n\t}\n\n\treturn new Promise( function (fulfil) {\n\t\t// Edge case - if duration is zero, set style synchronously and complete\n\t\tif ( !options.duration ) {\n\t\t\tthis$1.setStyle( to );\n\t\t\tfulfil();\n\t\t\treturn;\n\t\t}\n\n\t\t// Get a list of the properties we're animating\n\t\tvar propertyNames = Object.keys( to );\n\t\tvar changedProperties = [];\n\n\t\t// Store the current styles\n\t\tvar computedStyle = getComputedStyle( this$1.node );\n\n\t\tvar i = propertyNames.length;\n\t\twhile ( i-- ) {\n\t\t\tvar prop = propertyNames[i];\n\t\t\tvar current = computedStyle[ prefix$1( prop ) ];\n\n\t\t\tif ( current === '0px' ) { current = 0; }\n\n\t\t\t// we need to know if we're actually changing anything\n\t\t\tif ( current != to[ prop ] ) { // use != instead of !==, so we can compare strings with numbers\n\t\t\t\tchangedProperties.push( prop );\n\n\t\t\t\t// make the computed style explicit, so we can animate where\n\t\t\t\t// e.g. height='auto'\n\t\t\t\tthis$1.node.style[ prefix$1( prop ) ] = current;\n\t\t\t}\n\t\t}\n\n\t\t// If we're not actually changing anything, the transitionend event\n\t\t// will never fire! So we complete early\n\t\tif ( !changedProperties.length ) {\n\t\t\tfulfil();\n\t\t\treturn;\n\t\t}\n\n\t\tcreateTransitions$1( this$1, to, options, changedProperties, fulfil );\n\t});\n};\n\nTransition.prototype.bind = function bind () {\n\tvar options = this.options;\n\tvar type = options.template && options.template.v;\n\tif ( type ) {\n\t\tif ( type === 't0' || type === 't1' ) { this.element.intro = this; }\n\t\tif ( type === 't0' || type === 't2' ) { this.element.outro = this; }\n\t\tthis.eventName = names[ type ];\n\t}\n\n\tvar ractive = this.owner.ractive;\n\n\tthis.name = options.name || options.template.n;\n\n\tif ( options.params ) {\n\t\tthis.params = options.params;\n\t}\n\n\tif ( typeof this.name === 'function' ) {\n\t\tthis._fn = this.name;\n\t\tthis.name = this._fn.name;\n\t} else {\n\t\tthis._fn = findInViewHierarchy( 'transitions', ractive, this.name );\n\t}\n\n\tif ( !this._fn ) {\n\t\twarnOnceIfDebug( missingPlugin( this.name, 'transition' ), { ractive: ractive });\n\t}\n\n\tsetupArgsFn( this, options.template );\n};\n\nTransition.prototype.getParams = function getParams () {\n\tif ( this.params ) { return this.params; }\n\n\t// get expression args if supplied\n\tif ( this.fn ) {\n\t\tvar values = resolveArgs( this, this.template, this.parentFragment ).map( function (model) {\n\t\t\tif ( !model ) { return undefined; }\n\n\t\t\treturn model.get();\n\t\t});\n\t\treturn this.fn.apply( this.ractive, values );\n\t}\n};\n\nTransition.prototype.getStyle = function getStyle ( props ) {\n\tvar computedStyle = getComputedStyle( this.node );\n\n\tif ( typeof props === 'string' ) {\n\t\tvar value = computedStyle[ prefix$1( props ) ];\n\t\treturn value === '0px' ? 0 : value;\n\t}\n\n\tif ( !Array.isArray( props ) ) {\n\t\tthrow new Error( 'Transition$getStyle must be passed a string, or an array of strings representing CSS properties' );\n\t}\n\n\tvar styles = {};\n\n\tvar i = props.length;\n\twhile ( i-- ) {\n\t\tvar prop = props[i];\n\t\tvar value$1 = computedStyle[ prefix$1( prop ) ];\n\n\t\tif ( value$1 === '0px' ) { value$1 = 0; }\n\t\tstyles[ prop ] = value$1;\n\t}\n\n\treturn styles;\n};\n\nTransition.prototype.processParams = function processParams ( params, defaults ) {\n\tif ( typeof params === 'number' ) {\n\t\tparams = { duration: params };\n\t}\n\n\telse if ( typeof params === 'string' ) {\n\t\tif ( params === 'slow' ) {\n\t\t\tparams = { duration: 600 };\n\t\t} else if ( params === 'fast' ) {\n\t\t\tparams = { duration: 200 };\n\t\t} else {\n\t\t\tparams = { duration: 400 };\n\t\t}\n\t} else if ( !params ) {\n\t\tparams = {};\n\t}\n\n\treturn Object.assign( {}, defaults, params );\n};\n\nTransition.prototype.registerCompleteHandler = function registerCompleteHandler ( fn ) {\n\taddToArray( this.onComplete, fn );\n};\n\nTransition.prototype.setStyle = function setStyle ( style, value ) {\n\t\tvar this$1 = this;\n\n\tif ( typeof style === 'string' ) {\n\t\tthis.node.style[ prefix$1( style ) ] = value;\n\t}\n\n\telse {\n\t\tvar prop;\n\t\tfor ( prop in style ) {\n\t\t\tif ( style.hasOwnProperty( prop ) ) {\n\t\t\t\tthis$1.node.style[ prefix$1( prop ) ] = style[ prop ];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn this;\n};\n\nTransition.prototype.shouldFire = function shouldFire ( type ) {\n\tif ( !this.ractive.transitionsEnabled ) { return false; }\n\n\t// check for noIntro and noOutro cases, which only apply when the owner ractive is rendering and unrendering, respectively\n\tif ( type === 'intro' && this.ractive.rendering && nearestProp( 'noIntro', this.ractive, true ) ) { return false; }\n\tif ( type === 'outro' && this.ractive.unrendering && nearestProp( 'noOutro', this.ractive, false ) ) { return false; }\n\n\tvar params = this.getParams(); // this is an array, the params object should be the first member\n\t// if there's not a parent element, this can't be nested, so roll on\n\tif ( !this.element.parent ) { return true; }\n\n\t// if there is a local param, it takes precedent\n\tif ( params && params[0] && 'nested' in params[0] ) {\n\t\tif ( params[0].nested !== false ) { return true; }\n\t} else { // use the nearest instance setting\n\t\t// find the nearest instance that actually has a nested setting\n\t\tif ( nearestProp( 'nestedTransitions', this.ractive ) !== false ) { return true; }\n\t}\n\n\t// check to see if this is actually a nested transition\n\tvar el = this.element.parent;\n\twhile ( el ) {\n\t\tif ( el[type] && el[type].starting ) { return false; }\n\t\tel = el.parent;\n\t}\n\n\treturn true;\n};\n\nTransition.prototype.start = function start () {\n\t\tvar this$1 = this;\n\n\tvar node = this.node = this.element.node;\n\tvar originalStyle = node.getAttribute( 'style' );\n\n\tvar completed;\n\tvar args = this.getParams();\n\n\t// create t.complete() - we don't want this on the prototype,\n\t// because we don't want `this` silliness when passing it as\n\t// an argument\n\tthis.complete = function (noReset) {\n\t\tthis$1.starting = false;\n\t\tif ( completed ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis$1.onComplete.forEach( function (fn) { return fn(); } );\n\t\tif ( !noReset && this$1.isIntro ) {\n\t\t\tresetStyle( node, originalStyle);\n\t\t}\n\n\t\tthis$1._manager.remove( this$1 );\n\n\t\tcompleted = true;\n\t};\n\n\t// If the transition function doesn't exist, abort\n\tif ( !this._fn ) {\n\t\tthis.complete();\n\t\treturn;\n\t}\n\n\tvar promise = this._fn.apply( this.ractive, [ this ].concat( args ) );\n\tif ( promise ) { promise.then( this.complete ); }\n};\n\nTransition.prototype.toString = function toString () { return ''; };\n\nTransition.prototype.unbind = function unbind () {\n\tif ( !this.element.attributes.unbinding ) {\n\t\tvar type = this.options && this.options.template && this.options.template.v;\n\t\tif ( type === 't0' || type === 't1' ) { this.element.intro = null; }\n\t\tif ( type === 't0' || type === 't2' ) { this.element.outro = null; }\n\t}\n};\n\nTransition.prototype.unregisterCompleteHandler = function unregisterCompleteHandler ( fn ) {\n\tremoveFromArray( this.onComplete, fn );\n};\n\nvar proto$4 = Transition.prototype;\nproto$4.destroyed = proto$4.render = proto$4.unrender = proto$4.update = noop;\n\nfunction nearestProp ( prop, ractive, rendering ) {\n\tvar instance = ractive;\n\twhile ( instance ) {\n\t\tif ( instance.hasOwnProperty( prop ) && ( rendering === undefined || rendering ? instance.rendering : instance.unrendering ) ) { return instance[ prop ]; }\n\t\tinstance = instance.component && instance.component.ractive;\n\t}\n\n\treturn ractive[ prop ];\n}\n\nvar elementCache = {};\n\nvar ieBug;\nvar ieBlacklist;\n\ntry {\n\tcreateElement( 'table' ).innerHTML = 'foo';\n} catch ( err ) {\n\tieBug = true;\n\n\tieBlacklist = {\n\t\tTABLE:  [ '<table class=\"x\">', '</table>' ],\n\t\tTHEAD:  [ '<table><thead class=\"x\">', '</thead></table>' ],\n\t\tTBODY:  [ '<table><tbody class=\"x\">', '</tbody></table>' ],\n\t\tTR:     [ '<table><tr class=\"x\">', '</tr></table>' ],\n\t\tSELECT: [ '<select class=\"x\">', '</select>' ]\n\t};\n}\n\nvar insertHtml = function ( html$$1, node ) {\n\tvar nodes = [];\n\n\t// render 0 and false\n\tif ( html$$1 == null || html$$1 === '' ) { return nodes; }\n\n\tvar container;\n\tvar wrapper;\n\tvar selectedOption;\n\n\tif ( ieBug && ( wrapper = ieBlacklist[ node.tagName ] ) ) {\n\t\tcontainer = element( 'DIV' );\n\t\tcontainer.innerHTML = wrapper[0] + html$$1 + wrapper[1];\n\t\tcontainer = container.querySelector( '.x' );\n\n\t\tif ( container.tagName === 'SELECT' ) {\n\t\t\tselectedOption = container.options[ container.selectedIndex ];\n\t\t}\n\t}\n\n\telse if ( node.namespaceURI === svg$1 ) {\n\t\tcontainer = element( 'DIV' );\n\t\tcontainer.innerHTML = '<svg class=\"x\">' + html$$1 + '</svg>';\n\t\tcontainer = container.querySelector( '.x' );\n\t}\n\n\telse if ( node.tagName === 'TEXTAREA' ) {\n\t\tcontainer = createElement( 'div' );\n\n\t\tif ( typeof container.textContent !== 'undefined' ) {\n\t\t\tcontainer.textContent = html$$1;\n\t\t} else {\n\t\t\tcontainer.innerHTML = html$$1;\n\t\t}\n\t}\n\n\telse {\n\t\tcontainer = element( node.tagName );\n\t\tcontainer.innerHTML = html$$1;\n\n\t\tif ( container.tagName === 'SELECT' ) {\n\t\t\tselectedOption = container.options[ container.selectedIndex ];\n\t\t}\n\t}\n\n\tvar child;\n\twhile ( child = container.firstChild ) {\n\t\tnodes.push( child );\n\t\tcontainer.removeChild( child );\n\t}\n\n\t// This is really annoying. Extracting <option> nodes from the\n\t// temporary container <select> causes the remaining ones to\n\t// become selected. So now we have to deselect them. IE8, you\n\t// amaze me. You really do\n\t// ...and now Chrome too\n\tvar i;\n\tif ( node.tagName === 'SELECT' ) {\n\t\ti = nodes.length;\n\t\twhile ( i-- ) {\n\t\t\tif ( nodes[i] !== selectedOption ) {\n\t\t\t\tnodes[i].selected = false;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn nodes;\n};\n\nfunction element ( tagName ) {\n\treturn elementCache[ tagName ] || ( elementCache[ tagName ] = createElement( tagName ) );\n}\n\nvar Triple = (function (Mustache$$1) {\n\tfunction Triple ( options ) {\n\t\tMustache$$1.call( this, options );\n\t}\n\n\tif ( Mustache$$1 ) Triple.__proto__ = Mustache$$1;\n\tTriple.prototype = Object.create( Mustache$$1 && Mustache$$1.prototype );\n\tTriple.prototype.constructor = Triple;\n\n\tTriple.prototype.detach = function detach () {\n\t\tvar docFrag = createDocumentFragment();\n\t\tif ( this.nodes ) { this.nodes.forEach( function (node) { return docFrag.appendChild( node ); } ); }\n\t\treturn docFrag;\n\t};\n\n\tTriple.prototype.find = function find ( selector ) {\n\t\tvar this$1 = this;\n\n\t\tvar len = this.nodes.length;\n\t\tvar i;\n\n\t\tfor ( i = 0; i < len; i += 1 ) {\n\t\t\tvar node = this$1.nodes[i];\n\n\t\t\tif ( node.nodeType !== 1 ) { continue; }\n\n\t\t\tif ( matches( node, selector ) ) { return node; }\n\n\t\t\tvar queryResult = node.querySelector( selector );\n\t\t\tif ( queryResult ) { return queryResult; }\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tTriple.prototype.findAll = function findAll ( selector, options ) {\n\t\tvar this$1 = this;\n\n\t\tvar result = options.result;\n\t\tvar len = this.nodes.length;\n\t\tvar i;\n\n\t\tfor ( i = 0; i < len; i += 1 ) {\n\t\t\tvar node = this$1.nodes[i];\n\n\t\t\tif ( node.nodeType !== 1 ) { continue; }\n\n\t\t\tif ( matches( node, selector ) ) { result.push( node ); }\n\n\t\t\tvar queryAllResult = node.querySelectorAll( selector );\n\t\t\tif ( queryAllResult ) {\n\t\t\t\tresult.push.apply( result, queryAllResult );\n\t\t\t}\n\t\t}\n\t};\n\n\tTriple.prototype.findComponent = function findComponent () {\n\t\treturn null;\n\t};\n\n\tTriple.prototype.firstNode = function firstNode () {\n\t\treturn this.rendered && this.nodes[0];\n\t};\n\n\tTriple.prototype.render = function render ( target, occupants ) {\n\t\tvar this$1 = this;\n\n\t\tvar parentNode = this.parentFragment.findParentNode();\n\n\t\tif ( !this.nodes ) {\n\t\t\tvar html = this.model ? this.model.get() : '';\n\t\t\tthis.nodes = insertHtml( html, this.parentFragment.findParentNode(), target );\n\t\t}\n\n\t\tvar nodes = this.nodes;\n\t\tvar anchor = this.parentFragment.findNextNode( this );\n\n\t\t// progressive enhancement\n\t\tif ( occupants ) {\n\t\t\tvar i = -1;\n\t\t\tvar next;\n\n\t\t\t// start with the first node that should be rendered\n\t\t\twhile ( occupants.length && ( next = this.nodes[ i + 1 ] ) ) {\n\t\t\t\tvar n = (void 0);\n\t\t\t\t// look through the occupants until a matching node is found\n\t\t\t\twhile ( n = occupants.shift() ) {\n\t\t\t\t\tvar t = n.nodeType;\n\n\t\t\t\t\tif ( t === next.nodeType && ( ( t === 1 && n.outerHTML === next.outerHTML ) || ( ( t === 3 || t === 8 ) && n.nodeValue === next.nodeValue ) ) ) {\n\t\t\t\t\t\tthis$1.nodes.splice( ++i, 1, n ); // replace the generated node with the existing one\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttarget.removeChild( n ); // remove the non-matching existing node\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( i >= 0 ) {\n\t\t\t\t// update the list of remaining nodes to attach, excluding any that were replaced by existing nodes\n\t\t\t\tnodes = this.nodes.slice( i );\n\t\t\t}\n\n\t\t\t// update the anchor to be the next occupant\n\t\t\tif ( occupants.length ) { anchor = occupants[0]; }\n\t\t}\n\n\t\t// attach any remainging nodes to the parent\n\t\tif ( nodes.length ) {\n\t\t\tvar frag = createDocumentFragment();\n\t\t\tnodes.forEach( function (n) { return frag.appendChild( n ); } );\n\n\t\t\tif ( anchor ) {\n\t\t\t\tanchor.parentNode.insertBefore( frag, anchor );\n\t\t\t} else {\n\t\t\t\tparentNode.appendChild( frag );\n\t\t\t}\n\t\t}\n\n\t\tthis.rendered = true;\n\t};\n\n\tTriple.prototype.toString = function toString () {\n\t\tvar value = this.model && this.model.get();\n\t\tvalue = value != null ? '' + value : '';\n\n\t\treturn inAttribute() ? decodeCharacterReferences( value ) : value;\n\t};\n\n\tTriple.prototype.unrender = function unrender () {\n\t\tif ( this.nodes ) { this.nodes.forEach( function (node) { return detachNode( node ); } ); }\n\t\tthis.rendered = false;\n\t\tthis.nodes = null;\n\t};\n\n\tTriple.prototype.update = function update () {\n\t\tif ( this.rendered && this.dirty ) {\n\t\t\tthis.dirty = false;\n\n\t\t\tthis.unrender();\n\t\t\tthis.render();\n\t\t} else {\n\t\t\t// make sure to reset the dirty flag even if not rendered\n\t\t\tthis.dirty = false;\n\t\t}\n\t};\n\n\treturn Triple;\n}(Mustache));\n\n// finds the component constructor in the registry or view hierarchy registries\nfunction getComponentConstructor ( ractive, name ) {\n\tvar instance = findInstance( 'components', ractive, name );\n\tvar Component;\n\n\tif ( instance ) {\n\t\tComponent = instance.components[ name ];\n\n\t\t// best test we have for not Ractive.extend\n\t\tif ( Component && !Component._Parent ) {\n\t\t\t// function option, execute and store for reset\n\t\t\tvar fn = Component.bind( instance );\n\t\t\tfn.isOwner = instance.components.hasOwnProperty( name );\n\t\t\tComponent = fn();\n\n\t\t\tif ( !Component ) {\n\t\t\t\twarnIfDebug( noRegistryFunctionReturn, name, 'component', 'component', { ractive: ractive });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( typeof Component === 'string' ) {\n\t\t\t\t// allow string lookup\n\t\t\t\tComponent = getComponentConstructor( ractive, Component );\n\t\t\t}\n\n\t\t\tComponent._fn = fn;\n\t\t\tinstance.components[ name ] = Component;\n\t\t}\n\t}\n\n\treturn Component;\n}\n\n//import Yielder from './Yielder';\nvar constructors = {};\nconstructors[ ALIAS ] = Alias;\nconstructors[ ANCHOR ] = Component;\nconstructors[ DOCTYPE ] = Doctype;\nconstructors[ INTERPOLATOR ] = Interpolator;\nconstructors[ PARTIAL ] = Partial;\nconstructors[ SECTION ] = Section;\nconstructors[ TRIPLE ] = Triple;\nconstructors[ YIELDER ] = Partial;\n\nconstructors[ ATTRIBUTE ] = Attribute;\nconstructors[ BINDING_FLAG ] = BindingFlag;\nconstructors[ DECORATOR ] = Decorator;\nconstructors[ EVENT ] = EventDirective;\nconstructors[ TRANSITION ] = Transition;\n\nvar specialElements = {\n\tdoctype: Doctype,\n\tform: Form,\n\tinput: Input,\n\toption: Option,\n\tselect: Select,\n\ttextarea: Textarea\n};\n\nfunction createItem ( options ) {\n\tif ( typeof options.template === 'string' ) {\n\t\treturn new Text( options );\n\t}\n\n\tif ( options.template.t === ELEMENT ) {\n\t\t// could be component or element\n\t\tvar ComponentConstructor = getComponentConstructor( options.parentFragment.ractive, options.template.e );\n\t\tif ( ComponentConstructor ) {\n\t\t\treturn new Component( options, ComponentConstructor );\n\t\t}\n\n\t\tvar tagName = options.template.e.toLowerCase();\n\n\t\tvar ElementConstructor = specialElements[ tagName ] || Element;\n\t\treturn new ElementConstructor( options );\n\t}\n\n\tvar Item;\n\n\t// component mappings are a special case of attribute\n\tif ( options.template.t === ATTRIBUTE ) {\n\t\tvar el = options.owner;\n\t\tif ( !el || ( el.type !== ANCHOR && el.type !== COMPONENT && el.type !== ELEMENT ) ) {\n\t\t\tel = findElement( options.parentFragment );\n\t\t}\n\t\toptions.element = el;\n\n\t\tItem = el.type === COMPONENT || el.type === ANCHOR ? Mapping : Attribute;\n\t} else {\n\t\tItem = constructors[ options.template.t ];\n\t}\n\n\tif ( !Item ) { throw new Error( (\"Unrecognised item type \" + (options.template.t)) ); }\n\n\treturn new Item( options );\n}\n\n// TODO all this code needs to die\nfunction processItems ( items, values, guid, counter ) {\n\tif ( counter === void 0 ) counter = 0;\n\n\treturn items.map( function (item) {\n\t\tif ( item.type === TEXT ) {\n\t\t\treturn item.template;\n\t\t}\n\n\t\tif ( item.fragment ) {\n\t\t\tif ( item.fragment.iterations ) {\n\t\t\t\treturn item.fragment.iterations.map( function (fragment) {\n\t\t\t\t\treturn processItems( fragment.items, values, guid, counter );\n\t\t\t\t}).join( '' );\n\t\t\t} else {\n\t\t\t\treturn processItems( item.fragment.items, values, guid, counter );\n\t\t\t}\n\t\t}\n\n\t\tvar placeholderId = guid + \"-\" + (counter++);\n\t\tvar model = item.model || item.newModel;\n\n\t\tvalues[ placeholderId ] = model ?\n\t\t\tmodel.wrapper ?\n\t\t\t\tmodel.wrapperValue :\n\t\t\t\tmodel.get() :\n\t\t\tundefined;\n\n\t\treturn '${' + placeholderId + '}';\n\t}).join( '' );\n}\n\nfunction unrenderAndDestroy$1 ( item ) {\n\titem.unrender( true );\n}\n\nvar Fragment = function Fragment ( options ) {\n\tthis.owner = options.owner; // The item that owns this fragment - an element, section, partial, or attribute\n\n\tthis.isRoot = !options.owner.parentFragment;\n\tthis.parent = this.isRoot ? null : this.owner.parentFragment;\n\tthis.ractive = options.ractive || ( this.isRoot ? options.owner : this.parent.ractive );\n\n\tthis.componentParent = ( this.isRoot && this.ractive.component ) ? this.ractive.component.parentFragment : null;\n\tthis.delegate = ( this.parent ? this.parent.delegate : ( this.componentParent && this.componentParent.delegate ) ) ||\n\t\t( this.owner.containerFragment && this.owner.containerFragment.delegate );\n\n\tthis.context = null;\n\tthis.rendered = false;\n\n\t// encapsulated styles should be inherited until they get applied by an element\n\tthis.cssIds = 'cssIds' in options ? options.cssIds : ( this.parent ? this.parent.cssIds : null );\n\n\tthis.dirty = false;\n\tthis.dirtyValue = true; // used for attribute values\n\n\tthis.template = options.template || [];\n\tthis.createItems();\n};\n\nFragment.prototype.bind = function bind$1 ( context ) {\n\tthis.context = context;\n\tthis.items.forEach( bind );\n\tthis.bound = true;\n\n\t// in rare cases, a forced resolution (or similar) will cause the\n\t// fragment to be dirty before it's even finished binding. In those\n\t// cases we update immediately\n\tif ( this.dirty ) { this.update(); }\n\n\treturn this;\n};\n\nFragment.prototype.bubble = function bubble () {\n\tthis.dirtyValue = true;\n\n\tif ( !this.dirty ) {\n\t\tthis.dirty = true;\n\n\t\tif ( this.isRoot ) { // TODO encapsulate 'is component root, but not overall root' check?\n\t\t\tif ( this.ractive.component ) {\n\t\t\t\tthis.ractive.component.bubble();\n\t\t\t} else if ( this.bound ) {\n\t\t\t\trunloop.addFragment( this );\n\t\t\t}\n\t\t} else {\n\t\t\tthis.owner.bubble( this.index );\n\t\t}\n\t}\n};\n\nFragment.prototype.createItems = function createItems () {\n\t\tvar this$1 = this;\n\n\t// this is a hot code path\n\tvar max = this.template.length;\n\tthis.items = [];\n\tfor ( var i = 0; i < max; i++ ) {\n\t\tthis$1.items[i] = createItem({ parentFragment: this$1, template: this$1.template[i], index: i });\n\t}\n};\n\nFragment.prototype.destroyed = function destroyed$1 () {\n\tthis.items.forEach( destroyed );\n};\n\nFragment.prototype.detach = function detach () {\n\tvar docFrag = createDocumentFragment();\n\tvar xs = this.items;\n\tvar len = xs.length;\n\tfor ( var i = 0; i < len; i++ ) {\n\t\tdocFrag.appendChild( xs[i].detach() );\n\t}\n\treturn docFrag;\n};\n\nFragment.prototype.find = function find ( selector, options ) {\n\treturn findMap( this.items, function (i) { return i.find( selector, options ); } );\n};\n\nFragment.prototype.findAll = function findAll ( selector, options ) {\n\tif ( this.items ) {\n\t\tthis.items.forEach( function (i) { return i.findAll && i.findAll( selector, options ); } );\n\t}\n};\n\nFragment.prototype.findComponent = function findComponent ( name, options ) {\n\treturn findMap( this.items, function (i) { return i.findComponent( name, options ); } );\n};\n\nFragment.prototype.findAllComponents = function findAllComponents ( name, options ) {\n\tif ( this.items ) {\n\t\tthis.items.forEach( function (i) { return i.findAllComponents && i.findAllComponents( name, options ); } );\n\t}\n};\n\nFragment.prototype.findContext = function findContext () {\n\tvar fragment = this;\n\twhile ( fragment && !fragment.context ) { fragment = fragment.parent; }\n\tif ( !fragment ) { return this.ractive.viewmodel; }\n\telse { return fragment.context; }\n};\n\nFragment.prototype.findNextNode = function findNextNode ( item ) {\n\t\tvar this$1 = this;\n\n\t// search for the next node going forward\n\tif ( item ) {\n\t\tfor ( var i = item.index + 1; i < this.items.length; i++ ) {\n\t\t\tif ( !this$1.items[ i ] ) { continue; }\n\n\t\t\tvar node = this$1.items[ i ].firstNode( true );\n\t\t\tif ( node ) { return node; }\n\t\t}\n\t}\n\n\t// if this is the root fragment, and there are no more items,\n\t// it means we're at the end...\n\tif ( this.isRoot ) {\n\t\tif ( this.ractive.component ) {\n\t\t\treturn this.ractive.component.parentFragment.findNextNode( this.ractive.component );\n\t\t}\n\n\t\t// TODO possible edge case with other content\n\t\t// appended to this.ractive.el?\n\t\treturn null;\n\t}\n\n\tif ( this.parent ) { return this.owner.findNextNode( this ); } // the argument is in case the parent is a RepeatedFragment\n};\n\nFragment.prototype.findParentNode = function findParentNode () {\n\tvar fragment = this;\n\n\tdo {\n\t\tif ( fragment.owner.type === ELEMENT ) {\n\t\t\treturn fragment.owner.node;\n\t\t}\n\n\t\tif ( fragment.isRoot && !fragment.ractive.component ) { // TODO encapsulate check\n\t\t\treturn fragment.ractive.el;\n\t\t}\n\n\t\tif ( fragment.owner.type === YIELDER ) {\n\t\t\tfragment = fragment.owner.containerFragment;\n\t\t} else {\n\t\t\tfragment = fragment.componentParent || fragment.parent; // TODO ugh\n\t\t}\n\t} while ( fragment );\n\n\tthrow new Error( 'Could not find parent node' ); // TODO link to issue tracker\n};\n\nFragment.prototype.findRepeatingFragment = function findRepeatingFragment () {\n\tvar fragment = this;\n\t// TODO better check than fragment.parent.iterations\n\twhile ( ( fragment.parent || fragment.componentParent ) && !fragment.isIteration ) {\n\t\tfragment = fragment.parent || fragment.componentParent;\n\t}\n\n\treturn fragment;\n};\n\nFragment.prototype.firstNode = function firstNode ( skipParent ) {\n\tvar node = findMap( this.items, function (i) { return i.firstNode( true ); } );\n\tif ( node ) { return node; }\n\tif ( skipParent ) { return null; }\n\n\treturn this.parent.findNextNode( this.owner );\n};\n\nFragment.prototype.rebind = function rebind ( next ) {\n\tthis.context = next;\n};\n\nFragment.prototype.render = function render$$1 ( target, occupants ) {\n\tif ( this.rendered ) { throw new Error( 'Fragment is already rendered!' ); }\n\tthis.rendered = true;\n\n\tvar xs = this.items;\n\tvar len = xs.length;\n\tfor ( var i = 0; i < len; i++ ) {\n\t\txs[i].render( target, occupants );\n\t}\n};\n\nFragment.prototype.resetTemplate = function resetTemplate ( template ) {\n\tvar wasBound = this.bound;\n\tvar wasRendered = this.rendered;\n\n\t// TODO ensure transitions are disabled globally during reset\n\n\tif ( wasBound ) {\n\t\tif ( wasRendered ) { this.unrender( true ); }\n\t\tthis.unbind();\n\t}\n\n\tthis.template = template;\n\tthis.createItems();\n\n\tif ( wasBound ) {\n\t\tthis.bind( this.context );\n\n\t\tif ( wasRendered ) {\n\t\t\tvar parentNode = this.findParentNode();\n\t\t\tvar anchor = this.findNextNode();\n\n\t\t\tif ( anchor ) {\n\t\t\t\tvar docFrag = createDocumentFragment();\n\t\t\t\tthis.render( docFrag );\n\t\t\t\tparentNode.insertBefore( docFrag, anchor );\n\t\t\t} else {\n\t\t\t\tthis.render( parentNode );\n\t\t\t}\n\t\t}\n\t}\n};\n\nFragment.prototype.shuffled = function shuffled$1 () {\n\tthis.items.forEach( shuffled );\n};\n\nFragment.prototype.toString = function toString$1$$1 ( escape ) {\n\treturn this.items.map( escape ? toEscapedString : toString$1 ).join( '' );\n};\n\nFragment.prototype.unbind = function unbind$1 () {\n\tthis.context = null;\n\tthis.items.forEach( unbind );\n\tthis.bound = false;\n\n\treturn this;\n};\n\nFragment.prototype.unrender = function unrender$1 ( shouldDestroy ) {\n\tthis.items.forEach( shouldDestroy ? unrenderAndDestroy$1 : unrender );\n\tthis.rendered = false;\n};\n\nFragment.prototype.update = function update$1 () {\n\tif ( this.dirty ) {\n\t\tif ( !this.updating ) {\n\t\t\tthis.dirty = false;\n\t\t\tthis.updating = true;\n\t\t\tthis.items.forEach( update );\n\t\t\tthis.updating = false;\n\t\t} else if ( this.isRoot ) {\n\t\t\trunloop.addFragmentToRoot( this );\n\t\t}\n\t}\n};\n\nFragment.prototype.valueOf = function valueOf () {\n\tif ( this.items.length === 1 ) {\n\t\treturn this.items[0].valueOf();\n\t}\n\n\tif ( this.dirtyValue ) {\n\t\tvar values = {};\n\t\tvar source = processItems( this.items, values, this.ractive._guid );\n\t\tvar parsed = parseJSON( source, values );\n\n\t\tthis.value = parsed ?\n\t\t\tparsed.value :\n\t\t\tthis.toString();\n\n\t\tthis.dirtyValue = false;\n\t}\n\n\treturn this.value;\n};\n\nFragment.prototype.getContext = getContext;\n\nfunction getChildQueue ( queue, ractive ) {\n\treturn queue[ ractive._guid ] || ( queue[ ractive._guid ] = [] );\n}\n\nfunction fire ( hookQueue, ractive ) {\n\tvar childQueue = getChildQueue( hookQueue.queue, ractive );\n\n\thookQueue.hook.fire( ractive );\n\n\t// queue is \"live\" because components can end up being\n\t// added while hooks fire on parents that modify data values.\n\twhile ( childQueue.length ) {\n\t\tfire( hookQueue, childQueue.shift() );\n\t}\n\n\tdelete hookQueue.queue[ ractive._guid ];\n}\n\nvar HookQueue = function HookQueue ( event ) {\n\tthis.hook = new Hook( event );\n\tthis.inProcess = {};\n\tthis.queue = {};\n};\n\nHookQueue.prototype.begin = function begin ( ractive ) {\n\tthis.inProcess[ ractive._guid ] = true;\n};\n\nHookQueue.prototype.end = function end ( ractive ) {\n\tvar parent = ractive.parent;\n\n\t// If this is *isn't* a child of a component that's in process,\n\t// it should call methods or fire at this point\n\tif ( !parent || !this.inProcess[ parent._guid ] ) {\n\t\tfire( this, ractive );\n\t}\n\t// elsewise, handoff to parent to fire when ready\n\telse {\n\t\tgetChildQueue( this.queue, parent ).push( ractive );\n\t}\n\n\tdelete this.inProcess[ ractive._guid ];\n};\n\nvar configHook = new Hook( 'config' );\nvar initHook = new HookQueue( 'init' );\n\nfunction initialise ( ractive, userOptions, options ) {\n\tObject.keys( ractive.viewmodel.computations ).forEach( function (key) {\n\t\tvar computation = ractive.viewmodel.computations[ key ];\n\n\t\tif ( ractive.viewmodel.value.hasOwnProperty( key ) ) {\n\t\t\tcomputation.set( ractive.viewmodel.value[ key ] );\n\t\t}\n\t});\n\n\t// set up event subscribers\n\tsubscribe( ractive, userOptions, 'on' );\n\n\t// init config from Parent and options\n\tconfig.init( ractive.constructor, ractive, userOptions );\n\n\tconfigHook.fire( ractive );\n\n\t// general config done, set up observers\n\tsubscribe( ractive, userOptions, 'observe' );\n\n\tinitHook.begin( ractive );\n\n\tvar fragment = ractive.fragment = createFragment( ractive, options );\n\tif ( fragment ) { fragment.bind( ractive.viewmodel ); }\n\n\tinitHook.end( ractive );\n\n\tif ( fragment ) {\n\t\t// render automatically ( if `el` is specified )\n\t\tvar el = getElement( ractive.el || ractive.target );\n\t\tif ( el ) {\n\t\t\tvar promise = ractive.render( el, ractive.append );\n\n\t\t\tif ( Ractive.DEBUG_PROMISES ) {\n\t\t\t\tpromise.catch( function (err) {\n\t\t\t\t\twarnOnceIfDebug( 'Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\\n  Ractive.DEBUG_PROMISES = false;' );\n\t\t\t\t\twarnIfDebug( 'An error happened during rendering', { ractive: ractive });\n\t\t\t\t\tlogIfDebug( err );\n\n\t\t\t\t\tthrow err;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction createFragment ( ractive, options ) {\n\tif ( options === void 0 ) options = {};\n\n\tif ( ractive.template ) {\n\t\tvar cssIds;\n\n\t\tif ( options.cssIds || ractive.cssId ) {\n\t\t\tcssIds = options.cssIds ? options.cssIds.slice() : [];\n\n\t\t\tif ( ractive.cssId ) {\n\t\t\t\tcssIds.push( ractive.cssId );\n\t\t\t}\n\t\t}\n\n\t\treturn new Fragment({\n\t\t\towner: ractive,\n\t\t\ttemplate: ractive.template,\n\t\t\tcssIds: cssIds\n\t\t});\n\t}\n}\n\nfunction subscribe ( instance, options, type ) {\n\tvar subs = ( instance.constructor[ (\"_\" + type) ] || [] ).concat( toPairs( options[ type ] || [] ) );\n\tvar single = type === 'on' ? 'once' : (type + \"Once\");\n\n\tsubs.forEach( function (ref) {\n\t\tvar target = ref[0];\n\t\tvar config$$1 = ref[1];\n\n\t\tif ( typeof config$$1 === 'function' ) {\n\t\t\tinstance[type]( target, config$$1 );\n\t\t} else if ( typeof config$$1 === 'object' && typeof config$$1.handler === 'function' ) {\n\t\t\tinstance[ config$$1.once ? single : type ]( target, config$$1.handler, config$$1 );\n\t\t}\n\t});\n}\n\nvar renderHook = new Hook( 'render' );\nvar completeHook = new Hook( 'complete' );\n\nfunction render$1 ( ractive, target, anchor, occupants ) {\n\t// set a flag to let any transitions know that this instance is currently rendering\n\tractive.rendering = true;\n\n\tvar promise = runloop.start( ractive, true );\n\trunloop.scheduleTask( function () { return renderHook.fire( ractive ); }, true );\n\n\tif ( ractive.fragment.rendered ) {\n\t\tthrow new Error( 'You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first' );\n\t}\n\n\tif ( ractive.destroyed ) {\n\t\tractive.destroyed = false;\n\t\tractive.fragment = createFragment( ractive ).bind( ractive.viewmodel );\n\t}\n\n\tanchor = getElement( anchor ) || ractive.anchor;\n\n\tractive.el = ractive.target = target;\n\tractive.anchor = anchor;\n\n\t// ensure encapsulated CSS is up-to-date\n\tif ( ractive.cssId ) { applyCSS(); }\n\n\tif ( target ) {\n\t\t( target.__ractive_instances__ || ( target.__ractive_instances__ = [] ) ).push( ractive );\n\n\t\tif ( anchor ) {\n\t\t\tvar docFrag = doc.createDocumentFragment();\n\t\t\tractive.fragment.render( docFrag );\n\t\t\ttarget.insertBefore( docFrag, anchor );\n\t\t} else {\n\t\t\tractive.fragment.render( target, occupants );\n\t\t}\n\t}\n\n\trunloop.end();\n\tractive.rendering = false;\n\n\treturn promise.then( function () {\n\t\tif (ractive.torndown) { return; }\n\n\t\tcompleteHook.fire( ractive );\n\t});\n}\n\nfunction Ractive$render ( target, anchor ) {\n\tif ( this.torndown ) {\n\t\twarnIfDebug( 'ractive.render() was called on a Ractive instance that was already torn down' );\n\t\treturn Promise.resolve();\n\t}\n\n\ttarget = getElement( target ) || this.el;\n\n\tif ( !this.append && target ) {\n\t\t// Teardown any existing instances *before* trying to set up the new one -\n\t\t// avoids certain weird bugs\n\t\tvar others = target.__ractive_instances__;\n\t\tif ( others ) { others.forEach( teardown ); }\n\n\t\t// make sure we are the only occupants\n\t\tif ( !this.enhance ) {\n\t\t\ttarget.innerHTML = ''; // TODO is this quicker than removeChild? Initial research inconclusive\n\t\t}\n\t}\n\n\tvar occupants = this.enhance ? toArray( target.childNodes ) : null;\n\tvar promise = render$1( this, target, anchor, occupants );\n\n\tif ( occupants ) {\n\t\twhile ( occupants.length ) { target.removeChild( occupants.pop() ); }\n\t}\n\n\treturn promise;\n}\n\nvar shouldRerender = [ 'template', 'partials', 'components', 'decorators', 'events' ];\n\nvar completeHook$1 = new Hook( 'complete' );\nvar resetHook = new Hook( 'reset' );\nvar renderHook$1 = new Hook( 'render' );\nvar unrenderHook = new Hook( 'unrender' );\n\nfunction Ractive$reset ( data ) {\n\tdata = data || {};\n\n\tif ( typeof data !== 'object' ) {\n\t\tthrow new Error( 'The reset method takes either no arguments, or an object containing new data' );\n\t}\n\n\t// TEMP need to tidy this up\n\tdata = dataConfigurator.init( this.constructor, this, { data: data });\n\n\tvar promise = runloop.start( this, true );\n\n\t// If the root object is wrapped, try and use the wrapper's reset value\n\tvar wrapper = this.viewmodel.wrapper;\n\tif ( wrapper && wrapper.reset ) {\n\t\tif ( wrapper.reset( data ) === false ) {\n\t\t\t// reset was rejected, we need to replace the object\n\t\t\tthis.viewmodel.set( data );\n\t\t}\n\t} else {\n\t\tthis.viewmodel.set( data );\n\t}\n\n\t// reset config items and track if need to rerender\n\tvar changes = config.reset( this );\n\tvar rerender;\n\n\tvar i = changes.length;\n\twhile ( i-- ) {\n\t\tif ( shouldRerender.indexOf( changes[i] ) > -1 ) {\n\t\t\trerender = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif ( rerender ) {\n\t\tunrenderHook.fire( this );\n\t\tthis.fragment.resetTemplate( this.template );\n\t\trenderHook$1.fire( this );\n\t\tcompleteHook$1.fire( this );\n\t}\n\n\trunloop.end();\n\n\tresetHook.fire( this, data );\n\n\treturn promise;\n}\n\nfunction collect( source, name, attr, dest ) {\n\tsource.forEach( function (item) {\n\t\t// queue to rerender if the item is a partial and the current name matches\n\t\tif ( item.type === PARTIAL && ( item.refName ===  name || item.name === name ) ) {\n\t\t\titem.inAttribute = attr;\n\t\t\tdest.push( item );\n\t\t\treturn; // go no further\n\t\t}\n\n\t\t// if it has a fragment, process its items\n\t\tif ( item.fragment ) {\n\t\t\tcollect( item.fragment.iterations || item.fragment.items, name, attr, dest );\n\t\t}\n\n\t\t// or if it is itself a fragment, process its items\n\t\telse if ( Array.isArray( item.items ) ) {\n\t\t\tcollect( item.items, name, attr, dest );\n\t\t}\n\n\t\t// or if it is a component, step in and process its items\n\t\telse if ( item.type === COMPONENT && item.instance ) {\n\t\t\t// ...unless the partial is shadowed\n\t\t\tif ( item.instance.partials[ name ] ) { return; }\n\t\t\tcollect( item.instance.fragment.items, name, attr, dest );\n\t\t}\n\n\t\t// if the item is an element, process its attributes too\n\t\tif ( item.type === ELEMENT ) {\n\t\t\tif ( Array.isArray( item.attributes ) ) {\n\t\t\t\tcollect( item.attributes, name, true, dest );\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction forceResetTemplate ( partial ) {\n\tpartial.forceResetTemplate();\n}\n\nvar resetPartial = function ( name, partial ) {\n\tvar collection = [];\n\tcollect( this.fragment.items, name, false, collection );\n\n\tvar promise = runloop.start( this, true );\n\n\tthis.partials[ name ] = partial;\n\tcollection.forEach( forceResetTemplate );\n\n\trunloop.end();\n\n\treturn promise;\n};\n\n// TODO should resetTemplate be asynchronous? i.e. should it be a case\n// of outro, update template, intro? I reckon probably not, since that\n// could be achieved with unrender-resetTemplate-render. Also, it should\n// conceptually be similar to resetPartial, which couldn't be async\n\nfunction Ractive$resetTemplate ( template ) {\n\ttemplateConfigurator.init( null, this, { template: template });\n\n\tvar transitionsEnabled = this.transitionsEnabled;\n\tthis.transitionsEnabled = false;\n\n\t// Is this is a component, we need to set the `shouldDestroy`\n\t// flag, otherwise it will assume by default that a parent node\n\t// will be detached, and therefore it doesn't need to bother\n\t// detaching its own nodes\n\tvar component = this.component;\n\tif ( component ) { component.shouldDestroy = true; }\n\tthis.unrender();\n\tif ( component ) { component.shouldDestroy = false; }\n\n\tvar promise = runloop.start();\n\n\t// remove existing fragment and create new one\n\tthis.fragment.unbind().unrender( true );\n\n\tthis.fragment = new Fragment({\n\t\ttemplate: this.template,\n\t\troot: this,\n\t\towner: this\n\t});\n\n\tvar docFrag = createDocumentFragment();\n\tthis.fragment.bind( this.viewmodel ).render( docFrag );\n\n\t// if this is a component, its el may not be valid, so find a\n\t// target based on the component container\n\tif ( component && !component.external ) {\n\t\tthis.fragment.findParentNode().insertBefore( docFrag, component.findNextNode() );\n\t} else {\n\t\tthis.el.insertBefore( docFrag, this.anchor );\n\t}\n\n\trunloop.end();\n\n\tthis.transitionsEnabled = transitionsEnabled;\n\n\treturn promise;\n}\n\nvar reverse = makeArrayMethod( 'reverse' ).path;\n\nfunction Ractive$set ( keypath, value, options ) {\n\tvar ractive = this;\n\n\tvar opts = typeof keypath === 'object' ? value : options;\n\n\treturn set( ractive, build( ractive, keypath, value ), opts );\n}\n\nvar shift = makeArrayMethod( 'shift' ).path;\n\nvar sort = makeArrayMethod( 'sort' ).path;\n\nvar splice = makeArrayMethod( 'splice' ).path;\n\nfunction Ractive$subtract ( keypath, d, options ) {\n\tvar num = typeof d === 'number' ? -d : -1;\n\tvar opts = typeof d === 'object' ? d : options;\n\treturn add( this, keypath, num, opts );\n}\n\nfunction Ractive$toggle ( keypath, options ) {\n\tif ( typeof keypath !== 'string' ) {\n\t\tthrow new TypeError( badArguments );\n\t}\n\n\treturn set( this, gather( this, keypath ).map( function (m) { return [ m, !m.get() ]; } ), options );\n}\n\nfunction Ractive$toCSS() {\n\tvar cssIds = [ this.cssId ].concat( this.findAllComponents().map( function (c) { return c.cssId; } ) );\n\tvar uniqueCssIds = Object.keys(cssIds.reduce( function ( ids, id ) { return (ids[id] = true, ids); }, {}));\n\treturn getCSS( uniqueCssIds );\n}\n\nfunction Ractive$toHTML () {\n\treturn this.fragment.toString( true );\n}\n\nfunction toText () {\n\treturn this.fragment.toString( false );\n}\n\nfunction Ractive$transition ( name, node, params ) {\n\n\tif ( node instanceof HTMLElement ) {\n\t\t// good to go\n\t}\n\telse if ( isObject( node ) ) {\n\t\t// omitted, use event node\n\t\tparams = node;\n\t}\n\n\t// if we allow query selector, then it won't work\n\t// simple params like \"fast\"\n\n\t// else if ( typeof node === 'string' ) {\n\t// \t// query selector\n\t// \tnode = this.find( node )\n\t// }\n\n\tnode = node || this.event.node;\n\n\tif ( !node || !node._ractive ) {\n\t\tfatal( (\"No node was supplied for transition \" + name) );\n\t}\n\n\tparams = params || {};\n\tvar owner = node._ractive.proxy;\n\tvar transition = new Transition({ owner: owner, parentFragment: owner.parentFragment, name: name, params: params });\n\ttransition.bind();\n\n\tvar promise = runloop.start( this, true );\n\trunloop.registerTransition( transition );\n\trunloop.end();\n\n\tpromise.then( function () { return transition.unbind(); } );\n\treturn promise;\n}\n\nfunction unlink( here ) {\n\tvar promise = runloop.start();\n\tthis.viewmodel.joinAll( splitKeypath( here ), { lastLink: false } ).unlink();\n\trunloop.end();\n\treturn promise;\n}\n\nvar unrenderHook$1 = new Hook( 'unrender' );\n\nfunction Ractive$unrender () {\n\tif ( !this.fragment.rendered ) {\n\t\twarnIfDebug( 'ractive.unrender() was called on a Ractive instance that was not rendered' );\n\t\treturn Promise.resolve();\n\t}\n\n\tthis.unrendering = true;\n\tvar promise = runloop.start( this, true );\n\n\t// If this is a component, and the component isn't marked for destruction,\n\t// don't detach nodes from the DOM unnecessarily\n\tvar shouldDestroy = !this.component || ( this.component.anchor || {} ).shouldDestroy || this.component.shouldDestroy || this.shouldDestroy;\n\tthis.fragment.unrender( shouldDestroy );\n\tif ( shouldDestroy ) { this.destroyed = true; }\n\n\tremoveFromArray( this.el.__ractive_instances__, this );\n\n\tunrenderHook$1.fire( this );\n\n\trunloop.end();\n\tthis.unrendering = false;\n\n\treturn promise;\n}\n\nvar unshift = makeArrayMethod( 'unshift' ).path;\n\nfunction Ractive$updateModel ( keypath, cascade ) {\n\tvar promise = runloop.start( this, true );\n\n\tif ( !keypath ) {\n\t\tthis.viewmodel.updateFromBindings( true );\n\t} else {\n\t\tthis.viewmodel.joinAll( splitKeypath( keypath ) ).updateFromBindings( cascade !== false );\n\t}\n\n\trunloop.end();\n\n\treturn promise;\n}\n\nvar RactiveProto = {\n\tadd: Ractive$add,\n\tanimate: Ractive$animate,\n\tattachChild: attachChild,\n\tdetach: Ractive$detach,\n\tdetachChild: detachChild,\n\tfind: Ractive$find,\n\tfindAll: Ractive$findAll,\n\tfindAllComponents: Ractive$findAllComponents,\n\tfindComponent: Ractive$findComponent,\n\tfindContainer: Ractive$findContainer,\n\tfindParent: Ractive$findParent,\n\tfire: Ractive$fire,\n\tget: Ractive$get,\n\tgetNodeInfo: getNodeInfo,\n\tinsert: Ractive$insert,\n\tlink: link,\n\tobserve: observe,\n\tobserveOnce: observeOnce,\n\toff: Ractive$off,\n\ton: Ractive$on,\n\tonce: Ractive$once,\n\tpop: pop,\n\tpush: push,\n\treadLink: readLink,\n\trender: Ractive$render,\n\treset: Ractive$reset,\n\tresetPartial: resetPartial,\n\tresetTemplate: Ractive$resetTemplate,\n\treverse: reverse,\n\tset: Ractive$set,\n\tshift: shift,\n\tsort: sort,\n\tsplice: splice,\n\tsubtract: Ractive$subtract,\n\tteardown: Ractive$teardown,\n\ttoggle: Ractive$toggle,\n\ttoCSS: Ractive$toCSS,\n\ttoCss: Ractive$toCSS,\n\ttoHTML: Ractive$toHTML,\n\ttoHtml: Ractive$toHTML,\n\ttoText: toText,\n\ttransition: Ractive$transition,\n\tunlink: unlink,\n\tunrender: Ractive$unrender,\n\tunshift: unshift,\n\tupdate: Ractive$update,\n\tupdateModel: Ractive$updateModel\n};\n\nvar callsSuper = /super\\s\\(|\\.call\\s*\\(\\s*this/;\n\nfunction extend () {\n\tvar options = [], len = arguments.length;\n\twhile ( len-- ) options[ len ] = arguments[ len ];\n\n\tif( !options.length ) {\n\t\treturn extendOne( this );\n\t} else {\n\t\treturn options.reduce( extendOne, this );\n\t}\n}\n\nfunction extendWith ( Class, options ) {\n\tif ( options === void 0 ) options = {};\n\n\treturn extendOne( this, options, Class );\n}\n\nfunction extendOne ( Parent, options, Target ) {\n\tif ( options === void 0 ) options = {};\n\n\tvar proto;\n\tvar Child = typeof Target === 'function' && Target;\n\n\tif ( options.prototype instanceof Ractive ) {\n\t\tthrow new Error( \"Ractive no longer supports multiple inheritance.\" );\n\t}\n\n\tif ( Child ) {\n\t\tif ( !( Child.prototype instanceof Parent ) ) {\n\t\t\tthrow new Error( \"Only classes that inherit the appropriate prototype may be used with extend\" );\n\t\t}\n\t\tif ( !callsSuper.test( Child.toString() ) ) {\n\t\t\tthrow new Error( \"Only classes that call super in their constructor may be used with extend\" );\n\t\t}\n\n\t\tproto = Child.prototype;\n\t} else {\n\t\tChild = function ( options ) {\n\t\t\tif ( !( this instanceof Child ) ) { return new Child( options ); }\n\n\t\t\tconstruct( this, options || {} );\n\t\t\tinitialise( this, options || {}, {} );\n\t\t};\n\n\t\tproto = Object.create( Parent.prototype );\n\t\tproto.constructor = Child;\n\n\t\tChild.prototype = proto;\n\t}\n\n\t// Static properties\n\tObject.defineProperties( Child, {\n\t\t// alias prototype as defaults\n\t\tdefaults: { value: proto },\n\n\t\t// extendable\n\t\textend: { value: extend, writable: true, configurable: true },\n\t\textendClass: { value: extendWith, writable: true, configurable: true },\n\n\t\t// Parent - for IE8, can't use Object.getPrototypeOf\n\t\t_Parent: { value: Parent }\n\t});\n\n\t// extend configuration\n\tconfig.extend( Parent, proto, options );\n\n\t// store event and observer registries on the constructor when extending\n\tChild._on = ( Parent._on || [] ).concat( toPairs( options.on ) );\n\tChild._observe = ( Parent._observe || [] ).concat( toPairs( options.observe ) );\n\n\t// attribute defs are not inherited, but they need to be stored\n\tif ( options.attributes ) {\n\t\tvar attrs;\n\n\t\t// allow an array of optional props or an object with arrays for optional and required props\n\t\tif ( Array.isArray( options.attributes ) ) {\n\t\t\tattrs = { optional: options.attributes, required: [] };\n\t\t} else {\n\t\t\tattrs = options.attributes;\n\t\t}\n\n\t\t// make sure the requisite keys actually store arrays\n\t\tif ( !Array.isArray( attrs.required ) ) { attrs.required = []; }\n\t\tif ( !Array.isArray( attrs.optional ) ) { attrs.optional = []; }\n\n\t\tChild.attributes = attrs;\n\t}\n\n\tdataConfigurator.extend( Parent, proto, options );\n\n\tif ( options.computed ) {\n\t\tproto.computed = Object.assign( Object.create( Parent.prototype.computed ), options.computed );\n\t}\n\n\treturn Child;\n}\n\nfunction joinKeys () {\n\tvar keys = [], len = arguments.length;\n\twhile ( len-- ) keys[ len ] = arguments[ len ];\n\n\treturn keys.map( escapeKey ).join( '.' );\n}\n\nfunction splitKeypath$1 ( keypath ) {\n\treturn splitKeypath( keypath ).map( unescapeKey );\n}\n\nfunction Ractive ( options ) {\n\tif ( !( this instanceof Ractive ) ) { return new Ractive( options ); }\n\n\tconstruct( this, options || {} );\n\tinitialise( this, options || {}, {} );\n}\n\n// check to see if we're being asked to force Ractive as a global for some weird environments\nif ( win && !win.Ractive ) {\n\tvar opts = '';\n\tvar script = document.currentScript || document.querySelector( 'script[data-ractive-options]' );\n\n\tif ( script ) { opts = script.getAttribute( 'data-ractive-options' ) || ''; }\n\n\tif ( ~opts.indexOf( 'ForceGlobal' ) ) { win.Ractive = Ractive; }\n}\n\nObject.assign( Ractive.prototype, RactiveProto, defaults );\nRactive.prototype.constructor = Ractive;\n\n// alias prototype as `defaults`\nRactive.defaults = Ractive.prototype;\n\n// share defaults with the parser\nshared.defaults = Ractive.defaults;\nshared.Ractive = Ractive;\n\n// static properties\nObject.defineProperties( Ractive, {\n\n\t// debug flag\n\tDEBUG:          { writable: true, value: true },\n\tDEBUG_PROMISES: { writable: true, value: true },\n\n\t// static methods:\n\textend:         { value: extend },\n\textendWith:     { value: extendWith },\n\tescapeKey:      { value: escapeKey },\n\tgetNodeInfo:    { value: staticInfo },\n\tjoinKeys:       { value: joinKeys },\n\tparse:          { value: parse },\n\tsplitKeypath:   { value: splitKeypath$1 },\n\tunescapeKey:    { value: unescapeKey },\n\tgetCSS:         { value: getCSS },\n\n\t// support\n\tenhance:        { writable: true, value: false },\n\tsvg:            { value: svg },\n\n\t// version\n\tVERSION:        { value: '0.9.0-edge' },\n\n\t// plugins\n\tadaptors:       { writable: true, value: {} },\n\tcomponents:     { writable: true, value: {} },\n\tdecorators:     { writable: true, value: {} },\n\teasing:         { writable: true, value: easing },\n\tevents:         { writable: true, value: {} },\n\tinterpolators:  { writable: true, value: interpolators },\n\tpartials:       { writable: true, value: {} },\n\ttransitions:    { writable: true, value: {} }\n});\n\nexport default Ractive;\n","var DEFAULTS = {\n\tdelay: 0,\n\tduration: 300,\n\teasing: 'linear'\n};\n\nfunction fade( t, params ) {\n\tvar targetOpacity;\n\n\tparams = t.processParams( params, DEFAULTS );\n\n\tif ( t.isIntro ) {\n\t\ttargetOpacity = t.getStyle( 'opacity' );\n\t\tt.setStyle( 'opacity', 0 );\n\t} else {\n\t\ttargetOpacity = 0;\n\t}\n\n\tt.animateStyle( 'opacity', targetOpacity, params ).then( t.complete );\n}\n\nexport default fade;","import journey from \"lib/journey/journey\";\r\nimport Ractive from \"lib/ractive\";\r\nimport template from \"./methods.html\";\r\n\r\nvar methods = {\t\r\n\tenter: function ( route, prevRoute, options ) {\r\n\t\t/*%injectPath%*/\r\n\t\troute.view = createView( options.target );\r\n\t},\r\n\r\n\tleave: function ( route, nextRoute, options ) {\r\n\t\troute.view.teardown();\r\n\t}\r\n};\r\n\r\nfunction createView( target ) {\r\n\r\n\tvar view = new Ractive( {\r\n\r\n\t\tel: target,\r\n\t\ttemplate: template,\r\n\r\n\t\tdata: {\r\n\t\t\titems: [\r\n\t\t\t\t{ name: 'Item 1' },\r\n\t\t\t\t{ name: 'Item 2' },\r\n\t\t\t\t{ name: 'Item 3' },\r\n\t\t\t]\r\n\t\t},\r\n\r\n\t\ttest: function ( ) {\r\n\t\t\tconsole.log( \"test() invoked!\" );\r\n\t\t\treturn false; //returning false cancels the original event, the link that was clicked\r\n\t\t},\r\n\r\n\t\ttestThis: function ( ) {\r\n\t\t\t// 'this' refers to the Ractive instance\r\n\t\t\tconsole.log( \"testThis invoked!\" );\r\n\t\t\tconsole.log( \"\t[ractive instance]:\", this );\r\n\t\t\t// 'this.event' refers to the Ractive event, see: http://docs.ractivejs.org/latest/proxy-events\r\n\t\t\tconsole.log( \"\t[ractive event]:\", this.event );\r\n\t\t\t// 'this.event.original' refers to the DOM event, the link that was clicked\r\n\t\t\tconsole.log( \"\t[DOM 'click' event]:\", this.event.original );\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\ttestArgs: function ( currentInstance, event, str, bool, obj ) {\r\n\t\t\tconsole.log( \"arg currentInstance\", currentInstance );\r\n\t\t\tconsole.log( \"arg event\", event );\r\n\t\t\tconsole.log( \"arg str\", str );\r\n\t\t\tconsole.log( \"arg bool\", bool );\r\n\t\t\tconsole.log( \"arg object\", obj );\r\n\t\t\treturn false;\r\n\t\t}\r\n\t} );\r\n\treturn view;\r\n}\r\n\r\n\r\nexport default methods;\r\n","import Ractive from  \"lib/ractive.js\";\r\nimport template from  \"./binding.html\";\r\n\r\nvar binding = {\r\n\r\n\tenter: function ( route, prevRoute, options ) {\r\n\t\t/*%injectPath%*/\r\n\t\troute.view = createView( options.target );\r\n\t},\r\n\t\r\n\tleave: function ( route, nextRoute, options ) {\r\n\t\troute.view.teardown( );\r\n\t}\r\n};\r\n\r\nfunction createView( target ){\r\n\r\n\tvar view = new Ractive( {\r\n\t\tel: target,\r\n\t\ttemplate: template,\r\n\r\n\t\tdata: { \"name\": \"World!\" },\r\n\t\tresetData: function ( ) {\r\n\t\t\tthis.set( \"name\", \"World!\" );\r\n\t\t}\r\n\t} );\r\n\treturn view;\r\n}\r\n\r\nexport default binding;\r\n\r\n\r\n","/*!\r\n* Parsley.js\r\n* Version 2.7.0 - built Wed, Mar 1st 2017, 3:53 pm\r\n* http://parsleyjs.org\r\n* Guillaume Potier - <guillaume@wisembly.com>\r\n* Marc-Andre Lafortune - <petroselinum@marc-andre.ca>\r\n* MIT Licensed\r\n*/\r\n\r\n// The source code below is generated by babel as\r\n// Parsley is written in ECMAScript 6\r\n//\r\nvar _slice = Array.prototype.slice;\r\n\r\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\r\n\r\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\r\n\r\n(function (global, factory) {\r\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('jquery')) : typeof define === 'function' && define.amd ? define(['jquery'], factory) : global.parsley = factory(global.jQuery);\r\n})(this || window, function ($) {\r\n  'use strict';\r\n\r\n  var globalID = 1;\r\n  var pastWarnings = {};\r\n\r\n  var Utils__Utils = {\r\n    // Parsley DOM-API\r\n    // returns object from dom attributes and values\r\n    attr: function attr($element, namespace, obj) {\r\n      var i;\r\n      var attribute;\r\n      var attributes;\r\n      var regex = new RegExp('^' + namespace, 'i');\r\n\r\n      if ('undefined' === typeof obj) obj = {};else {\r\n        // Clear all own properties. This won't affect prototype's values\r\n        for (i in obj) {\r\n          if (obj.hasOwnProperty(i)) delete obj[i];\r\n        }\r\n      }\r\n\r\n      if ('undefined' === typeof $element || 'undefined' === typeof $element[0]) return obj;\r\n\r\n      attributes = $element[0].attributes;\r\n      for (i = attributes.length; i--;) {\r\n        attribute = attributes[i];\r\n\r\n        if (attribute && attribute.specified && regex.test(attribute.name)) {\r\n          obj[this.camelize(attribute.name.slice(namespace.length))] = this.deserializeValue(attribute.value);\r\n        }\r\n      }\r\n\r\n      return obj;\r\n    },\r\n\r\n    checkAttr: function checkAttr($element, namespace, _checkAttr) {\r\n      return $element.is('[' + namespace + _checkAttr + ']');\r\n    },\r\n\r\n    setAttr: function setAttr($element, namespace, attr, value) {\r\n      $element[0].setAttribute(this.dasherize(namespace + attr), String(value));\r\n    },\r\n\r\n    generateID: function generateID() {\r\n      return '' + globalID++;\r\n    },\r\n\r\n    /** Third party functions **/\r\n    // Zepto deserialize function\r\n    deserializeValue: function deserializeValue(value) {\r\n      var num;\r\n\r\n      try {\r\n        return value ? value == \"true\" || (value == \"false\" ? false : value == \"null\" ? null : !isNaN(num = Number(value)) ? num : /^[\\[\\{]/.test(value) ? $.parseJSON(value) : value) : value;\r\n      } catch (e) {\r\n        return value;\r\n      }\r\n    },\r\n\r\n    // Zepto camelize function\r\n    camelize: function camelize(str) {\r\n      return str.replace(/-+(.)?/g, function (match, chr) {\r\n        return chr ? chr.toUpperCase() : '';\r\n      });\r\n    },\r\n\r\n    // Zepto dasherize function\r\n    dasherize: function dasherize(str) {\r\n      return str.replace(/::/g, '/').replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2').replace(/([a-z\\d])([A-Z])/g, '$1_$2').replace(/_/g, '-').toLowerCase();\r\n    },\r\n\r\n    warn: function warn() {\r\n      var _window$console;\r\n\r\n      if (window.console && 'function' === typeof window.console.warn) (_window$console = window.console).warn.apply(_window$console, arguments);\r\n    },\r\n\r\n    warnOnce: function warnOnce(msg) {\r\n      if (!pastWarnings[msg]) {\r\n        pastWarnings[msg] = true;\r\n        this.warn.apply(this, arguments);\r\n      }\r\n    },\r\n\r\n    _resetWarnings: function _resetWarnings() {\r\n      pastWarnings = {};\r\n    },\r\n\r\n    trimString: function trimString(string) {\r\n      return string.replace(/^\\s+|\\s+$/g, '');\r\n    },\r\n\r\n    parse: {\r\n      date: function date(string) {\r\n        var parsed = string.match(/^(\\d{4,})-(\\d\\d)-(\\d\\d)$/);\r\n        if (!parsed) return null;\r\n\r\n        var _parsed$map = parsed.map(function (x) {\r\n          return parseInt(x, 10);\r\n        });\r\n\r\n        var _parsed$map2 = _slicedToArray(_parsed$map, 4);\r\n\r\n        var _ = _parsed$map2[0];\r\n        var year = _parsed$map2[1];\r\n        var month = _parsed$map2[2];\r\n        var day = _parsed$map2[3];\r\n\r\n        var date = new Date(year, month - 1, day);\r\n        if (date.getFullYear() !== year || date.getMonth() + 1 !== month || date.getDate() !== day) return null;\r\n        return date;\r\n      },\r\n      string: function string(_string) {\r\n        return _string;\r\n      },\r\n      integer: function integer(string) {\r\n        if (isNaN(string)) return null;\r\n        return parseInt(string, 10);\r\n      },\r\n      number: function number(string) {\r\n        if (isNaN(string)) throw null;\r\n        return parseFloat(string);\r\n      },\r\n      'boolean': function _boolean(string) {\r\n        return !/^\\s*false\\s*$/i.test(string);\r\n      },\r\n      object: function object(string) {\r\n        return Utils__Utils.deserializeValue(string);\r\n      },\r\n      regexp: function regexp(_regexp) {\r\n        var flags = '';\r\n\r\n        // Test if RegExp is literal, if not, nothing to be done, otherwise, we need to isolate flags and pattern\r\n        if (/^\\/.*\\/(?:[gimy]*)$/.test(_regexp)) {\r\n          // Replace the regexp literal string with the first match group: ([gimy]*)\r\n          // If no flag is present, this will be a blank string\r\n          flags = _regexp.replace(/.*\\/([gimy]*)$/, '$1');\r\n          // Again, replace the regexp literal string with the first match group:\r\n          // everything excluding the opening and closing slashes and the flags\r\n          _regexp = _regexp.replace(new RegExp('^/(.*?)/' + flags + '$'), '$1');\r\n        } else {\r\n          // Anchor regexp:\r\n          _regexp = '^' + _regexp + '$';\r\n        }\r\n        return new RegExp(_regexp, flags);\r\n      }\r\n    },\r\n\r\n    parseRequirement: function parseRequirement(requirementType, string) {\r\n      var converter = this.parse[requirementType || 'string'];\r\n      if (!converter) throw 'Unknown requirement specification: \"' + requirementType + '\"';\r\n      var converted = converter(string);\r\n      if (converted === null) throw 'Requirement is not a ' + requirementType + ': \"' + string + '\"';\r\n      return converted;\r\n    },\r\n\r\n    namespaceEvents: function namespaceEvents(events, namespace) {\r\n      events = this.trimString(events || '').split(/\\s+/);\r\n      if (!events[0]) return '';\r\n      return $.map(events, function (evt) {\r\n        return evt + '.' + namespace;\r\n      }).join(' ');\r\n    },\r\n\r\n    difference: function difference(array, remove) {\r\n      // This is O(N^2), should be optimized\r\n      var result = [];\r\n      $.each(array, function (_, elem) {\r\n        if (remove.indexOf(elem) == -1) result.push(elem);\r\n      });\r\n      return result;\r\n    },\r\n\r\n    // Alter-ego to native Promise.all, but for jQuery\r\n    all: function all(promises) {\r\n      // jQuery treats $.when() and $.when(singlePromise) differently; let's avoid that and add spurious elements\r\n      return $.when.apply($, _toConsumableArray(promises).concat([42, 42]));\r\n    },\r\n\r\n    // Object.create polyfill, see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create#Polyfill\r\n    objectCreate: Object.create || (function () {\r\n      var Object = function Object() {};\r\n      return function (prototype) {\r\n        if (arguments.length > 1) {\r\n          throw Error('Second argument not supported');\r\n        }\r\n        if (typeof prototype != 'object') {\r\n          throw TypeError('Argument must be an object');\r\n        }\r\n        Object.prototype = prototype;\r\n        var result = new Object();\r\n        Object.prototype = null;\r\n        return result;\r\n      };\r\n    })(),\r\n\r\n    _SubmitSelector: 'input[type=\"submit\"], button:submit'\r\n  };\r\n\r\n  var Utils__default = Utils__Utils;\r\n\r\n  // All these options could be overriden and specified directly in DOM using\r\n  // `data-parsley-` default DOM-API\r\n  // eg: `inputs` can be set in DOM using `data-parsley-inputs=\"input, textarea\"`\r\n  // eg: `data-parsley-stop-on-first-failing-constraint=\"false\"`\r\n\r\n  var Defaults = {\r\n    // ### General\r\n\r\n    // Default data-namespace for DOM API\r\n    namespace: 'data-parsley-',\r\n\r\n    // Supported inputs by default\r\n    inputs: 'input, textarea, select',\r\n\r\n    // Excluded inputs by default\r\n    excluded: 'input[type=button], input[type=submit], input[type=reset], input[type=hidden]',\r\n\r\n    // Stop validating field on highest priority failing constraint\r\n    priorityEnabled: true,\r\n\r\n    // ### Field only\r\n\r\n    // identifier used to group together inputs (e.g. radio buttons...)\r\n    multiple: null,\r\n\r\n    // identifier (or array of identifiers) used to validate only a select group of inputs\r\n    group: null,\r\n\r\n    // ### UI\r\n    // Enable\\Disable error messages\r\n    uiEnabled: true,\r\n\r\n    // Key events threshold before validation\r\n    validationThreshold: 3,\r\n\r\n    // Focused field on form validation error. 'first'|'last'|'none'\r\n    focus: 'first',\r\n\r\n    // event(s) that will trigger validation before first failure. eg: `input`...\r\n    trigger: false,\r\n\r\n    // event(s) that will trigger validation after first failure.\r\n    triggerAfterFailure: 'input',\r\n\r\n    // Class that would be added on every failing validation Parsley field\r\n    errorClass: 'parsley-error',\r\n\r\n    // Same for success validation\r\n    successClass: 'parsley-success',\r\n\r\n    // Return the `$element` that will receive these above success or error classes\r\n    // Could also be (and given directly from DOM) a valid selector like `'#div'`\r\n    classHandler: function classHandler(Field) {},\r\n\r\n    // Return the `$element` where errors will be appended\r\n    // Could also be (and given directly from DOM) a valid selector like `'#div'`\r\n    errorsContainer: function errorsContainer(Field) {},\r\n\r\n    // ul elem that would receive errors' list\r\n    errorsWrapper: '<ul class=\"parsley-errors-list\"></ul>',\r\n\r\n    // li elem that would receive error message\r\n    errorTemplate: '<li></li>'\r\n  };\r\n\r\n  var Base = function Base() {\r\n    this.__id__ = Utils__default.generateID();\r\n  };\r\n\r\n  Base.prototype = {\r\n    asyncSupport: true, // Deprecated\r\n\r\n    _pipeAccordingToValidationResult: function _pipeAccordingToValidationResult() {\r\n      var _this = this;\r\n\r\n      var pipe = function pipe() {\r\n        var r = $.Deferred();\r\n        if (true !== _this.validationResult) r.reject();\r\n        return r.resolve().promise();\r\n      };\r\n      return [pipe, pipe];\r\n    },\r\n\r\n    actualizeOptions: function actualizeOptions() {\r\n      Utils__default.attr(this.$element, this.options.namespace, this.domOptions);\r\n      if (this.parent && this.parent.actualizeOptions) this.parent.actualizeOptions();\r\n      return this;\r\n    },\r\n\r\n    _resetOptions: function _resetOptions(initOptions) {\r\n      this.domOptions = Utils__default.objectCreate(this.parent.options);\r\n      this.options = Utils__default.objectCreate(this.domOptions);\r\n      // Shallow copy of ownProperties of initOptions:\r\n      for (var i in initOptions) {\r\n        if (initOptions.hasOwnProperty(i)) this.options[i] = initOptions[i];\r\n      }\r\n      this.actualizeOptions();\r\n    },\r\n\r\n    _listeners: null,\r\n\r\n    // Register a callback for the given event name\r\n    // Callback is called with context as the first argument and the `this`\r\n    // The context is the current parsley instance, or window.Parsley if global\r\n    // A return value of `false` will interrupt the calls\r\n    on: function on(name, fn) {\r\n      this._listeners = this._listeners || {};\r\n      var queue = this._listeners[name] = this._listeners[name] || [];\r\n      queue.push(fn);\r\n\r\n      return this;\r\n    },\r\n\r\n    // Deprecated. Use `on` instead\r\n    subscribe: function subscribe(name, fn) {\r\n      $.listenTo(this, name.toLowerCase(), fn);\r\n    },\r\n\r\n    // Unregister a callback (or all if none is given) for the given event name\r\n    off: function off(name, fn) {\r\n      var queue = this._listeners && this._listeners[name];\r\n      if (queue) {\r\n        if (!fn) {\r\n          delete this._listeners[name];\r\n        } else {\r\n          for (var i = queue.length; i--;) if (queue[i] === fn) queue.splice(i, 1);\r\n        }\r\n      }\r\n      return this;\r\n    },\r\n\r\n    // Deprecated. Use `off`\r\n    unsubscribe: function unsubscribe(name, fn) {\r\n      $.unsubscribeTo(this, name.toLowerCase());\r\n    },\r\n\r\n    // Trigger an event of the given name\r\n    // A return value of `false` interrupts the callback chain\r\n    // Returns false if execution was interrupted\r\n    trigger: function trigger(name, target, extraArg) {\r\n      target = target || this;\r\n      var queue = this._listeners && this._listeners[name];\r\n      var result;\r\n      var parentResult;\r\n      if (queue) {\r\n        for (var i = queue.length; i--;) {\r\n          result = queue[i].call(target, target, extraArg);\r\n          if (result === false) return result;\r\n        }\r\n      }\r\n      if (this.parent) {\r\n        return this.parent.trigger(name, target, extraArg);\r\n      }\r\n      return true;\r\n    },\r\n\r\n    asyncIsValid: function asyncIsValid(group, force) {\r\n      Utils__default.warnOnce(\"asyncIsValid is deprecated; please use whenValid instead\");\r\n      return this.whenValid({ group: group, force: force });\r\n    },\r\n\r\n    _findRelated: function _findRelated() {\r\n      return this.options.multiple ? this.parent.$element.find('[' + this.options.namespace + 'multiple=\"' + this.options.multiple + '\"]') : this.$element;\r\n    }\r\n  };\r\n\r\n  var convertArrayRequirement = function convertArrayRequirement(string, length) {\r\n    var m = string.match(/^\\s*\\[(.*)\\]\\s*$/);\r\n    if (!m) throw 'Requirement is not an array: \"' + string + '\"';\r\n    var values = m[1].split(',').map(Utils__default.trimString);\r\n    if (values.length !== length) throw 'Requirement has ' + values.length + ' values when ' + length + ' are needed';\r\n    return values;\r\n  };\r\n\r\n  var convertExtraOptionRequirement = function convertExtraOptionRequirement(requirementSpec, string, extraOptionReader) {\r\n    var main = null;\r\n    var extra = {};\r\n    for (var key in requirementSpec) {\r\n      if (key) {\r\n        var value = extraOptionReader(key);\r\n        if ('string' === typeof value) value = Utils__default.parseRequirement(requirementSpec[key], value);\r\n        extra[key] = value;\r\n      } else {\r\n        main = Utils__default.parseRequirement(requirementSpec[key], string);\r\n      }\r\n    }\r\n    return [main, extra];\r\n  };\r\n\r\n  // A Validator needs to implement the methods `validate` and `parseRequirements`\r\n\r\n  var Validator = function Validator(spec) {\r\n    $.extend(true, this, spec);\r\n  };\r\n\r\n  Validator.prototype = {\r\n    // Returns `true` iff the given `value` is valid according the given requirements.\r\n    validate: function validate(value, requirementFirstArg) {\r\n      if (this.fn) {\r\n        // Legacy style validator\r\n\r\n        if (arguments.length > 3) // If more args then value, requirement, instance...\r\n          requirementFirstArg = [].slice.call(arguments, 1, -1); // Skip first arg (value) and last (instance), combining the rest\r\n        return this.fn(value, requirementFirstArg);\r\n      }\r\n\r\n      if ($.isArray(value)) {\r\n        if (!this.validateMultiple) throw 'Validator `' + this.name + '` does not handle multiple values';\r\n        return this.validateMultiple.apply(this, arguments);\r\n      } else {\r\n        var instance = arguments[arguments.length - 1];\r\n        if (this.validateDate && instance._isDateInput()) {\r\n          arguments[0] = Utils__default.parse.date(arguments[0]);\r\n          if (arguments[0] === null) return false;\r\n          return this.validateDate.apply(this, arguments);\r\n        }\r\n        if (this.validateNumber) {\r\n          if (isNaN(value)) return false;\r\n          arguments[0] = parseFloat(arguments[0]);\r\n          return this.validateNumber.apply(this, arguments);\r\n        }\r\n        if (this.validateString) {\r\n          return this.validateString.apply(this, arguments);\r\n        }\r\n        throw 'Validator `' + this.name + '` only handles multiple values';\r\n      }\r\n    },\r\n\r\n    // Parses `requirements` into an array of arguments,\r\n    // according to `this.requirementType`\r\n    parseRequirements: function parseRequirements(requirements, extraOptionReader) {\r\n      if ('string' !== typeof requirements) {\r\n        // Assume requirement already parsed\r\n        // but make sure we return an array\r\n        return $.isArray(requirements) ? requirements : [requirements];\r\n      }\r\n      var type = this.requirementType;\r\n      if ($.isArray(type)) {\r\n        var values = convertArrayRequirement(requirements, type.length);\r\n        for (var i = 0; i < values.length; i++) values[i] = Utils__default.parseRequirement(type[i], values[i]);\r\n        return values;\r\n      } else if ($.isPlainObject(type)) {\r\n        return convertExtraOptionRequirement(type, requirements, extraOptionReader);\r\n      } else {\r\n        return [Utils__default.parseRequirement(type, requirements)];\r\n      }\r\n    },\r\n    // Defaults:\r\n    requirementType: 'string',\r\n\r\n    priority: 2\r\n\r\n  };\r\n\r\n  var ValidatorRegistry = function ValidatorRegistry(validators, catalog) {\r\n    this.__class__ = 'ValidatorRegistry';\r\n\r\n    // Default Parsley locale is en\r\n    this.locale = 'en';\r\n\r\n    this.init(validators || {}, catalog || {});\r\n  };\r\n\r\n  var typeTesters = {\r\n    email: /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i,\r\n\r\n    // Follow https://www.w3.org/TR/html5/infrastructure.html#floating-point-numbers\r\n    number: /^-?(\\d*\\.)?\\d+(e[-+]?\\d+)?$/i,\r\n\r\n    integer: /^-?\\d+$/,\r\n\r\n    digits: /^\\d+$/,\r\n\r\n    alphanum: /^\\w+$/i,\r\n\r\n    date: {\r\n      test: function test(value) {\r\n        return Utils__default.parse.date(value) !== null;\r\n      }\r\n    },\r\n\r\n    url: new RegExp(\"^\" +\r\n    // protocol identifier\r\n    \"(?:(?:https?|ftp)://)?\" + // ** mod: make scheme optional\r\n    // user:pass authentication\r\n    \"(?:\\\\S+(?::\\\\S*)?@)?\" + \"(?:\" +\r\n    // IP address exclusion\r\n    // private & local networks\r\n    // \"(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})\" +   // ** mod: allow local networks\r\n    // \"(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})\" +  // ** mod: allow local networks\r\n    // \"(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})\" +  // ** mod: allow local networks\r\n    // IP address dotted notation octets\r\n    // excludes loopback network 0.0.0.0\r\n    // excludes reserved space >= 224.0.0.0\r\n    // excludes network & broacast addresses\r\n    // (first & last IP address of each class)\r\n    \"(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])\" + \"(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}\" + \"(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))\" + \"|\" +\r\n    // host name\r\n    '(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)' +\r\n    // domain name\r\n    '(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*' +\r\n    // TLD identifier\r\n    '(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))' + \")\" +\r\n    // port number\r\n    \"(?::\\\\d{2,5})?\" +\r\n    // resource path\r\n    \"(?:/\\\\S*)?\" + \"$\", 'i')\r\n  };\r\n  typeTesters.range = typeTesters.number;\r\n\r\n  // See http://stackoverflow.com/a/10454560/8279\r\n  var decimalPlaces = function decimalPlaces(num) {\r\n    var match = ('' + num).match(/(?:\\.(\\d+))?(?:[eE]([+-]?\\d+))?$/);\r\n    if (!match) {\r\n      return 0;\r\n    }\r\n    return Math.max(0,\r\n    // Number of digits right of decimal point.\r\n    (match[1] ? match[1].length : 0) - (\r\n    // Adjust for scientific notation.\r\n    match[2] ? +match[2] : 0));\r\n  };\r\n\r\n  // parseArguments('number', ['1', '2']) => [1, 2]\r\n  var ValidatorRegistry__parseArguments = function ValidatorRegistry__parseArguments(type, args) {\r\n    return args.map(Utils__default.parse[type]);\r\n  };\r\n  // operatorToValidator returns a validating function for an operator function, applied to the given type\r\n  var ValidatorRegistry__operatorToValidator = function ValidatorRegistry__operatorToValidator(type, operator) {\r\n    return function (value) {\r\n      for (var _len = arguments.length, requirementsAndInput = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n        requirementsAndInput[_key - 1] = arguments[_key];\r\n      }\r\n\r\n      requirementsAndInput.pop(); // Get rid of `input` argument\r\n      return operator.apply(undefined, [value].concat(_toConsumableArray(ValidatorRegistry__parseArguments(type, requirementsAndInput))));\r\n    };\r\n  };\r\n\r\n  var ValidatorRegistry__comparisonOperator = function ValidatorRegistry__comparisonOperator(operator) {\r\n    return {\r\n      validateDate: ValidatorRegistry__operatorToValidator('date', operator),\r\n      validateNumber: ValidatorRegistry__operatorToValidator('number', operator),\r\n      requirementType: operator.length <= 2 ? 'string' : ['string', 'string'], // Support operators with a 1 or 2 requirement(s)\r\n      priority: 30\r\n    };\r\n  };\r\n\r\n  ValidatorRegistry.prototype = {\r\n    init: function init(validators, catalog) {\r\n      this.catalog = catalog;\r\n      // Copy prototype's validators:\r\n      this.validators = $.extend({}, this.validators);\r\n\r\n      for (var name in validators) this.addValidator(name, validators[name].fn, validators[name].priority);\r\n\r\n      window.Parsley.trigger('parsley:validator:init');\r\n    },\r\n\r\n    // Set new messages locale if we have dictionary loaded in ParsleyConfig.i18n\r\n    setLocale: function setLocale(locale) {\r\n      if ('undefined' === typeof this.catalog[locale]) throw new Error(locale + ' is not available in the catalog');\r\n\r\n      this.locale = locale;\r\n\r\n      return this;\r\n    },\r\n\r\n    // Add a new messages catalog for a given locale. Set locale for this catalog if set === `true`\r\n    addCatalog: function addCatalog(locale, messages, set) {\r\n      if ('object' === typeof messages) this.catalog[locale] = messages;\r\n\r\n      if (true === set) return this.setLocale(locale);\r\n\r\n      return this;\r\n    },\r\n\r\n    // Add a specific message for a given constraint in a given locale\r\n    addMessage: function addMessage(locale, name, message) {\r\n      if ('undefined' === typeof this.catalog[locale]) this.catalog[locale] = {};\r\n\r\n      this.catalog[locale][name] = message;\r\n\r\n      return this;\r\n    },\r\n\r\n    // Add messages for a given locale\r\n    addMessages: function addMessages(locale, nameMessageObject) {\r\n      for (var name in nameMessageObject) this.addMessage(locale, name, nameMessageObject[name]);\r\n\r\n      return this;\r\n    },\r\n\r\n    // Add a new validator\r\n    //\r\n    //    addValidator('custom', {\r\n    //        requirementType: ['integer', 'integer'],\r\n    //        validateString: function(value, from, to) {},\r\n    //        priority: 22,\r\n    //        messages: {\r\n    //          en: \"Hey, that's no good\",\r\n    //          fr: \"Aye aye, pas bon du tout\",\r\n    //        }\r\n    //    })\r\n    //\r\n    // Old API was addValidator(name, function, priority)\r\n    //\r\n    addValidator: function addValidator(name, arg1, arg2) {\r\n      if (this.validators[name]) Utils__default.warn('Validator \"' + name + '\" is already defined.');else if (Defaults.hasOwnProperty(name)) {\r\n        Utils__default.warn('\"' + name + '\" is a restricted keyword and is not a valid validator name.');\r\n        return;\r\n      }\r\n      return this._setValidator.apply(this, arguments);\r\n    },\r\n\r\n    updateValidator: function updateValidator(name, arg1, arg2) {\r\n      if (!this.validators[name]) {\r\n        Utils__default.warn('Validator \"' + name + '\" is not already defined.');\r\n        return this.addValidator.apply(this, arguments);\r\n      }\r\n      return this._setValidator.apply(this, arguments);\r\n    },\r\n\r\n    removeValidator: function removeValidator(name) {\r\n      if (!this.validators[name]) Utils__default.warn('Validator \"' + name + '\" is not defined.');\r\n\r\n      delete this.validators[name];\r\n\r\n      return this;\r\n    },\r\n\r\n    _setValidator: function _setValidator(name, validator, priority) {\r\n      if ('object' !== typeof validator) {\r\n        // Old style validator, with `fn` and `priority`\r\n        validator = {\r\n          fn: validator,\r\n          priority: priority\r\n        };\r\n      }\r\n      if (!validator.validate) {\r\n        validator = new Validator(validator);\r\n      }\r\n      this.validators[name] = validator;\r\n\r\n      for (var locale in validator.messages || {}) this.addMessage(locale, name, validator.messages[locale]);\r\n\r\n      return this;\r\n    },\r\n\r\n    getErrorMessage: function getErrorMessage(constraint) {\r\n      var message;\r\n\r\n      // Type constraints are a bit different, we have to match their requirements too to find right error message\r\n      if ('type' === constraint.name) {\r\n        var typeMessages = this.catalog[this.locale][constraint.name] || {};\r\n        message = typeMessages[constraint.requirements];\r\n      } else message = this.formatMessage(this.catalog[this.locale][constraint.name], constraint.requirements);\r\n\r\n      return message || this.catalog[this.locale].defaultMessage || this.catalog.en.defaultMessage;\r\n    },\r\n\r\n    // Kind of light `sprintf()` implementation\r\n    formatMessage: function formatMessage(string, parameters) {\r\n      if ('object' === typeof parameters) {\r\n        for (var i in parameters) string = this.formatMessage(string, parameters[i]);\r\n\r\n        return string;\r\n      }\r\n\r\n      return 'string' === typeof string ? string.replace(/%s/i, parameters) : '';\r\n    },\r\n\r\n    // Here is the Parsley default validators list.\r\n    // A validator is an object with the following key values:\r\n    //  - priority: an integer\r\n    //  - requirement: 'string' (default), 'integer', 'number', 'regexp' or an Array of these\r\n    //  - validateString, validateMultiple, validateNumber: functions returning `true`, `false` or a promise\r\n    // Alternatively, a validator can be a function that returns such an object\r\n    //\r\n    validators: {\r\n      notblank: {\r\n        validateString: function validateString(value) {\r\n          return (/\\S/.test(value)\r\n          );\r\n        },\r\n        priority: 2\r\n      },\r\n      required: {\r\n        validateMultiple: function validateMultiple(values) {\r\n          return values.length > 0;\r\n        },\r\n        validateString: function validateString(value) {\r\n          return (/\\S/.test(value)\r\n          );\r\n        },\r\n        priority: 512\r\n      },\r\n      type: {\r\n        validateString: function validateString(value, type) {\r\n          var _ref = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\r\n\r\n          var _ref$step = _ref.step;\r\n          var step = _ref$step === undefined ? 'any' : _ref$step;\r\n          var _ref$base = _ref.base;\r\n          var base = _ref$base === undefined ? 0 : _ref$base;\r\n\r\n          var tester = typeTesters[type];\r\n          if (!tester) {\r\n            throw new Error('validator type `' + type + '` is not supported');\r\n          }\r\n          if (!tester.test(value)) return false;\r\n          if ('number' === type) {\r\n            if (!/^any$/i.test(step || '')) {\r\n              var nb = Number(value);\r\n              var decimals = Math.max(decimalPlaces(step), decimalPlaces(base));\r\n              if (decimalPlaces(nb) > decimals) // Value can't have too many decimals\r\n                return false;\r\n              // Be careful of rounding errors by using integers.\r\n              var toInt = function toInt(f) {\r\n                return Math.round(f * Math.pow(10, decimals));\r\n              };\r\n              if ((toInt(nb) - toInt(base)) % toInt(step) != 0) return false;\r\n            }\r\n          }\r\n          return true;\r\n        },\r\n        requirementType: {\r\n          '': 'string',\r\n          step: 'string',\r\n          base: 'number'\r\n        },\r\n        priority: 256\r\n      },\r\n      pattern: {\r\n        validateString: function validateString(value, regexp) {\r\n          return regexp.test(value);\r\n        },\r\n        requirementType: 'regexp',\r\n        priority: 64\r\n      },\r\n      minlength: {\r\n        validateString: function validateString(value, requirement) {\r\n          return value.length >= requirement;\r\n        },\r\n        requirementType: 'integer',\r\n        priority: 30\r\n      },\r\n      maxlength: {\r\n        validateString: function validateString(value, requirement) {\r\n          return value.length <= requirement;\r\n        },\r\n        requirementType: 'integer',\r\n        priority: 30\r\n      },\r\n      length: {\r\n        validateString: function validateString(value, min, max) {\r\n          return value.length >= min && value.length <= max;\r\n        },\r\n        requirementType: ['integer', 'integer'],\r\n        priority: 30\r\n      },\r\n      mincheck: {\r\n        validateMultiple: function validateMultiple(values, requirement) {\r\n          return values.length >= requirement;\r\n        },\r\n        requirementType: 'integer',\r\n        priority: 30\r\n      },\r\n      maxcheck: {\r\n        validateMultiple: function validateMultiple(values, requirement) {\r\n          return values.length <= requirement;\r\n        },\r\n        requirementType: 'integer',\r\n        priority: 30\r\n      },\r\n      check: {\r\n        validateMultiple: function validateMultiple(values, min, max) {\r\n          return values.length >= min && values.length <= max;\r\n        },\r\n        requirementType: ['integer', 'integer'],\r\n        priority: 30\r\n      },\r\n      min: ValidatorRegistry__comparisonOperator(function (value, requirement) {\r\n        return value >= requirement;\r\n      }),\r\n      max: ValidatorRegistry__comparisonOperator(function (value, requirement) {\r\n        return value <= requirement;\r\n      }),\r\n      range: ValidatorRegistry__comparisonOperator(function (value, min, max) {\r\n        return value >= min && value <= max;\r\n      }),\r\n      equalto: {\r\n        validateString: function validateString(value, refOrValue) {\r\n          var $reference = $(refOrValue);\r\n          if ($reference.length) return value === $reference.val();else return value === refOrValue;\r\n        },\r\n        priority: 256\r\n      }\r\n    }\r\n  };\r\n\r\n  var UI = {};\r\n\r\n  var diffResults = function diffResults(newResult, oldResult, deep) {\r\n    var added = [];\r\n    var kept = [];\r\n\r\n    for (var i = 0; i < newResult.length; i++) {\r\n      var found = false;\r\n\r\n      for (var j = 0; j < oldResult.length; j++) if (newResult[i].assert.name === oldResult[j].assert.name) {\r\n        found = true;\r\n        break;\r\n      }\r\n\r\n      if (found) kept.push(newResult[i]);else added.push(newResult[i]);\r\n    }\r\n\r\n    return {\r\n      kept: kept,\r\n      added: added,\r\n      removed: !deep ? diffResults(oldResult, newResult, true).added : []\r\n    };\r\n  };\r\n\r\n  UI.Form = {\r\n\r\n    _actualizeTriggers: function _actualizeTriggers() {\r\n      var _this2 = this;\r\n\r\n      this.$element.on('submit.Parsley', function (evt) {\r\n        _this2.onSubmitValidate(evt);\r\n      });\r\n      this.$element.on('click.Parsley', Utils__default._SubmitSelector, function (evt) {\r\n        _this2.onSubmitButton(evt);\r\n      });\r\n\r\n      // UI could be disabled\r\n      if (false === this.options.uiEnabled) return;\r\n\r\n      this.$element.attr('novalidate', '');\r\n    },\r\n\r\n    focus: function focus() {\r\n      this._focusedField = null;\r\n\r\n      if (true === this.validationResult || 'none' === this.options.focus) return null;\r\n\r\n      for (var i = 0; i < this.fields.length; i++) {\r\n        var field = this.fields[i];\r\n        if (true !== field.validationResult && field.validationResult.length > 0 && 'undefined' === typeof field.options.noFocus) {\r\n          this._focusedField = field.$element;\r\n          if ('first' === this.options.focus) break;\r\n        }\r\n      }\r\n\r\n      if (null === this._focusedField) return null;\r\n\r\n      return this._focusedField.focus();\r\n    },\r\n\r\n    _destroyUI: function _destroyUI() {\r\n      // Reset all event listeners\r\n      this.$element.off('.Parsley');\r\n    }\r\n\r\n  };\r\n\r\n  UI.Field = {\r\n\r\n    _reflowUI: function _reflowUI() {\r\n      this._buildUI();\r\n\r\n      // If this field doesn't have an active UI don't bother doing something\r\n      if (!this._ui) return;\r\n\r\n      // Diff between two validation results\r\n      var diff = diffResults(this.validationResult, this._ui.lastValidationResult);\r\n\r\n      // Then store current validation result for next reflow\r\n      this._ui.lastValidationResult = this.validationResult;\r\n\r\n      // Handle valid / invalid / none field class\r\n      this._manageStatusClass();\r\n\r\n      // Add, remove, updated errors messages\r\n      this._manageErrorsMessages(diff);\r\n\r\n      // Triggers impl\r\n      this._actualizeTriggers();\r\n\r\n      // If field is not valid for the first time, bind keyup trigger to ease UX and quickly inform user\r\n      if ((diff.kept.length || diff.added.length) && !this._failedOnce) {\r\n        this._failedOnce = true;\r\n        this._actualizeTriggers();\r\n      }\r\n    },\r\n\r\n    // Returns an array of field's error message(s)\r\n    getErrorsMessages: function getErrorsMessages() {\r\n      // No error message, field is valid\r\n      if (true === this.validationResult) return [];\r\n\r\n      var messages = [];\r\n\r\n      for (var i = 0; i < this.validationResult.length; i++) messages.push(this.validationResult[i].errorMessage || this._getErrorMessage(this.validationResult[i].assert));\r\n\r\n      return messages;\r\n    },\r\n\r\n    // It's a goal of Parsley that this method is no longer required [#1073]\r\n    addError: function addError(name) {\r\n      var _ref2 = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\r\n\r\n      var message = _ref2.message;\r\n      var assert = _ref2.assert;\r\n      var _ref2$updateClass = _ref2.updateClass;\r\n      var updateClass = _ref2$updateClass === undefined ? true : _ref2$updateClass;\r\n\r\n      this._buildUI();\r\n      this._addError(name, { message: message, assert: assert });\r\n\r\n      if (updateClass) this._errorClass();\r\n    },\r\n\r\n    // It's a goal of Parsley that this method is no longer required [#1073]\r\n    updateError: function updateError(name) {\r\n      var _ref3 = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\r\n\r\n      var message = _ref3.message;\r\n      var assert = _ref3.assert;\r\n      var _ref3$updateClass = _ref3.updateClass;\r\n      var updateClass = _ref3$updateClass === undefined ? true : _ref3$updateClass;\r\n\r\n      this._buildUI();\r\n      this._updateError(name, { message: message, assert: assert });\r\n\r\n      if (updateClass) this._errorClass();\r\n    },\r\n\r\n    // It's a goal of Parsley that this method is no longer required [#1073]\r\n    removeError: function removeError(name) {\r\n      var _ref4 = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\r\n\r\n      var _ref4$updateClass = _ref4.updateClass;\r\n      var updateClass = _ref4$updateClass === undefined ? true : _ref4$updateClass;\r\n\r\n      this._buildUI();\r\n      this._removeError(name);\r\n\r\n      // edge case possible here: remove a standard Parsley error that is still failing in this.validationResult\r\n      // but highly improbable cuz' manually removing a well Parsley handled error makes no sense.\r\n      if (updateClass) this._manageStatusClass();\r\n    },\r\n\r\n    _manageStatusClass: function _manageStatusClass() {\r\n      if (this.hasConstraints() && this.needsValidation() && true === this.validationResult) this._successClass();else if (this.validationResult.length > 0) this._errorClass();else this._resetClass();\r\n    },\r\n\r\n    _manageErrorsMessages: function _manageErrorsMessages(diff) {\r\n      if ('undefined' !== typeof this.options.errorsMessagesDisabled) return;\r\n\r\n      // Case where we have errorMessage option that configure an unique field error message, regardless failing validators\r\n      if ('undefined' !== typeof this.options.errorMessage) {\r\n        if (diff.added.length || diff.kept.length) {\r\n          this._insertErrorWrapper();\r\n\r\n          if (0 === this._ui.$errorsWrapper.find('.parsley-custom-error-message').length) this._ui.$errorsWrapper.append($(this.options.errorTemplate).addClass('parsley-custom-error-message'));\r\n\r\n          return this._ui.$errorsWrapper.addClass('filled').find('.parsley-custom-error-message').html(this.options.errorMessage);\r\n        }\r\n\r\n        return this._ui.$errorsWrapper.removeClass('filled').find('.parsley-custom-error-message').remove();\r\n      }\r\n\r\n      // Show, hide, update failing constraints messages\r\n      for (var i = 0; i < diff.removed.length; i++) this._removeError(diff.removed[i].assert.name);\r\n\r\n      for (i = 0; i < diff.added.length; i++) this._addError(diff.added[i].assert.name, { message: diff.added[i].errorMessage, assert: diff.added[i].assert });\r\n\r\n      for (i = 0; i < diff.kept.length; i++) this._updateError(diff.kept[i].assert.name, { message: diff.kept[i].errorMessage, assert: diff.kept[i].assert });\r\n    },\r\n\r\n    _addError: function _addError(name, _ref5) {\r\n      var message = _ref5.message;\r\n      var assert = _ref5.assert;\r\n\r\n      this._insertErrorWrapper();\r\n      this._ui.$errorsWrapper.addClass('filled').append($(this.options.errorTemplate).addClass('parsley-' + name).html(message || this._getErrorMessage(assert)));\r\n    },\r\n\r\n    _updateError: function _updateError(name, _ref6) {\r\n      var message = _ref6.message;\r\n      var assert = _ref6.assert;\r\n\r\n      this._ui.$errorsWrapper.addClass('filled').find('.parsley-' + name).html(message || this._getErrorMessage(assert));\r\n    },\r\n\r\n    _removeError: function _removeError(name) {\r\n      this._ui.$errorsWrapper.removeClass('filled').find('.parsley-' + name).remove();\r\n    },\r\n\r\n    _getErrorMessage: function _getErrorMessage(constraint) {\r\n      var customConstraintErrorMessage = constraint.name + 'Message';\r\n\r\n      if ('undefined' !== typeof this.options[customConstraintErrorMessage]) return window.Parsley.formatMessage(this.options[customConstraintErrorMessage], constraint.requirements);\r\n\r\n      return window.Parsley.getErrorMessage(constraint);\r\n    },\r\n\r\n    _buildUI: function _buildUI() {\r\n      // UI could be already built or disabled\r\n      if (this._ui || false === this.options.uiEnabled) return;\r\n\r\n      var _ui = {};\r\n\r\n      // Give field its Parsley id in DOM\r\n      this.$element.attr(this.options.namespace + 'id', this.__id__);\r\n\r\n      /** Generate important UI elements and store them in this **/\r\n      // $errorClassHandler is the $element that woul have parsley-error and parsley-success classes\r\n      _ui.$errorClassHandler = this._manageClassHandler();\r\n\r\n      // $errorsWrapper is a div that would contain the various field errors, it will be appended into $errorsContainer\r\n      _ui.errorsWrapperId = 'parsley-id-' + (this.options.multiple ? 'multiple-' + this.options.multiple : this.__id__);\r\n      _ui.$errorsWrapper = $(this.options.errorsWrapper).attr('id', _ui.errorsWrapperId);\r\n\r\n      // ValidationResult UI storage to detect what have changed bwt two validations, and update DOM accordingly\r\n      _ui.lastValidationResult = [];\r\n      _ui.validationInformationVisible = false;\r\n\r\n      // Store it in this for later\r\n      this._ui = _ui;\r\n    },\r\n\r\n    // Determine which element will have `parsley-error` and `parsley-success` classes\r\n    _manageClassHandler: function _manageClassHandler() {\r\n      // An element selector could be passed through DOM with `data-parsley-class-handler=#foo`\r\n      if ('string' === typeof this.options.classHandler && $(this.options.classHandler).length) return $(this.options.classHandler);\r\n\r\n      // Class handled could also be determined by function given in Parsley options\r\n      var $handler = this.options.classHandler.call(this, this);\r\n\r\n      // If this function returned a valid existing DOM element, go for it\r\n      if ('undefined' !== typeof $handler && $handler.length) return $handler;\r\n\r\n      return this._inputHolder();\r\n    },\r\n\r\n    _inputHolder: function _inputHolder() {\r\n      // if simple element (input, texatrea, select...) it will perfectly host the classes and precede the error container\r\n      if (!this.options.multiple || this.$element.is('select')) return this.$element;\r\n\r\n      // But if multiple element (radio, checkbox), that would be their parent\r\n      return this.$element.parent();\r\n    },\r\n\r\n    _insertErrorWrapper: function _insertErrorWrapper() {\r\n      var $errorsContainer;\r\n\r\n      // Nothing to do if already inserted\r\n      if (0 !== this._ui.$errorsWrapper.parent().length) return this._ui.$errorsWrapper.parent();\r\n\r\n      if ('string' === typeof this.options.errorsContainer) {\r\n        if ($(this.options.errorsContainer).length) return $(this.options.errorsContainer).append(this._ui.$errorsWrapper);else Utils__default.warn('The errors container `' + this.options.errorsContainer + '` does not exist in DOM');\r\n      } else if ('function' === typeof this.options.errorsContainer) $errorsContainer = this.options.errorsContainer.call(this, this);\r\n\r\n      if ('undefined' !== typeof $errorsContainer && $errorsContainer.length) return $errorsContainer.append(this._ui.$errorsWrapper);\r\n\r\n      return this._inputHolder().after(this._ui.$errorsWrapper);\r\n    },\r\n\r\n    _actualizeTriggers: function _actualizeTriggers() {\r\n      var _this3 = this;\r\n\r\n      var $toBind = this._findRelated();\r\n      var trigger;\r\n\r\n      // Remove Parsley events already bound on this field\r\n      $toBind.off('.Parsley');\r\n      if (this._failedOnce) $toBind.on(Utils__default.namespaceEvents(this.options.triggerAfterFailure, 'Parsley'), function () {\r\n        _this3._validateIfNeeded();\r\n      });else if (trigger = Utils__default.namespaceEvents(this.options.trigger, 'Parsley')) {\r\n        $toBind.on(trigger, function (event) {\r\n          _this3._validateIfNeeded(event);\r\n        });\r\n      }\r\n    },\r\n\r\n    _validateIfNeeded: function _validateIfNeeded(event) {\r\n      var _this4 = this;\r\n\r\n      // For keyup, keypress, keydown, input... events that could be a little bit obstrusive\r\n      // do not validate if val length < min threshold on first validation. Once field have been validated once and info\r\n      // about success or failure have been displayed, always validate with this trigger to reflect every yalidation change.\r\n      if (event && /key|input/.test(event.type)) if (!(this._ui && this._ui.validationInformationVisible) && this.getValue().length <= this.options.validationThreshold) return;\r\n\r\n      if (this.options.debounce) {\r\n        window.clearTimeout(this._debounced);\r\n        this._debounced = window.setTimeout(function () {\r\n          return _this4.validate();\r\n        }, this.options.debounce);\r\n      } else this.validate();\r\n    },\r\n\r\n    _resetUI: function _resetUI() {\r\n      // Reset all event listeners\r\n      this._failedOnce = false;\r\n      this._actualizeTriggers();\r\n\r\n      // Nothing to do if UI never initialized for this field\r\n      if ('undefined' === typeof this._ui) return;\r\n\r\n      // Reset all errors' li\r\n      this._ui.$errorsWrapper.removeClass('filled').children().remove();\r\n\r\n      // Reset validation class\r\n      this._resetClass();\r\n\r\n      // Reset validation flags and last validation result\r\n      this._ui.lastValidationResult = [];\r\n      this._ui.validationInformationVisible = false;\r\n    },\r\n\r\n    _destroyUI: function _destroyUI() {\r\n      this._resetUI();\r\n\r\n      if ('undefined' !== typeof this._ui) this._ui.$errorsWrapper.remove();\r\n\r\n      delete this._ui;\r\n    },\r\n\r\n    _successClass: function _successClass() {\r\n      this._ui.validationInformationVisible = true;\r\n      this._ui.$errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass);\r\n    },\r\n    _errorClass: function _errorClass() {\r\n      this._ui.validationInformationVisible = true;\r\n      this._ui.$errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass);\r\n    },\r\n    _resetClass: function _resetClass() {\r\n      this._ui.$errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass);\r\n    }\r\n  };\r\n\r\n  var Form = function Form(element, domOptions, options) {\r\n    this.__class__ = 'Form';\r\n\r\n    this.$element = $(element);\r\n    this.domOptions = domOptions;\r\n    this.options = options;\r\n    this.parent = window.Parsley;\r\n\r\n    this.fields = [];\r\n    this.validationResult = null;\r\n  };\r\n\r\n  var Form__statusMapping = { pending: null, resolved: true, rejected: false };\r\n\r\n  Form.prototype = {\r\n    onSubmitValidate: function onSubmitValidate(event) {\r\n      var _this5 = this;\r\n\r\n      // This is a Parsley generated submit event, do not validate, do not prevent, simply exit and keep normal behavior\r\n      if (true === event.parsley) return;\r\n\r\n      // If we didn't come here through a submit button, use the first one in the form\r\n      var $submitSource = this._$submitSource || this.$element.find(Utils__default._SubmitSelector).first();\r\n      this._$submitSource = null;\r\n      this.$element.find('.parsley-synthetic-submit-button').prop('disabled', true);\r\n      if ($submitSource.is('[formnovalidate]')) return;\r\n\r\n      var promise = this.whenValidate({ event: event });\r\n\r\n      if ('resolved' === promise.state() && false !== this._trigger('submit')) {\r\n        // All good, let event go through. We make this distinction because browsers\r\n        // differ in their handling of `submit` being called from inside a submit event [#1047]\r\n      } else {\r\n          // Rejected or pending: cancel this submit\r\n          event.stopImmediatePropagation();\r\n          event.preventDefault();\r\n          if ('pending' === promise.state()) promise.done(function () {\r\n            _this5._submit($submitSource);\r\n          });\r\n        }\r\n    },\r\n\r\n    onSubmitButton: function onSubmitButton(event) {\r\n      this._$submitSource = $(event.currentTarget);\r\n    },\r\n    // internal\r\n    // _submit submits the form, this time without going through the validations.\r\n    // Care must be taken to \"fake\" the actual submit button being clicked.\r\n    _submit: function _submit($submitSource) {\r\n      if (false === this._trigger('submit')) return;\r\n      // Add submit button's data\r\n      if ($submitSource) {\r\n        var $synthetic = this.$element.find('.parsley-synthetic-submit-button').prop('disabled', false);\r\n        if (0 === $synthetic.length) $synthetic = $('<input class=\"parsley-synthetic-submit-button\" type=\"hidden\">').appendTo(this.$element);\r\n        $synthetic.attr({\r\n          name: $submitSource.attr('name'),\r\n          value: $submitSource.attr('value')\r\n        });\r\n      }\r\n\r\n      this.$element.trigger($.extend($.Event('submit'), { parsley: true }));\r\n    },\r\n\r\n    // Performs validation on fields while triggering events.\r\n    // @returns `true` if all validations succeeds, `false`\r\n    // if a failure is immediately detected, or `null`\r\n    // if dependant on a promise.\r\n    // Consider using `whenValidate` instead.\r\n    validate: function validate(options) {\r\n      if (arguments.length >= 1 && !$.isPlainObject(options)) {\r\n        Utils__default.warnOnce('Calling validate on a parsley form without passing arguments as an object is deprecated.');\r\n\r\n        var _arguments = _slice.call(arguments);\r\n\r\n        var group = _arguments[0];\r\n        var force = _arguments[1];\r\n        var event = _arguments[2];\r\n\r\n        options = { group: group, force: force, event: event };\r\n      }\r\n      return Form__statusMapping[this.whenValidate(options).state()];\r\n    },\r\n\r\n    whenValidate: function whenValidate() {\r\n      var _Utils__default$all$done$fail$always,\r\n          _this6 = this;\r\n\r\n      var _ref7 = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\r\n\r\n      var group = _ref7.group;\r\n      var force = _ref7.force;\r\n      var event = _ref7.event;\r\n\r\n      this.submitEvent = event;\r\n      if (event) {\r\n        this.submitEvent = $.extend({}, event, { preventDefault: function preventDefault() {\r\n            Utils__default.warnOnce(\"Using `this.submitEvent.preventDefault()` is deprecated; instead, call `this.validationResult = false`\");\r\n            _this6.validationResult = false;\r\n          } });\r\n      }\r\n      this.validationResult = true;\r\n\r\n      // fire validate event to eventually modify things before every validation\r\n      this._trigger('validate');\r\n\r\n      // Refresh form DOM options and form's fields that could have changed\r\n      this._refreshFields();\r\n\r\n      var promises = this._withoutReactualizingFormOptions(function () {\r\n        return $.map(_this6.fields, function (field) {\r\n          return field.whenValidate({ force: force, group: group });\r\n        });\r\n      });\r\n\r\n      return (_Utils__default$all$done$fail$always = Utils__default.all(promises).done(function () {\r\n        _this6._trigger('success');\r\n      }).fail(function () {\r\n        _this6.validationResult = false;\r\n        _this6.focus();\r\n        _this6._trigger('error');\r\n      }).always(function () {\r\n        _this6._trigger('validated');\r\n      })).pipe.apply(_Utils__default$all$done$fail$always, _toConsumableArray(this._pipeAccordingToValidationResult()));\r\n    },\r\n\r\n    // Iterate over refreshed fields, and stop on first failure.\r\n    // Returns `true` if all fields are valid, `false` if a failure is detected\r\n    // or `null` if the result depends on an unresolved promise.\r\n    // Prefer using `whenValid` instead.\r\n    isValid: function isValid(options) {\r\n      if (arguments.length >= 1 && !$.isPlainObject(options)) {\r\n        Utils__default.warnOnce('Calling isValid on a parsley form without passing arguments as an object is deprecated.');\r\n\r\n        var _arguments2 = _slice.call(arguments);\r\n\r\n        var group = _arguments2[0];\r\n        var force = _arguments2[1];\r\n\r\n        options = { group: group, force: force };\r\n      }\r\n      return Form__statusMapping[this.whenValid(options).state()];\r\n    },\r\n\r\n    // Iterate over refreshed fields and validate them.\r\n    // Returns a promise.\r\n    // A validation that immediately fails will interrupt the validations.\r\n    whenValid: function whenValid() {\r\n      var _this7 = this;\r\n\r\n      var _ref8 = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\r\n\r\n      var group = _ref8.group;\r\n      var force = _ref8.force;\r\n\r\n      this._refreshFields();\r\n\r\n      var promises = this._withoutReactualizingFormOptions(function () {\r\n        return $.map(_this7.fields, function (field) {\r\n          return field.whenValid({ group: group, force: force });\r\n        });\r\n      });\r\n      return Utils__default.all(promises);\r\n    },\r\n\r\n    // Reset UI\r\n    reset: function reset() {\r\n      // Form case: emit a reset event for each field\r\n      for (var i = 0; i < this.fields.length; i++) this.fields[i].reset();\r\n\r\n      this._trigger('reset');\r\n    },\r\n\r\n    // Destroy Parsley instance (+ UI)\r\n    destroy: function destroy() {\r\n      // Field case: emit destroy event to clean UI and then destroy stored instance\r\n      this._destroyUI();\r\n\r\n      // Form case: destroy all its fields and then destroy stored instance\r\n      for (var i = 0; i < this.fields.length; i++) this.fields[i].destroy();\r\n\r\n      this.$element.removeData('Parsley');\r\n      this._trigger('destroy');\r\n    },\r\n\r\n    _refreshFields: function _refreshFields() {\r\n      return this.actualizeOptions()._bindFields();\r\n    },\r\n\r\n    _bindFields: function _bindFields() {\r\n      var _this8 = this;\r\n\r\n      var oldFields = this.fields;\r\n\r\n      this.fields = [];\r\n      this.fieldsMappedById = {};\r\n\r\n      this._withoutReactualizingFormOptions(function () {\r\n        _this8.$element.find(_this8.options.inputs).not(_this8.options.excluded).each(function (_, element) {\r\n          var fieldInstance = new window.Parsley.Factory(element, {}, _this8);\r\n\r\n          // Only add valid and not excluded `Field` and `FieldMultiple` children\r\n          if (('Field' === fieldInstance.__class__ || 'FieldMultiple' === fieldInstance.__class__) && true !== fieldInstance.options.excluded) {\r\n            var uniqueId = fieldInstance.__class__ + '-' + fieldInstance.__id__;\r\n            if ('undefined' === typeof _this8.fieldsMappedById[uniqueId]) {\r\n              _this8.fieldsMappedById[uniqueId] = fieldInstance;\r\n              _this8.fields.push(fieldInstance);\r\n            }\r\n          }\r\n        });\r\n\r\n        $.each(Utils__default.difference(oldFields, _this8.fields), function (_, field) {\r\n          field.reset();\r\n        });\r\n      });\r\n      return this;\r\n    },\r\n\r\n    // Internal only.\r\n    // Looping on a form's fields to do validation or similar\r\n    // will trigger reactualizing options on all of them, which\r\n    // in turn will reactualize the form's options.\r\n    // To avoid calling actualizeOptions so many times on the form\r\n    // for nothing, _withoutReactualizingFormOptions temporarily disables\r\n    // the method actualizeOptions on this form while `fn` is called.\r\n    _withoutReactualizingFormOptions: function _withoutReactualizingFormOptions(fn) {\r\n      var oldActualizeOptions = this.actualizeOptions;\r\n      this.actualizeOptions = function () {\r\n        return this;\r\n      };\r\n      var result = fn();\r\n      this.actualizeOptions = oldActualizeOptions;\r\n      return result;\r\n    },\r\n\r\n    // Internal only.\r\n    // Shortcut to trigger an event\r\n    // Returns true iff event is not interrupted and default not prevented.\r\n    _trigger: function _trigger(eventName) {\r\n      return this.trigger('form:' + eventName);\r\n    }\r\n\r\n  };\r\n\r\n  var Constraint = function Constraint(parsleyField, name, requirements, priority, isDomConstraint) {\r\n    var validatorSpec = window.Parsley._validatorRegistry.validators[name];\r\n    var validator = new Validator(validatorSpec);\r\n\r\n    $.extend(this, {\r\n      validator: validator,\r\n      name: name,\r\n      requirements: requirements,\r\n      priority: priority || parsleyField.options[name + 'Priority'] || validator.priority,\r\n      isDomConstraint: true === isDomConstraint\r\n    });\r\n    this._parseRequirements(parsleyField.options);\r\n  };\r\n\r\n  var capitalize = function capitalize(str) {\r\n    var cap = str[0].toUpperCase();\r\n    return cap + str.slice(1);\r\n  };\r\n\r\n  Constraint.prototype = {\r\n    validate: function validate(value, instance) {\r\n      var _validator;\r\n\r\n      return (_validator = this.validator).validate.apply(_validator, [value].concat(_toConsumableArray(this.requirementList), [instance]));\r\n    },\r\n\r\n    _parseRequirements: function _parseRequirements(options) {\r\n      var _this9 = this;\r\n\r\n      this.requirementList = this.validator.parseRequirements(this.requirements, function (key) {\r\n        return options[_this9.name + capitalize(key)];\r\n      });\r\n    }\r\n  };\r\n\r\n  var Field = function Field(field, domOptions, options, parsleyFormInstance) {\r\n    this.__class__ = 'Field';\r\n\r\n    this.$element = $(field);\r\n\r\n    // Set parent if we have one\r\n    if ('undefined' !== typeof parsleyFormInstance) {\r\n      this.parent = parsleyFormInstance;\r\n    }\r\n\r\n    this.options = options;\r\n    this.domOptions = domOptions;\r\n\r\n    // Initialize some properties\r\n    this.constraints = [];\r\n    this.constraintsByName = {};\r\n    this.validationResult = true;\r\n\r\n    // Bind constraints\r\n    this._bindConstraints();\r\n  };\r\n\r\n  var parsley_field__statusMapping = { pending: null, resolved: true, rejected: false };\r\n\r\n  Field.prototype = {\r\n    // # Public API\r\n    // Validate field and trigger some events for mainly `UI`\r\n    // @returns `true`, an array of the validators that failed, or\r\n    // `null` if validation is not finished. Prefer using whenValidate\r\n    validate: function validate(options) {\r\n      if (arguments.length >= 1 && !$.isPlainObject(options)) {\r\n        Utils__default.warnOnce('Calling validate on a parsley field without passing arguments as an object is deprecated.');\r\n        options = { options: options };\r\n      }\r\n      var promise = this.whenValidate(options);\r\n      if (!promise) // If excluded with `group` option\r\n        return true;\r\n      switch (promise.state()) {\r\n        case 'pending':\r\n          return null;\r\n        case 'resolved':\r\n          return true;\r\n        case 'rejected':\r\n          return this.validationResult;\r\n      }\r\n    },\r\n\r\n    // Validate field and trigger some events for mainly `UI`\r\n    // @returns a promise that succeeds only when all validations do\r\n    // or `undefined` if field is not in the given `group`.\r\n    whenValidate: function whenValidate() {\r\n      var _whenValid$always$done$fail$always,\r\n          _this10 = this;\r\n\r\n      var _ref9 = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\r\n\r\n      var force = _ref9.force;\r\n      var group = _ref9.group;\r\n\r\n      // do not validate a field if not the same as given validation group\r\n      this.refreshConstraints();\r\n      if (group && !this._isInGroup(group)) return;\r\n\r\n      this.value = this.getValue();\r\n\r\n      // Field Validate event. `this.value` could be altered for custom needs\r\n      this._trigger('validate');\r\n\r\n      return (_whenValid$always$done$fail$always = this.whenValid({ force: force, value: this.value, _refreshed: true }).always(function () {\r\n        _this10._reflowUI();\r\n      }).done(function () {\r\n        _this10._trigger('success');\r\n      }).fail(function () {\r\n        _this10._trigger('error');\r\n      }).always(function () {\r\n        _this10._trigger('validated');\r\n      })).pipe.apply(_whenValid$always$done$fail$always, _toConsumableArray(this._pipeAccordingToValidationResult()));\r\n    },\r\n\r\n    hasConstraints: function hasConstraints() {\r\n      return 0 !== this.constraints.length;\r\n    },\r\n\r\n    // An empty optional field does not need validation\r\n    needsValidation: function needsValidation(value) {\r\n      if ('undefined' === typeof value) value = this.getValue();\r\n\r\n      // If a field is empty and not required, it is valid\r\n      // Except if `data-parsley-validate-if-empty` explicitely added, useful for some custom validators\r\n      if (!value.length && !this._isRequired() && 'undefined' === typeof this.options.validateIfEmpty) return false;\r\n\r\n      return true;\r\n    },\r\n\r\n    _isInGroup: function _isInGroup(group) {\r\n      if ($.isArray(this.options.group)) return -1 !== $.inArray(group, this.options.group);\r\n      return this.options.group === group;\r\n    },\r\n\r\n    // Just validate field. Do not trigger any event.\r\n    // Returns `true` iff all constraints pass, `false` if there are failures,\r\n    // or `null` if the result can not be determined yet (depends on a promise)\r\n    // See also `whenValid`.\r\n    isValid: function isValid(options) {\r\n      if (arguments.length >= 1 && !$.isPlainObject(options)) {\r\n        Utils__default.warnOnce('Calling isValid on a parsley field without passing arguments as an object is deprecated.');\r\n\r\n        var _arguments3 = _slice.call(arguments);\r\n\r\n        var force = _arguments3[0];\r\n        var value = _arguments3[1];\r\n\r\n        options = { force: force, value: value };\r\n      }\r\n      var promise = this.whenValid(options);\r\n      if (!promise) // Excluded via `group`\r\n        return true;\r\n      return parsley_field__statusMapping[promise.state()];\r\n    },\r\n\r\n    // Just validate field. Do not trigger any event.\r\n    // @returns a promise that succeeds only when all validations do\r\n    // or `undefined` if the field is not in the given `group`.\r\n    // The argument `force` will force validation of empty fields.\r\n    // If a `value` is given, it will be validated instead of the value of the input.\r\n    whenValid: function whenValid() {\r\n      var _this11 = this;\r\n\r\n      var _ref10 = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\r\n\r\n      var _ref10$force = _ref10.force;\r\n      var force = _ref10$force === undefined ? false : _ref10$force;\r\n      var value = _ref10.value;\r\n      var group = _ref10.group;\r\n      var _refreshed = _ref10._refreshed;\r\n\r\n      // Recompute options and rebind constraints to have latest changes\r\n      if (!_refreshed) this.refreshConstraints();\r\n      // do not validate a field if not the same as given validation group\r\n      if (group && !this._isInGroup(group)) return;\r\n\r\n      this.validationResult = true;\r\n\r\n      // A field without constraint is valid\r\n      if (!this.hasConstraints()) return $.when();\r\n\r\n      // Value could be passed as argument, needed to add more power to 'field:validate'\r\n      if ('undefined' === typeof value || null === value) value = this.getValue();\r\n\r\n      if (!this.needsValidation(value) && true !== force) return $.when();\r\n\r\n      var groupedConstraints = this._getGroupedConstraints();\r\n      var promises = [];\r\n      $.each(groupedConstraints, function (_, constraints) {\r\n        // Process one group of constraints at a time, we validate the constraints\r\n        // and combine the promises together.\r\n        var promise = Utils__default.all($.map(constraints, function (constraint) {\r\n          return _this11._validateConstraint(value, constraint);\r\n        }));\r\n        promises.push(promise);\r\n        if (promise.state() === 'rejected') return false; // Interrupt processing if a group has already failed\r\n      });\r\n      return Utils__default.all(promises);\r\n    },\r\n\r\n    // @returns a promise\r\n    _validateConstraint: function _validateConstraint(value, constraint) {\r\n      var _this12 = this;\r\n\r\n      var result = constraint.validate(value, this);\r\n      // Map false to a failed promise\r\n      if (false === result) result = $.Deferred().reject();\r\n      // Make sure we return a promise and that we record failures\r\n      return Utils__default.all([result]).fail(function (errorMessage) {\r\n        if (!(_this12.validationResult instanceof Array)) _this12.validationResult = [];\r\n        _this12.validationResult.push({\r\n          assert: constraint,\r\n          errorMessage: 'string' === typeof errorMessage && errorMessage\r\n        });\r\n      });\r\n    },\r\n\r\n    // @returns Parsley field computed value that could be overrided or configured in DOM\r\n    getValue: function getValue() {\r\n      var value;\r\n\r\n      // Value could be overriden in DOM or with explicit options\r\n      if ('function' === typeof this.options.value) value = this.options.value(this);else if ('undefined' !== typeof this.options.value) value = this.options.value;else value = this.$element.val();\r\n\r\n      // Handle wrong DOM or configurations\r\n      if ('undefined' === typeof value || null === value) return '';\r\n\r\n      return this._handleWhitespace(value);\r\n    },\r\n\r\n    // Reset UI\r\n    reset: function reset() {\r\n      this._resetUI();\r\n      return this._trigger('reset');\r\n    },\r\n\r\n    // Destroy Parsley instance (+ UI)\r\n    destroy: function destroy() {\r\n      // Field case: emit destroy event to clean UI and then destroy stored instance\r\n      this._destroyUI();\r\n      this.$element.removeData('Parsley');\r\n      this.$element.removeData('FieldMultiple');\r\n      this._trigger('destroy');\r\n    },\r\n\r\n    // Actualize options that could have change since previous validation\r\n    // Re-bind accordingly constraints (could be some new, removed or updated)\r\n    refreshConstraints: function refreshConstraints() {\r\n      return this.actualizeOptions()._bindConstraints();\r\n    },\r\n\r\n    /**\r\n    * Add a new constraint to a field\r\n    *\r\n    * @param {String}   name\r\n    * @param {Mixed}    requirements      optional\r\n    * @param {Number}   priority          optional\r\n    * @param {Boolean}  isDomConstraint   optional\r\n    */\r\n    addConstraint: function addConstraint(name, requirements, priority, isDomConstraint) {\r\n\r\n      if (window.Parsley._validatorRegistry.validators[name]) {\r\n        var constraint = new Constraint(this, name, requirements, priority, isDomConstraint);\r\n\r\n        // if constraint already exist, delete it and push new version\r\n        if ('undefined' !== this.constraintsByName[constraint.name]) this.removeConstraint(constraint.name);\r\n\r\n        this.constraints.push(constraint);\r\n        this.constraintsByName[constraint.name] = constraint;\r\n      }\r\n\r\n      return this;\r\n    },\r\n\r\n    // Remove a constraint\r\n    removeConstraint: function removeConstraint(name) {\r\n      for (var i = 0; i < this.constraints.length; i++) if (name === this.constraints[i].name) {\r\n        this.constraints.splice(i, 1);\r\n        break;\r\n      }\r\n      delete this.constraintsByName[name];\r\n      return this;\r\n    },\r\n\r\n    // Update a constraint (Remove + re-add)\r\n    updateConstraint: function updateConstraint(name, parameters, priority) {\r\n      return this.removeConstraint(name).addConstraint(name, parameters, priority);\r\n    },\r\n\r\n    // # Internals\r\n\r\n    // Internal only.\r\n    // Bind constraints from config + options + DOM\r\n    _bindConstraints: function _bindConstraints() {\r\n      var constraints = [];\r\n      var constraintsByName = {};\r\n\r\n      // clean all existing DOM constraints to only keep javascript user constraints\r\n      for (var i = 0; i < this.constraints.length; i++) if (false === this.constraints[i].isDomConstraint) {\r\n        constraints.push(this.constraints[i]);\r\n        constraintsByName[this.constraints[i].name] = this.constraints[i];\r\n      }\r\n\r\n      this.constraints = constraints;\r\n      this.constraintsByName = constraintsByName;\r\n\r\n      // then re-add Parsley DOM-API constraints\r\n      for (var name in this.options) this.addConstraint(name, this.options[name], undefined, true);\r\n\r\n      // finally, bind special HTML5 constraints\r\n      return this._bindHtml5Constraints();\r\n    },\r\n\r\n    // Internal only.\r\n    // Bind specific HTML5 constraints to be HTML5 compliant\r\n    _bindHtml5Constraints: function _bindHtml5Constraints() {\r\n      // html5 required\r\n      if (this.$element.attr('required')) this.addConstraint('required', true, undefined, true);\r\n\r\n      // html5 pattern\r\n      if ('string' === typeof this.$element.attr('pattern')) this.addConstraint('pattern', this.$element.attr('pattern'), undefined, true);\r\n\r\n      // range\r\n      if ('undefined' !== typeof this.$element.attr('min') && 'undefined' !== typeof this.$element.attr('max')) this.addConstraint('range', [this.$element.attr('min'), this.$element.attr('max')], undefined, true);\r\n\r\n      // HTML5 min\r\n      else if ('undefined' !== typeof this.$element.attr('min')) this.addConstraint('min', this.$element.attr('min'), undefined, true);\r\n\r\n        // HTML5 max\r\n        else if ('undefined' !== typeof this.$element.attr('max')) this.addConstraint('max', this.$element.attr('max'), undefined, true);\r\n\r\n      // length\r\n      if ('undefined' !== typeof this.$element.attr('minlength') && 'undefined' !== typeof this.$element.attr('maxlength')) this.addConstraint('length', [this.$element.attr('minlength'), this.$element.attr('maxlength')], undefined, true);\r\n\r\n      // HTML5 minlength\r\n      else if ('undefined' !== typeof this.$element.attr('minlength')) this.addConstraint('minlength', this.$element.attr('minlength'), undefined, true);\r\n\r\n        // HTML5 maxlength\r\n        else if ('undefined' !== typeof this.$element.attr('maxlength')) this.addConstraint('maxlength', this.$element.attr('maxlength'), undefined, true);\r\n\r\n      // html5 types\r\n      var type = this.$element.attr('type');\r\n\r\n      if ('undefined' === typeof type) return this;\r\n\r\n      // Small special case here for HTML5 number: integer validator if step attribute is undefined or an integer value, number otherwise\r\n      if ('number' === type) {\r\n        return this.addConstraint('type', ['number', {\r\n          step: this.$element.attr('step') || '1',\r\n          base: this.$element.attr('min') || this.$element.attr('value')\r\n        }], undefined, true);\r\n        // Regular other HTML5 supported types\r\n      } else if (/^(email|url|range|date)$/i.test(type)) {\r\n          return this.addConstraint('type', type, undefined, true);\r\n        }\r\n      return this;\r\n    },\r\n\r\n    // Internal only.\r\n    // Field is required if have required constraint without `false` value\r\n    _isRequired: function _isRequired() {\r\n      if ('undefined' === typeof this.constraintsByName.required) return false;\r\n\r\n      return false !== this.constraintsByName.required.requirements;\r\n    },\r\n\r\n    // Internal only.\r\n    // Shortcut to trigger an event\r\n    _trigger: function _trigger(eventName) {\r\n      return this.trigger('field:' + eventName);\r\n    },\r\n\r\n    // Internal only\r\n    // Handles whitespace in a value\r\n    // Use `data-parsley-whitespace=\"squish\"` to auto squish input value\r\n    // Use `data-parsley-whitespace=\"trim\"` to auto trim input value\r\n    _handleWhitespace: function _handleWhitespace(value) {\r\n      if (true === this.options.trimValue) Utils__default.warnOnce('data-parsley-trim-value=\"true\" is deprecated, please use data-parsley-whitespace=\"trim\"');\r\n\r\n      if ('squish' === this.options.whitespace) value = value.replace(/\\s{2,}/g, ' ');\r\n\r\n      if ('trim' === this.options.whitespace || 'squish' === this.options.whitespace || true === this.options.trimValue) value = Utils__default.trimString(value);\r\n\r\n      return value;\r\n    },\r\n\r\n    _isDateInput: function _isDateInput() {\r\n      var c = this.constraintsByName.type;\r\n      return c && c.requirements === 'date';\r\n    },\r\n\r\n    // Internal only.\r\n    // Returns the constraints, grouped by descending priority.\r\n    // The result is thus an array of arrays of constraints.\r\n    _getGroupedConstraints: function _getGroupedConstraints() {\r\n      if (false === this.options.priorityEnabled) return [this.constraints];\r\n\r\n      var groupedConstraints = [];\r\n      var index = {};\r\n\r\n      // Create array unique of priorities\r\n      for (var i = 0; i < this.constraints.length; i++) {\r\n        var p = this.constraints[i].priority;\r\n        if (!index[p]) groupedConstraints.push(index[p] = []);\r\n        index[p].push(this.constraints[i]);\r\n      }\r\n      // Sort them by priority DESC\r\n      groupedConstraints.sort(function (a, b) {\r\n        return b[0].priority - a[0].priority;\r\n      });\r\n\r\n      return groupedConstraints;\r\n    }\r\n\r\n  };\r\n\r\n  var parsley_field = Field;\r\n\r\n  var Multiple = function Multiple() {\r\n    this.__class__ = 'FieldMultiple';\r\n  };\r\n\r\n  Multiple.prototype = {\r\n    // Add new `$element` sibling for multiple field\r\n    addElement: function addElement($element) {\r\n      this.$elements.push($element);\r\n\r\n      return this;\r\n    },\r\n\r\n    // See `Field.refreshConstraints()`\r\n    refreshConstraints: function refreshConstraints() {\r\n      var fieldConstraints;\r\n\r\n      this.constraints = [];\r\n\r\n      // Select multiple special treatment\r\n      if (this.$element.is('select')) {\r\n        this.actualizeOptions()._bindConstraints();\r\n\r\n        return this;\r\n      }\r\n\r\n      // Gather all constraints for each input in the multiple group\r\n      for (var i = 0; i < this.$elements.length; i++) {\r\n\r\n        // Check if element have not been dynamically removed since last binding\r\n        if (!$('html').has(this.$elements[i]).length) {\r\n          this.$elements.splice(i, 1);\r\n          continue;\r\n        }\r\n\r\n        fieldConstraints = this.$elements[i].data('FieldMultiple').refreshConstraints().constraints;\r\n\r\n        for (var j = 0; j < fieldConstraints.length; j++) this.addConstraint(fieldConstraints[j].name, fieldConstraints[j].requirements, fieldConstraints[j].priority, fieldConstraints[j].isDomConstraint);\r\n      }\r\n\r\n      return this;\r\n    },\r\n\r\n    // See `Field.getValue()`\r\n    getValue: function getValue() {\r\n      // Value could be overriden in DOM\r\n      if ('function' === typeof this.options.value) return this.options.value(this);else if ('undefined' !== typeof this.options.value) return this.options.value;\r\n\r\n      // Radio input case\r\n      if (this.$element.is('input[type=radio]')) return this._findRelated().filter(':checked').val() || '';\r\n\r\n      // checkbox input case\r\n      if (this.$element.is('input[type=checkbox]')) {\r\n        var values = [];\r\n\r\n        this._findRelated().filter(':checked').each(function () {\r\n          values.push($(this).val());\r\n        });\r\n\r\n        return values;\r\n      }\r\n\r\n      // Select multiple case\r\n      if (this.$element.is('select') && null === this.$element.val()) return [];\r\n\r\n      // Default case that should never happen\r\n      return this.$element.val();\r\n    },\r\n\r\n    _init: function _init() {\r\n      this.$elements = [this.$element];\r\n\r\n      return this;\r\n    }\r\n  };\r\n\r\n  var Factory = function Factory(element, options, parsleyFormInstance) {\r\n    this.$element = $(element);\r\n\r\n    // If the element has already been bound, returns its saved Parsley instance\r\n    var savedparsleyFormInstance = this.$element.data('Parsley');\r\n    if (savedparsleyFormInstance) {\r\n\r\n      // If the saved instance has been bound without a Form parent and there is one given in this call, add it\r\n      if ('undefined' !== typeof parsleyFormInstance && savedparsleyFormInstance.parent === window.Parsley) {\r\n        savedparsleyFormInstance.parent = parsleyFormInstance;\r\n        savedparsleyFormInstance._resetOptions(savedparsleyFormInstance.options);\r\n      }\r\n\r\n      if ('object' === typeof options) {\r\n        $.extend(savedparsleyFormInstance.options, options);\r\n      }\r\n\r\n      return savedparsleyFormInstance;\r\n    }\r\n\r\n    // Parsley must be instantiated with a DOM element or jQuery $element\r\n    if (!this.$element.length) throw new Error('You must bind Parsley on an existing element.');\r\n\r\n    if ('undefined' !== typeof parsleyFormInstance && 'Form' !== parsleyFormInstance.__class__) throw new Error('Parent instance must be a Form instance');\r\n\r\n    this.parent = parsleyFormInstance || window.Parsley;\r\n    return this.init(options);\r\n  };\r\n\r\n  Factory.prototype = {\r\n    init: function init(options) {\r\n      this.__class__ = 'Parsley';\r\n      this.__version__ = '2.7.0';\r\n      this.__id__ = Utils__default.generateID();\r\n\r\n      // Pre-compute options\r\n      this._resetOptions(options);\r\n\r\n      // A Form instance is obviously a `<form>` element but also every node that is not an input and has the `data-parsley-validate` attribute\r\n      if (this.$element.is('form') || Utils__default.checkAttr(this.$element, this.options.namespace, 'validate') && !this.$element.is(this.options.inputs)) return this.bind('parsleyForm');\r\n\r\n      // Every other element is bound as a `Field` or `FieldMultiple`\r\n      return this.isMultiple() ? this.handleMultiple() : this.bind('parsleyField');\r\n    },\r\n\r\n    isMultiple: function isMultiple() {\r\n      return this.$element.is('input[type=radio], input[type=checkbox]') || this.$element.is('select') && 'undefined' !== typeof this.$element.attr('multiple');\r\n    },\r\n\r\n    // Multiples fields are a real nightmare :(\r\n    // Maybe some refactoring would be appreciated here...\r\n    handleMultiple: function handleMultiple() {\r\n      var _this13 = this;\r\n\r\n      var name;\r\n      var multiple;\r\n      var parsleyMultipleInstance;\r\n\r\n      // Handle multiple name\r\n      if (this.options.multiple) ; // We already have our 'multiple' identifier\r\n      else if ('undefined' !== typeof this.$element.attr('name') && this.$element.attr('name').length) this.options.multiple = name = this.$element.attr('name');else if ('undefined' !== typeof this.$element.attr('id') && this.$element.attr('id').length) this.options.multiple = this.$element.attr('id');\r\n\r\n      // Special select multiple input\r\n      if (this.$element.is('select') && 'undefined' !== typeof this.$element.attr('multiple')) {\r\n        this.options.multiple = this.options.multiple || this.__id__;\r\n        return this.bind('parsleyFieldMultiple');\r\n\r\n        // Else for radio / checkboxes, we need a `name` or `data-parsley-multiple` to properly bind it\r\n      } else if (!this.options.multiple) {\r\n          Utils__default.warn('To be bound by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.', this.$element);\r\n          return this;\r\n        }\r\n\r\n      // Remove special chars\r\n      this.options.multiple = this.options.multiple.replace(/(:|\\.|\\[|\\]|\\{|\\}|\\$)/g, '');\r\n\r\n      // Add proper `data-parsley-multiple` to siblings if we have a valid multiple name\r\n      if ('undefined' !== typeof name) {\r\n        $('input[name=\"' + name + '\"]').each(function (i, input) {\r\n          if ($(input).is('input[type=radio], input[type=checkbox]')) $(input).attr(_this13.options.namespace + 'multiple', _this13.options.multiple);\r\n        });\r\n      }\r\n\r\n      // Check here if we don't already have a related multiple instance saved\r\n      var $previouslyRelated = this._findRelated();\r\n      for (var i = 0; i < $previouslyRelated.length; i++) {\r\n        parsleyMultipleInstance = $($previouslyRelated.get(i)).data('Parsley');\r\n        if ('undefined' !== typeof parsleyMultipleInstance) {\r\n\r\n          if (!this.$element.data('FieldMultiple')) {\r\n            parsleyMultipleInstance.addElement(this.$element);\r\n          }\r\n\r\n          break;\r\n        }\r\n      }\r\n\r\n      // Create a secret Field instance for every multiple field. It will be stored in `data('FieldMultiple')`\r\n      // And will be useful later to access classic `Field` stuff while being in a `FieldMultiple` instance\r\n      this.bind('parsleyField', true);\r\n\r\n      return parsleyMultipleInstance || this.bind('parsleyFieldMultiple');\r\n    },\r\n\r\n    // Return proper `Form`, `Field` or `FieldMultiple`\r\n    bind: function bind(type, doNotStore) {\r\n      var parsleyInstance;\r\n\r\n      switch (type) {\r\n        case 'parsleyForm':\r\n          parsleyInstance = $.extend(new Form(this.$element, this.domOptions, this.options), new Base(), window.ParsleyExtend)._bindFields();\r\n          break;\r\n        case 'parsleyField':\r\n          parsleyInstance = $.extend(new parsley_field(this.$element, this.domOptions, this.options, this.parent), new Base(), window.ParsleyExtend);\r\n          break;\r\n        case 'parsleyFieldMultiple':\r\n          parsleyInstance = $.extend(new parsley_field(this.$element, this.domOptions, this.options, this.parent), new Multiple(), new Base(), window.ParsleyExtend)._init();\r\n          break;\r\n        default:\r\n          throw new Error(type + 'is not a supported Parsley type');\r\n      }\r\n\r\n      if (this.options.multiple) Utils__default.setAttr(this.$element, this.options.namespace, 'multiple', this.options.multiple);\r\n\r\n      if ('undefined' !== typeof doNotStore) {\r\n        this.$element.data('FieldMultiple', parsleyInstance);\r\n\r\n        return parsleyInstance;\r\n      }\r\n\r\n      // Store the freshly bound instance in a DOM element for later access using jQuery `data()`\r\n      this.$element.data('Parsley', parsleyInstance);\r\n\r\n      // Tell the world we have a new Form or Field instance!\r\n      parsleyInstance._actualizeTriggers();\r\n      parsleyInstance._trigger('init');\r\n\r\n      return parsleyInstance;\r\n    }\r\n  };\r\n\r\n  var vernums = $.fn.jquery.split('.');\r\n  if (parseInt(vernums[0]) <= 1 && parseInt(vernums[1]) < 8) {\r\n    throw \"The loaded version of jQuery is too old. Please upgrade to 1.8.x or better.\";\r\n  }\r\n  if (!vernums.forEach) {\r\n    Utils__default.warn('Parsley requires ES5 to run properly. Please include https://github.com/es-shims/es5-shim');\r\n  }\r\n  // Inherit `on`, `off` & `trigger` to Parsley:\r\n  var Parsley = $.extend(new Base(), {\r\n    $element: $(document),\r\n    actualizeOptions: null,\r\n    _resetOptions: null,\r\n    Factory: Factory,\r\n    version: '2.7.0'\r\n  });\r\n\r\n  // Supplement Field and Form with Base\r\n  // This way, the constructors will have access to those methods\r\n  $.extend(parsley_field.prototype, UI.Field, Base.prototype);\r\n  $.extend(Form.prototype, UI.Form, Base.prototype);\r\n  // Inherit actualizeOptions and _resetOptions:\r\n  $.extend(Factory.prototype, Base.prototype);\r\n\r\n  // ### jQuery API\r\n  // `$('.elem').parsley(options)` or `$('.elem').psly(options)`\r\n  $.fn.parsley = $.fn.psly = function (options) {\r\n    if (this.length > 1) {\r\n      var instances = [];\r\n\r\n      this.each(function () {\r\n        instances.push($(this).parsley(options));\r\n      });\r\n\r\n      return instances;\r\n    }\r\n\r\n    // Return undefined if applied to non existing DOM element\r\n    if (!$(this).length) {\r\n      Utils__default.warn('You must bind Parsley on an existing element.');\r\n\r\n      return;\r\n    }\r\n\r\n    return new Factory(this, options);\r\n  };\r\n\r\n  // ### Field and Form extension\r\n  // Ensure the extension is now defined if it wasn't previously\r\n  if ('undefined' === typeof window.ParsleyExtend) window.ParsleyExtend = {};\r\n\r\n  // ### Parsley config\r\n  // Inherit from ParsleyDefault, and copy over any existing values\r\n  Parsley.options = $.extend(Utils__default.objectCreate(Defaults), window.ParsleyConfig);\r\n  window.ParsleyConfig = Parsley.options; // Old way of accessing global options\r\n\r\n  // ### Globals\r\n  window.Parsley = window.psly = Parsley;\r\n  Parsley.Utils = Utils__default;\r\n  window.ParsleyUtils = {};\r\n  $.each(Utils__default, function (key, value) {\r\n    if ('function' === typeof value) {\r\n      window.ParsleyUtils[key] = function () {\r\n        Utils__default.warnOnce('Accessing `window.ParsleyUtils` is deprecated. Use `window.Parsley.Utils` instead.');\r\n        return Utils__default[key].apply(Utils__default, arguments);\r\n      };\r\n    }\r\n  });\r\n\r\n  // ### Define methods that forward to the registry, and deprecate all access except through window.Parsley\r\n  var registry = window.Parsley._validatorRegistry = new ValidatorRegistry(window.ParsleyConfig.validators, window.ParsleyConfig.i18n);\r\n  window.ParsleyValidator = {};\r\n  $.each('setLocale addCatalog addMessage addMessages getErrorMessage formatMessage addValidator updateValidator removeValidator'.split(' '), function (i, method) {\r\n    window.Parsley[method] = $.proxy(registry, method);\r\n    window.ParsleyValidator[method] = function () {\r\n      var _window$Parsley;\r\n\r\n      Utils__default.warnOnce('Accessing the method \\'' + method + '\\' through Validator is deprecated. Simply call \\'window.Parsley.' + method + '(...)\\'');\r\n      return (_window$Parsley = window.Parsley)[method].apply(_window$Parsley, arguments);\r\n    };\r\n  });\r\n\r\n  // ### UI\r\n  // Deprecated global object\r\n  window.Parsley.UI = UI;\r\n  window.ParsleyUI = {\r\n    removeError: function removeError(instance, name, doNotUpdateClass) {\r\n      var updateClass = true !== doNotUpdateClass;\r\n      Utils__default.warnOnce('Accessing UI is deprecated. Call \\'removeError\\' on the instance directly. Please comment in issue 1073 as to your need to call this method.');\r\n      return instance.removeError(name, { updateClass: updateClass });\r\n    },\r\n    getErrorsMessages: function getErrorsMessages(instance) {\r\n      Utils__default.warnOnce('Accessing UI is deprecated. Call \\'getErrorsMessages\\' on the instance directly.');\r\n      return instance.getErrorsMessages();\r\n    }\r\n  };\r\n  $.each('addError updateError'.split(' '), function (i, method) {\r\n    window.ParsleyUI[method] = function (instance, name, message, assert, doNotUpdateClass) {\r\n      var updateClass = true !== doNotUpdateClass;\r\n      Utils__default.warnOnce('Accessing UI is deprecated. Call \\'' + method + '\\' on the instance directly. Please comment in issue 1073 as to your need to call this method.');\r\n      return instance[method](name, { message: message, assert: assert, updateClass: updateClass });\r\n    };\r\n  });\r\n\r\n  // ### PARSLEY auto-binding\r\n  // Prevent it by setting `ParsleyConfig.autoBind` to `false`\r\n  if (false !== window.ParsleyConfig.autoBind) {\r\n    $(function () {\r\n      // Works only on `data-parsley-validate`.\r\n      if ($('[data-parsley-validate]').length) $('[data-parsley-validate]').parsley();\r\n    });\r\n  }\r\n\r\n  var o = $({});\r\n  var deprecated = function deprecated() {\r\n    Utils__default.warnOnce(\"Parsley's pubsub module is deprecated; use the 'on' and 'off' methods on parsley instances or window.Parsley\");\r\n  };\r\n\r\n  // Returns an event handler that calls `fn` with the arguments it expects\r\n  function adapt(fn, context) {\r\n    // Store to allow unbinding\r\n    if (!fn.parsleyAdaptedCallback) {\r\n      fn.parsleyAdaptedCallback = function () {\r\n        var args = Array.prototype.slice.call(arguments, 0);\r\n        args.unshift(this);\r\n        fn.apply(context || o, args);\r\n      };\r\n    }\r\n    return fn.parsleyAdaptedCallback;\r\n  }\r\n\r\n  var eventPrefix = 'parsley:';\r\n  // Converts 'parsley:form:validate' into 'form:validate'\r\n  function eventName(name) {\r\n    if (name.lastIndexOf(eventPrefix, 0) === 0) return name.substr(eventPrefix.length);\r\n    return name;\r\n  }\r\n\r\n  // $.listen is deprecated. Use Parsley.on instead.\r\n  $.listen = function (name, callback) {\r\n    var context;\r\n    deprecated();\r\n    if ('object' === typeof arguments[1] && 'function' === typeof arguments[2]) {\r\n      context = arguments[1];\r\n      callback = arguments[2];\r\n    }\r\n\r\n    if ('function' !== typeof callback) throw new Error('Wrong parameters');\r\n\r\n    window.Parsley.on(eventName(name), adapt(callback, context));\r\n  };\r\n\r\n  $.listenTo = function (instance, name, fn) {\r\n    deprecated();\r\n    if (!(instance instanceof parsley_field) && !(instance instanceof Form)) throw new Error('Must give Parsley instance');\r\n\r\n    if ('string' !== typeof name || 'function' !== typeof fn) throw new Error('Wrong parameters');\r\n\r\n    instance.on(eventName(name), adapt(fn));\r\n  };\r\n\r\n  $.unsubscribe = function (name, fn) {\r\n    deprecated();\r\n    if ('string' !== typeof name || 'function' !== typeof fn) throw new Error('Wrong arguments');\r\n    window.Parsley.off(eventName(name), fn.parsleyAdaptedCallback);\r\n  };\r\n\r\n  $.unsubscribeTo = function (instance, name) {\r\n    deprecated();\r\n    if (!(instance instanceof parsley_field) && !(instance instanceof Form)) throw new Error('Must give Parsley instance');\r\n    instance.off(eventName(name));\r\n  };\r\n\r\n  $.unsubscribeAll = function (name) {\r\n    deprecated();\r\n    window.Parsley.off(eventName(name));\r\n    $('form,input,textarea,select').each(function () {\r\n      var instance = $(this).data('Parsley');\r\n      if (instance) {\r\n        instance.off(eventName(name));\r\n      }\r\n    });\r\n  };\r\n\r\n  // $.emit is deprecated. Use jQuery events instead.\r\n  $.emit = function (name, instance) {\r\n    var _instance;\r\n\r\n    deprecated();\r\n    var instanceGiven = instance instanceof parsley_field || instance instanceof Form;\r\n    var args = Array.prototype.slice.call(arguments, instanceGiven ? 2 : 1);\r\n    args.unshift(eventName(name));\r\n    if (!instanceGiven) {\r\n      instance = window.Parsley;\r\n    }\r\n    (_instance = instance).trigger.apply(_instance, _toConsumableArray(args));\r\n  };\r\n\r\n  var pubsub = {};\r\n\r\n  $.extend(true, Parsley, {\r\n    asyncValidators: {\r\n      'default': {\r\n        fn: function fn(xhr) {\r\n          // By default, only status 2xx are deemed successful.\r\n          // Note: we use status instead of state() because responses with status 200\r\n          // but invalid messages (e.g. an empty body for content type set to JSON) will\r\n          // result in state() === 'rejected'.\r\n          return xhr.status >= 200 && xhr.status < 300;\r\n        },\r\n        url: false\r\n      },\r\n      reverse: {\r\n        fn: function fn(xhr) {\r\n          // If reverse option is set, a failing ajax request is considered successful\r\n          return xhr.status < 200 || xhr.status >= 300;\r\n        },\r\n        url: false\r\n      }\r\n    },\r\n\r\n    addAsyncValidator: function addAsyncValidator(name, fn, url, options) {\r\n      Parsley.asyncValidators[name] = {\r\n        fn: fn,\r\n        url: url || false,\r\n        options: options || {}\r\n      };\r\n\r\n      return this;\r\n    }\r\n\r\n  });\r\n\r\n  Parsley.addValidator('remote', {\r\n    requirementType: {\r\n      '': 'string',\r\n      'validator': 'string',\r\n      'reverse': 'boolean',\r\n      'options': 'object'\r\n    },\r\n\r\n    validateString: function validateString(value, url, options, instance) {\r\n      var data = {};\r\n      var ajaxOptions;\r\n      var csr;\r\n      var validator = options.validator || (true === options.reverse ? 'reverse' : 'default');\r\n\r\n      if ('undefined' === typeof Parsley.asyncValidators[validator]) throw new Error('Calling an undefined async validator: `' + validator + '`');\r\n\r\n      url = Parsley.asyncValidators[validator].url || url;\r\n\r\n      // Fill current value\r\n      if (url.indexOf('{value}') > -1) {\r\n        url = url.replace('{value}', encodeURIComponent(value));\r\n      } else {\r\n        data[instance.$element.attr('name') || instance.$element.attr('id')] = value;\r\n      }\r\n\r\n      // Merge options passed in from the function with the ones in the attribute\r\n      var remoteOptions = $.extend(true, options.options || {}, Parsley.asyncValidators[validator].options);\r\n\r\n      // All `$.ajax(options)` could be overridden or extended directly from DOM in `data-parsley-remote-options`\r\n      ajaxOptions = $.extend(true, {}, {\r\n        url: url,\r\n        data: data,\r\n        type: 'GET'\r\n      }, remoteOptions);\r\n\r\n      // Generate store key based on ajax options\r\n      instance.trigger('field:ajaxoptions', instance, ajaxOptions);\r\n\r\n      csr = $.param(ajaxOptions);\r\n\r\n      // Initialise querry cache\r\n      if ('undefined' === typeof Parsley._remoteCache) Parsley._remoteCache = {};\r\n\r\n      // Try to retrieve stored xhr\r\n      var xhr = Parsley._remoteCache[csr] = Parsley._remoteCache[csr] || $.ajax(ajaxOptions);\r\n\r\n      var handleXhr = function handleXhr() {\r\n        var result = Parsley.asyncValidators[validator].fn.call(instance, xhr, url, options);\r\n        if (!result) // Map falsy results to rejected promise\r\n          result = $.Deferred().reject();\r\n        return $.when(result);\r\n      };\r\n\r\n      return xhr.then(handleXhr, handleXhr);\r\n    },\r\n\r\n    priority: -1\r\n  });\r\n\r\n  Parsley.on('form:submit', function () {\r\n    Parsley._remoteCache = {};\r\n  });\r\n\r\n  window.ParsleyExtend.addAsyncValidator = function () {\r\n    Utils.warnOnce('Accessing the method `addAsyncValidator` through an instance is deprecated. Simply call `Parsley.addAsyncValidator(...)`');\r\n    return Parsley.addAsyncValidator.apply(Parsley, arguments);\r\n  };\r\n\r\n  // This is included with the Parsley library itself,\r\n  // thus there is no use in adding it to your project.\r\n  Parsley.addMessages('en', {\r\n    defaultMessage: \"This value seems to be invalid.\",\r\n    type: {\r\n      email: \"This value should be a valid email.\",\r\n      url: \"This value should be a valid url.\",\r\n      number: \"This value should be a valid number.\",\r\n      integer: \"This value should be a valid integer.\",\r\n      digits: \"This value should be digits.\",\r\n      alphanum: \"This value should be alphanumeric.\"\r\n    },\r\n    notblank: \"This value should not be blank.\",\r\n    required: \"This value is required.\",\r\n    pattern: \"This value seems to be invalid.\",\r\n    min: \"This value should be greater than or equal to %s.\",\r\n    max: \"This value should be lower than or equal to %s.\",\r\n    range: \"This value should be between %s and %s.\",\r\n    minlength: \"This value is too short. It should have %s characters or more.\",\r\n    maxlength: \"This value is too long. It should have %s characters or fewer.\",\r\n    length: \"This value length is invalid. It should be between %s and %s characters long.\",\r\n    mincheck: \"You must select at least %s choices.\",\r\n    maxcheck: \"You must select %s choices or fewer.\",\r\n    check: \"You must select between %s and %s choices.\",\r\n    equalto: \"This value should be the same.\"\r\n  });\r\n\r\n  Parsley.setLocale('en');\r\n\r\n  /**\r\n   * inputevent - Alleviate browser bugs for input events\r\n   * https://github.com/marcandre/inputevent\r\n   * @version v0.0.3 - (built Thu, Apr 14th 2016, 5:58 pm)\r\n   * @author Marc-Andre Lafortune <github@marc-andre.ca>\r\n   * @license MIT\r\n   */\r\n\r\n  function InputEvent() {\r\n    var _this14 = this;\r\n\r\n    var globals = window || global;\r\n\r\n    // Slightly odd way construct our object. This way methods are force bound.\r\n    // Used to test for duplicate library.\r\n    $.extend(this, {\r\n\r\n      // For browsers that do not support isTrusted, assumes event is native.\r\n      isNativeEvent: function isNativeEvent(evt) {\r\n        return evt.originalEvent && evt.originalEvent.isTrusted !== false;\r\n      },\r\n\r\n      fakeInputEvent: function fakeInputEvent(evt) {\r\n        if (_this14.isNativeEvent(evt)) {\r\n          $(evt.target).trigger('input');\r\n        }\r\n      },\r\n\r\n      misbehaves: function misbehaves(evt) {\r\n        if (_this14.isNativeEvent(evt)) {\r\n          _this14.behavesOk(evt);\r\n          $(document).on('change.inputevent', evt.data.selector, _this14.fakeInputEvent);\r\n          _this14.fakeInputEvent(evt);\r\n        }\r\n      },\r\n\r\n      behavesOk: function behavesOk(evt) {\r\n        if (_this14.isNativeEvent(evt)) {\r\n          $(document) // Simply unbinds the testing handler\r\n          .off('input.inputevent', evt.data.selector, _this14.behavesOk).off('change.inputevent', evt.data.selector, _this14.misbehaves);\r\n        }\r\n      },\r\n\r\n      // Bind the testing handlers\r\n      install: function install() {\r\n        if (globals.inputEventPatched) {\r\n          return;\r\n        }\r\n        globals.inputEventPatched = '0.0.3';\r\n        var _arr = ['select', 'input[type=\"checkbox\"]', 'input[type=\"radio\"]', 'input[type=\"file\"]'];\r\n        for (var _i = 0; _i < _arr.length; _i++) {\r\n          var selector = _arr[_i];\r\n          $(document).on('input.inputevent', selector, { selector: selector }, _this14.behavesOk).on('change.inputevent', selector, { selector: selector }, _this14.misbehaves);\r\n        }\r\n      },\r\n\r\n      uninstall: function uninstall() {\r\n        delete globals.inputEventPatched;\r\n        $(document).off('.inputevent');\r\n      }\r\n\r\n    });\r\n  };\r\n\r\n  var inputevent = new InputEvent();\r\n\r\n  inputevent.install();\r\n\r\n  var parsley = Parsley;\r\n\r\n  return parsley;\r\n});\r\n//# sourceMappingURL=parsley.js.map\r\n","import journey from \"lib/journey/journey.js\";\r\nimport Ractive from \"lib/ractive.js\";\r\nimport template from \"./validatingForm.html\";\r\nimport \"lib/parsley.js\";\r\n\r\nlet parsley;\r\n\r\nvar validatingForm = {\r\n\r\n\tenter: function ( route, prevRoute, options ) {\r\n\t\t/*%injectPath%*/\r\n\t\troute.view = new Ractive( {\r\n\t\t\tel: options.target,\r\n\t\t\ttemplate: template,\r\n\t\t\t\r\n\t\t\toncomplete: function() {\r\n\t\t\t\tconsole.log(\"FORM: oncomplete!\")\r\n\t\t\t\tsetupParsley();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tonteardown: function() {\r\n\t\t\t\tconsole.log(\"FORM: onteardown!\")\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tondestruct: function() {\r\n\t\t\t\tconsole.log(\"FORM: ondestruct!\")\r\n\t\t\t},\r\n\r\n\t\t\tsubmit: function () {\r\n\t\t\t\tvar valid = parsley.validate();\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tresetData: function () {\r\n\t\t\t\t$( '.bs-callout-info' ).addClass( 'hidden' );\r\n\t\t\t\t$( '.bs-callout-warning' ).addClass( 'hidden' );\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\r\n\t},\r\n\r\n\tleave: function ( route, nextRoute, options ) {\r\n\t\troute.view.teardown();\r\n\t}\r\n};\r\n\r\nexport default validatingForm\r\n\r\n\r\n//\r\n//define( function ( require ) {\r\n//var $ = require( \"jquery\" );\r\n//\t\tvar kudu = require( \"kudu\" );\r\n//\t\tvar parsley = require( \"parsley\" );\r\n//\t\tvar template = require( \"rvc!./validating-form\" );\r\n//\t\tfunction ValidatingForm( ) {\r\n//\r\n//\t\tvar that = {};\r\n//\t\t\t\tvar parsley;\r\n//\t\t\t\t/*\r\n//\t\t\t\t that.onInit = function (options) {\r\n//\t\t\t\t var view = createView();\r\n//\t\t\t\t return view;\r\n//\t\t\t\t };\r\n//\t\t\t\t \r\n//\t\t\t\t that.onRender = function (options) {\r\n//\t\t\t\t parsley = $('form').parsley({\r\n//\t\t\t\t /*\r\n//\t\t\t\t // This comment shows how to use bootstrap's error highlighting\r\n//\t\t\t\t }\r\n//\t\t\t\t successClass: \"has-success\",\r\n//\t\t\t\t errorClass: \"has-error\",\r\n//\t\t\t\t classHandler: function (field) {\r\n//\t\t\t\t return field.$element.closest(\".form-group\");\r\n//\t\t\t\t },\r\n//\t\t\t\t errorsWrapper: \"<span class='help-block parsley-errors-list'></span>\",\r\n//\t\t\t\t errorTemplate: \"<span></span>\"\r\n//\t\t\t\t */\r\n//\t\t} );\r\n//\t\tparsley.on( 'form:validated', function ( form ) {\r\n//\r\n//\t\t// If you want all fields automatically tracked for errors after form submission, uncomment line below\r\n//\t\t//setFieldsInvalid(form);\r\n//\t\tshowFormValidationFeedback( form );\r\n//\t\t} );\r\n//\t\tparsley.on( 'field:validated', function ( field ) {\r\n//\t\tshowFormValidationFeedback( field.parent );\r\n//\t\t} );\r\n//}; \r\n//\t\t\r\n\t\tfunction setupParsley( ) {\r\n\t\tparsley = $( 'form' ).parsley( {\r\n\t\t/*\r\n\t\t // This comment shows how to use bootstrap's error highlighting\r\n\t\t }\r\n\t\t successClass: \"has-success\",\r\n\t\t errorClass: \"has-error\",\r\n\t\t classHandler: function (field) {\r\n\t\t return field.$element.closest(\".form-group\");\r\n\t\t },\r\n\t\t errorsWrapper: \"<span class='help-block parsley-errors-list'></span>\",\r\n\t\t errorTemplate: \"<span></span>\"\r\n\t\t */\r\n\t\t} );\r\n\t\t\t\tparsley.on( 'form:validated', function ( form ) {\r\n\r\n\t\t\t\t// If you want all fields automatically tracked for errors after form submission, uncomment line below\r\n\t\t\t\t//setFieldsInvalid(form);\r\n\t\t\t\tshowFormValidationFeedback( form );\r\n\t\t\t\t} );\r\n\t\t\t\tparsley.on( 'field:validated', function ( field ) {\r\n\t\t\t\tshowFormValidationFeedback( field.parent );\r\n\t\t\t\t} );\r\n\t\t}\r\n\r\nfunction setFieldsInvalid( form ) {\r\nfor ( var n = 0; n < form.fields.length; n++ ) {\r\nvar field = form.fields[n];\r\n\t\tParsleyUI.manageFailingFieldTrigger( field );\r\n}\r\n}\r\n\r\nfunction showFormValidationFeedback( form ) {\r\nvar ok = form.isValid( );\r\n\t\t$( '.bs-callout-info' ).toggleClass( 'hidden', !ok );\r\n\t\t$( '.bs-callout-warning' ).toggleClass( 'hidden', ok );\r\n}\r\n","import journey from \"lib/journey/journey.js\";\r\nimport events from \"lib/journey/utils/events\";\r\nimport Ractive from \"lib/ractive.js\";\r\nimport template from \"./events.html\";\r\n\r\nlet isListening = false;\r\n\r\nlet view;\r\n\r\nvar lifecycleEvents = {\r\n\r\n\tenter: function ( route, prevRoute, options ) {\r\n\t\t/*%injectPath%*/\r\n\r\n\t\t// example of a Ractive instance events (oninit and onrender)\r\n\t\tview = route.view = new Ractive( {\r\n\t\t\ttemplate: template,\r\n\t\t\tel: options.target,\r\n\t\t\tjourney: journey,\r\n\r\n\t\t\tdata: { isListening: isListening },\r\n\r\n\t\t\treloadView: function () {\r\n\t\t\t\tjourney.goto( \"/events\", { forceReload: true } );\r\n\t\t\t},\r\n\r\n\t\t\tupdateView: function () {\r\n\t\t\t\tvar random = Math.random() * 1000;\r\n\t\t\t\tjourney.goto( \"/events?random=\" + random );\r\n\t\t\t},\r\n\r\n\t\t\tonrender: function () {\r\n\t\t\t\t// apply code highlighting as soon as DOM is ready, before animation finish\r\n\t\t\t\tPrism.highlightAll();\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\r\n\t\troute.view.observe( \"isListening\", function ( newValue, oldValue, keypath ) {\r\n\t\t\tisListening = newValue;\r\n\t\t\tisListening ? startListening() : stopListening();\r\n\t\t}, { init: false } );\r\n\t},\r\n\r\n\tleave: function ( route, nextRoute, options ) {\r\n\t\treturn route.view.teardown();\r\n\t},\r\n\r\n\tbeforeenter: function ( route, prevRoute, options ) {\r\n\t\t// Noop method for demo purposes\r\n\t},\r\n\r\n\tupdate: function ( route, prevRoute, options ) {\r\n\t\t// Noop method for demo purposes\r\n\t}\r\n};\r\n\r\nfunction startListening() {\r\n\r\n\tjourney.on( events.BEFORE_ENTER, function ( options ) {\r\n\t\tconsole.log( \"onBeforeenter\", options );\r\n\t} );\r\n\r\n\tjourney.on( events.BEFORE_ENTER_COMPLETE, function ( options ) {\r\n\t\tconsole.log( \"onBeforeenterComplete\", options );\r\n\t} );\r\n\r\n\tjourney.on( events.ENTER, function ( options ) {\r\n\t\tconsole.log( \"onEnter:\", options );\r\n\t} );\r\n\r\n\tjourney.on( events.ENTERED, function ( options ) {\r\n\t\tconsole.log( \"onEntered\", options );\r\n\t} );\r\n\r\n\tjourney.on( events.UPDATE, function ( options ) {\r\n\t\tconsole.log( \"onUpdate\", options );\r\n\t} );\r\n\r\n\tjourney.on( events.UPDATED, function ( options ) {\r\n\t\tconsole.log( \"onUpdated\", options );\r\n\t} );\r\n\r\n\tjourney.on( events.LEAVE, function ( options ) {\r\n\t\tconsole.log( \"onLeave\", options );\r\n\t} );\r\n\r\n\tjourney.on( events.LEFT, function ( options ) {\r\n\t\tconsole.log( \"onLeft\", options );\r\n\t} );\r\n\r\n\tjourney.on( events.ERROR, function ( options ) {\r\n\t\tconsole.log( \"onError\", options );\r\n\t} );\r\n}\r\n\r\nfunction stopListening() {\r\n\tjourney.off( events.BEFORE_ENTER );\r\n\tjourney.off( events.BEFORE_ENTER_COMLETE );\r\n\tjourney.off( events.ENTER );\r\n\tjourney.off( events.ENTERED );\r\n\tjourney.off( events.UPDATE );\r\n\tjourney.off( events.UPDATED );\r\n\tjourney.off( events.LEAVE );\r\n\tjourney.off( events.LEFT );\r\n\tjourney.off( events.ERROR );\r\n}\r\n\r\n\r\nexport default lifecycleEvents;","import journey from \"lib/journey/journey.js\";\r\nimport Ractive from \"lib/ractive.js\";\r\nimport template from \"./basicAjax.html\";\r\n\r\nlet config;\r\n\r\nlet rejectRequest = false;\r\n\r\nvar basicAjax = {\r\n\t\r\n\tbeforeenter: function ( route, prevRoute, options ) {\r\n\t\t// Return promise for beforeenter\r\n\t\treturn $.getJSON( \"data/hello.json?delay=2000&reject=\" + rejectRequest ).then( function ( response ) {\r\n\t\t\treturn route.data = JSON.stringify( response );\r\n\r\n\t\t} ).catch( ( err ) => {\r\n\t\t\treturn route.data = \"Could not load data for BasicAjax: [\" + err.status + \":\" + err.statusText + \"]\";\r\n\t\t} );\r\n\t},\r\n\r\n\tenter: function ( route, prevRoute, options ) {\r\n\t\t/*%injectPath%*/\r\n\t\tconfig = options;\r\n\r\n\t\troute.view = createView( route.data );\r\n\t},\r\n\r\n\tleave: function ( route, nextRoute, options ) {\r\n\t\troute.view.teardown( );\r\n\t}\r\n};\r\n\r\nfunction createView( json ) {\r\n\r\n\t// Convert the JSON data object to a string representation\r\n\tvar view = new Ractive( {\r\n\t\tel: config.target,\r\n\t\tdata: { response: json },\r\n\t\ttemplate: template,\r\n\t\treload: function ( ) {\r\n\t\t\tjourney.go( \"/basicAjax\", {forceReload: true} );\r\n\t\t}\r\n\t} );\r\n\r\n\treturn view;\r\n}\r\n\r\nexport default basicAjax;","import journey from \"lib/journey/journey.js\";\r\nimport Ractive from \"lib/ractive.js\";\r\nimport template from \"./upload.html\";\r\n\r\nlet config;\r\n\r\nlet view;\r\n\r\nvar upload = {\r\n\r\n\tenter: function ( route, prevRoute, options ) {\r\n\t\tconfig = options;\r\n\t\t/*%injectPath%*/\r\n\r\n\t\troute.view = createView( route.data );\r\n\t},\r\n\r\n\tleave: function ( route, nextRoute, options ) {\r\n\t\troute.view.teardown( );\r\n\t}\r\n};\r\n\r\nfunction createView( json ) {\r\n\r\n\t// Convert the JSON data objectr to a string representation\r\n\tview = new Ractive( {\r\n\t\tel: config.target,\r\n\t\tdata: { response: json, msg: \"Upload a file\" },\r\n\t\ttemplate: template,\r\n\t\tsubmit: function ( ) {\r\n\t\t\tsubmitForm();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t} );\r\n\r\n\treturn view;\r\n}\r\n\r\nfunction submitForm( ) {\r\n\tview.set(\"display\", false);\r\n\tview.set(\"msg\", \"Busy uploading...\");\r\n\r\n\tlet files = $( \"#file\" )[0].files;\r\n\tif (files.length === 0) {\r\n\t\tview.set(\"msg\", \"Please select a file\");\r\n\t\treturn;\r\n\t}\r\n\r\n\tlet data = new FormData();\r\n\r\n\t$.each( files, function ( key, value ) {\r\n\t\tdata.append( key, value );\r\n\t} );\r\n\r\n\tlet promise = $.ajax( {\r\n\t\turl: 'data/submitForm?delay=2000',\r\n\t\ttype: 'POST',\r\n\t\tdata: data,\r\n\t\tcache: false,\r\n\t\tdataType: 'json',\r\n\t\tprocessData: false, // Don't process the files\r\n\t\tcontentType: false // Set content type to false as jQuery will tell the server its a query string request\r\n\t} );\r\n\r\n\tpromise.then( ( data, textStatus, jqXHR ) => {\r\n\t\tview.set(\"display\", true);\r\n\t\tview.set(\"response\", data.msg);\r\n\r\n\t} ).catch( ( jqXHR, textStatus, errorThrown ) => {\r\n\t\tview.set(\"display\", true);\r\n\t\tview.set(\"response\", errorThrown);\r\n\t} );\r\n}\r\n\r\nexport default upload;","import journey from \"lib/journey/journey.js\";\r\nimport Ractive from \"lib/ractive.js\";\r\nimport template from \"./basicComp.html\";\r\n\r\nvar basicComp = {\r\n\r\n\tenter: function ( route, prevRoute, options ) {\r\n\t\t/*%injectPath%*/\r\n\t\troute.view = createView( options );\r\n\t},\r\n\r\n\tleave: function ( route, nextRoute, options ) {\r\n\t\troute.view.teardown();\r\n\t}\r\n};\r\n\r\nfunction createView( options ) {\r\n\r\n\tvar component = Ractive.extend( {\r\n\t\ttemplate: '<div on-click=\"@.activate()\" class=\"comp\" style=\"cursor: pointer\">{{message}}</div>',\r\n\r\n\t\tactivate () {\r\n\t\t\t// We reference the parent ractive instance through \"comp.parent\" and set the parent data variables, hidden and feedback\r\n\t\t\tthis.root.set( \"hidden\", false );\r\n\t\t\tthis.root.set( \"feedback\", \"Component clicked!\" );\r\n\t\t}\r\n\t} );\r\n\r\n\tvar view = new Ractive( {\r\n\t\tel: options.target,\r\n\t\ttemplate: template,\r\n\t\tdata: { hidden: true },\r\n\r\n\t\t// We register our component as \"simple\"\r\n\t\tcomponents: {\r\n\t\t\tsimple: component\r\n\t\t}\r\n\t} );\r\n\t\r\n\t//view.attachChild(component, {target: \"simple\"});\r\n\r\n\treturn view;\r\n}\r\n\r\nexport default basicComp;\r\n","import journey from \"lib/journey/journey.js\";\r\nimport Ractive from \"lib/ractive.js\";\r\nimport template from \"./multipleComp.html\";\r\n\r\nvar multipleComp = {\r\n\r\n\tenter: function ( route, prevRoute, options ) {\r\n\t\t/*%injectPath%*/\r\n\r\n\t\troute.view = createView( options );\r\n\t},\r\n\r\n\tleave: function ( route, nextRoute, options ) {\r\n\t\troute.view.teardown();\r\n\t}\r\n};\r\n\r\nfunction createView( options ) {\r\n\r\n\tvar compA = new Ractive( {\r\n\t\ttemplate: '<div class=\"comp\">I am component A</div>'\r\n\t} );\r\n\r\n\tvar compB = new Ractive( {\r\n\t\ttemplate: '<div class=\"comp compB\">I am component B</div>'\r\n\t} );\r\n\r\n\tlet components = {\r\n\t\t\"compA\": compA,\r\n\t\t\"compB\": compB\r\n\t};\r\n\t\r\n\tlet comp;\r\n\r\n\tvar view = new Ractive( {\r\n\t\tel: options.target,\r\n\t\ttemplate: template,\r\n\r\n\t\tswap( name ) {\r\n\r\n\t\t\tif (comp) this.detachChild( comp );\r\n\t\t\tcomp = components[name];\r\n\t\t\tthis.attachChild( comp, { target: \"components\", insertAt: 0 } );\r\n\t\t}\r\n\t} );\r\n\r\n\treturn view;\r\n}\r\n\r\nexport default multipleComp;","import journey from \"lib/journey/journey.js\";\r\nimport Ractive from \"lib/ractive.js\";\r\nimport template from \"./compPubSub.html\";\r\nimport gridComponent from \"./grid.js\";\r\n\r\nvar compPubSub = {\r\n\r\n\tenter: function ( route, prevRoute, options ) {\r\n\t\t/*%injectPath%*/\r\n\t\troute.view = createView( options );\r\n\t},\r\n\r\n\tleave: function ( route, nextRoute, options ) {\r\n\t\troute.view.teardown();\r\n\t}\r\n};\r\n\r\n\r\nfunction createView(options) {\r\n\r\n\tvar view = new Ractive( {\r\n\t\tel: options.target,\r\n\t\ttemplate: template,\r\n\t\tcomponents: {\r\n\t\t\tgrid: gridComponent\r\n\t\t},\r\n\t\thandleAdd: function ( row ) {\r\n\t\t\t// handleAddRow is called from the template as: on-public.add=\"handleAdd($1)\r\n\t\t\t// $1 is a mapping to the first argument that the grid component 'public.add' event passed along\r\n\t\t\t// Other arguments would be mapped as $2, $3 or all with (...arguments)\r\n\t\t\tconsole.log( \"[parent] <grid on-public.add=\\\"handleAddRow($1)\\>: invoked with arguments:\", row );\r\n\r\n\t\t\t// If we want to invoke API on the grid, we can get a reference to the\r\n\t\t\t// component as follows:\r\n\t\t\tvar comp = this.findComponent( \"grid\" );\r\n\t\t}\r\n\t} );\r\n\r\n\t// Subscribe to the public.remove event fired by the Grid component, note we use the 'grid.' namespace to\r\n\t// listen to the public.remove event of the grid component\r\n\tview.on( \"grid.public.remove\", function ( ctx, id, index ) {\r\n\t\tconsole.log( \"[parent] on('grid.public.remove') invoked with arguments, id:\", id, \"index:\", index );\r\n\t} );\r\n\r\n\t// We can also subsribe to all public.remove events from all components using the '*.' notation.\r\n\tview.on( \"*.public.remove\", function ( ctx, id, index ) {\r\n\t\tconsole.log( \"[parent] on('*.public.remove') invoked with arguments:, id:\", id, \"index:\", index );\r\n\t} );\r\n\r\n\r\n\treturn view;\r\n}\r\n\r\nexport default compPubSub;\r\n","import journey from \"lib/journey/journey.js\";\r\nimport Ractive from \"lib/ractive.js\";\r\nimport template from \"./sidePanel.html\";\r\nimport 'lib/prism.js';\r\n\r\nlet panel;\r\n\r\nfunction sidePanel( target ) {\r\n\r\n\tpanel = new Ractive( {\r\n\r\n\t\tel: target,\r\n\r\n\t\ttemplate: template,\r\n\r\n\t\tclose: function () {\r\n\t\t\tvar event = this.event.original;\r\n\t\t\tclose( event );\r\n\t\t\treturn false;\r\n\t\t}\r\n\t} );\r\n\r\n\t$( \"body\" ).off( \"click\", handleBodyClick );\r\n\t$( \"body\" ).on( \"click\", handleBodyClick );\r\n\r\n\t// Public \r\n\tpanel.show = function ( options ) {\r\n\t\tshow(options);\r\n\t};\r\n\r\n\treturn panel;\r\n}\r\n\r\nfunction show( options = {} ) {\r\n\tvar path = options.path || getUrlPath();\r\n\tvar ext = options.ext || \"\";\r\n\tpanel.set( \"visible\", true );\r\n\r\n\tpanel.set( \"code\", path + \".\" + ext );\r\n\tpanel.set( \"title\", path + \".\" + ext );\r\n\tPrism.fileHighlight();\r\n\tlet $element = $( '.cd-panel-content' );\r\n\t//Prism.highlightElement( $element[0] );\r\n}\r\n\r\nfunction close( event ) {\r\n\tif ( $( event.target ).is( '.cd-panel' ) || $( event.target ).is( '.cd-panel-close' ) ) {\r\n\t\tpanel.set( \"visible\", false );\r\n\t}\r\n}\r\n\r\nfunction getUrlPath() {\r\n\tvar route = journey.getCurrentRoute();\r\n\treturn route.path;\r\n}\r\n\r\n// Private \r\nfunction handleBodyClick( e ) {\r\n\tif ( panel.get( \"visible\" ) === true ) {\r\n\r\n\t\tif ( $( e.target ).is( 'a' ) ) {\r\n\t\t\tpanel.set( \"visible\", false );\r\n\r\n\t\t\t$( \".cd-panel\" ).css( \"transitionProperty\", \"none\" );\r\n\t\t\tsetTimeout( function () {\r\n\t\t\t\t$( \".cd-panel\" ).css( \"transitionProperty\", \"all\" );\r\n\t\t\t} );\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default sidePanel;","import journey from \"lib/journey/journey.js\";\nimport 'lib/prism.js';\n\nlet windowResizeTimeoutId;\n\nlet menuSlider = {\n\n\tinit( options ) {\n\t\tsetupWindowResizeListener();\n\n\t\tsetupMenuListener();\n\t\t/*\n\t\t let $fallbackMenu = $( options.fallbackMenu );\n\t\t let $initialLi = $fallbackMenu.parent();\n\t\t setSliderOnActiveMenu( $initialLi );*/\n\t},\n\n\tupdateSlider( $li ) {\n\t\t// Parent dropdown menus should be skipped and handled by the child menu when selected\n\t\tif ( $li.length == 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tupdateMenu( $li );\n\n\t\tslideToMenu( $li );\n\t}\n};\n\nfunction setupMenuListener() {\n\n\tjourney.on( \"entered\", options => {\n\t\tlet viewName = getViewName( options );\n\t\tconsole.log( \"viewname:\", viewName );\n\n\t\tlet $li = getMenu( viewName );\n\n\t\tif ( hasActiveMenu() ) {\n\t\t\tmenuSlider.updateSlider( $li );\n\n\t\t} else {\n\t\t\tupdateMenu( $li );\t\t\t\t\t\t\n\t\t\tinitializeSlider( $li );\n\t\t}\n\t} );\n\n//\t$( '.navbar li' ).click( function ( e ) {\n//\t\tvar $li = $( this );\n//\n//\t\tmenuSlider.updateSlider( $li );\n//\t} );\n}\n\nfunction updateMenu( $li ) {\n\n\tif ( hasParent( $li ) ) {\n\t\tlet $parent = getParent( $li );\n\t\tupdateChild( $parent, $li );\n\t\t//slideToActiveMenu( $parent );\n\n\t} else {\n\t\tupdateLeaf( $li );\n\t\t//slideToActiveMenu( $li );\n\t}\n\t//}\n\n\treturn $li;\n}\n\nfunction updateLeaf( $li ) {\n\t$( '.navbar li.active' ).removeClass( 'active' );\n\t$li.addClass( 'active' );\n}\n\nfunction updateChild( $parent, $leaf ) {\n\t$( '.navbar li.active' ).removeClass( 'active' );\n\t$parent.addClass( 'active' );\n\n\t$( \"#navbar .sub-active\" ).removeClass( \"sub-active\" );\n\t$leaf.addClass( \"sub-active\" );\n}\n\nfunction slideToMenu( $li ) {\n\tif ( hasParent( $li ) ) {\n\t\t$li = getParent( $li );\n\t}\n\n\tif ( $( \"#nav-ind\" ).is( \":visible\" ) ) {\n\t\t// Only navigate to the menu if the menu has not collapsed yet ie is less than 768px\n\t\tvar location = getActiveMenuLocation( $li );\n\t\t$( '#nav-ind' ).animate( location, 'fast', 'linear' );\n\t}\n}\n\nfunction initializeSlider( $li ) {\n\tif ( hasParent( $li ) ) {\n\t\t$li = getParent( $li );\n\t}\n\t//$liItem.addClass( \"active\" );\n\tvar loc = getActiveMenuLocation( $li );\n\t$( '#nav-ind' ).css( loc );\n}\n\nfunction hasActiveMenu() {\n\tlet $li = $( \".navbar li.active\" );\n\treturn $li.length > 0;\n}\n\nfunction setupWindowResizeListener() {\n\t$( window ).resize( function () {\n\t\tclearTimeout( windowResizeTimeoutId );\n\t\twindowResizeTimeoutId = setTimeout( windowResized, 0 );\n\t} );\n\n\twindowResized();\n}\n\nfunction windowResized() {\n\tif ( window.matchMedia( '(min-width: 768px)' ).matches ) {\n\t\tvar $activeMenu = $( \"#navbar li.active\" );\n\t\tif ( $activeMenu.length > 0 ) {\n\t\t\tvar location = getActiveMenuLocation( $activeMenu );\n\t\t\t$( '#nav-ind' ).css( location );\n\t\t}\n\t}\n}\n\nfunction getActiveMenuLocation( $li ) {\n\tvar offsetTop = 60;\n\tvar offsetLeft = 0;\n\tvar offsetLeft = 0;\n\tif ( $li.length ) {\n\t\tlet $navbar = $( '#navbar' );\n\t\tlet navbarOffset = $navbar.offset();\n\t\tlet itemOffset = $li.offset();\n\t\toffsetLeft = itemOffset.left - navbarOffset.left;\n\t}\n\n\tvar width = $( '#navbar' ).width();\n\tvar liWidth = $( $li ).width();\n\tlet navbarHeight = $( '#navbar' ).height();\n\tlet liHeight = $li.height();\n\n\tvar location = {\n\t\ttop: offsetTop,\n\t\tleft: offsetLeft,\n\t\tright: width - liWidth - offsetLeft,\n\t\tbottom: navbarHeight - liHeight - offsetTop\n\t};\n\treturn location;\n}\n\nfunction isParent( $li ) {\n\tif ( $li.hasClass( \"dropdown\" ) ) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction isLeaf( $li ) {\n\treturn ! isParent( $li );\n}\n\nfunction getParent( $li ) {\n\tlet $parent = $li.closest( '.dropdown' );\n\treturn $parent;\n}\n\nfunction hasParent( $li ) {\n\tlet $parent = getParent( $li );\n\tif ( $parent.length == 1 ) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction getViewName( options ) {\n\tlet route = options.to;\n\tlet path = route.path;\n\tif ( path == null ) {\n\t\treturn \"\";\n\t}\n\n\tlet start = path.lastIndexOf( \"/\" );\n\tlet name = path.slice( start + 1 );\n\treturn name;\n}\n\nfunction getMenu( viewName ) {\n\t\n\tlet selector = \"#menu-\" + viewName;\n\tlet $li = $( selector ).parent();\n\n\tif ( $li.length == 0 ) {\n\t\t$li = $( \".navbar [href='/\" + viewName + \"'], .navbar [href='#\" + viewName + \"'], .navbar [href='\" + viewName + \"']\" ).parent( );\n\t}\n\treturn $li;\n}\n\nexport default menuSlider;","var util = {\n\n\tstripSearch: str => {\n\t\tlet start = str.indexOf( '?' );\n\n\t\tif ( start >= 0 ) {\n\t\t\tstr = str.substring( 0, start );\n\t\t}\n\t\treturn str;\n\t},\n\n\tisUrl: ( str ) => {\n\t\tif ( str.indexOf( \"://\" ) >= 0 ) {\n\t\t\treturn true;\n\t\t}\n\t},\n\n\tprefixWithBase: ( str, base ) => {\n\n\t\t// Cannot prefix a url with the base value: http://moo will become refixhttp://moo\n\t\tif ( util.isUrl( str ) ) {\n\t\t\treturn str;\n\t\t}\n\n\t\tlet index = str.indexOf( base );\n\t\tif ( index === 0 ) {\n\t\t\treturn str;\n\t\t}\n\n\t\t// Guard against double '/' when base ends with '/' and str starts with '/'\n\t\tif ( base[base.length - 1] === '/' && str[0] === '/' ) {\n\t\t\tstr = str.slice( 1 );\n\t\t}\n\n\t\tstr = base + str;\n\t\treturn str;\n\t},\n\n\tstripBase: ( str, base ) => {\n\t\tif ( str.indexOf( base ) === 0 ) {\n\t\t\tstr = str.substr( base.length );\n\t\t}\n\n\t\tif ( str === '' ) {\n\t\t\t// Don't return an empty str, return '/' which is generally mapped\n\t\t\treturn '/';\n\t\t}\n\t\treturn str;\n\t},\n\n\tgetLocationAsRelativeUrl: () => {\n\t\tlet relUrl = location.pathname + location.search + location.hash || '';\n\t\treturn relUrl;\n\t},\n\n\tuseDefaultRoute: ( path ) => {\n\t\tif ( path == null )\n\t\t\treturn true;\n\n\t\tif ( path.length == 1 ) {\n\n\t\t\tif ( path[0] == '/' || path[0] == '#' ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\textend: function ( out ) {\n\t\tout = out || { };\n\t\tfor ( var i = 1; i < arguments.length; i ++ ) {\n\t\t\tif ( ! arguments[i] )\n\t\t\t\tcontinue;\n\t\t\tfor ( var key in arguments[i] ) {\n\t\t\t\tif ( arguments[i].hasOwnProperty( key ) )\n\t\t\t\t\tout[key] = arguments[i][key];\n\t\t\t}\n\t\t}\n\n\t\treturn out;\n\t}\n};\n\nexport default util;","import config from \"./config.js\";\r\n\r\nlet listener;\r\n\r\nlet watchHistory = {\r\n\r\n\t_ignoreHashChange: false,\r\n\r\n\tuseOnHashChange: false,\r\n\r\n\tsupportHistory:   !!(window.history && window.history.pushState),\r\n\r\n\tnoop() {},\r\n\r\n\tstart( options = {} ) {\r\n\r\n\t\twatchHistory.useOnHashChange = watchHistory.shouldUseOnHashChange(options.useOnHashChange || false);\r\n\t\twatchHistory.listener = options.listener || watchHistory.noop;\r\n\r\n\t\twatchHistory.startListening();\r\n\t},\r\n\r\n\tstartListening() {\r\n\r\n\t\tif (watchHistory.useOnHashChange) {\r\n\t\t\twindow.addEventListener( 'hashchange', watchHistory.hashchangeEventLisener, false );\r\n\r\n\t\t} else {\r\n\t\t\twindow.addEventListener( 'popstate', watchHistory.popstateEventLisener, false );\r\n\t\t}\r\n\t},\r\n\t\r\n\tshouldUseOnHashChange(value) {\r\n\t\t// Use override if present\r\n\t\tif (value) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t if (watchHistory.supportHistory) {\r\n\t\t\t return false;\r\n\t\t }\r\n\t\t return true;\r\n\t},\r\n\r\n\tpopstateEventLisener( e ) {\r\n\t\tif ( e.state == null ) return; // hashchange, or otherwise outside roadtrip's control\r\n\r\n\t\t//let url = location.pathname;\r\n\t\tlet url = config.useHash ? location.hash : location.pathname;\r\n\t\tlet options = {\r\n\t\t\turl: url,\r\n\t\t\tpopEvent: e,\r\n\t\t\tpopState: true // so we know not to update the url and create another history entry\r\n\t\t};\r\n\t\tlistener(options);\r\n\t},\r\n\r\n\thashchangeEventLisener( e ) {\r\n\t\tif (watchHistory._ignoreHashChange) {\r\n\t\t\twatchHistory._ignoreHashChange = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet url = location.hash;\r\n\t\t\r\n\t\tlet options = {\r\n\t\t\turl: url,\r\n\t\t\thashEvent: e,\r\n\t\t\thashChange: true // so we know not to update the url and create another history entry\r\n\t\t};\r\n\t\t\r\n\t\tlistener(options);\r\n\t},\r\n\r\n\tsetListener( callback ) {\r\n\t\tlistener = callback;\r\n\t},\r\n\t\r\n\tsetHash(hash, replace = false) {\r\n\r\n\t\tif (replace) {\r\n\t\t\tlocation.replace(hash);\r\n\r\n\t\t} else {\r\n\t\t\t// updating the hash will fire a hashchange event but we only want to respond to hashchange events when the history pops, not pushed\r\n\t\t\twatchHistory._ignoreHashChange = true;\r\n\t\t\tlocation.hash = hash;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default watchHistory;\r\n","let config = {\n\tbase: '',\n\n\tuseHash: false,\n\n\thash: '#',\n};\n\nexport default config;","import util from \"./util.js\";\nimport config from \"./config.js\";\n\nlet pathHelper = {\n\n\tgetGotoPath: href => {\n\t\tif ( config.useHash ) {\n\t\t\treturn href;\n\t\t}\n\t\t\n\t\thref = pathHelper.stripSlashOrHashPrefix( href );\n\t\treturn href;\n\t},\n\n\tgetInitialPath: () => {\n\t\tlet relUrl = config.useHash ? location.hash : util.getLocationAsRelativeUrl();\n\t\tlet path = util.stripBase( relUrl, config.base );\n\n\t\tif ( config.defaultRoute && util.useDefaultRoute( path ) ) {\n\t\t\tpath = config.defaultRoute || path;\n\t\t}\n\n\t\tif ( ! config.useHash ) {\n\t\t\tpath = pathHelper.stripSlashOrHashPrefix( path );\n\t\t}\n\n\t\treturn path;\n\t},\n\n\tstripSlashOrHashPrefix: str => {\n\n\t\tif ( str == null )\n\t\t\treturn str;\n\t\tstr = str.trim( );\n\t\tif ( str[0] === '/' ) {\n\t\t\tstr = str.slice( 1 );\n\t\t}\n\n\t\tif ( str.startsWith( config.hash ) ) {\n\t\t\treturn str.slice( config.hash.length );\n\t\t}\n\n\t\tif ( str[0] === '#' ) {\n\t\t\tstr = str.slice( 1 );\n\t\t}\n\n\t\treturn str;\n\t},\n\tprefixWithHash: str => {\n\t\tif ( str.startsWith( config.hash ) ) {\n\t\t\treturn str;\n\t\t}\n\n\t\tstr = pathHelper.stripSlashOrHashPrefix( str );\n\t\tstr = config.hash + str;\n\t\treturn str;\n\t},\n\tprefixWithSlash( str ) {\n// Cannot prefix a url with '/' else http://moo will become /http://moo\n\t\tif ( util.isUrl( str ) ) {\n\t\t\treturn str;\n\t\t}\n\n\t\tif ( str[0] === '/' ) {\n\t\t\treturn str;\n\t\t} else {\n\t\t\tstr = pathHelper.stripSlashOrHashPrefix( str );\n\t\t}\n\t\tstr = '/' + str;\n\t\treturn str;\n\t}\n}\n\nexport default pathHelper;","export default ( typeof window !== 'undefined' ? window : null );","// from https://developer.mozilla.org/en/docs/Web/API/WindowEventHandlers/onhashchange\nif ( ! window.HashChangeEvent )\n\t( function () {\n\n\t\tvar lastURL = document.URL;\n\n\t\twindow.addEventListener( \"hashchange\", function ( event ) {\n\t\t\tObject.defineProperty( event, \"oldURL\", { enumerable: true, configurable: true, value: lastURL } );\n\t\t\tObject.defineProperty( event, \"newURL\", { enumerable: true, configurable: true, value: document.URL } );\n\n\t\t\tlastURL = document.URL;\n\t\t} );\n\t}() );\n\n\nif ( ! String.prototype.startsWith ) {\n\tString.prototype.startsWith = function ( searchString, position ) {\n\t\tposition = position || 0;\n\t\treturn this.substr( position, searchString.length ) === searchString;\n\t};\n}\n\nif ( ! String.prototype.endsWith ) {\n\tString.prototype.endsWith = function ( searchString, position ) {\n\t\tvar subjectString = this.toString();\n\t\tif ( typeof position !== 'number' || ! isFinite( position ) || Math.floor( position ) !== position || position > subjectString.length ) {\n\t\t\tposition = subjectString.length;\n\t\t}\n\t\tposition -= searchString.length;\n\t\tvar lastIndex = subjectString.lastIndexOf( searchString, position );\n\t\treturn lastIndex !== - 1 && lastIndex === position;\n\t};\n}","import EventEmitter from  \"../EventEmitter\";\n\nvar eventer = new EventEmitter();\n\nvar journey;\n\nvar origEmit = eventer.emit;\n\neventer.emit = function ( that ) {\n\tif ( typeof that === 'string' ) {\n\t\tvar args = Array.prototype.slice.call( arguments );\n\t\targs.unshift( journey );\n\t\treturn origEmit.apply( this, args );\n\t}\n\torigEmit.apply( this, arguments );\n};\n\n\neventer.init = ( arg ) => {\n\tjourney = arg;\n\n\tjourney.on = ( event, listener ) => {\n\t\t//eventer.on.call( journey, event, listener );\n\t\teventer.on( event, listener );\n\t};\n\t\n\tjourney.off = ( event, listener ) => {\n\t\teventer.off( event, listener );\n\t};\n\t\njourney.once = ( event, listener ) => {\n\t\teventer.off( event, listener );\n\t};\n\t\n\tjourney.emit = function () {\n\t\teventer.emit.apply( eventer, arguments );\n\t};\n\n\tjourney.emitEvent = function () {\n\t\teventer.emitEvent.apply( eventer, arguments );\n\t};\n};\n\nexport default eventer;","var mode = {\r\n\tDEBUG: null\r\n};\r\n\r\nexport default mode;\r\n\r\n","const events = {\n\tBEFORE_ENTER: \"beforeenter\",\n\tBEFORE_ENTER_COMPLETE: \"beforeenterComplete\",\n\tENTER: \"enter\",\t\n\tENTERED: \"entered\",\n\tUPDATE: \"update\",\n\tUPDATED: \"updated\",\n\tLEAVE: \"leave\",\n\tLEFT: \"left\",\n\tERROR: \"error\"\n};\n\nexport default events;","var config = {\r\n\ttarget: null,\r\n\tdefaultRoute: null,\r\n\tdebug: true\r\n\r\n};\r\n\r\nexport default config;","/* http://prismjs.com/download.html?themes=prism&languages=markup+css+clike+javascript+properties&plugins=line-highlight+line-numbers+file-highlight */\r\nvar _self = (typeof window !== 'undefined')\r\n\t? window   // if in browser\r\n\t: (\r\n\t\t(typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope)\r\n\t\t? self // if in worker\r\n\t\t: {}   // if in node js\r\n\t);\r\n\r\n/**\r\n * Prism: Lightweight, robust, elegant syntax highlighting\r\n * MIT license http://www.opensource.org/licenses/mit-license.php/\r\n * @author Lea Verou http://lea.verou.me\r\n */\r\n\r\nvar Prism = (function(){\r\n\r\n// Private helper vars\r\nvar lang = /\\blang(?:uage)?-(\\w+)\\b/i;\r\nvar uniqueId = 0;\r\n\r\nvar _ = _self.Prism = {\r\n\tmanual: _self.Prism && _self.Prism.manual,\r\n\tutil: {\r\n\t\tencode: function (tokens) {\r\n\t\t\tif (tokens instanceof Token) {\r\n\t\t\t\treturn new Token(tokens.type, _.util.encode(tokens.content), tokens.alias);\r\n\t\t\t} else if (_.util.type(tokens) === 'Array') {\r\n\t\t\t\treturn tokens.map(_.util.encode);\r\n\t\t\t} else {\r\n\t\t\t\treturn tokens.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\\u00a0/g, ' ');\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttype: function (o) {\r\n\t\t\treturn Object.prototype.toString.call(o).match(/\\[object (\\w+)\\]/)[1];\r\n\t\t},\r\n\r\n\t\tobjId: function (obj) {\r\n\t\t\tif (!obj['__id']) {\r\n\t\t\t\tObject.defineProperty(obj, '__id', { value: ++uniqueId });\r\n\t\t\t}\r\n\t\t\treturn obj['__id'];\r\n\t\t},\r\n\r\n\t\t// Deep clone a language definition (e.g. to extend it)\r\n\t\tclone: function (o) {\r\n\t\t\tvar type = _.util.type(o);\r\n\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase 'Object':\r\n\t\t\t\t\tvar clone = {};\r\n\r\n\t\t\t\t\tfor (var key in o) {\r\n\t\t\t\t\t\tif (o.hasOwnProperty(key)) {\r\n\t\t\t\t\t\t\tclone[key] = _.util.clone(o[key]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn clone;\r\n\r\n\t\t\t\tcase 'Array':\r\n\t\t\t\t\t// Check for existence for IE8\r\n\t\t\t\t\treturn o.map && o.map(function(v) { return _.util.clone(v); });\r\n\t\t\t}\r\n\r\n\t\t\treturn o;\r\n\t\t}\r\n\t},\r\n\r\n\tlanguages: {\r\n\t\textend: function (id, redef) {\r\n\t\t\tvar lang = _.util.clone(_.languages[id]);\r\n\r\n\t\t\tfor (var key in redef) {\r\n\t\t\t\tlang[key] = redef[key];\r\n\t\t\t}\r\n\r\n\t\t\treturn lang;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Insert a token before another token in a language literal\r\n\t\t * As this needs to recreate the object (we cannot actually insert before keys in object literals),\r\n\t\t * we cannot just provide an object, we need anobject and a key.\r\n\t\t * @param inside The key (or language id) of the parent\r\n\t\t * @param before The key to insert before. If not provided, the function appends instead.\r\n\t\t * @param insert Object with the key/value pairs to insert\r\n\t\t * @param root The object that contains `inside`. If equal to Prism.languages, it can be omitted.\r\n\t\t */\r\n\t\tinsertBefore: function (inside, before, insert, root) {\r\n\t\t\troot = root || _.languages;\r\n\t\t\tvar grammar = root[inside];\r\n\r\n\t\t\tif (arguments.length == 2) {\r\n\t\t\t\tinsert = arguments[1];\r\n\r\n\t\t\t\tfor (var newToken in insert) {\r\n\t\t\t\t\tif (insert.hasOwnProperty(newToken)) {\r\n\t\t\t\t\t\tgrammar[newToken] = insert[newToken];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn grammar;\r\n\t\t\t}\r\n\r\n\t\t\tvar ret = {};\r\n\r\n\t\t\tfor (var token in grammar) {\r\n\r\n\t\t\t\tif (grammar.hasOwnProperty(token)) {\r\n\r\n\t\t\t\t\tif (token == before) {\r\n\r\n\t\t\t\t\t\tfor (var newToken in insert) {\r\n\r\n\t\t\t\t\t\t\tif (insert.hasOwnProperty(newToken)) {\r\n\t\t\t\t\t\t\t\tret[newToken] = insert[newToken];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tret[token] = grammar[token];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Update references in other language definitions\r\n\t\t\t_.languages.DFS(_.languages, function(key, value) {\r\n\t\t\t\tif (value === root[inside] && key != inside) {\r\n\t\t\t\t\tthis[key] = ret;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn root[inside] = ret;\r\n\t\t},\r\n\r\n\t\t// Traverse a language definition with Depth First Search\r\n\t\tDFS: function(o, callback, type, visited) {\r\n\t\t\tvisited = visited || {};\r\n\t\t\tfor (var i in o) {\r\n\t\t\t\tif (o.hasOwnProperty(i)) {\r\n\t\t\t\t\tcallback.call(o, i, o[i], type || i);\r\n\r\n\t\t\t\t\tif (_.util.type(o[i]) === 'Object' && !visited[_.util.objId(o[i])]) {\r\n\t\t\t\t\t\tvisited[_.util.objId(o[i])] = true;\r\n\t\t\t\t\t\t_.languages.DFS(o[i], callback, null, visited);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (_.util.type(o[i]) === 'Array' && !visited[_.util.objId(o[i])]) {\r\n\t\t\t\t\t\tvisited[_.util.objId(o[i])] = true;\r\n\t\t\t\t\t\t_.languages.DFS(o[i], callback, i, visited);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tplugins: {},\r\n\r\n\thighlightAll: function(async, callback) {\r\n\t\tvar env = {\r\n\t\t\tcallback: callback,\r\n\t\t\tselector: 'code[class*=\"language-\"], [class*=\"language-\"] code, code[class*=\"lang-\"], [class*=\"lang-\"] code'\r\n\t\t};\r\n\r\n\t\t_.hooks.run(\"before-highlightall\", env);\r\n\r\n\t\tvar elements = env.elements || document.querySelectorAll(env.selector);\r\n\r\n\t\tfor (var i=0, element; element = elements[i++];) {\r\n\t\t\t_.highlightElement(element, async === true, env.callback);\r\n\t\t}\r\n\t},\r\n\r\n\thighlightElement: function(element, async, callback) {\r\n\t\t// Find language\r\n\t\tvar language, grammar, parent = element;\r\n\r\n\t\twhile (parent && !lang.test(parent.className)) {\r\n\t\t\tparent = parent.parentNode;\r\n\t\t}\r\n\r\n\t\tif (parent) {\r\n\t\t\tlanguage = (parent.className.match(lang) || [,''])[1].toLowerCase();\r\n\t\t\tgrammar = _.languages[language];\r\n\t\t}\r\n\r\n\t\t// Set language on the element, if not present\r\n\t\telement.className = element.className.replace(lang, '').replace(/\\s+/g, ' ') + ' language-' + language;\r\n\r\n\t\t// Set language on the parent, for styling\r\n\t\tparent = element.parentNode;\r\n\r\n\t\tif (/pre/i.test(parent.nodeName)) {\r\n\t\t\tparent.className = parent.className.replace(lang, '').replace(/\\s+/g, ' ') + ' language-' + language;\r\n\t\t}\r\n\r\n\t\tvar code = element.textContent;\r\n\r\n\t\tvar env = {\r\n\t\t\telement: element,\r\n\t\t\tlanguage: language,\r\n\t\t\tgrammar: grammar,\r\n\t\t\tcode: code\r\n\t\t};\r\n\r\n\t\t_.hooks.run('before-sanity-check', env);\r\n\r\n\t\tif (!env.code || !env.grammar) {\r\n\t\t\tif (env.code) {\r\n\t\t\t\tenv.element.textContent = env.code;\r\n\t\t\t}\r\n\t\t\t_.hooks.run('complete', env);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t_.hooks.run('before-highlight', env);\r\n\r\n\t\tif (async && _self.Worker) {\r\n\t\t\tvar worker = new Worker(_.filename);\r\n\r\n\t\t\tworker.onmessage = function(evt) {\r\n\t\t\t\tenv.highlightedCode = evt.data;\r\n\r\n\t\t\t\t_.hooks.run('before-insert', env);\r\n\r\n\t\t\t\tenv.element.innerHTML = env.highlightedCode;\r\n\r\n\t\t\t\tcallback && callback.call(env.element);\r\n\t\t\t\t_.hooks.run('after-highlight', env);\r\n\t\t\t\t_.hooks.run('complete', env);\r\n\t\t\t};\r\n\r\n\t\t\tworker.postMessage(JSON.stringify({\r\n\t\t\t\tlanguage: env.language,\r\n\t\t\t\tcode: env.code,\r\n\t\t\t\timmediateClose: true\r\n\t\t\t}));\r\n\t\t}\r\n\t\telse {\r\n\t\t\tenv.highlightedCode = _.highlight(env.code, env.grammar, env.language);\r\n\r\n\t\t\t_.hooks.run('before-insert', env);\r\n\r\n\t\t\tenv.element.innerHTML = env.highlightedCode;\r\n\r\n\t\t\tcallback && callback.call(element);\r\n\r\n\t\t\t_.hooks.run('after-highlight', env);\r\n\t\t\t_.hooks.run('complete', env);\r\n\t\t}\r\n\t},\r\n\r\n\thighlight: function (text, grammar, language) {\r\n\t\tvar tokens = _.tokenize(text, grammar);\r\n\t\treturn Token.stringify(_.util.encode(tokens), language);\r\n\t},\r\n\r\n\ttokenize: function(text, grammar, language) {\r\n\t\tvar Token = _.Token;\r\n\r\n\t\tvar strarr = [text];\r\n\r\n\t\tvar rest = grammar.rest;\r\n\r\n\t\tif (rest) {\r\n\t\t\tfor (var token in rest) {\r\n\t\t\t\tgrammar[token] = rest[token];\r\n\t\t\t}\r\n\r\n\t\t\tdelete grammar.rest;\r\n\t\t}\r\n\r\n\t\ttokenloop: for (var token in grammar) {\r\n\t\t\tif(!grammar.hasOwnProperty(token) || !grammar[token]) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar patterns = grammar[token];\r\n\t\t\tpatterns = (_.util.type(patterns) === \"Array\") ? patterns : [patterns];\r\n\r\n\t\t\tfor (var j = 0; j < patterns.length; ++j) {\r\n\t\t\t\tvar pattern = patterns[j],\r\n\t\t\t\t\tinside = pattern.inside,\r\n\t\t\t\t\tlookbehind = !!pattern.lookbehind,\r\n\t\t\t\t\tgreedy = !!pattern.greedy,\r\n\t\t\t\t\tlookbehindLength = 0,\r\n\t\t\t\t\talias = pattern.alias;\r\n\r\n\t\t\t\tif (greedy && !pattern.pattern.global) {\r\n\t\t\t\t\t// Without the global flag, lastIndex won't work\r\n\t\t\t\t\tvar flags = pattern.pattern.toString().match(/[imuy]*$/)[0];\r\n\t\t\t\t\tpattern.pattern = RegExp(pattern.pattern.source, flags + \"g\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpattern = pattern.pattern || pattern;\r\n\r\n\t\t\t\t// Dont cache length as it changes during the loop\r\n\t\t\t\tfor (var i=0, pos = 0; i<strarr.length; pos += strarr[i].length, ++i) {\r\n\r\n\t\t\t\t\tvar str = strarr[i];\r\n\r\n\t\t\t\t\tif (strarr.length > text.length) {\r\n\t\t\t\t\t\t// Something went terribly wrong, ABORT, ABORT!\r\n\t\t\t\t\t\tbreak tokenloop;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (str instanceof Token) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tpattern.lastIndex = 0;\r\n\r\n\t\t\t\t\tvar match = pattern.exec(str),\r\n\t\t\t\t\t    delNum = 1;\r\n\r\n\t\t\t\t\t// Greedy patterns can override/remove up to two previously matched tokens\r\n\t\t\t\t\tif (!match && greedy && i != strarr.length - 1) {\r\n\t\t\t\t\t\tpattern.lastIndex = pos;\r\n\t\t\t\t\t\tmatch = pattern.exec(text);\r\n\t\t\t\t\t\tif (!match) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar from = match.index + (lookbehind ? match[1].length : 0),\r\n\t\t\t\t\t\t    to = match.index + match[0].length,\r\n\t\t\t\t\t\t    k = i,\r\n\t\t\t\t\t\t    p = pos;\r\n\r\n\t\t\t\t\t\tfor (var len = strarr.length; k < len && p < to; ++k) {\r\n\t\t\t\t\t\t\tp += strarr[k].length;\r\n\t\t\t\t\t\t\t// Move the index i to the element in strarr that is closest to from\r\n\t\t\t\t\t\t\tif (from >= p) {\r\n\t\t\t\t\t\t\t\t++i;\r\n\t\t\t\t\t\t\t\tpos = p;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t * If strarr[i] is a Token, then the match starts inside another Token, which is invalid\r\n\t\t\t\t\t\t * If strarr[k - 1] is greedy we are in conflict with another greedy pattern\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tif (strarr[i] instanceof Token || strarr[k - 1].greedy) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Number of tokens to delete and replace with the new match\r\n\t\t\t\t\t\tdelNum = k - i;\r\n\t\t\t\t\t\tstr = text.slice(pos, p);\r\n\t\t\t\t\t\tmatch.index -= pos;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!match) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(lookbehind) {\r\n\t\t\t\t\t\tlookbehindLength = match[1].length;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar from = match.index + lookbehindLength,\r\n\t\t\t\t\t    match = match[0].slice(lookbehindLength),\r\n\t\t\t\t\t    to = from + match.length,\r\n\t\t\t\t\t    before = str.slice(0, from),\r\n\t\t\t\t\t    after = str.slice(to);\r\n\r\n\t\t\t\t\tvar args = [i, delNum];\r\n\r\n\t\t\t\t\tif (before) {\r\n\t\t\t\t\t\targs.push(before);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar wrapped = new Token(token, inside? _.tokenize(match, inside) : match, alias, match, greedy);\r\n\r\n\t\t\t\t\targs.push(wrapped);\r\n\r\n\t\t\t\t\tif (after) {\r\n\t\t\t\t\t\targs.push(after);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tArray.prototype.splice.apply(strarr, args);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn strarr;\r\n\t},\r\n\r\n\thooks: {\r\n\t\tall: {},\r\n\r\n\t\tadd: function (name, callback) {\r\n\t\t\tvar hooks = _.hooks.all;\r\n\r\n\t\t\thooks[name] = hooks[name] || [];\r\n\r\n\t\t\thooks[name].push(callback);\r\n\t\t},\r\n\r\n\t\trun: function (name, env) {\r\n\t\t\tvar callbacks = _.hooks.all[name];\r\n\r\n\t\t\tif (!callbacks || !callbacks.length) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i=0, callback; callback = callbacks[i++];) {\r\n\t\t\t\tcallback(env);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nvar Token = _.Token = function(type, content, alias, matchedStr, greedy) {\r\n\tthis.type = type;\r\n\tthis.content = content;\r\n\tthis.alias = alias;\r\n\t// Copy of the full string this token was created from\r\n\tthis.length = (matchedStr || \"\").length|0;\r\n\tthis.greedy = !!greedy;\r\n};\r\n\r\nToken.stringify = function(o, language, parent) {\r\n\tif (typeof o == 'string') {\r\n\t\treturn o;\r\n\t}\r\n\r\n\tif (_.util.type(o) === 'Array') {\r\n\t\treturn o.map(function(element) {\r\n\t\t\treturn Token.stringify(element, language, o);\r\n\t\t}).join('');\r\n\t}\r\n\r\n\tvar env = {\r\n\t\ttype: o.type,\r\n\t\tcontent: Token.stringify(o.content, language, parent),\r\n\t\ttag: 'span',\r\n\t\tclasses: ['token', o.type],\r\n\t\tattributes: {},\r\n\t\tlanguage: language,\r\n\t\tparent: parent\r\n\t};\r\n\r\n\tif (env.type == 'comment') {\r\n\t\tenv.attributes['spellcheck'] = 'true';\r\n\t}\r\n\r\n\tif (o.alias) {\r\n\t\tvar aliases = _.util.type(o.alias) === 'Array' ? o.alias : [o.alias];\r\n\t\tArray.prototype.push.apply(env.classes, aliases);\r\n\t}\r\n\r\n\t_.hooks.run('wrap', env);\r\n\r\n\tvar attributes = Object.keys(env.attributes).map(function(name) {\r\n\t\treturn name + '=\"' + (env.attributes[name] || '').replace(/\"/g, '&quot;') + '\"';\r\n\t}).join(' ');\r\n\r\n\treturn '<' + env.tag + ' class=\"' + env.classes.join(' ') + '\"' + (attributes ? ' ' + attributes : '') + '>' + env.content + '</' + env.tag + '>';\r\n\r\n};\r\n\r\nif (!_self.document) {\r\n\tif (!_self.addEventListener) {\r\n\t\t// in Node.js\r\n\t\treturn _self.Prism;\r\n\t}\r\n \t// In worker\r\n\t_self.addEventListener('message', function(evt) {\r\n\t\tvar message = JSON.parse(evt.data),\r\n\t\t    lang = message.language,\r\n\t\t    code = message.code,\r\n\t\t    immediateClose = message.immediateClose;\r\n\r\n\t\t_self.postMessage(_.highlight(code, _.languages[lang], lang));\r\n\t\tif (immediateClose) {\r\n\t\t\t_self.close();\r\n\t\t}\r\n\t}, false);\r\n\r\n\treturn _self.Prism;\r\n}\r\n\r\n//Get current script and highlight\r\nvar script = document.currentScript || [].slice.call(document.getElementsByTagName(\"script\")).pop();\r\n\r\nif (script) {\r\n\t_.filename = script.src;\r\n\r\n\tif (document.addEventListener && !_.manual && !script.hasAttribute('data-manual')) {\r\n\t\tif(document.readyState !== \"loading\") {\r\n\t\t\tif (window.requestAnimationFrame) {\r\n\t\t\t\twindow.requestAnimationFrame(_.highlightAll);\r\n\t\t\t} else {\r\n\t\t\t\twindow.setTimeout(_.highlightAll, 16);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdocument.addEventListener('DOMContentLoaded', _.highlightAll);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nreturn _self.Prism;\r\n\r\n})();\r\n\r\nif (typeof module !== 'undefined' && module.exports) {\r\n\tmodule.exports = Prism;\r\n}\r\n\r\n// hack for components to work correctly in node.js\r\nif (typeof global !== 'undefined') {\r\n\tglobal.Prism = Prism;\r\n}\r\n;\r\nPrism.languages.markup = {\r\n\t'comment': /<!--[\\w\\W]*?-->/,\r\n\t'prolog': /<\\?[\\w\\W]+?\\?>/,\r\n\t'doctype': /<!DOCTYPE[\\w\\W]+?>/i,\r\n\t'cdata': /<!\\[CDATA\\[[\\w\\W]*?]]>/i,\r\n\t'tag': {\r\n\t\tpattern: /<\\/?(?!\\d)[^\\s>\\/=$<]+(?:\\s+[^\\s>\\/=]+(?:=(?:(\"|')(?:\\\\\\1|\\\\?(?!\\1)[\\w\\W])*\\1|[^\\s'\">=]+))?)*\\s*\\/?>/i,\r\n\t\tinside: {\r\n\t\t\t'tag': {\r\n\t\t\t\tpattern: /^<\\/?[^\\s>\\/]+/i,\r\n\t\t\t\tinside: {\r\n\t\t\t\t\t'punctuation': /^<\\/?/,\r\n\t\t\t\t\t'namespace': /^[^\\s>\\/:]+:/\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t'attr-value': {\r\n\t\t\t\tpattern: /=(?:('|\")[\\w\\W]*?(\\1)|[^\\s>]+)/i,\r\n\t\t\t\tinside: {\r\n\t\t\t\t\t'punctuation': /[=>\"']/\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t'punctuation': /\\/?>/,\r\n\t\t\t'attr-name': {\r\n\t\t\t\tpattern: /[^\\s>\\/]+/,\r\n\t\t\t\tinside: {\r\n\t\t\t\t\t'namespace': /^[^\\s>\\/:]+:/\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t},\r\n\t'entity': /&#?[\\da-z]{1,8};/i\r\n};\r\n\r\n// Plugin to make entity title show the real entity, idea by Roman Komarov\r\nPrism.hooks.add('wrap', function(env) {\r\n\r\n\tif (env.type === 'entity') {\r\n\t\tenv.attributes['title'] = env.content.replace(/&amp;/, '&');\r\n\t}\r\n});\r\n\r\nPrism.languages.xml = Prism.languages.markup;\r\nPrism.languages.html = Prism.languages.markup;\r\nPrism.languages.mathml = Prism.languages.markup;\r\nPrism.languages.svg = Prism.languages.markup;\r\n\r\nPrism.languages.css = {\r\n\t'comment': /\\/\\*[\\w\\W]*?\\*\\//,\r\n\t'atrule': {\r\n\t\tpattern: /@[\\w-]+?.*?(;|(?=\\s*\\{))/i,\r\n\t\tinside: {\r\n\t\t\t'rule': /@[\\w-]+/\r\n\t\t\t// See rest below\r\n\t\t}\r\n\t},\r\n\t'url': /url\\((?:([\"'])(\\\\(?:\\r\\n|[\\w\\W])|(?!\\1)[^\\\\\\r\\n])*\\1|.*?)\\)/i,\r\n\t'selector': /[^\\{\\}\\s][^\\{\\};]*?(?=\\s*\\{)/,\r\n\t'string': {\r\n\t\tpattern: /(\"|')(\\\\(?:\\r\\n|[\\w\\W])|(?!\\1)[^\\\\\\r\\n])*\\1/,\r\n\t\tgreedy: true\r\n\t},\r\n\t'property': /(\\b|\\B)[\\w-]+(?=\\s*:)/i,\r\n\t'important': /\\B!important\\b/i,\r\n\t'function': /[-a-z0-9]+(?=\\()/i,\r\n\t'punctuation': /[(){};:]/\r\n};\r\n\r\nPrism.languages.css['atrule'].inside.rest = Prism.util.clone(Prism.languages.css);\r\n\r\nif (Prism.languages.markup) {\r\n\tPrism.languages.insertBefore('markup', 'tag', {\r\n\t\t'style': {\r\n\t\t\tpattern: /(<style[\\w\\W]*?>)[\\w\\W]*?(?=<\\/style>)/i,\r\n\t\t\tlookbehind: true,\r\n\t\t\tinside: Prism.languages.css,\r\n\t\t\talias: 'language-css'\r\n\t\t}\r\n\t});\r\n\t\r\n\tPrism.languages.insertBefore('inside', 'attr-value', {\r\n\t\t'style-attr': {\r\n\t\t\tpattern: /\\s*style=(\"|').*?\\1/i,\r\n\t\t\tinside: {\r\n\t\t\t\t'attr-name': {\r\n\t\t\t\t\tpattern: /^\\s*style/i,\r\n\t\t\t\t\tinside: Prism.languages.markup.tag.inside\r\n\t\t\t\t},\r\n\t\t\t\t'punctuation': /^\\s*=\\s*['\"]|['\"]\\s*$/,\r\n\t\t\t\t'attr-value': {\r\n\t\t\t\t\tpattern: /.+/i,\r\n\t\t\t\t\tinside: Prism.languages.css\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\talias: 'language-css'\r\n\t\t}\r\n\t}, Prism.languages.markup.tag);\r\n};\r\nPrism.languages.clike = {\r\n\t'comment': [\r\n\t\t{\r\n\t\t\tpattern: /(^|[^\\\\])\\/\\*[\\w\\W]*?\\*\\//,\r\n\t\t\tlookbehind: true\r\n\t\t},\r\n\t\t{\r\n\t\t\tpattern: /(^|[^\\\\:])\\/\\/.*/,\r\n\t\t\tlookbehind: true\r\n\t\t}\r\n\t],\r\n\t'string': {\r\n\t\tpattern: /([\"'])(\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\\\r\\n])*\\1/,\r\n\t\tgreedy: true\r\n\t},\r\n\t'class-name': {\r\n\t\tpattern: /((?:\\b(?:class|interface|extends|implements|trait|instanceof|new)\\s+)|(?:catch\\s+\\())[a-z0-9_\\.\\\\]+/i,\r\n\t\tlookbehind: true,\r\n\t\tinside: {\r\n\t\t\tpunctuation: /(\\.|\\\\)/\r\n\t\t}\r\n\t},\r\n\t'keyword': /\\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\\b/,\r\n\t'boolean': /\\b(true|false)\\b/,\r\n\t'function': /[a-z0-9_]+(?=\\()/i,\r\n\t'number': /\\b-?(?:0x[\\da-f]+|\\d*\\.?\\d+(?:e[+-]?\\d+)?)\\b/i,\r\n\t'operator': /--?|\\+\\+?|!=?=?|<=?|>=?|==?=?|&&?|\\|\\|?|\\?|\\*|\\/|~|\\^|%/,\r\n\t'punctuation': /[{}[\\];(),.:]/\r\n};\r\n\r\nPrism.languages.javascript = Prism.languages.extend('clike', {\r\n\t'keyword': /\\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\\b/,\r\n\t'number': /\\b-?(0x[\\dA-Fa-f]+|0b[01]+|0o[0-7]+|\\d*\\.?\\d+([Ee][+-]?\\d+)?|NaN|Infinity)\\b/,\r\n\t// Allow for all non-ASCII characters (See http://stackoverflow.com/a/2008444)\r\n\t'function': /[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*(?=\\()/i,\r\n\t'operator': /--?|\\+\\+?|!=?=?|<=?|>=?|==?=?|&&?|\\|\\|?|\\?|\\*\\*?|\\/|~|\\^|%|\\.{3}/\r\n});\r\n\r\nPrism.languages.insertBefore('javascript', 'keyword', {\r\n\t'regex': {\r\n\t\tpattern: /(^|[^/])\\/(?!\\/)(\\[.+?]|\\\\.|[^/\\\\\\r\\n])+\\/[gimyu]{0,5}(?=\\s*($|[\\r\\n,.;})]))/,\r\n\t\tlookbehind: true,\r\n\t\tgreedy: true\r\n\t}\r\n});\r\n\r\nPrism.languages.insertBefore('javascript', 'string', {\r\n\t'template-string': {\r\n\t\tpattern: /`(?:\\\\\\\\|\\\\?[^\\\\])*?`/,\r\n\t\tgreedy: true,\r\n\t\tinside: {\r\n\t\t\t'interpolation': {\r\n\t\t\t\tpattern: /\\$\\{[^}]+\\}/,\r\n\t\t\t\tinside: {\r\n\t\t\t\t\t'interpolation-punctuation': {\r\n\t\t\t\t\t\tpattern: /^\\$\\{|\\}$/,\r\n\t\t\t\t\t\talias: 'punctuation'\r\n\t\t\t\t\t},\r\n\t\t\t\t\trest: Prism.languages.javascript\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t'string': /[\\s\\S]+/\r\n\t\t}\r\n\t}\r\n});\r\n\r\nif (Prism.languages.markup) {\r\n\tPrism.languages.insertBefore('markup', 'tag', {\r\n\t\t'script': {\r\n\t\t\tpattern: /(<script[\\w\\W]*?>)[\\w\\W]*?(?=<\\/script>)/i,\r\n\t\t\tlookbehind: true,\r\n\t\t\tinside: Prism.languages.javascript,\r\n\t\t\talias: 'language-javascript'\r\n\t\t}\r\n\t});\r\n}\r\n\r\nPrism.languages.js = Prism.languages.javascript;\r\nPrism.languages.properties = {\r\n\t'comment': /^[ \\t]*[#!].*$/m,\r\n\t'attr-value': {\r\n\t\tpattern: /(^[ \\t]*(?:\\\\(?:\\r\\n|[\\s\\S])|[^\\\\\\s:=])+?(?: *[=:] *| ))(?:\\\\(?:\\r\\n|[\\s\\S])|.)+/m,\r\n\t\tlookbehind: true\r\n\t},\r\n\t'attr-name': /^[ \\t]*(?:\\\\(?:\\r\\n|[\\s\\S])|[^\\\\\\s:=])+?(?= *[ =:]| )/m,\r\n\t'punctuation': /[=:]/\r\n};\r\n(function(){\r\n\r\nif (typeof self === 'undefined' || !self.Prism || !self.document || !document.querySelector) {\r\n\treturn;\r\n}\r\n\r\nfunction $$(expr, con) {\r\n\treturn Array.prototype.slice.call((con || document).querySelectorAll(expr));\r\n}\r\n\r\nfunction hasClass(element, className) {\r\n  className = \" \" + className + \" \";\r\n  return (\" \" + element.className + \" \").replace(/[\\n\\t]/g, \" \").indexOf(className) > -1\r\n}\r\n\r\n// Some browsers round the line-height, others don't.\r\n// We need to test for it to position the elements properly.\r\nvar isLineHeightRounded = (function() {\r\n\tvar res;\r\n\treturn function() {\r\n\t\tif(typeof res === 'undefined') {\r\n\t\t\tvar d = document.createElement('div');\r\n\t\t\td.style.fontSize = '13px';\r\n\t\t\td.style.lineHeight = '1.5';\r\n\t\t\td.style.padding = 0;\r\n\t\t\td.style.border = 0;\r\n\t\t\td.innerHTML = '&nbsp;<br />&nbsp;';\r\n\t\t\tdocument.body.appendChild(d);\r\n\t\t\t// Browsers that round the line-height should have offsetHeight === 38\r\n\t\t\t// The others should have 39.\r\n\t\t\tres = d.offsetHeight === 38;\r\n\t\t\tdocument.body.removeChild(d);\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n}());\r\n\r\nfunction highlightLines(pre, lines, classes) {\r\n\tvar ranges = lines.replace(/\\s+/g, '').split(','),\r\n\t    offset = +pre.getAttribute('data-line-offset') || 0;\r\n\r\n\tvar parseMethod = isLineHeightRounded() ? parseInt : parseFloat;\r\n\tvar lineHeight = parseMethod(getComputedStyle(pre).lineHeight);\r\n\r\n\tfor (var i=0, range; range = ranges[i++];) {\r\n\t\trange = range.split('-');\r\n\r\n\t\tvar start = +range[0],\r\n\t\t    end = +range[1] || start;\r\n\r\n\t\tvar line = document.createElement('div');\r\n\r\n\t\tline.textContent = Array(end - start + 2).join(' \\n');\r\n\t\tline.setAttribute('aria-hidden', 'true');\r\n\t\tline.className = (classes || '') + ' line-highlight';\r\n\r\n\t\t//if the line-numbers plugin is enabled, then there is no reason for this plugin to display the line numbers\r\n\t\tif(!hasClass(pre, 'line-numbers')) {\r\n\t\t\tline.setAttribute('data-start', start);\r\n\r\n\t\t\tif(end > start) {\r\n\t\t\t\tline.setAttribute('data-end', end);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tline.style.top = (start - offset - 1) * lineHeight + 'px';\r\n\r\n\t\t//allow this to play nicely with the line-numbers plugin\r\n\t\tif(hasClass(pre, 'line-numbers')) {\r\n\t\t\t//need to attack to pre as when line-numbers is enabled, the code tag is relatively which screws up the positioning\r\n\t\t\tpre.appendChild(line);\r\n\t\t} else {\r\n\t\t\t(pre.querySelector('code') || pre).appendChild(line);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyHash() {\r\n\tvar hash = location.hash.slice(1);\r\n\r\n\t// Remove pre-existing temporary lines\r\n\t$$('.temporary.line-highlight').forEach(function (line) {\r\n\t\tline.parentNode.removeChild(line);\r\n\t});\r\n\r\n\tvar range = (hash.match(/\\.([\\d,-]+)$/) || [,''])[1];\r\n\r\n\tif (!range || document.getElementById(hash)) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar id = hash.slice(0, hash.lastIndexOf('.')),\r\n\t    pre = document.getElementById(id);\r\n\r\n\tif (!pre) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (!pre.hasAttribute('data-line')) {\r\n\t\tpre.setAttribute('data-line', '');\r\n\t}\r\n\r\n\thighlightLines(pre, range, 'temporary ');\r\n\r\n\tdocument.querySelector('.temporary.line-highlight').scrollIntoView();\r\n}\r\n\r\nvar fakeTimer = 0; // Hack to limit the number of times applyHash() runs\r\n\r\nPrism.hooks.add('before-sanity-check', function(env) {\r\n\tvar pre = env.element.parentNode;\r\n\tvar lines = pre && pre.getAttribute('data-line');\r\n\r\n\tif (!pre || !lines || !/pre/i.test(pre.nodeName)) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t/*\r\n\t * Cleanup for other plugins (e.g. autoloader).\r\n\t *\r\n\t * Sometimes <code> blocks are highlighted multiple times. It is necessary\r\n\t * to cleanup any left-over tags, because the whitespace inside of the <div>\r\n\t * tags change the content of the <code> tag.\r\n\t */\r\n\tvar num = 0;\r\n\t$$('.line-highlight', pre).forEach(function (line) {\r\n\t\tnum += line.textContent.length;\r\n\t\tline.parentNode.removeChild(line);\r\n\t});\r\n\r\n\t// Remove extra whitespace\r\n\tif (num && /^( \\n)+$/.test(env.code.slice(-num))) {\r\n\t\tenv.code = env.code.slice(0, -num);\r\n\t}\r\n});\r\n\r\nPrism.hooks.add('complete', function(env) {\r\n\tvar pre = env.element.parentNode;\r\n\tvar lines = pre && pre.getAttribute('data-line');\r\n\r\n\tif (!pre || !lines || !/pre/i.test(pre.nodeName)) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tclearTimeout(fakeTimer);\r\n\r\n\thighlightLines(pre, lines);\r\n\r\n\tfakeTimer = setTimeout(applyHash, 1);\r\n});\r\n\r\nif(window.addEventListener) {\r\n\twindow.addEventListener('hashchange', applyHash);\r\n}\r\n\r\n})();\r\n\r\n(function() {\r\n\r\nif (typeof self === 'undefined' || !self.Prism || !self.document) {\r\n\treturn;\r\n}\r\n\r\nPrism.hooks.add('complete', function (env) {\r\n\tif (!env.code) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// works only for <code> wrapped inside <pre> (not inline)\r\n\tvar pre = env.element.parentNode;\r\n\tvar clsReg = /\\s*\\bline-numbers\\b\\s*/;\r\n\tif (\r\n\t\t!pre || !/pre/i.test(pre.nodeName) ||\r\n\t\t\t// Abort only if nor the <pre> nor the <code> have the class\r\n\t\t(!clsReg.test(pre.className) && !clsReg.test(env.element.className))\r\n\t) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (env.element.querySelector(\".line-numbers-rows\")) {\r\n\t\t// Abort if line numbers already exists\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (clsReg.test(env.element.className)) {\r\n\t\t// Remove the class \"line-numbers\" from the <code>\r\n\t\tenv.element.className = env.element.className.replace(clsReg, '');\r\n\t}\r\n\tif (!clsReg.test(pre.className)) {\r\n\t\t// Add the class \"line-numbers\" to the <pre>\r\n\t\tpre.className += ' line-numbers';\r\n\t}\r\n\r\n\tvar match = env.code.match(/\\n(?!$)/g);\r\n\tvar linesNum = match ? match.length + 1 : 1;\r\n\tvar lineNumbersWrapper;\r\n\r\n\tvar lines = new Array(linesNum + 1);\r\n\tlines = lines.join('<span></span>');\r\n\r\n\tlineNumbersWrapper = document.createElement('span');\r\n\tlineNumbersWrapper.setAttribute('aria-hidden', 'true');\r\n\tlineNumbersWrapper.className = 'line-numbers-rows';\r\n\tlineNumbersWrapper.innerHTML = lines;\r\n\r\n\tif (pre.hasAttribute('data-start')) {\r\n\t\tpre.style.counterReset = 'linenumber ' + (parseInt(pre.getAttribute('data-start'), 10) - 1);\r\n\t}\r\n\r\n\tenv.element.appendChild(lineNumbersWrapper);\r\n\r\n});\r\n\r\n}());\r\n(function () {\r\n\tif (typeof self === 'undefined' || !self.Prism || !self.document || !document.querySelector) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tself.Prism.fileHighlight = function() {\r\n\r\n\t\tvar Extensions = {\r\n\t\t\t'js': 'javascript',\r\n\t\t\t'py': 'python',\r\n\t\t\t'rb': 'ruby',\r\n\t\t\t'ps1': 'powershell',\r\n\t\t\t'psm1': 'powershell',\r\n\t\t\t'sh': 'bash',\r\n\t\t\t'bat': 'batch',\r\n\t\t\t'h': 'c',\r\n\t\t\t'tex': 'latex'\r\n\t\t};\r\n\r\n\t\tif(Array.prototype.forEach) { // Check to prevent error in IE8\r\n\t\t\tArray.prototype.slice.call(document.querySelectorAll('pre[data-src]')).forEach(function (pre) {\r\n\t\t\t\tvar src = pre.getAttribute('data-src');\r\n\r\n\t\t\t\tvar language, parent = pre;\r\n\t\t\t\tvar lang = /\\blang(?:uage)?-(?!\\*)(\\w+)\\b/i;\r\n\t\t\t\twhile (parent && !lang.test(parent.className)) {\r\n\t\t\t\t\tparent = parent.parentNode;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (parent) {\r\n\t\t\t\t\tlanguage = (pre.className.match(lang) || [, ''])[1];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!language) {\r\n\t\t\t\t\tvar extension = (src.match(/\\.(\\w+)$/) || [, ''])[1];\r\n\t\t\t\t\tlanguage = Extensions[extension] || extension;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar code = document.createElement('code');\r\n\t\t\t\tcode.className = 'language-' + language;\r\n\r\n\t\t\t\tpre.textContent = '';\r\n\r\n\t\t\t\tcode.textContent = 'Loading';\r\n\r\n\t\t\t\tpre.appendChild(code);\r\n\r\n\t\t\t\tvar xhr = new XMLHttpRequest();\r\n\r\n\t\t\t\txhr.open('GET', src, true);\r\n\r\n\t\t\t\txhr.onreadystatechange = function () {\r\n\t\t\t\t\tif (xhr.readyState == 4) {\r\n\r\n\t\t\t\t\t\tif (xhr.status < 400 && xhr.responseText) {\r\n\t\t\t\t\t\t\tcode.textContent = xhr.responseText;\r\n\r\n\t\t\t\t\t\t\tPrism.highlightElement(code);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (xhr.status >= 400) {\r\n\t\t\t\t\t\t\tcode.textContent = ' Error ' + xhr.status + ' while fetching file: ' + xhr.statusText;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tcode.textContent = ' Error: File does not exist or is empty';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\txhr.send(null);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t//document.addEventListener('DOMContentLoaded', self.Prism.fileHighlight);\r\n\r\n})();\r\n\r\n","import journey from \"lib/journey/journey.js\";\r\nimport template from \"./home.html\";\r\nimport test from \"./me.text.html\";\r\nimport Ractive from \"lib/ractive.js\";\r\n\r\nvar home = {\r\n\r\n\tenter: function ( route, prevRoute, options ) {\r\n\t\tconsole.log(\"ME:\", test);\r\n\t\tconsole.log(\"HOME enter:\", arguments);\r\n\t\t/*%injectPath%*/\r\n\t\troute.view = new Ractive( {\r\n\t\t\tel: options.target,\r\n\t\t\ttemplate: template,\r\n\r\n\t\t\tstart: function () {\r\n\t\t\t\tjourney.goto( \"#basic?b=2#a=b\", { x: \"1234\" } );\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\tleave: function ( route, nextRoute ) {\r\n\t\troute.view.teardown();\r\n\t}\r\n\r\n};\r\n\r\nexport default home;\r\n","\timport journey from \"lib/journey/journey\";\r\n\timport template from \"./basic.html\";\r\n\timport Ractive from \"lib/ractive\";\r\n\r\n\tvar basic = {\r\n\t\r\n\t\tenter: function(route, prevRoute, options) {\r\n\t\t\t/*%injectPath%*/\r\n\t\t\troute.view = new Ractive({\r\n\t\t\t\tel: options.target,\r\n\t\t\t\ttemplate: template,\r\n\t\t\t\tloadView: function () {\r\n\t\t\t\t\tvar random = new Date().getMilliseconds();\r\n\t\t\t\t\tjourney.goto(\"/basic?random=\" + random);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\tleave: function ( route, nextRoute, options ) {\r\n\t\t\treturn route.view.teardown();\r\n\t\t}\r\n\t};\r\n\t\r\n\texport default basic;\r\n\t\r\n\r\n","import journey from \"lib/journey/journey\";\nimport Ractive from \"lib/ractive\";\nimport template from \"./nav.html\";\n\nvar nav = {\n\n\tenter: function ( route, prevRoute, options ) {\n\t\t/*%injectPath%*/\n\t\t\n\t\troute.view = new Ractive( {\n\t\t\tel: options.target,\n\t\t\ttemplate: template,\n\t\t\tgotoNewView: function () {\n\n\t\t\t\tvar args = { 'myArray': [ 'one', 'two', 'three' ] };\n\t\t\t\tjourney.goto( \"/navTargetParams/1?name=Bob\", { args: args } );\n\t\t\t}\n\t\t} );\n\n\t},\n\n\tleave: function ( route, nextRoute ) {\n\t\troute.view.teardown();\n\t}\n};\n\nfunction createView() {\n\n\tvar view = new template( {\n\t\tdata: {\n\t\t\texample1: \"js/app/views/nav/nav1-example.js\",\n\t\t\texample2: \"\"\n\t\t},\n\t\tgotoTargetWithParams: function ( routeName ) {\n\t\t\t// Navigate to the route specified\n\t\t\tvar params = { 'id': 1, 'name': 'Bob' };\n\t\t\tvar args = { 'myargs': [ 'one', 'two', 'three' ] };\n\t\t\tkudu.go( { ctrl: navTargetWithParams, routeParams: params, args: args } );\n\n\t\t\t// Cancel the click event by returning false, otherwise the link function would execute ie. follow the link href\n\t\t\treturn false;\n\t\t}\n\t} );\n\n\treturn view;\n}\n\nexport default nav;\n","import journey from \"lib/journey/journey\";\r\nimport template from \"./navTarget.html\";\r\nimport Ractive from \"lib/ractive\";\r\n\r\nvar navTarget = {\r\n\t\r\n\tenter: function ( route, prevRoute, options ) {\r\n\t\t/*%injectPath%*/\r\n\t\t\r\n\t\troute.view = new Ractive({\r\n\t\t\tel: options.target,\r\n\t\t\ttemplate: template\r\n\t\t});\r\n\t},\r\n\t\r\n\tleave: function ( route, nextRoute, options ) {\r\n\t\troute.view.teardown();\r\n\t\t\r\n\t}\r\n};\r\n\r\nexport default navTarget\r\n\r\n\r\n","import journey from \"lib/journey/journey\";\r\nimport template from \"./navTargetParams.html\";\r\nimport Ractive from \"lib/ractive\";\r\n\r\nvar navTargetParams = {\r\n\r\n\tenter: function ( route, prevRoute, options ) {\r\n\t\t/*%injectPath%*/\r\n\r\n\t\troute.view = new Ractive( {\r\n\t\t\tel: options.target,\r\n\t\t\ttemplate: template,\r\n\t\t\tdata: {\r\n\t\t\t\tparams: route.params,\r\n\t\t\t\targs: options.args,\r\n\t\t\t\tquery: route.query\r\n\t\t\t},\r\n\t\t\tstart: function ( ) {\r\n\t\t\t\tjourney.goto( \"/basic\", { x: \"1234\" } );\r\n\t\t\t}\r\n\t\t} );\r\n\t},\r\n\tleave: function ( route, nextRoute ) {\r\n\t\troute.view.teardown( );\r\n\t}\r\n};\r\n\r\nfunction createView( params, args ) {\r\n\r\n\tvar view = new template( {\r\n\t\tdata: {\r\n\t\t\targs: args,\r\n\t\t\tparams: params\r\n\t\t}\r\n\t} );\r\n\treturn view;\r\n}\r\n\r\nexport default navTargetParams;","import template from  \"./not-found\";\r\nimport Ractive from \"lib/ractive\";\r\n\r\nvar notFound = {\r\n\r\n\tenter: function (route, prevRoute, options) {\r\n\t\t/*%injectPath%*/\r\n\t\t\r\n\t\troute.view = new Ractive({\r\n\t\t\tel: options.target,\r\n\t\t\ttemplate: template\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t},\r\n\t\r\n\tleave: function (route, nextRoute, options) {\r\n\t\troute.view.teardown();\r\n\t}\r\n};\r\nexport default notFound;\r\n\r\n","import journey from \"lib/journey/journey\";\r\nimport Ractive from \"lib/ractive\";\r\nimport template from \"./redirect.html\";\r\n\r\nvar redirect = {\r\n\r\n\tenter: function ( route, prevRoute, options ) {\r\n\t\t/*%injectPath%*/\r\n\t\t\r\n\t\tif ( route.query.typeId == null ) {\r\n\t\t\tjourney.goto( \"/redirectTarget\" );\r\n\t\t\treturn;\r\n\r\n\t\t} else {\r\n\r\n\t\t\troute.view = new Ractive( {\r\n\t\t\t\tel: options.target,\r\n\t\t\t\ttemplate: template\r\n\t\t\t} );\r\n\t\t}\r\n\t},\r\n\r\n\tleave: function ( route, nextRoute, options ) {\r\n\t\tif ( route.view == null ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\troute.view.teardown();\r\n\t}\r\n};\r\n\r\nexport default redirect;\r\n","import journey from \"lib/journey/journey\";\r\nimport Ractive from \"lib/ractive\";\r\nimport template from \"./redirectTarget.html\";\r\n\r\nvar redirectTarget = {\r\n\t\r\n\tenter: function ( route, prevRoute, options ) {\r\n\t\t/*%injectPath%*/\r\n\t\t\r\n\t\troute.view = new Ractive( {\r\n\t\t\tel: options.target,\r\n\t\t\ttemplate: template\r\n\t\t} );\r\n\t},\r\n\t\r\n\tleave: function ( route, nextRoute, options ) {\r\n\t\troute.view.teardown();\r\n\t}\r\n};\r\n\r\nexport default redirectTarget\r\n","import journey from \"lib/journey/journey.js\";\r\nimport Ractive from \"lib/ractive.js\";\r\nimport template from \"./basicForm.html\";\r\n\r\nvar basicForm = {\r\n\r\n\tenter: function ( route, prevRoute, options ) {\r\n\t\t/*%injectPath%*/\r\n\t\troute.view = new Ractive( {\r\n\r\n\t\t\tel: options.target,\r\n\r\n\t\t\ttemplate: template,\r\n\r\n\t\t\tdata: {\r\n\t\t\t\tcheck: true\r\n\t\t\t},\r\n\r\n\t\t\tsubmit: function () {\r\n\t\t\t\t$( '.bs-callout-info' ).removeClass( 'hidden' );\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\r\n\t\t\tresetData: function () {\r\n\t\t\t\t$( '.bs-callout-info' ).addClass( 'hidden' );\r\n\t\t\t}\r\n\t\t} );\r\n\t},\r\n\r\n\tleave: function ( route, nextRoute, options ) {\r\n\t\troute.view.teardown();\r\n\t}\r\n};\r\n\r\nexport default basicForm\r\n","import journey from \"lib/journey/journey.js\";\r\nimport Ractive from \"lib/ractive.js\";\r\nimport template from \"./basicPartial.html\";\r\nimport helloPartial from \"./partial.html\";\r\n\r\nvar basicPartial = {\r\n\t\r\n\tenter: function ( route, prevRoute, options ) {\r\n\t\t/*%injectPath%*/\r\n\t\troute.view = new Ractive( {\r\n\t\t\tel: options.target,\r\n\t\t\ttemplate: template,\r\n\t\t\tpartials: {hello: helloPartial}\r\n\t\t} );\r\n\t},\r\n\t\r\n\tleave: function ( route, nextRoute, options ) {\r\n\t\troute.view.teardown();\r\n\t}\r\n};\r\n\r\nexport default basicPartial;\r\n\r\n","import journey from \"lib/journey/journey.js\";\r\nimport Ractive from \"lib/ractive.js\";\r\nimport template from \"./grid.html\";\r\n\r\nvar data = {\r\n\trows: [\r\n\t\t{ name: \"Bob\", age: 20, id: 11 },\r\n\t\t{ name: \"Steve\", age: 30, id: 12 },\r\n\t\t{ name: \"James\", age: 40, id: 13 },\r\n\t\t{ name: \"Henry\", age: 50, id: 14 }\r\n\t]\r\n};\r\nvar component = Ractive.extend( {\r\n\ttemplate: template,\r\n\tonrender: function () {\r\n\r\n\t\t// public.remove and public.add are public events that subscribers can listen to,\r\n\t\t// even the grid component itself\r\n\r\n\t\t// Here we subscribe to the remove event\r\n\t\tthis.on( \"public.remove\", function ( ctx, id, index ) {\r\n\t\t\tvar row = data.rows[index];\r\n\t\t\t// The component can listen on the public remove event\r\n\t\t\tconsole.log( \"[component] on('public.remove') invoked with arguments:\", row );\r\n\t\t\tthis.splice( \"rows\", index, 1 );\r\n\t\t} );\r\n\t},\r\n\r\n\t// Unlike subscribing to the remove event, we declare an 'add' method\r\n\t// for the template to call and then 'fire' the public.addRow event\r\n\taddRow: function ( row ) {\r\n\t\tconsole.log( \"[component] add(row) method invoked wih arguments:\", row );\r\n\t\tthis.push( \"rows\", row );\r\n\t\tconsole.log( \"[component] firing 'public.add' event for subscribers, with arguments:\", row );\r\n\t\t// Fire event for listeners to act upon\r\n\t\tthis.fire( \"public.addRow\", row );\r\n\t},\r\n\tdata: function () {\r\n\t\treturn data;\r\n\t}\r\n} );\r\n\r\nexport default component;\r\n","import journey from \"lib/journey/journey.js\";\r\nimport Ractive from \"lib/ractive.js\";\r\nimport template from \"./basicTransition.html\";\r\nimport fade from \"lib/fade.js\";\r\n\r\nvar basicTransition = {\r\n\r\n\tenter: function ( route, prevRoute, options ) {\r\n\t\t/*%injectPath%*/\r\n\t\troute.view = new Ractive( {\r\n\t\t\tel: options.target,\r\n\t\t\ttemplate: template, loadView: function () {\r\n\t\t\t\tjourney.goto( \"/basicTransition\", { forceReload: true } );\r\n\t\t\t},\r\n\t\t\ttransitions: {\r\n\t\t\t\tfade: fade\r\n\t\t\t}\r\n\t\t} );\r\n\t},\r\n\r\n\tleave: function ( route, nextRoute, options ) {\r\n\t\troute.view.teardown();\r\n\t}\r\n};\r\n\r\nexport default basicTransition;\r\n","import journey from \"lib/journey/journey.js\";\t\r\nimport home from \"../views/home/home.js\";\r\nimport basic from \"../views/basics/controller/basic.js\";\r\nimport methods from \"../views/basics/methods/methods.js\";\r\nimport binding from \"../views/basics/binding/binding.js\";\r\nimport nav from \"../views/nav/nav.js\";\r\nimport navTarget from \"../views/nav/navTarget.js\";\r\nimport navTargetWithParams from \"../views/nav/navTargetParams.js\";\r\nimport notFound from \"../views/notfound/notFound.js\";\r\nimport redirect from \"../views/nav/redirect/redirect.js\";\r\nimport redirectTarget from \"../views/nav/redirect/redirectTarget.js\";\r\nimport basicForm from \"../views/forms/basic/basicForm.js\";\r\nimport validatingForm from \"../views/forms/validate/validatingForm.js\";\r\nimport events from \"../views/lifecycle/events/events.js\";\r\nimport basicAjax from \"../views/ajax/basic/basicAjax.js\";\r\nimport upload from \"../views/ajax/upload/upload.js\";\r\nimport basicPartial from \"../views/partial/basic/basicPartial.js\";\r\nimport basicComp from \"../views/comp/basic/basicComp.js\";\r\nimport multipleComp from \"../views/comp/multiple/multipleComp.js\";\r\nimport pubSubComp from \"../views/comp/pubsub/compPubSub.js\";\r\nimport basicTransition from \"../views/transition/basic/basicTransition.js\";\r\n\r\nhome.path = \"js/app/views/home/home\";\r\njourney.add(\"/home\", home);\r\njourney.add(\"/basic\", basic);\r\njourney.add(\"/methods\", methods);\r\njourney.add(\"/binding\", binding);\r\njourney.add(\"/navTargetParams/:id\", navTargetWithParams);\t\r\njourney.add(\"/navTarget\", navTarget);\r\njourney.add(\"/redirect\", redirect);\r\njourney.add(\"/redirectTarget\", redirectTarget);\r\njourney.add(\"/nav\", nav);\r\njourney.add(\"/\", home);\r\njourney.add(\"/notFound\", notFound);\r\njourney.add(\"/basicForm\", basicForm);\r\njourney.add(\"/validatingForm\", validatingForm);\r\njourney.add(\"/events\", events);\r\njourney.add(\"/basicAjax\", basicAjax);\r\njourney.add(\"/upload\", upload);\r\njourney.add(\"/basicPartial\", basicPartial);\r\njourney.add(\"/basicComp\", basicComp);\r\njourney.add(\"/multipleComp\", multipleComp);\r\njourney.add(\"/pubSubComp\", pubSubComp);\r\njourney.add(\"/pubSubComp\", pubSubComp);\r\njourney.add(\"/basicTransition\", basicTransition);\r\n\r\n\r\n///export default routes;","(function() {\r\n  var AjaxMonitor, Bar, DocumentMonitor, ElementMonitor, ElementTracker, EventLagMonitor, Evented, Events, NoTargetError, Pace, RequestIntercept, SOURCE_KEYS, Scaler, SocketRequestTracker, XHRRequestTracker, animation, avgAmplitude, bar, cancelAnimation, cancelAnimationFrame, defaultOptions, extend, extendNative, getFromDOM, getIntercept, handlePushState, ignoreStack, init, now, options, requestAnimationFrame, result, runAnimation, scalers, shouldIgnoreURL, shouldTrack, source, sources, uniScaler, _WebSocket, _XDomainRequest, _XMLHttpRequest, _i, _intercept, _len, _pushState, _ref, _ref1, _replaceState,\r\n    __slice = [].slice,\r\n    __hasProp = {}.hasOwnProperty,\r\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\r\n\r\n  defaultOptions = {\r\n    catchupTime: 100,\r\n    initialRate: .03,\r\n    minTime: 250,\r\n    ghostTime: 100,\r\n    maxProgressPerFrame: 20,\r\n    easeFactor: 1.25,\r\n    startOnPageLoad: true,\r\n    restartOnPushState: true,\r\n    restartOnRequestAfter: 500,\r\n    target: 'body',\r\n    elements: {\r\n      checkInterval: 100,\r\n      selectors: ['body']\r\n    },\r\n    eventLag: {\r\n      minSamples: 10,\r\n      sampleCount: 3,\r\n      lagThreshold: 3\r\n    },\r\n    ajax: {\r\n      trackMethods: ['GET'],\r\n      trackWebSockets: true,\r\n      ignoreURLs: []\r\n    }\r\n  };\r\n\r\n  now = function() {\r\n    var _ref;\r\n    return (_ref = typeof performance !== \"undefined\" && performance !== null ? typeof performance.now === \"function\" ? performance.now() : void 0 : void 0) != null ? _ref : +(new Date);\r\n  };\r\n\r\n  requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\r\n\r\n  cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame;\r\n\r\n  if (requestAnimationFrame == null) {\r\n    requestAnimationFrame = function(fn) {\r\n      return setTimeout(fn, 50);\r\n    };\r\n    cancelAnimationFrame = function(id) {\r\n      return clearTimeout(id);\r\n    };\r\n  }\r\n\r\n  runAnimation = function(fn) {\r\n    var last, tick;\r\n    last = now();\r\n    tick = function() {\r\n      var diff;\r\n      diff = now() - last;\r\n      if (diff >= 33) {\r\n        last = now();\r\n        return fn(diff, function() {\r\n          return requestAnimationFrame(tick);\r\n        });\r\n      } else {\r\n        return setTimeout(tick, 33 - diff);\r\n      }\r\n    };\r\n    return tick();\r\n  };\r\n\r\n  result = function() {\r\n    var args, key, obj;\r\n    obj = arguments[0], key = arguments[1], args = 3 <= arguments.length ? __slice.call(arguments, 2) : [];\r\n    if (typeof obj[key] === 'function') {\r\n      return obj[key].apply(obj, args);\r\n    } else {\r\n      return obj[key];\r\n    }\r\n  };\r\n\r\n  extend = function() {\r\n    var key, out, source, sources, val, _i, _len;\r\n    out = arguments[0], sources = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\r\n    for (_i = 0, _len = sources.length; _i < _len; _i++) {\r\n      source = sources[_i];\r\n      if (source) {\r\n        for (key in source) {\r\n          if (!__hasProp.call(source, key)) continue;\r\n          val = source[key];\r\n          if ((out[key] != null) && typeof out[key] === 'object' && (val != null) && typeof val === 'object') {\r\n            extend(out[key], val);\r\n          } else {\r\n            out[key] = val;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return out;\r\n  };\r\n\r\n  avgAmplitude = function(arr) {\r\n    var count, sum, v, _i, _len;\r\n    sum = count = 0;\r\n    for (_i = 0, _len = arr.length; _i < _len; _i++) {\r\n      v = arr[_i];\r\n      sum += Math.abs(v);\r\n      count++;\r\n    }\r\n    return sum / count;\r\n  };\r\n\r\n  getFromDOM = function(key, json) {\r\n    var data, e, el;\r\n    if (key == null) {\r\n      key = 'options';\r\n    }\r\n    if (json == null) {\r\n      json = true;\r\n    }\r\n    el = document.querySelector(\"[data-pace-\" + key + \"]\");\r\n    if (!el) {\r\n      return;\r\n    }\r\n    data = el.getAttribute(\"data-pace-\" + key);\r\n    if (!json) {\r\n      return data;\r\n    }\r\n    try {\r\n      return JSON.parse(data);\r\n    } catch (_error) {\r\n      e = _error;\r\n      return typeof console !== \"undefined\" && console !== null ? console.error(\"Error parsing inline pace options\", e) : void 0;\r\n    }\r\n  };\r\n\r\n  Evented = (function() {\r\n    function Evented() {}\r\n\r\n    Evented.prototype.on = function(event, handler, ctx, once) {\r\n      var _base;\r\n      if (once == null) {\r\n        once = false;\r\n      }\r\n      if (this.bindings == null) {\r\n        this.bindings = {};\r\n      }\r\n      if ((_base = this.bindings)[event] == null) {\r\n        _base[event] = [];\r\n      }\r\n      return this.bindings[event].push({\r\n        handler: handler,\r\n        ctx: ctx,\r\n        once: once\r\n      });\r\n    };\r\n\r\n    Evented.prototype.once = function(event, handler, ctx) {\r\n      return this.on(event, handler, ctx, true);\r\n    };\r\n\r\n    Evented.prototype.off = function(event, handler) {\r\n      var i, _ref, _results;\r\n      if (((_ref = this.bindings) != null ? _ref[event] : void 0) == null) {\r\n        return;\r\n      }\r\n      if (handler == null) {\r\n        return delete this.bindings[event];\r\n      } else {\r\n        i = 0;\r\n        _results = [];\r\n        while (i < this.bindings[event].length) {\r\n          if (this.bindings[event][i].handler === handler) {\r\n            _results.push(this.bindings[event].splice(i, 1));\r\n          } else {\r\n            _results.push(i++);\r\n          }\r\n        }\r\n        return _results;\r\n      }\r\n    };\r\n\r\n    Evented.prototype.trigger = function() {\r\n      var args, ctx, event, handler, i, once, _ref, _ref1, _results;\r\n      event = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\r\n      if ((_ref = this.bindings) != null ? _ref[event] : void 0) {\r\n        i = 0;\r\n        _results = [];\r\n        while (i < this.bindings[event].length) {\r\n          _ref1 = this.bindings[event][i], handler = _ref1.handler, ctx = _ref1.ctx, once = _ref1.once;\r\n          handler.apply(ctx != null ? ctx : this, args);\r\n          if (once) {\r\n            _results.push(this.bindings[event].splice(i, 1));\r\n          } else {\r\n            _results.push(i++);\r\n          }\r\n        }\r\n        return _results;\r\n      }\r\n    };\r\n\r\n    return Evented;\r\n\r\n  })();\r\n\r\n  Pace = window.Pace || {};\r\n\r\n  window.Pace = Pace;\r\n\r\n  extend(Pace, Evented.prototype);\r\n\r\n  options = Pace.options = extend({}, defaultOptions, window.paceOptions, getFromDOM());\r\n\r\n  _ref = ['ajax', 'document', 'eventLag', 'elements'];\r\n  for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n    source = _ref[_i];\r\n    if (options[source] === true) {\r\n      options[source] = defaultOptions[source];\r\n    }\r\n  }\r\n\r\n  NoTargetError = (function(_super) {\r\n    __extends(NoTargetError, _super);\r\n\r\n    function NoTargetError() {\r\n      _ref1 = NoTargetError.__super__.constructor.apply(this, arguments);\r\n      return _ref1;\r\n    }\r\n\r\n    return NoTargetError;\r\n\r\n  })(Error);\r\n\r\n  Bar = (function() {\r\n    function Bar() {\r\n      this.progress = 0;\r\n    }\r\n\r\n    Bar.prototype.getElement = function() {\r\n      var targetElement;\r\n      if (this.el == null) {\r\n        targetElement = document.querySelector(options.target);\r\n        if (!targetElement) {\r\n          throw new NoTargetError;\r\n        }\r\n        this.el = document.createElement('div');\r\n        this.el.className = \"pace pace-active\";\r\n        document.body.className = document.body.className.replace(/pace-done/g, '');\r\n        document.body.className += ' pace-running';\r\n        this.el.innerHTML = '<div class=\"pace-progress\">\\n  <div class=\"pace-progress-inner\"></div>\\n</div>\\n<div class=\"pace-activity\"></div>';\r\n        if (targetElement.firstChild != null) {\r\n          targetElement.insertBefore(this.el, targetElement.firstChild);\r\n        } else {\r\n          targetElement.appendChild(this.el);\r\n        }\r\n      }\r\n      return this.el;\r\n    };\r\n\r\n    Bar.prototype.finish = function() {\r\n      var el;\r\n      el = this.getElement();\r\n      el.className = el.className.replace('pace-active', '');\r\n      el.className += ' pace-inactive';\r\n      document.body.className = document.body.className.replace('pace-running', '');\r\n      return document.body.className += ' pace-done';\r\n    };\r\n\r\n    Bar.prototype.update = function(prog) {\r\n      this.progress = prog;\r\n      return this.render();\r\n    };\r\n\r\n    Bar.prototype.destroy = function() {\r\n      try {\r\n        this.getElement().parentNode.removeChild(this.getElement());\r\n      } catch (_error) {\r\n        NoTargetError = _error;\r\n      }\r\n      return this.el = void 0;\r\n    };\r\n\r\n    Bar.prototype.render = function() {\r\n      var el, key, progressStr, transform, _j, _len1, _ref2;\r\n      if (document.querySelector(options.target) == null) {\r\n        return false;\r\n      }\r\n      el = this.getElement();\r\n      transform = \"translate3d(\" + this.progress + \"%, 0, 0)\";\r\n      _ref2 = ['webkitTransform', 'msTransform', 'transform'];\r\n      for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\r\n        key = _ref2[_j];\r\n        el.children[0].style[key] = transform;\r\n      }\r\n      if (!this.lastRenderedProgress || this.lastRenderedProgress | 0 !== this.progress | 0) {\r\n        el.children[0].setAttribute('data-progress-text', \"\" + (this.progress | 0) + \"%\");\r\n        if (this.progress >= 100) {\r\n          progressStr = '99';\r\n        } else {\r\n          progressStr = this.progress < 10 ? \"0\" : \"\";\r\n          progressStr += this.progress | 0;\r\n        }\r\n        el.children[0].setAttribute('data-progress', \"\" + progressStr);\r\n      }\r\n      return this.lastRenderedProgress = this.progress;\r\n    };\r\n\r\n    Bar.prototype.done = function() {\r\n      return this.progress >= 100;\r\n    };\r\n\r\n    return Bar;\r\n\r\n  })();\r\n\r\n  Events = (function() {\r\n    function Events() {\r\n      this.bindings = {};\r\n    }\r\n\r\n    Events.prototype.trigger = function(name, val) {\r\n      var binding, _j, _len1, _ref2, _results;\r\n      if (this.bindings[name] != null) {\r\n        _ref2 = this.bindings[name];\r\n        _results = [];\r\n        for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\r\n          binding = _ref2[_j];\r\n          _results.push(binding.call(this, val));\r\n        }\r\n        return _results;\r\n      }\r\n    };\r\n\r\n    Events.prototype.on = function(name, fn) {\r\n      var _base;\r\n      if ((_base = this.bindings)[name] == null) {\r\n        _base[name] = [];\r\n      }\r\n      return this.bindings[name].push(fn);\r\n    };\r\n\r\n    return Events;\r\n\r\n  })();\r\n\r\n  _XMLHttpRequest = window.XMLHttpRequest;\r\n\r\n  _XDomainRequest = window.XDomainRequest;\r\n\r\n  _WebSocket = window.WebSocket;\r\n\r\n  extendNative = function(to, from) {\r\n    var e, key, _results;\r\n    _results = [];\r\n    for (key in from.prototype) {\r\n      try {\r\n        if ((to[key] == null) && typeof from[key] !== 'function') {\r\n          if (typeof Object.defineProperty === 'function') {\r\n            _results.push(Object.defineProperty(to, key, {\r\n              get: function() {\r\n                return from.prototype[key];\r\n              },\r\n              configurable: true,\r\n              enumerable: true\r\n            }));\r\n          } else {\r\n            _results.push(to[key] = from.prototype[key]);\r\n          }\r\n        } else {\r\n          _results.push(void 0);\r\n        }\r\n      } catch (_error) {\r\n        e = _error;\r\n      }\r\n    }\r\n    return _results;\r\n  };\r\n\r\n  ignoreStack = [];\r\n\r\n  Pace.ignore = function() {\r\n    var args, fn, ret;\r\n    fn = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\r\n    ignoreStack.unshift('ignore');\r\n    ret = fn.apply(null, args);\r\n    ignoreStack.shift();\r\n    return ret;\r\n  };\r\n\r\n  Pace.track = function() {\r\n    var args, fn, ret;\r\n    fn = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\r\n    ignoreStack.unshift('track');\r\n    ret = fn.apply(null, args);\r\n    ignoreStack.shift();\r\n    return ret;\r\n  };\r\n\r\n  shouldTrack = function(method) {\r\n    var _ref2;\r\n    if (method == null) {\r\n      method = 'GET';\r\n    }\r\n    if (ignoreStack[0] === 'track') {\r\n      return 'force';\r\n    }\r\n    if (!ignoreStack.length && options.ajax) {\r\n      if (method === 'socket' && options.ajax.trackWebSockets) {\r\n        return true;\r\n      } else if (_ref2 = method.toUpperCase(), __indexOf.call(options.ajax.trackMethods, _ref2) >= 0) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  };\r\n\r\n  RequestIntercept = (function(_super) {\r\n    __extends(RequestIntercept, _super);\r\n\r\n    function RequestIntercept() {\r\n      var monitorXHR,\r\n        _this = this;\r\n      RequestIntercept.__super__.constructor.apply(this, arguments);\r\n      monitorXHR = function(req) {\r\n        var _open;\r\n        _open = req.open;\r\n        return req.open = function(type, url, async) {\r\n          if (shouldTrack(type)) {\r\n            _this.trigger('request', {\r\n              type: type,\r\n              url: url,\r\n              request: req\r\n            });\r\n          }\r\n          return _open.apply(req, arguments);\r\n        };\r\n      };\r\n      window.XMLHttpRequest = function(flags) {\r\n        var req;\r\n        req = new _XMLHttpRequest(flags);\r\n        monitorXHR(req);\r\n        return req;\r\n      };\r\n      try {\r\n        extendNative(window.XMLHttpRequest, _XMLHttpRequest);\r\n      } catch (_error) {}\r\n      if (_XDomainRequest != null) {\r\n        window.XDomainRequest = function() {\r\n          var req;\r\n          req = new _XDomainRequest;\r\n          monitorXHR(req);\r\n          return req;\r\n        };\r\n        try {\r\n          extendNative(window.XDomainRequest, _XDomainRequest);\r\n        } catch (_error) {}\r\n      }\r\n      if ((_WebSocket != null) && options.ajax.trackWebSockets) {\r\n        window.WebSocket = function(url, protocols) {\r\n          var req;\r\n          if (protocols != null) {\r\n            req = new _WebSocket(url, protocols);\r\n          } else {\r\n            req = new _WebSocket(url);\r\n          }\r\n          if (shouldTrack('socket')) {\r\n            _this.trigger('request', {\r\n              type: 'socket',\r\n              url: url,\r\n              protocols: protocols,\r\n              request: req\r\n            });\r\n          }\r\n          return req;\r\n        };\r\n        try {\r\n          extendNative(window.WebSocket, _WebSocket);\r\n        } catch (_error) {}\r\n      }\r\n    }\r\n\r\n    return RequestIntercept;\r\n\r\n  })(Events);\r\n\r\n  _intercept = null;\r\n\r\n  getIntercept = function() {\r\n    if (_intercept == null) {\r\n      _intercept = new RequestIntercept;\r\n    }\r\n    return _intercept;\r\n  };\r\n\r\n  shouldIgnoreURL = function(url) {\r\n    var pattern, _j, _len1, _ref2;\r\n    _ref2 = options.ajax.ignoreURLs;\r\n    for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\r\n      pattern = _ref2[_j];\r\n      if (typeof pattern === 'string') {\r\n        if (url.indexOf(pattern) !== -1) {\r\n          return true;\r\n        }\r\n      } else {\r\n        if (pattern.test(url)) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  };\r\n\r\n  getIntercept().on('request', function(_arg) {\r\n    var after, args, request, type, url;\r\n    type = _arg.type, request = _arg.request, url = _arg.url;\r\n    if (shouldIgnoreURL(url)) {\r\n      return;\r\n    }\r\n    if (!Pace.running && (options.restartOnRequestAfter !== false || shouldTrack(type) === 'force')) {\r\n      args = arguments;\r\n      after = options.restartOnRequestAfter || 0;\r\n      if (typeof after === 'boolean') {\r\n        after = 0;\r\n      }\r\n      return setTimeout(function() {\r\n        var stillActive, _j, _len1, _ref2, _ref3, _results;\r\n        if (type === 'socket') {\r\n          stillActive = request.readyState < 2;\r\n        } else {\r\n          stillActive = (0 < (_ref2 = request.readyState) && _ref2 < 4);\r\n        }\r\n        if (stillActive) {\r\n          Pace.restart();\r\n          _ref3 = Pace.sources;\r\n          _results = [];\r\n          for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {\r\n            source = _ref3[_j];\r\n            if (source instanceof AjaxMonitor) {\r\n              source.watch.apply(source, args);\r\n              break;\r\n            } else {\r\n              _results.push(void 0);\r\n            }\r\n          }\r\n          return _results;\r\n        }\r\n      }, after);\r\n    }\r\n  });\r\n\r\n  AjaxMonitor = (function() {\r\n    function AjaxMonitor() {\r\n      var _this = this;\r\n      this.elements = [];\r\n      getIntercept().on('request', function() {\r\n        return _this.watch.apply(_this, arguments);\r\n      });\r\n    }\r\n\r\n    AjaxMonitor.prototype.watch = function(_arg) {\r\n      var request, tracker, type, url;\r\n      type = _arg.type, request = _arg.request, url = _arg.url;\r\n      if (shouldIgnoreURL(url)) {\r\n        return;\r\n      }\r\n      if (type === 'socket') {\r\n        tracker = new SocketRequestTracker(request);\r\n      } else {\r\n        tracker = new XHRRequestTracker(request);\r\n      }\r\n      return this.elements.push(tracker);\r\n    };\r\n\r\n    return AjaxMonitor;\r\n\r\n  })();\r\n\r\n  XHRRequestTracker = (function() {\r\n    function XHRRequestTracker(request) {\r\n      var event, size, _j, _len1, _onreadystatechange, _ref2,\r\n        _this = this;\r\n      this.progress = 0;\r\n      if (window.ProgressEvent != null) {\r\n        size = null;\r\n        request.addEventListener('progress', function(evt) {\r\n          if (evt.lengthComputable) {\r\n            return _this.progress = 100 * evt.loaded / evt.total;\r\n          } else {\r\n            return _this.progress = _this.progress + (100 - _this.progress) / 2;\r\n          }\r\n        }, false);\r\n        _ref2 = ['load', 'abort', 'timeout', 'error'];\r\n        for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\r\n          event = _ref2[_j];\r\n          request.addEventListener(event, function() {\r\n            return _this.progress = 100;\r\n          }, false);\r\n        }\r\n      } else {\r\n        _onreadystatechange = request.onreadystatechange;\r\n        request.onreadystatechange = function() {\r\n          var _ref3;\r\n          if ((_ref3 = request.readyState) === 0 || _ref3 === 4) {\r\n            _this.progress = 100;\r\n          } else if (request.readyState === 3) {\r\n            _this.progress = 50;\r\n          }\r\n          return typeof _onreadystatechange === \"function\" ? _onreadystatechange.apply(null, arguments) : void 0;\r\n        };\r\n      }\r\n    }\r\n\r\n    return XHRRequestTracker;\r\n\r\n  })();\r\n\r\n  SocketRequestTracker = (function() {\r\n    function SocketRequestTracker(request) {\r\n      var event, _j, _len1, _ref2,\r\n        _this = this;\r\n      this.progress = 0;\r\n      _ref2 = ['error', 'open'];\r\n      for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\r\n        event = _ref2[_j];\r\n        request.addEventListener(event, function() {\r\n          return _this.progress = 100;\r\n        }, false);\r\n      }\r\n    }\r\n\r\n    return SocketRequestTracker;\r\n\r\n  })();\r\n\r\n  ElementMonitor = (function() {\r\n    function ElementMonitor(options) {\r\n      var selector, _j, _len1, _ref2;\r\n      if (options == null) {\r\n        options = {};\r\n      }\r\n      this.elements = [];\r\n      if (options.selectors == null) {\r\n        options.selectors = [];\r\n      }\r\n      _ref2 = options.selectors;\r\n      for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\r\n        selector = _ref2[_j];\r\n        this.elements.push(new ElementTracker(selector));\r\n      }\r\n    }\r\n\r\n    return ElementMonitor;\r\n\r\n  })();\r\n\r\n  ElementTracker = (function() {\r\n    function ElementTracker(selector) {\r\n      this.selector = selector;\r\n      this.progress = 0;\r\n      this.check();\r\n    }\r\n\r\n    ElementTracker.prototype.check = function() {\r\n      var _this = this;\r\n      if (document.querySelector(this.selector)) {\r\n        return this.done();\r\n      } else {\r\n        return setTimeout((function() {\r\n          return _this.check();\r\n        }), options.elements.checkInterval);\r\n      }\r\n    };\r\n\r\n    ElementTracker.prototype.done = function() {\r\n      return this.progress = 100;\r\n    };\r\n\r\n    return ElementTracker;\r\n\r\n  })();\r\n\r\n  DocumentMonitor = (function() {\r\n    DocumentMonitor.prototype.states = {\r\n      loading: 0,\r\n      interactive: 50,\r\n      complete: 100\r\n    };\r\n\r\n    function DocumentMonitor() {\r\n      var _onreadystatechange, _ref2,\r\n        _this = this;\r\n      this.progress = (_ref2 = this.states[document.readyState]) != null ? _ref2 : 100;\r\n      _onreadystatechange = document.onreadystatechange;\r\n      document.onreadystatechange = function() {\r\n        if (_this.states[document.readyState] != null) {\r\n          _this.progress = _this.states[document.readyState];\r\n        }\r\n        return typeof _onreadystatechange === \"function\" ? _onreadystatechange.apply(null, arguments) : void 0;\r\n      };\r\n    }\r\n\r\n    return DocumentMonitor;\r\n\r\n  })();\r\n\r\n  EventLagMonitor = (function() {\r\n    function EventLagMonitor() {\r\n      var avg, interval, last, points, samples,\r\n        _this = this;\r\n      this.progress = 0;\r\n      avg = 0;\r\n      samples = [];\r\n      points = 0;\r\n      last = now();\r\n      interval = setInterval(function() {\r\n        var diff;\r\n        diff = now() - last - 50;\r\n        last = now();\r\n        samples.push(diff);\r\n        if (samples.length > options.eventLag.sampleCount) {\r\n          samples.shift();\r\n        }\r\n        avg = avgAmplitude(samples);\r\n        if (++points >= options.eventLag.minSamples && avg < options.eventLag.lagThreshold) {\r\n          _this.progress = 100;\r\n          return clearInterval(interval);\r\n        } else {\r\n          return _this.progress = 100 * (3 / (avg + 3));\r\n        }\r\n      }, 50);\r\n    }\r\n\r\n    return EventLagMonitor;\r\n\r\n  })();\r\n\r\n  Scaler = (function() {\r\n    function Scaler(source) {\r\n      this.source = source;\r\n      this.last = this.sinceLastUpdate = 0;\r\n      this.rate = options.initialRate;\r\n      this.catchup = 0;\r\n      this.progress = this.lastProgress = 0;\r\n      if (this.source != null) {\r\n        this.progress = result(this.source, 'progress');\r\n      }\r\n    }\r\n\r\n    Scaler.prototype.tick = function(frameTime, val) {\r\n      var scaling;\r\n      if (val == null) {\r\n        val = result(this.source, 'progress');\r\n      }\r\n      if (val >= 100) {\r\n        this.done = true;\r\n      }\r\n      if (val === this.last) {\r\n        this.sinceLastUpdate += frameTime;\r\n      } else {\r\n        if (this.sinceLastUpdate) {\r\n          this.rate = (val - this.last) / this.sinceLastUpdate;\r\n        }\r\n        this.catchup = (val - this.progress) / options.catchupTime;\r\n        this.sinceLastUpdate = 0;\r\n        this.last = val;\r\n      }\r\n      if (val > this.progress) {\r\n        this.progress += this.catchup * frameTime;\r\n      }\r\n      scaling = 1 - Math.pow(this.progress / 100, options.easeFactor);\r\n      this.progress += scaling * this.rate * frameTime;\r\n      this.progress = Math.min(this.lastProgress + options.maxProgressPerFrame, this.progress);\r\n      this.progress = Math.max(0, this.progress);\r\n      this.progress = Math.min(100, this.progress);\r\n      this.lastProgress = this.progress;\r\n      return this.progress;\r\n    };\r\n\r\n    return Scaler;\r\n\r\n  })();\r\n\r\n  sources = null;\r\n\r\n  scalers = null;\r\n\r\n  bar = null;\r\n\r\n  uniScaler = null;\r\n\r\n  animation = null;\r\n\r\n  cancelAnimation = null;\r\n\r\n  Pace.running = false;\r\n\r\n  handlePushState = function() {\r\n    if (options.restartOnPushState) {\r\n      return Pace.restart();\r\n    }\r\n  };\r\n\r\n  if (window.history.pushState != null) {\r\n    _pushState = window.history.pushState;\r\n    window.history.pushState = function() {\r\n      handlePushState();\r\n      return _pushState.apply(window.history, arguments);\r\n    };\r\n  }\r\n\r\n  if (window.history.replaceState != null) {\r\n    _replaceState = window.history.replaceState;\r\n    window.history.replaceState = function() {\r\n      handlePushState();\r\n      return _replaceState.apply(window.history, arguments);\r\n    };\r\n  }\r\n\r\n  SOURCE_KEYS = {\r\n    ajax: AjaxMonitor,\r\n    elements: ElementMonitor,\r\n    document: DocumentMonitor,\r\n    eventLag: EventLagMonitor\r\n  };\r\n\r\n  (init = function() {\r\n    var type, _j, _k, _len1, _len2, _ref2, _ref3, _ref4;\r\n    Pace.sources = sources = [];\r\n    _ref2 = ['ajax', 'elements', 'document', 'eventLag'];\r\n    for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {\r\n      type = _ref2[_j];\r\n      if (options[type] !== false) {\r\n        sources.push(new SOURCE_KEYS[type](options[type]));\r\n      }\r\n    }\r\n    _ref4 = (_ref3 = options.extraSources) != null ? _ref3 : [];\r\n    for (_k = 0, _len2 = _ref4.length; _k < _len2; _k++) {\r\n      source = _ref4[_k];\r\n      sources.push(new source(options));\r\n    }\r\n    Pace.bar = bar = new Bar;\r\n    scalers = [];\r\n    return uniScaler = new Scaler;\r\n  })();\r\n\r\n  Pace.stop = function() {\r\n    Pace.trigger('stop');\r\n    Pace.running = false;\r\n    bar.destroy();\r\n    cancelAnimation = true;\r\n    if (animation != null) {\r\n      if (typeof cancelAnimationFrame === \"function\") {\r\n        cancelAnimationFrame(animation);\r\n      }\r\n      animation = null;\r\n    }\r\n    return init();\r\n  };\r\n\r\n  Pace.restart = function() {\r\n    Pace.trigger('restart');\r\n    Pace.stop();\r\n    return Pace.start();\r\n  };\r\n\r\n  Pace.go = function() {\r\n    var start;\r\n    Pace.running = true;\r\n    bar.render();\r\n    start = now();\r\n    cancelAnimation = false;\r\n    return animation = runAnimation(function(frameTime, enqueueNextFrame) {\r\n      var avg, count, done, element, elements, i, j, remaining, scaler, scalerList, sum, _j, _k, _len1, _len2, _ref2;\r\n      remaining = 100 - bar.progress;\r\n      count = sum = 0;\r\n      done = true;\r\n      for (i = _j = 0, _len1 = sources.length; _j < _len1; i = ++_j) {\r\n        source = sources[i];\r\n        scalerList = scalers[i] != null ? scalers[i] : scalers[i] = [];\r\n        elements = (_ref2 = source.elements) != null ? _ref2 : [source];\r\n        for (j = _k = 0, _len2 = elements.length; _k < _len2; j = ++_k) {\r\n          element = elements[j];\r\n          scaler = scalerList[j] != null ? scalerList[j] : scalerList[j] = new Scaler(element);\r\n          done &= scaler.done;\r\n          if (scaler.done) {\r\n            continue;\r\n          }\r\n          count++;\r\n          sum += scaler.tick(frameTime);\r\n        }\r\n      }\r\n      avg = sum / count;\r\n      bar.update(uniScaler.tick(frameTime, avg));\r\n      if (bar.done() || done || cancelAnimation) {\r\n        bar.update(100);\r\n        Pace.trigger('done');\r\n        return setTimeout(function() {\r\n          bar.finish();\r\n          Pace.running = false;\r\n          return Pace.trigger('hide');\r\n        }, Math.max(options.ghostTime, Math.max(options.minTime - (now() - start), 0)));\r\n      } else {\r\n        return enqueueNextFrame();\r\n      }\r\n    });\r\n  };\r\n\r\n  Pace.start = function(_options) {\r\n    extend(options, _options);\r\n    Pace.running = true;\r\n    try {\r\n      bar.render();\r\n    } catch (_error) {\r\n      NoTargetError = _error;\r\n    }\r\n    if (!document.querySelector('.pace')) {\r\n      return setTimeout(Pace.start, 50);\r\n    } else {\r\n      Pace.trigger('start');\r\n      return Pace.go();\r\n    }\r\n  };\r\n\r\n  if (typeof define === 'function' && define.amd) {\r\n    define(['pace'], function() {\r\n      return Pace;\r\n    });\r\n  } else if (typeof exports === 'object') {\r\n    module.exports = Pace;\r\n  } else {\r\n    if (options.startOnPageLoad) {\r\n      Pace.start();\r\n    }\r\n  }\r\n\r\n}).call(this);","import journey from \"lib/journey/journey.js\";\r\nimport \"lib/pace.js\";\r\nimport template from \"./menu.html\";\r\nimport Ractive from \"lib/ractive.js\";\r\nimport sidePanel from \"../panel/side-panel/sidePanel.js\";\r\nimport menuSlider from \"./menuSlider.js\";\r\n\r\nlet sidePanelObj;\r\n\r\nvar menu = {\r\n\r\n\tinit: function ( options ) {\r\n\r\n\t\t// Create menu view instance\r\n\t\tnew Ractive( {\r\n\t\t\tel: options.target,\r\n\r\n\t\t\ttemplate: template,\r\n\r\n\t\t\tgotoEvents: function ( e ) {\r\n\t\t\t\tjourney.goto( \"/events\" );\r\n\t\t\t\te.preventDefault();\r\n\t\t\t},\r\n\r\n\t\t\tshowJavascript: function ( routeName ) {\r\n\r\n\t\t\t\tsidePanelObj.show( {\r\n\t\t\t\t\text: \"js\"\r\n\t\t\t\t} );\r\n\t\t\t\t// Cancel the click event by returning false, otherwise the link function would execute ie. follow the link href\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\r\n\t\t\tshowHtml: function ( routeName ) {\r\n\t\t\t\tsidePanelObj.show( {\r\n\t\t\t\t\text: \"html\"\r\n\r\n\t\t\t\t} );\r\n\t\t\t\t// Cancel the click event by returning false, otherwise the link function would execute ie. follow the link href\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\t// Create sidePanel instance\r\n\r\n\t\tsidePanelObj = sidePanel( '#side-panel' );\r\n\r\n\t\t// Add highlighting slider to menu\r\n\t\tmenuSlider.init( { fallbackMenu: options.fallbackMenu } );\r\n\r\n\t\tPace.stop();\r\n\r\n\t\tjourney.on( \"entered\", () => {\r\n\t\t\tPace.stop();\r\n\t\t} );\r\n\t},\r\n\r\n\tupdateSlider: selector => {\r\n\t\tlet $li = $( selector );\r\n\t\tmenuSlider.updateSlider( $li );\r\n\t}\r\n};\r\n\r\nexport default menu;\r\n","/*!\r\n * Bootstrap v3.3.7 (http://getbootstrap.com)\r\n * Copyright 2011-2016 Twitter, Inc.\r\n * Licensed under the MIT license\r\n */\r\n\r\nif (typeof jQuery === 'undefined') {\r\n  throw new Error('Bootstrap\\'s JavaScript requires jQuery')\r\n}\r\n\r\n+function ($) {\r\n  'use strict';\r\n  var version = $.fn.jquery.split(' ')[0].split('.')\r\n  if ((version[0] < 2 && version[1] < 9) || (version[0] == 1 && version[1] == 9 && version[2] < 1) || (version[0] > 3)) {\r\n    throw new Error('Bootstrap\\'s JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4')\r\n  }\r\n}(jQuery);\r\n\r\n/* ========================================================================\r\n * Bootstrap: transition.js v3.3.7\r\n * http://getbootstrap.com/javascript/#transitions\r\n * ========================================================================\r\n * Copyright 2011-2016 Twitter, Inc.\r\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\r\n * ======================================================================== */\r\n\r\n\r\n+function ($) {\r\n  'use strict';\r\n\r\n  // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)\r\n  // ============================================================\r\n\r\n  function transitionEnd() {\r\n    var el = document.createElement('bootstrap')\r\n\r\n    var transEndEventNames = {\r\n      WebkitTransition : 'webkitTransitionEnd',\r\n      MozTransition    : 'transitionend',\r\n      OTransition      : 'oTransitionEnd otransitionend',\r\n      transition       : 'transitionend'\r\n    }\r\n\r\n    for (var name in transEndEventNames) {\r\n      if (el.style[name] !== undefined) {\r\n        return { end: transEndEventNames[name] }\r\n      }\r\n    }\r\n\r\n    return false // explicit for ie8 (  ._.)\r\n  }\r\n\r\n  // http://blog.alexmaccaw.com/css-transitions\r\n  $.fn.emulateTransitionEnd = function (duration) {\r\n    var called = false\r\n    var $el = this\r\n    $(this).one('bsTransitionEnd', function () { called = true })\r\n    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }\r\n    setTimeout(callback, duration)\r\n    return this\r\n  }\r\n\r\n  $(function () {\r\n    $.support.transition = transitionEnd()\r\n\r\n    if (!$.support.transition) return\r\n\r\n    $.event.special.bsTransitionEnd = {\r\n      bindType: $.support.transition.end,\r\n      delegateType: $.support.transition.end,\r\n      handle: function (e) {\r\n        if ($(e.target).is(this)) return e.handleObj.handler.apply(this, arguments)\r\n      }\r\n    }\r\n  })\r\n\r\n}(jQuery);\r\n\r\n/* ========================================================================\r\n * Bootstrap: alert.js v3.3.7\r\n * http://getbootstrap.com/javascript/#alerts\r\n * ========================================================================\r\n * Copyright 2011-2016 Twitter, Inc.\r\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\r\n * ======================================================================== */\r\n\r\n\r\n+function ($) {\r\n  'use strict';\r\n\r\n  // ALERT CLASS DEFINITION\r\n  // ======================\r\n\r\n  var dismiss = '[data-dismiss=\"alert\"]'\r\n  var Alert   = function (el) {\r\n    $(el).on('click', dismiss, this.close)\r\n  }\r\n\r\n  Alert.VERSION = '3.3.7'\r\n\r\n  Alert.TRANSITION_DURATION = 150\r\n\r\n  Alert.prototype.close = function (e) {\r\n    var $this    = $(this)\r\n    var selector = $this.attr('data-target')\r\n\r\n    if (!selector) {\r\n      selector = $this.attr('href')\r\n      selector = selector && selector.replace(/.*(?=#[^\\s]*$)/, '') // strip for ie7\r\n    }\r\n\r\n    var $parent = $(selector === '#' ? [] : selector)\r\n\r\n    if (e) e.preventDefault()\r\n\r\n    if (!$parent.length) {\r\n      $parent = $this.closest('.alert')\r\n    }\r\n\r\n    $parent.trigger(e = $.Event('close.bs.alert'))\r\n\r\n    if (e.isDefaultPrevented()) return\r\n\r\n    $parent.removeClass('in')\r\n\r\n    function removeElement() {\r\n      // detach from parent, fire event then clean up data\r\n      $parent.detach().trigger('closed.bs.alert').remove()\r\n    }\r\n\r\n    $.support.transition && $parent.hasClass('fade') ?\r\n      $parent\r\n        .one('bsTransitionEnd', removeElement)\r\n        .emulateTransitionEnd(Alert.TRANSITION_DURATION) :\r\n      removeElement()\r\n  }\r\n\r\n\r\n  // ALERT PLUGIN DEFINITION\r\n  // =======================\r\n\r\n  function Plugin(option) {\r\n    return this.each(function () {\r\n      var $this = $(this)\r\n      var data  = $this.data('bs.alert')\r\n\r\n      if (!data) $this.data('bs.alert', (data = new Alert(this)))\r\n      if (typeof option == 'string') data[option].call($this)\r\n    })\r\n  }\r\n\r\n  var old = $.fn.alert\r\n\r\n  $.fn.alert             = Plugin\r\n  $.fn.alert.Constructor = Alert\r\n\r\n\r\n  // ALERT NO CONFLICT\r\n  // =================\r\n\r\n  $.fn.alert.noConflict = function () {\r\n    $.fn.alert = old\r\n    return this\r\n  }\r\n\r\n\r\n  // ALERT DATA-API\r\n  // ==============\r\n\r\n  $(document).on('click.bs.alert.data-api', dismiss, Alert.prototype.close)\r\n\r\n}(jQuery);\r\n\r\n/* ========================================================================\r\n * Bootstrap: button.js v3.3.7\r\n * http://getbootstrap.com/javascript/#buttons\r\n * ========================================================================\r\n * Copyright 2011-2016 Twitter, Inc.\r\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\r\n * ======================================================================== */\r\n\r\n\r\n+function ($) {\r\n  'use strict';\r\n\r\n  // BUTTON PUBLIC CLASS DEFINITION\r\n  // ==============================\r\n\r\n  var Button = function (element, options) {\r\n    this.$element  = $(element)\r\n    this.options   = $.extend({}, Button.DEFAULTS, options)\r\n    this.isLoading = false\r\n  }\r\n\r\n  Button.VERSION  = '3.3.7'\r\n\r\n  Button.DEFAULTS = {\r\n    loadingText: 'loading...'\r\n  }\r\n\r\n  Button.prototype.setState = function (state) {\r\n    var d    = 'disabled'\r\n    var $el  = this.$element\r\n    var val  = $el.is('input') ? 'val' : 'html'\r\n    var data = $el.data()\r\n\r\n    state += 'Text'\r\n\r\n    if (data.resetText == null) $el.data('resetText', $el[val]())\r\n\r\n    // push to event loop to allow forms to submit\r\n    setTimeout($.proxy(function () {\r\n      $el[val](data[state] == null ? this.options[state] : data[state])\r\n\r\n      if (state == 'loadingText') {\r\n        this.isLoading = true\r\n        $el.addClass(d).attr(d, d).prop(d, true)\r\n      } else if (this.isLoading) {\r\n        this.isLoading = false\r\n        $el.removeClass(d).removeAttr(d).prop(d, false)\r\n      }\r\n    }, this), 0)\r\n  }\r\n\r\n  Button.prototype.toggle = function () {\r\n    var changed = true\r\n    var $parent = this.$element.closest('[data-toggle=\"buttons\"]')\r\n\r\n    if ($parent.length) {\r\n      var $input = this.$element.find('input')\r\n      if ($input.prop('type') == 'radio') {\r\n        if ($input.prop('checked')) changed = false\r\n        $parent.find('.active').removeClass('active')\r\n        this.$element.addClass('active')\r\n      } else if ($input.prop('type') == 'checkbox') {\r\n        if (($input.prop('checked')) !== this.$element.hasClass('active')) changed = false\r\n        this.$element.toggleClass('active')\r\n      }\r\n      $input.prop('checked', this.$element.hasClass('active'))\r\n      if (changed) $input.trigger('change')\r\n    } else {\r\n      this.$element.attr('aria-pressed', !this.$element.hasClass('active'))\r\n      this.$element.toggleClass('active')\r\n    }\r\n  }\r\n\r\n\r\n  // BUTTON PLUGIN DEFINITION\r\n  // ========================\r\n\r\n  function Plugin(option) {\r\n    return this.each(function () {\r\n      var $this   = $(this)\r\n      var data    = $this.data('bs.button')\r\n      var options = typeof option == 'object' && option\r\n\r\n      if (!data) $this.data('bs.button', (data = new Button(this, options)))\r\n\r\n      if (option == 'toggle') data.toggle()\r\n      else if (option) data.setState(option)\r\n    })\r\n  }\r\n\r\n  var old = $.fn.button\r\n\r\n  $.fn.button             = Plugin\r\n  $.fn.button.Constructor = Button\r\n\r\n\r\n  // BUTTON NO CONFLICT\r\n  // ==================\r\n\r\n  $.fn.button.noConflict = function () {\r\n    $.fn.button = old\r\n    return this\r\n  }\r\n\r\n\r\n  // BUTTON DATA-API\r\n  // ===============\r\n\r\n  $(document)\r\n    .on('click.bs.button.data-api', '[data-toggle^=\"button\"]', function (e) {\r\n      var $btn = $(e.target).closest('.btn')\r\n      Plugin.call($btn, 'toggle')\r\n      if (!($(e.target).is('input[type=\"radio\"], input[type=\"checkbox\"]'))) {\r\n        // Prevent double click on radios, and the double selections (so cancellation) on checkboxes\r\n        e.preventDefault()\r\n        // The target component still receive the focus\r\n        if ($btn.is('input,button')) $btn.trigger('focus')\r\n        else $btn.find('input:visible,button:visible').first().trigger('focus')\r\n      }\r\n    })\r\n    .on('focus.bs.button.data-api blur.bs.button.data-api', '[data-toggle^=\"button\"]', function (e) {\r\n      $(e.target).closest('.btn').toggleClass('focus', /^focus(in)?$/.test(e.type))\r\n    })\r\n\r\n}(jQuery);\r\n\r\n/* ========================================================================\r\n * Bootstrap: carousel.js v3.3.7\r\n * http://getbootstrap.com/javascript/#carousel\r\n * ========================================================================\r\n * Copyright 2011-2016 Twitter, Inc.\r\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\r\n * ======================================================================== */\r\n\r\n\r\n+function ($) {\r\n  'use strict';\r\n\r\n  // CAROUSEL CLASS DEFINITION\r\n  // =========================\r\n\r\n  var Carousel = function (element, options) {\r\n    this.$element    = $(element)\r\n    this.$indicators = this.$element.find('.carousel-indicators')\r\n    this.options     = options\r\n    this.paused      = null\r\n    this.sliding     = null\r\n    this.interval    = null\r\n    this.$active     = null\r\n    this.$items      = null\r\n\r\n    this.options.keyboard && this.$element.on('keydown.bs.carousel', $.proxy(this.keydown, this))\r\n\r\n    this.options.pause == 'hover' && !('ontouchstart' in document.documentElement) && this.$element\r\n      .on('mouseenter.bs.carousel', $.proxy(this.pause, this))\r\n      .on('mouseleave.bs.carousel', $.proxy(this.cycle, this))\r\n  }\r\n\r\n  Carousel.VERSION  = '3.3.7'\r\n\r\n  Carousel.TRANSITION_DURATION = 600\r\n\r\n  Carousel.DEFAULTS = {\r\n    interval: 5000,\r\n    pause: 'hover',\r\n    wrap: true,\r\n    keyboard: true\r\n  }\r\n\r\n  Carousel.prototype.keydown = function (e) {\r\n    if (/input|textarea/i.test(e.target.tagName)) return\r\n    switch (e.which) {\r\n      case 37: this.prev(); break\r\n      case 39: this.next(); break\r\n      default: return\r\n    }\r\n\r\n    e.preventDefault()\r\n  }\r\n\r\n  Carousel.prototype.cycle = function (e) {\r\n    e || (this.paused = false)\r\n\r\n    this.interval && clearInterval(this.interval)\r\n\r\n    this.options.interval\r\n      && !this.paused\r\n      && (this.interval = setInterval($.proxy(this.next, this), this.options.interval))\r\n\r\n    return this\r\n  }\r\n\r\n  Carousel.prototype.getItemIndex = function (item) {\r\n    this.$items = item.parent().children('.item')\r\n    return this.$items.index(item || this.$active)\r\n  }\r\n\r\n  Carousel.prototype.getItemForDirection = function (direction, active) {\r\n    var activeIndex = this.getItemIndex(active)\r\n    var willWrap = (direction == 'prev' && activeIndex === 0)\r\n                || (direction == 'next' && activeIndex == (this.$items.length - 1))\r\n    if (willWrap && !this.options.wrap) return active\r\n    var delta = direction == 'prev' ? -1 : 1\r\n    var itemIndex = (activeIndex + delta) % this.$items.length\r\n    return this.$items.eq(itemIndex)\r\n  }\r\n\r\n  Carousel.prototype.to = function (pos) {\r\n    var that        = this\r\n    var activeIndex = this.getItemIndex(this.$active = this.$element.find('.item.active'))\r\n\r\n    if (pos > (this.$items.length - 1) || pos < 0) return\r\n\r\n    if (this.sliding)       return this.$element.one('slid.bs.carousel', function () { that.to(pos) }) // yes, \"slid\"\r\n    if (activeIndex == pos) return this.pause().cycle()\r\n\r\n    return this.slide(pos > activeIndex ? 'next' : 'prev', this.$items.eq(pos))\r\n  }\r\n\r\n  Carousel.prototype.pause = function (e) {\r\n    e || (this.paused = true)\r\n\r\n    if (this.$element.find('.next, .prev').length && $.support.transition) {\r\n      this.$element.trigger($.support.transition.end)\r\n      this.cycle(true)\r\n    }\r\n\r\n    this.interval = clearInterval(this.interval)\r\n\r\n    return this\r\n  }\r\n\r\n  Carousel.prototype.next = function () {\r\n    if (this.sliding) return\r\n    return this.slide('next')\r\n  }\r\n\r\n  Carousel.prototype.prev = function () {\r\n    if (this.sliding) return\r\n    return this.slide('prev')\r\n  }\r\n\r\n  Carousel.prototype.slide = function (type, next) {\r\n    var $active   = this.$element.find('.item.active')\r\n    var $next     = next || this.getItemForDirection(type, $active)\r\n    var isCycling = this.interval\r\n    var direction = type == 'next' ? 'left' : 'right'\r\n    var that      = this\r\n\r\n    if ($next.hasClass('active')) return (this.sliding = false)\r\n\r\n    var relatedTarget = $next[0]\r\n    var slideEvent = $.Event('slide.bs.carousel', {\r\n      relatedTarget: relatedTarget,\r\n      direction: direction\r\n    })\r\n    this.$element.trigger(slideEvent)\r\n    if (slideEvent.isDefaultPrevented()) return\r\n\r\n    this.sliding = true\r\n\r\n    isCycling && this.pause()\r\n\r\n    if (this.$indicators.length) {\r\n      this.$indicators.find('.active').removeClass('active')\r\n      var $nextIndicator = $(this.$indicators.children()[this.getItemIndex($next)])\r\n      $nextIndicator && $nextIndicator.addClass('active')\r\n    }\r\n\r\n    var slidEvent = $.Event('slid.bs.carousel', { relatedTarget: relatedTarget, direction: direction }) // yes, \"slid\"\r\n    if ($.support.transition && this.$element.hasClass('slide')) {\r\n      $next.addClass(type)\r\n      $next[0].offsetWidth // force reflow\r\n      $active.addClass(direction)\r\n      $next.addClass(direction)\r\n      $active\r\n        .one('bsTransitionEnd', function () {\r\n          $next.removeClass([type, direction].join(' ')).addClass('active')\r\n          $active.removeClass(['active', direction].join(' '))\r\n          that.sliding = false\r\n          setTimeout(function () {\r\n            that.$element.trigger(slidEvent)\r\n          }, 0)\r\n        })\r\n        .emulateTransitionEnd(Carousel.TRANSITION_DURATION)\r\n    } else {\r\n      $active.removeClass('active')\r\n      $next.addClass('active')\r\n      this.sliding = false\r\n      this.$element.trigger(slidEvent)\r\n    }\r\n\r\n    isCycling && this.cycle()\r\n\r\n    return this\r\n  }\r\n\r\n\r\n  // CAROUSEL PLUGIN DEFINITION\r\n  // ==========================\r\n\r\n  function Plugin(option) {\r\n    return this.each(function () {\r\n      var $this   = $(this)\r\n      var data    = $this.data('bs.carousel')\r\n      var options = $.extend({}, Carousel.DEFAULTS, $this.data(), typeof option == 'object' && option)\r\n      var action  = typeof option == 'string' ? option : options.slide\r\n\r\n      if (!data) $this.data('bs.carousel', (data = new Carousel(this, options)))\r\n      if (typeof option == 'number') data.to(option)\r\n      else if (action) data[action]()\r\n      else if (options.interval) data.pause().cycle()\r\n    })\r\n  }\r\n\r\n  var old = $.fn.carousel\r\n\r\n  $.fn.carousel             = Plugin\r\n  $.fn.carousel.Constructor = Carousel\r\n\r\n\r\n  // CAROUSEL NO CONFLICT\r\n  // ====================\r\n\r\n  $.fn.carousel.noConflict = function () {\r\n    $.fn.carousel = old\r\n    return this\r\n  }\r\n\r\n\r\n  // CAROUSEL DATA-API\r\n  // =================\r\n\r\n  var clickHandler = function (e) {\r\n    var href\r\n    var $this   = $(this)\r\n    var $target = $($this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '')) // strip for ie7\r\n    if (!$target.hasClass('carousel')) return\r\n    var options = $.extend({}, $target.data(), $this.data())\r\n    var slideIndex = $this.attr('data-slide-to')\r\n    if (slideIndex) options.interval = false\r\n\r\n    Plugin.call($target, options)\r\n\r\n    if (slideIndex) {\r\n      $target.data('bs.carousel').to(slideIndex)\r\n    }\r\n\r\n    e.preventDefault()\r\n  }\r\n\r\n  $(document)\r\n    .on('click.bs.carousel.data-api', '[data-slide]', clickHandler)\r\n    .on('click.bs.carousel.data-api', '[data-slide-to]', clickHandler)\r\n\r\n  $(window).on('load', function () {\r\n    $('[data-ride=\"carousel\"]').each(function () {\r\n      var $carousel = $(this)\r\n      Plugin.call($carousel, $carousel.data())\r\n    })\r\n  })\r\n\r\n}(jQuery);\r\n\r\n/* ========================================================================\r\n * Bootstrap: collapse.js v3.3.7\r\n * http://getbootstrap.com/javascript/#collapse\r\n * ========================================================================\r\n * Copyright 2011-2016 Twitter, Inc.\r\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\r\n * ======================================================================== */\r\n\r\n/* jshint latedef: false */\r\n\r\n+function ($) {\r\n  'use strict';\r\n\r\n  // COLLAPSE PUBLIC CLASS DEFINITION\r\n  // ================================\r\n\r\n  var Collapse = function (element, options) {\r\n    this.$element      = $(element)\r\n    this.options       = $.extend({}, Collapse.DEFAULTS, options)\r\n    this.$trigger      = $('[data-toggle=\"collapse\"][href=\"#' + element.id + '\"],' +\r\n                           '[data-toggle=\"collapse\"][data-target=\"#' + element.id + '\"]')\r\n    this.transitioning = null\r\n\r\n    if (this.options.parent) {\r\n      this.$parent = this.getParent()\r\n    } else {\r\n      this.addAriaAndCollapsedClass(this.$element, this.$trigger)\r\n    }\r\n\r\n    if (this.options.toggle) this.toggle()\r\n  }\r\n\r\n  Collapse.VERSION  = '3.3.7'\r\n\r\n  Collapse.TRANSITION_DURATION = 350\r\n\r\n  Collapse.DEFAULTS = {\r\n    toggle: true\r\n  }\r\n\r\n  Collapse.prototype.dimension = function () {\r\n    var hasWidth = this.$element.hasClass('width')\r\n    return hasWidth ? 'width' : 'height'\r\n  }\r\n\r\n  Collapse.prototype.show = function () {\r\n    if (this.transitioning || this.$element.hasClass('in')) return\r\n\r\n    var activesData\r\n    var actives = this.$parent && this.$parent.children('.panel').children('.in, .collapsing')\r\n\r\n    if (actives && actives.length) {\r\n      activesData = actives.data('bs.collapse')\r\n      if (activesData && activesData.transitioning) return\r\n    }\r\n\r\n    var startEvent = $.Event('show.bs.collapse')\r\n    this.$element.trigger(startEvent)\r\n    if (startEvent.isDefaultPrevented()) return\r\n\r\n    if (actives && actives.length) {\r\n      Plugin.call(actives, 'hide')\r\n      activesData || actives.data('bs.collapse', null)\r\n    }\r\n\r\n    var dimension = this.dimension()\r\n\r\n    this.$element\r\n      .removeClass('collapse')\r\n      .addClass('collapsing')[dimension](0)\r\n      .attr('aria-expanded', true)\r\n\r\n    this.$trigger\r\n      .removeClass('collapsed')\r\n      .attr('aria-expanded', true)\r\n\r\n    this.transitioning = 1\r\n\r\n    var complete = function () {\r\n      this.$element\r\n        .removeClass('collapsing')\r\n        .addClass('collapse in')[dimension]('')\r\n      this.transitioning = 0\r\n      this.$element\r\n        .trigger('shown.bs.collapse')\r\n    }\r\n\r\n    if (!$.support.transition) return complete.call(this)\r\n\r\n    var scrollSize = $.camelCase(['scroll', dimension].join('-'))\r\n\r\n    this.$element\r\n      .one('bsTransitionEnd', $.proxy(complete, this))\r\n      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])\r\n  }\r\n\r\n  Collapse.prototype.hide = function () {\r\n    if (this.transitioning || !this.$element.hasClass('in')) return\r\n\r\n    var startEvent = $.Event('hide.bs.collapse')\r\n    this.$element.trigger(startEvent)\r\n    if (startEvent.isDefaultPrevented()) return\r\n\r\n    var dimension = this.dimension()\r\n\r\n    this.$element[dimension](this.$element[dimension]())[0].offsetHeight\r\n\r\n    this.$element\r\n      .addClass('collapsing')\r\n      .removeClass('collapse in')\r\n      .attr('aria-expanded', false)\r\n\r\n    this.$trigger\r\n      .addClass('collapsed')\r\n      .attr('aria-expanded', false)\r\n\r\n    this.transitioning = 1\r\n\r\n    var complete = function () {\r\n      this.transitioning = 0\r\n      this.$element\r\n        .removeClass('collapsing')\r\n        .addClass('collapse')\r\n        .trigger('hidden.bs.collapse')\r\n    }\r\n\r\n    if (!$.support.transition) return complete.call(this)\r\n\r\n    this.$element\r\n      [dimension](0)\r\n      .one('bsTransitionEnd', $.proxy(complete, this))\r\n      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)\r\n  }\r\n\r\n  Collapse.prototype.toggle = function () {\r\n    this[this.$element.hasClass('in') ? 'hide' : 'show']()\r\n  }\r\n\r\n  Collapse.prototype.getParent = function () {\r\n    return $(this.options.parent)\r\n      .find('[data-toggle=\"collapse\"][data-parent=\"' + this.options.parent + '\"]')\r\n      .each($.proxy(function (i, element) {\r\n        var $element = $(element)\r\n        this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element)\r\n      }, this))\r\n      .end()\r\n  }\r\n\r\n  Collapse.prototype.addAriaAndCollapsedClass = function ($element, $trigger) {\r\n    var isOpen = $element.hasClass('in')\r\n\r\n    $element.attr('aria-expanded', isOpen)\r\n    $trigger\r\n      .toggleClass('collapsed', !isOpen)\r\n      .attr('aria-expanded', isOpen)\r\n  }\r\n\r\n  function getTargetFromTrigger($trigger) {\r\n    var href\r\n    var target = $trigger.attr('data-target')\r\n      || (href = $trigger.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '') // strip for ie7\r\n\r\n    return $(target)\r\n  }\r\n\r\n\r\n  // COLLAPSE PLUGIN DEFINITION\r\n  // ==========================\r\n\r\n  function Plugin(option) {\r\n    return this.each(function () {\r\n      var $this   = $(this)\r\n      var data    = $this.data('bs.collapse')\r\n      var options = $.extend({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)\r\n\r\n      if (!data && options.toggle && /show|hide/.test(option)) options.toggle = false\r\n      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))\r\n      if (typeof option == 'string') data[option]()\r\n    })\r\n  }\r\n\r\n  var old = $.fn.collapse\r\n\r\n  $.fn.collapse             = Plugin\r\n  $.fn.collapse.Constructor = Collapse\r\n\r\n\r\n  // COLLAPSE NO CONFLICT\r\n  // ====================\r\n\r\n  $.fn.collapse.noConflict = function () {\r\n    $.fn.collapse = old\r\n    return this\r\n  }\r\n\r\n\r\n  // COLLAPSE DATA-API\r\n  // =================\r\n\r\n  $(document).on('click.bs.collapse.data-api', '[data-toggle=\"collapse\"]', function (e) {\r\n    var $this   = $(this)\r\n\r\n    if (!$this.attr('data-target')) e.preventDefault()\r\n\r\n    var $target = getTargetFromTrigger($this)\r\n    var data    = $target.data('bs.collapse')\r\n    var option  = data ? 'toggle' : $this.data()\r\n\r\n    Plugin.call($target, option)\r\n  })\r\n\r\n}(jQuery);\r\n\r\n/* ========================================================================\r\n * Bootstrap: dropdown.js v3.3.7\r\n * http://getbootstrap.com/javascript/#dropdowns\r\n * ========================================================================\r\n * Copyright 2011-2016 Twitter, Inc.\r\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\r\n * ======================================================================== */\r\n\r\n\r\n+function ($) {\r\n  'use strict';\r\n\r\n  // DROPDOWN CLASS DEFINITION\r\n  // =========================\r\n\r\n  var backdrop = '.dropdown-backdrop'\r\n  var toggle   = '[data-toggle=\"dropdown\"]'\r\n  var Dropdown = function (element) {\r\n    $(element).on('click.bs.dropdown', this.toggle)\r\n  }\r\n\r\n  Dropdown.VERSION = '3.3.7'\r\n\r\n  function getParent($this) {\r\n    var selector = $this.attr('data-target')\r\n\r\n    if (!selector) {\r\n      selector = $this.attr('href')\r\n      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\\s]*$)/, '') // strip for ie7\r\n    }\r\n\r\n    var $parent = selector && $(selector)\r\n\r\n    return $parent && $parent.length ? $parent : $this.parent()\r\n  }\r\n\r\n  function clearMenus(e) {\r\n    if (e && e.which === 3) return\r\n    $(backdrop).remove()\r\n    $(toggle).each(function () {\r\n      var $this         = $(this)\r\n      var $parent       = getParent($this)\r\n      var relatedTarget = { relatedTarget: this }\r\n\r\n      if (!$parent.hasClass('open')) return\r\n\r\n      if (e && e.type == 'click' && /input|textarea/i.test(e.target.tagName) && $.contains($parent[0], e.target)) return\r\n\r\n      $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))\r\n\r\n      if (e.isDefaultPrevented()) return\r\n\r\n      $this.attr('aria-expanded', 'false')\r\n      $parent.removeClass('open').trigger($.Event('hidden.bs.dropdown', relatedTarget))\r\n    })\r\n  }\r\n\r\n  Dropdown.prototype.toggle = function (e) {\r\n    var $this = $(this)\r\n\r\n    if ($this.is('.disabled, :disabled')) return\r\n\r\n    var $parent  = getParent($this)\r\n    var isActive = $parent.hasClass('open')\r\n\r\n    clearMenus()\r\n\r\n    if (!isActive) {\r\n      if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {\r\n        // if mobile we use a backdrop because click events don't delegate\r\n        $(document.createElement('div'))\r\n          .addClass('dropdown-backdrop')\r\n          .insertAfter($(this))\r\n          .on('click', clearMenus)\r\n      }\r\n\r\n      var relatedTarget = { relatedTarget: this }\r\n      $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))\r\n\r\n      if (e.isDefaultPrevented()) return\r\n\r\n      $this\r\n        .trigger('focus')\r\n        .attr('aria-expanded', 'true')\r\n\r\n      $parent\r\n        .toggleClass('open')\r\n        .trigger($.Event('shown.bs.dropdown', relatedTarget))\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  Dropdown.prototype.keydown = function (e) {\r\n    if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) return\r\n\r\n    var $this = $(this)\r\n\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n\r\n    if ($this.is('.disabled, :disabled')) return\r\n\r\n    var $parent  = getParent($this)\r\n    var isActive = $parent.hasClass('open')\r\n\r\n    if (!isActive && e.which != 27 || isActive && e.which == 27) {\r\n      if (e.which == 27) $parent.find(toggle).trigger('focus')\r\n      return $this.trigger('click')\r\n    }\r\n\r\n    var desc = ' li:not(.disabled):visible a'\r\n    var $items = $parent.find('.dropdown-menu' + desc)\r\n\r\n    if (!$items.length) return\r\n\r\n    var index = $items.index(e.target)\r\n\r\n    if (e.which == 38 && index > 0)                 index--         // up\r\n    if (e.which == 40 && index < $items.length - 1) index++         // down\r\n    if (!~index)                                    index = 0\r\n\r\n    $items.eq(index).trigger('focus')\r\n  }\r\n\r\n\r\n  // DROPDOWN PLUGIN DEFINITION\r\n  // ==========================\r\n\r\n  function Plugin(option) {\r\n    return this.each(function () {\r\n      var $this = $(this)\r\n      var data  = $this.data('bs.dropdown')\r\n\r\n      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))\r\n      if (typeof option == 'string') data[option].call($this)\r\n    })\r\n  }\r\n\r\n  var old = $.fn.dropdown\r\n\r\n  $.fn.dropdown             = Plugin\r\n  $.fn.dropdown.Constructor = Dropdown\r\n\r\n\r\n  // DROPDOWN NO CONFLICT\r\n  // ====================\r\n\r\n  $.fn.dropdown.noConflict = function () {\r\n    $.fn.dropdown = old\r\n    return this\r\n  }\r\n\r\n\r\n  // APPLY TO STANDARD DROPDOWN ELEMENTS\r\n  // ===================================\r\n\r\n  $(document)\r\n    .on('click.bs.dropdown.data-api', clearMenus)\r\n    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })\r\n    .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)\r\n    .on('keydown.bs.dropdown.data-api', toggle, Dropdown.prototype.keydown)\r\n    .on('keydown.bs.dropdown.data-api', '.dropdown-menu', Dropdown.prototype.keydown)\r\n\r\n}(jQuery);\r\n\r\n/* ========================================================================\r\n * Bootstrap: modal.js v3.3.7\r\n * http://getbootstrap.com/javascript/#modals\r\n * ========================================================================\r\n * Copyright 2011-2016 Twitter, Inc.\r\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\r\n * ======================================================================== */\r\n\r\n\r\n+function ($) {\r\n  'use strict';\r\n\r\n  // MODAL CLASS DEFINITION\r\n  // ======================\r\n\r\n  var Modal = function (element, options) {\r\n    this.options             = options\r\n    this.$body               = $(document.body)\r\n    this.$element            = $(element)\r\n    this.$dialog             = this.$element.find('.modal-dialog')\r\n    this.$backdrop           = null\r\n    this.isShown             = null\r\n    this.originalBodyPad     = null\r\n    this.scrollbarWidth      = 0\r\n    this.ignoreBackdropClick = false\r\n\r\n    if (this.options.remote) {\r\n      this.$element\r\n        .find('.modal-content')\r\n        .load(this.options.remote, $.proxy(function () {\r\n          this.$element.trigger('loaded.bs.modal')\r\n        }, this))\r\n    }\r\n  }\r\n\r\n  Modal.VERSION  = '3.3.7'\r\n\r\n  Modal.TRANSITION_DURATION = 300\r\n  Modal.BACKDROP_TRANSITION_DURATION = 150\r\n\r\n  Modal.DEFAULTS = {\r\n    backdrop: true,\r\n    keyboard: true,\r\n    show: true\r\n  }\r\n\r\n  Modal.prototype.toggle = function (_relatedTarget) {\r\n    return this.isShown ? this.hide() : this.show(_relatedTarget)\r\n  }\r\n\r\n  Modal.prototype.show = function (_relatedTarget) {\r\n    var that = this\r\n    var e    = $.Event('show.bs.modal', { relatedTarget: _relatedTarget })\r\n\r\n    this.$element.trigger(e)\r\n\r\n    if (this.isShown || e.isDefaultPrevented()) return\r\n\r\n    this.isShown = true\r\n\r\n    this.checkScrollbar()\r\n    this.setScrollbar()\r\n    this.$body.addClass('modal-open')\r\n\r\n    this.escape()\r\n    this.resize()\r\n\r\n    this.$element.on('click.dismiss.bs.modal', '[data-dismiss=\"modal\"]', $.proxy(this.hide, this))\r\n\r\n    this.$dialog.on('mousedown.dismiss.bs.modal', function () {\r\n      that.$element.one('mouseup.dismiss.bs.modal', function (e) {\r\n        if ($(e.target).is(that.$element)) that.ignoreBackdropClick = true\r\n      })\r\n    })\r\n\r\n    this.backdrop(function () {\r\n      var transition = $.support.transition && that.$element.hasClass('fade')\r\n\r\n      if (!that.$element.parent().length) {\r\n        that.$element.appendTo(that.$body) // don't move modals dom position\r\n      }\r\n\r\n      that.$element\r\n        .show()\r\n        .scrollTop(0)\r\n\r\n      that.adjustDialog()\r\n\r\n      if (transition) {\r\n        that.$element[0].offsetWidth // force reflow\r\n      }\r\n\r\n      that.$element.addClass('in')\r\n\r\n      that.enforceFocus()\r\n\r\n      var e = $.Event('shown.bs.modal', { relatedTarget: _relatedTarget })\r\n\r\n      transition ?\r\n        that.$dialog // wait for modal to slide in\r\n          .one('bsTransitionEnd', function () {\r\n            that.$element.trigger('focus').trigger(e)\r\n          })\r\n          .emulateTransitionEnd(Modal.TRANSITION_DURATION) :\r\n        that.$element.trigger('focus').trigger(e)\r\n    })\r\n  }\r\n\r\n  Modal.prototype.hide = function (e) {\r\n    if (e) e.preventDefault()\r\n\r\n    e = $.Event('hide.bs.modal')\r\n\r\n    this.$element.trigger(e)\r\n\r\n    if (!this.isShown || e.isDefaultPrevented()) return\r\n\r\n    this.isShown = false\r\n\r\n    this.escape()\r\n    this.resize()\r\n\r\n    $(document).off('focusin.bs.modal')\r\n\r\n    this.$element\r\n      .removeClass('in')\r\n      .off('click.dismiss.bs.modal')\r\n      .off('mouseup.dismiss.bs.modal')\r\n\r\n    this.$dialog.off('mousedown.dismiss.bs.modal')\r\n\r\n    $.support.transition && this.$element.hasClass('fade') ?\r\n      this.$element\r\n        .one('bsTransitionEnd', $.proxy(this.hideModal, this))\r\n        .emulateTransitionEnd(Modal.TRANSITION_DURATION) :\r\n      this.hideModal()\r\n  }\r\n\r\n  Modal.prototype.enforceFocus = function () {\r\n    $(document)\r\n      .off('focusin.bs.modal') // guard against infinite focus loop\r\n      .on('focusin.bs.modal', $.proxy(function (e) {\r\n        if (document !== e.target &&\r\n            this.$element[0] !== e.target &&\r\n            !this.$element.has(e.target).length) {\r\n          this.$element.trigger('focus')\r\n        }\r\n      }, this))\r\n  }\r\n\r\n  Modal.prototype.escape = function () {\r\n    if (this.isShown && this.options.keyboard) {\r\n      this.$element.on('keydown.dismiss.bs.modal', $.proxy(function (e) {\r\n        e.which == 27 && this.hide()\r\n      }, this))\r\n    } else if (!this.isShown) {\r\n      this.$element.off('keydown.dismiss.bs.modal')\r\n    }\r\n  }\r\n\r\n  Modal.prototype.resize = function () {\r\n    if (this.isShown) {\r\n      $(window).on('resize.bs.modal', $.proxy(this.handleUpdate, this))\r\n    } else {\r\n      $(window).off('resize.bs.modal')\r\n    }\r\n  }\r\n\r\n  Modal.prototype.hideModal = function () {\r\n    var that = this\r\n    this.$element.hide()\r\n    this.backdrop(function () {\r\n      that.$body.removeClass('modal-open')\r\n      that.resetAdjustments()\r\n      that.resetScrollbar()\r\n      that.$element.trigger('hidden.bs.modal')\r\n    })\r\n  }\r\n\r\n  Modal.prototype.removeBackdrop = function () {\r\n    this.$backdrop && this.$backdrop.remove()\r\n    this.$backdrop = null\r\n  }\r\n\r\n  Modal.prototype.backdrop = function (callback) {\r\n    var that = this\r\n    var animate = this.$element.hasClass('fade') ? 'fade' : ''\r\n\r\n    if (this.isShown && this.options.backdrop) {\r\n      var doAnimate = $.support.transition && animate\r\n\r\n      this.$backdrop = $(document.createElement('div'))\r\n        .addClass('modal-backdrop ' + animate)\r\n        .appendTo(this.$body)\r\n\r\n      this.$element.on('click.dismiss.bs.modal', $.proxy(function (e) {\r\n        if (this.ignoreBackdropClick) {\r\n          this.ignoreBackdropClick = false\r\n          return\r\n        }\r\n        if (e.target !== e.currentTarget) return\r\n        this.options.backdrop == 'static'\r\n          ? this.$element[0].focus()\r\n          : this.hide()\r\n      }, this))\r\n\r\n      if (doAnimate) this.$backdrop[0].offsetWidth // force reflow\r\n\r\n      this.$backdrop.addClass('in')\r\n\r\n      if (!callback) return\r\n\r\n      doAnimate ?\r\n        this.$backdrop\r\n          .one('bsTransitionEnd', callback)\r\n          .emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) :\r\n        callback()\r\n\r\n    } else if (!this.isShown && this.$backdrop) {\r\n      this.$backdrop.removeClass('in')\r\n\r\n      var callbackRemove = function () {\r\n        that.removeBackdrop()\r\n        callback && callback()\r\n      }\r\n      $.support.transition && this.$element.hasClass('fade') ?\r\n        this.$backdrop\r\n          .one('bsTransitionEnd', callbackRemove)\r\n          .emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) :\r\n        callbackRemove()\r\n\r\n    } else if (callback) {\r\n      callback()\r\n    }\r\n  }\r\n\r\n  // these following methods are used to handle overflowing modals\r\n\r\n  Modal.prototype.handleUpdate = function () {\r\n    this.adjustDialog()\r\n  }\r\n\r\n  Modal.prototype.adjustDialog = function () {\r\n    var modalIsOverflowing = this.$element[0].scrollHeight > document.documentElement.clientHeight\r\n\r\n    this.$element.css({\r\n      paddingLeft:  !this.bodyIsOverflowing && modalIsOverflowing ? this.scrollbarWidth : '',\r\n      paddingRight: this.bodyIsOverflowing && !modalIsOverflowing ? this.scrollbarWidth : ''\r\n    })\r\n  }\r\n\r\n  Modal.prototype.resetAdjustments = function () {\r\n    this.$element.css({\r\n      paddingLeft: '',\r\n      paddingRight: ''\r\n    })\r\n  }\r\n\r\n  Modal.prototype.checkScrollbar = function () {\r\n    var fullWindowWidth = window.innerWidth\r\n    if (!fullWindowWidth) { // workaround for missing window.innerWidth in IE8\r\n      var documentElementRect = document.documentElement.getBoundingClientRect()\r\n      fullWindowWidth = documentElementRect.right - Math.abs(documentElementRect.left)\r\n    }\r\n    this.bodyIsOverflowing = document.body.clientWidth < fullWindowWidth\r\n    this.scrollbarWidth = this.measureScrollbar()\r\n  }\r\n\r\n  Modal.prototype.setScrollbar = function () {\r\n    var bodyPad = parseInt((this.$body.css('padding-right') || 0), 10)\r\n    this.originalBodyPad = document.body.style.paddingRight || ''\r\n    if (this.bodyIsOverflowing) this.$body.css('padding-right', bodyPad + this.scrollbarWidth)\r\n  }\r\n\r\n  Modal.prototype.resetScrollbar = function () {\r\n    this.$body.css('padding-right', this.originalBodyPad)\r\n  }\r\n\r\n  Modal.prototype.measureScrollbar = function () { // thx walsh\r\n    var scrollDiv = document.createElement('div')\r\n    scrollDiv.className = 'modal-scrollbar-measure'\r\n    this.$body.append(scrollDiv)\r\n    var scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth\r\n    this.$body[0].removeChild(scrollDiv)\r\n    return scrollbarWidth\r\n  }\r\n\r\n\r\n  // MODAL PLUGIN DEFINITION\r\n  // =======================\r\n\r\n  function Plugin(option, _relatedTarget) {\r\n    return this.each(function () {\r\n      var $this   = $(this)\r\n      var data    = $this.data('bs.modal')\r\n      var options = $.extend({}, Modal.DEFAULTS, $this.data(), typeof option == 'object' && option)\r\n\r\n      if (!data) $this.data('bs.modal', (data = new Modal(this, options)))\r\n      if (typeof option == 'string') data[option](_relatedTarget)\r\n      else if (options.show) data.show(_relatedTarget)\r\n    })\r\n  }\r\n\r\n  var old = $.fn.modal\r\n\r\n  $.fn.modal             = Plugin\r\n  $.fn.modal.Constructor = Modal\r\n\r\n\r\n  // MODAL NO CONFLICT\r\n  // =================\r\n\r\n  $.fn.modal.noConflict = function () {\r\n    $.fn.modal = old\r\n    return this\r\n  }\r\n\r\n\r\n  // MODAL DATA-API\r\n  // ==============\r\n\r\n  $(document).on('click.bs.modal.data-api', '[data-toggle=\"modal\"]', function (e) {\r\n    var $this   = $(this)\r\n    var href    = $this.attr('href')\r\n    var $target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\\s]+$)/, ''))) // strip for ie7\r\n    var option  = $target.data('bs.modal') ? 'toggle' : $.extend({ remote: !/#/.test(href) && href }, $target.data(), $this.data())\r\n\r\n    if ($this.is('a')) e.preventDefault()\r\n\r\n    $target.one('show.bs.modal', function (showEvent) {\r\n      if (showEvent.isDefaultPrevented()) return // only register focus restorer if modal will actually get shown\r\n      $target.one('hidden.bs.modal', function () {\r\n        $this.is(':visible') && $this.trigger('focus')\r\n      })\r\n    })\r\n    Plugin.call($target, option, this)\r\n  })\r\n\r\n}(jQuery);\r\n\r\n/* ========================================================================\r\n * Bootstrap: tooltip.js v3.3.7\r\n * http://getbootstrap.com/javascript/#tooltip\r\n * Inspired by the original jQuery.tipsy by Jason Frame\r\n * ========================================================================\r\n * Copyright 2011-2016 Twitter, Inc.\r\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\r\n * ======================================================================== */\r\n\r\n\r\n+function ($) {\r\n  'use strict';\r\n\r\n  // TOOLTIP PUBLIC CLASS DEFINITION\r\n  // ===============================\r\n\r\n  var Tooltip = function (element, options) {\r\n    this.type       = null\r\n    this.options    = null\r\n    this.enabled    = null\r\n    this.timeout    = null\r\n    this.hoverState = null\r\n    this.$element   = null\r\n    this.inState    = null\r\n\r\n    this.init('tooltip', element, options)\r\n  }\r\n\r\n  Tooltip.VERSION  = '3.3.7'\r\n\r\n  Tooltip.TRANSITION_DURATION = 150\r\n\r\n  Tooltip.DEFAULTS = {\r\n    animation: true,\r\n    placement: 'top',\r\n    selector: false,\r\n    template: '<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>',\r\n    trigger: 'hover focus',\r\n    title: '',\r\n    delay: 0,\r\n    html: false,\r\n    container: false,\r\n    viewport: {\r\n      selector: 'body',\r\n      padding: 0\r\n    }\r\n  }\r\n\r\n  Tooltip.prototype.init = function (type, element, options) {\r\n    this.enabled   = true\r\n    this.type      = type\r\n    this.$element  = $(element)\r\n    this.options   = this.getOptions(options)\r\n    this.$viewport = this.options.viewport && $($.isFunction(this.options.viewport) ? this.options.viewport.call(this, this.$element) : (this.options.viewport.selector || this.options.viewport))\r\n    this.inState   = { click: false, hover: false, focus: false }\r\n\r\n    if (this.$element[0] instanceof document.constructor && !this.options.selector) {\r\n      throw new Error('`selector` option must be specified when initializing ' + this.type + ' on the window.document object!')\r\n    }\r\n\r\n    var triggers = this.options.trigger.split(' ')\r\n\r\n    for (var i = triggers.length; i--;) {\r\n      var trigger = triggers[i]\r\n\r\n      if (trigger == 'click') {\r\n        this.$element.on('click.' + this.type, this.options.selector, $.proxy(this.toggle, this))\r\n      } else if (trigger != 'manual') {\r\n        var eventIn  = trigger == 'hover' ? 'mouseenter' : 'focusin'\r\n        var eventOut = trigger == 'hover' ? 'mouseleave' : 'focusout'\r\n\r\n        this.$element.on(eventIn  + '.' + this.type, this.options.selector, $.proxy(this.enter, this))\r\n        this.$element.on(eventOut + '.' + this.type, this.options.selector, $.proxy(this.leave, this))\r\n      }\r\n    }\r\n\r\n    this.options.selector ?\r\n      (this._options = $.extend({}, this.options, { trigger: 'manual', selector: '' })) :\r\n      this.fixTitle()\r\n  }\r\n\r\n  Tooltip.prototype.getDefaults = function () {\r\n    return Tooltip.DEFAULTS\r\n  }\r\n\r\n  Tooltip.prototype.getOptions = function (options) {\r\n    options = $.extend({}, this.getDefaults(), this.$element.data(), options)\r\n\r\n    if (options.delay && typeof options.delay == 'number') {\r\n      options.delay = {\r\n        show: options.delay,\r\n        hide: options.delay\r\n      }\r\n    }\r\n\r\n    return options\r\n  }\r\n\r\n  Tooltip.prototype.getDelegateOptions = function () {\r\n    var options  = {}\r\n    var defaults = this.getDefaults()\r\n\r\n    this._options && $.each(this._options, function (key, value) {\r\n      if (defaults[key] != value) options[key] = value\r\n    })\r\n\r\n    return options\r\n  }\r\n\r\n  Tooltip.prototype.enter = function (obj) {\r\n    var self = obj instanceof this.constructor ?\r\n      obj : $(obj.currentTarget).data('bs.' + this.type)\r\n\r\n    if (!self) {\r\n      self = new this.constructor(obj.currentTarget, this.getDelegateOptions())\r\n      $(obj.currentTarget).data('bs.' + this.type, self)\r\n    }\r\n\r\n    if (obj instanceof $.Event) {\r\n      self.inState[obj.type == 'focusin' ? 'focus' : 'hover'] = true\r\n    }\r\n\r\n    if (self.tip().hasClass('in') || self.hoverState == 'in') {\r\n      self.hoverState = 'in'\r\n      return\r\n    }\r\n\r\n    clearTimeout(self.timeout)\r\n\r\n    self.hoverState = 'in'\r\n\r\n    if (!self.options.delay || !self.options.delay.show) return self.show()\r\n\r\n    self.timeout = setTimeout(function () {\r\n      if (self.hoverState == 'in') self.show()\r\n    }, self.options.delay.show)\r\n  }\r\n\r\n  Tooltip.prototype.isInStateTrue = function () {\r\n    for (var key in this.inState) {\r\n      if (this.inState[key]) return true\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  Tooltip.prototype.leave = function (obj) {\r\n    var self = obj instanceof this.constructor ?\r\n      obj : $(obj.currentTarget).data('bs.' + this.type)\r\n\r\n    if (!self) {\r\n      self = new this.constructor(obj.currentTarget, this.getDelegateOptions())\r\n      $(obj.currentTarget).data('bs.' + this.type, self)\r\n    }\r\n\r\n    if (obj instanceof $.Event) {\r\n      self.inState[obj.type == 'focusout' ? 'focus' : 'hover'] = false\r\n    }\r\n\r\n    if (self.isInStateTrue()) return\r\n\r\n    clearTimeout(self.timeout)\r\n\r\n    self.hoverState = 'out'\r\n\r\n    if (!self.options.delay || !self.options.delay.hide) return self.hide()\r\n\r\n    self.timeout = setTimeout(function () {\r\n      if (self.hoverState == 'out') self.hide()\r\n    }, self.options.delay.hide)\r\n  }\r\n\r\n  Tooltip.prototype.show = function () {\r\n    var e = $.Event('show.bs.' + this.type)\r\n\r\n    if (this.hasContent() && this.enabled) {\r\n      this.$element.trigger(e)\r\n\r\n      var inDom = $.contains(this.$element[0].ownerDocument.documentElement, this.$element[0])\r\n      if (e.isDefaultPrevented() || !inDom) return\r\n      var that = this\r\n\r\n      var $tip = this.tip()\r\n\r\n      var tipId = this.getUID(this.type)\r\n\r\n      this.setContent()\r\n      $tip.attr('id', tipId)\r\n      this.$element.attr('aria-describedby', tipId)\r\n\r\n      if (this.options.animation) $tip.addClass('fade')\r\n\r\n      var placement = typeof this.options.placement == 'function' ?\r\n        this.options.placement.call(this, $tip[0], this.$element[0]) :\r\n        this.options.placement\r\n\r\n      var autoToken = /\\s?auto?\\s?/i\r\n      var autoPlace = autoToken.test(placement)\r\n      if (autoPlace) placement = placement.replace(autoToken, '') || 'top'\r\n\r\n      $tip\r\n        .detach()\r\n        .css({ top: 0, left: 0, display: 'block' })\r\n        .addClass(placement)\r\n        .data('bs.' + this.type, this)\r\n\r\n      this.options.container ? $tip.appendTo(this.options.container) : $tip.insertAfter(this.$element)\r\n      this.$element.trigger('inserted.bs.' + this.type)\r\n\r\n      var pos          = this.getPosition()\r\n      var actualWidth  = $tip[0].offsetWidth\r\n      var actualHeight = $tip[0].offsetHeight\r\n\r\n      if (autoPlace) {\r\n        var orgPlacement = placement\r\n        var viewportDim = this.getPosition(this.$viewport)\r\n\r\n        placement = placement == 'bottom' && pos.bottom + actualHeight > viewportDim.bottom ? 'top'    :\r\n                    placement == 'top'    && pos.top    - actualHeight < viewportDim.top    ? 'bottom' :\r\n                    placement == 'right'  && pos.right  + actualWidth  > viewportDim.width  ? 'left'   :\r\n                    placement == 'left'   && pos.left   - actualWidth  < viewportDim.left   ? 'right'  :\r\n                    placement\r\n\r\n        $tip\r\n          .removeClass(orgPlacement)\r\n          .addClass(placement)\r\n      }\r\n\r\n      var calculatedOffset = this.getCalculatedOffset(placement, pos, actualWidth, actualHeight)\r\n\r\n      this.applyPlacement(calculatedOffset, placement)\r\n\r\n      var complete = function () {\r\n        var prevHoverState = that.hoverState\r\n        that.$element.trigger('shown.bs.' + that.type)\r\n        that.hoverState = null\r\n\r\n        if (prevHoverState == 'out') that.leave(that)\r\n      }\r\n\r\n      $.support.transition && this.$tip.hasClass('fade') ?\r\n        $tip\r\n          .one('bsTransitionEnd', complete)\r\n          .emulateTransitionEnd(Tooltip.TRANSITION_DURATION) :\r\n        complete()\r\n    }\r\n  }\r\n\r\n  Tooltip.prototype.applyPlacement = function (offset, placement) {\r\n    var $tip   = this.tip()\r\n    var width  = $tip[0].offsetWidth\r\n    var height = $tip[0].offsetHeight\r\n\r\n    // manually read margins because getBoundingClientRect includes difference\r\n    var marginTop = parseInt($tip.css('margin-top'), 10)\r\n    var marginLeft = parseInt($tip.css('margin-left'), 10)\r\n\r\n    // we must check for NaN for ie 8/9\r\n    if (isNaN(marginTop))  marginTop  = 0\r\n    if (isNaN(marginLeft)) marginLeft = 0\r\n\r\n    offset.top  += marginTop\r\n    offset.left += marginLeft\r\n\r\n    // $.fn.offset doesn't round pixel values\r\n    // so we use setOffset directly with our own function B-0\r\n    $.offset.setOffset($tip[0], $.extend({\r\n      using: function (props) {\r\n        $tip.css({\r\n          top: Math.round(props.top),\r\n          left: Math.round(props.left)\r\n        })\r\n      }\r\n    }, offset), 0)\r\n\r\n    $tip.addClass('in')\r\n\r\n    // check to see if placing tip in new offset caused the tip to resize itself\r\n    var actualWidth  = $tip[0].offsetWidth\r\n    var actualHeight = $tip[0].offsetHeight\r\n\r\n    if (placement == 'top' && actualHeight != height) {\r\n      offset.top = offset.top + height - actualHeight\r\n    }\r\n\r\n    var delta = this.getViewportAdjustedDelta(placement, offset, actualWidth, actualHeight)\r\n\r\n    if (delta.left) offset.left += delta.left\r\n    else offset.top += delta.top\r\n\r\n    var isVertical          = /top|bottom/.test(placement)\r\n    var arrowDelta          = isVertical ? delta.left * 2 - width + actualWidth : delta.top * 2 - height + actualHeight\r\n    var arrowOffsetPosition = isVertical ? 'offsetWidth' : 'offsetHeight'\r\n\r\n    $tip.offset(offset)\r\n    this.replaceArrow(arrowDelta, $tip[0][arrowOffsetPosition], isVertical)\r\n  }\r\n\r\n  Tooltip.prototype.replaceArrow = function (delta, dimension, isVertical) {\r\n    this.arrow()\r\n      .css(isVertical ? 'left' : 'top', 50 * (1 - delta / dimension) + '%')\r\n      .css(isVertical ? 'top' : 'left', '')\r\n  }\r\n\r\n  Tooltip.prototype.setContent = function () {\r\n    var $tip  = this.tip()\r\n    var title = this.getTitle()\r\n\r\n    $tip.find('.tooltip-inner')[this.options.html ? 'html' : 'text'](title)\r\n    $tip.removeClass('fade in top bottom left right')\r\n  }\r\n\r\n  Tooltip.prototype.hide = function (callback) {\r\n    var that = this\r\n    var $tip = $(this.$tip)\r\n    var e    = $.Event('hide.bs.' + this.type)\r\n\r\n    function complete() {\r\n      if (that.hoverState != 'in') $tip.detach()\r\n      if (that.$element) { // TODO: Check whether guarding this code with this `if` is really necessary.\r\n        that.$element\r\n          .removeAttr('aria-describedby')\r\n          .trigger('hidden.bs.' + that.type)\r\n      }\r\n      callback && callback()\r\n    }\r\n\r\n    this.$element.trigger(e)\r\n\r\n    if (e.isDefaultPrevented()) return\r\n\r\n    $tip.removeClass('in')\r\n\r\n    $.support.transition && $tip.hasClass('fade') ?\r\n      $tip\r\n        .one('bsTransitionEnd', complete)\r\n        .emulateTransitionEnd(Tooltip.TRANSITION_DURATION) :\r\n      complete()\r\n\r\n    this.hoverState = null\r\n\r\n    return this\r\n  }\r\n\r\n  Tooltip.prototype.fixTitle = function () {\r\n    var $e = this.$element\r\n    if ($e.attr('title') || typeof $e.attr('data-original-title') != 'string') {\r\n      $e.attr('data-original-title', $e.attr('title') || '').attr('title', '')\r\n    }\r\n  }\r\n\r\n  Tooltip.prototype.hasContent = function () {\r\n    return this.getTitle()\r\n  }\r\n\r\n  Tooltip.prototype.getPosition = function ($element) {\r\n    $element   = $element || this.$element\r\n\r\n    var el     = $element[0]\r\n    var isBody = el.tagName == 'BODY'\r\n\r\n    var elRect    = el.getBoundingClientRect()\r\n    if (elRect.width == null) {\r\n      // width and height are missing in IE8, so compute them manually; see https://github.com/twbs/bootstrap/issues/14093\r\n      elRect = $.extend({}, elRect, { width: elRect.right - elRect.left, height: elRect.bottom - elRect.top })\r\n    }\r\n    var isSvg = window.SVGElement && el instanceof window.SVGElement\r\n    // Avoid using $.offset() on SVGs since it gives incorrect results in jQuery 3.\r\n    // See https://github.com/twbs/bootstrap/issues/20280\r\n    var elOffset  = isBody ? { top: 0, left: 0 } : (isSvg ? null : $element.offset())\r\n    var scroll    = { scroll: isBody ? document.documentElement.scrollTop || document.body.scrollTop : $element.scrollTop() }\r\n    var outerDims = isBody ? { width: $(window).width(), height: $(window).height() } : null\r\n\r\n    return $.extend({}, elRect, scroll, outerDims, elOffset)\r\n  }\r\n\r\n  Tooltip.prototype.getCalculatedOffset = function (placement, pos, actualWidth, actualHeight) {\r\n    return placement == 'bottom' ? { top: pos.top + pos.height,   left: pos.left + pos.width / 2 - actualWidth / 2 } :\r\n           placement == 'top'    ? { top: pos.top - actualHeight, left: pos.left + pos.width / 2 - actualWidth / 2 } :\r\n           placement == 'left'   ? { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth } :\r\n        /* placement == 'right' */ { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width }\r\n\r\n  }\r\n\r\n  Tooltip.prototype.getViewportAdjustedDelta = function (placement, pos, actualWidth, actualHeight) {\r\n    var delta = { top: 0, left: 0 }\r\n    if (!this.$viewport) return delta\r\n\r\n    var viewportPadding = this.options.viewport && this.options.viewport.padding || 0\r\n    var viewportDimensions = this.getPosition(this.$viewport)\r\n\r\n    if (/right|left/.test(placement)) {\r\n      var topEdgeOffset    = pos.top - viewportPadding - viewportDimensions.scroll\r\n      var bottomEdgeOffset = pos.top + viewportPadding - viewportDimensions.scroll + actualHeight\r\n      if (topEdgeOffset < viewportDimensions.top) { // top overflow\r\n        delta.top = viewportDimensions.top - topEdgeOffset\r\n      } else if (bottomEdgeOffset > viewportDimensions.top + viewportDimensions.height) { // bottom overflow\r\n        delta.top = viewportDimensions.top + viewportDimensions.height - bottomEdgeOffset\r\n      }\r\n    } else {\r\n      var leftEdgeOffset  = pos.left - viewportPadding\r\n      var rightEdgeOffset = pos.left + viewportPadding + actualWidth\r\n      if (leftEdgeOffset < viewportDimensions.left) { // left overflow\r\n        delta.left = viewportDimensions.left - leftEdgeOffset\r\n      } else if (rightEdgeOffset > viewportDimensions.right) { // right overflow\r\n        delta.left = viewportDimensions.left + viewportDimensions.width - rightEdgeOffset\r\n      }\r\n    }\r\n\r\n    return delta\r\n  }\r\n\r\n  Tooltip.prototype.getTitle = function () {\r\n    var title\r\n    var $e = this.$element\r\n    var o  = this.options\r\n\r\n    title = $e.attr('data-original-title')\r\n      || (typeof o.title == 'function' ? o.title.call($e[0]) :  o.title)\r\n\r\n    return title\r\n  }\r\n\r\n  Tooltip.prototype.getUID = function (prefix) {\r\n    do prefix += ~~(Math.random() * 1000000)\r\n    while (document.getElementById(prefix))\r\n    return prefix\r\n  }\r\n\r\n  Tooltip.prototype.tip = function () {\r\n    if (!this.$tip) {\r\n      this.$tip = $(this.options.template)\r\n      if (this.$tip.length != 1) {\r\n        throw new Error(this.type + ' `template` option must consist of exactly 1 top-level element!')\r\n      }\r\n    }\r\n    return this.$tip\r\n  }\r\n\r\n  Tooltip.prototype.arrow = function () {\r\n    return (this.$arrow = this.$arrow || this.tip().find('.tooltip-arrow'))\r\n  }\r\n\r\n  Tooltip.prototype.enable = function () {\r\n    this.enabled = true\r\n  }\r\n\r\n  Tooltip.prototype.disable = function () {\r\n    this.enabled = false\r\n  }\r\n\r\n  Tooltip.prototype.toggleEnabled = function () {\r\n    this.enabled = !this.enabled\r\n  }\r\n\r\n  Tooltip.prototype.toggle = function (e) {\r\n    var self = this\r\n    if (e) {\r\n      self = $(e.currentTarget).data('bs.' + this.type)\r\n      if (!self) {\r\n        self = new this.constructor(e.currentTarget, this.getDelegateOptions())\r\n        $(e.currentTarget).data('bs.' + this.type, self)\r\n      }\r\n    }\r\n\r\n    if (e) {\r\n      self.inState.click = !self.inState.click\r\n      if (self.isInStateTrue()) self.enter(self)\r\n      else self.leave(self)\r\n    } else {\r\n      self.tip().hasClass('in') ? self.leave(self) : self.enter(self)\r\n    }\r\n  }\r\n\r\n  Tooltip.prototype.destroy = function () {\r\n    var that = this\r\n    clearTimeout(this.timeout)\r\n    this.hide(function () {\r\n      that.$element.off('.' + that.type).removeData('bs.' + that.type)\r\n      if (that.$tip) {\r\n        that.$tip.detach()\r\n      }\r\n      that.$tip = null\r\n      that.$arrow = null\r\n      that.$viewport = null\r\n      that.$element = null\r\n    })\r\n  }\r\n\r\n\r\n  // TOOLTIP PLUGIN DEFINITION\r\n  // =========================\r\n\r\n  function Plugin(option) {\r\n    return this.each(function () {\r\n      var $this   = $(this)\r\n      var data    = $this.data('bs.tooltip')\r\n      var options = typeof option == 'object' && option\r\n\r\n      if (!data && /destroy|hide/.test(option)) return\r\n      if (!data) $this.data('bs.tooltip', (data = new Tooltip(this, options)))\r\n      if (typeof option == 'string') data[option]()\r\n    })\r\n  }\r\n\r\n  var old = $.fn.tooltip\r\n\r\n  $.fn.tooltip             = Plugin\r\n  $.fn.tooltip.Constructor = Tooltip\r\n\r\n\r\n  // TOOLTIP NO CONFLICT\r\n  // ===================\r\n\r\n  $.fn.tooltip.noConflict = function () {\r\n    $.fn.tooltip = old\r\n    return this\r\n  }\r\n\r\n}(jQuery);\r\n\r\n/* ========================================================================\r\n * Bootstrap: popover.js v3.3.7\r\n * http://getbootstrap.com/javascript/#popovers\r\n * ========================================================================\r\n * Copyright 2011-2016 Twitter, Inc.\r\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\r\n * ======================================================================== */\r\n\r\n\r\n+function ($) {\r\n  'use strict';\r\n\r\n  // POPOVER PUBLIC CLASS DEFINITION\r\n  // ===============================\r\n\r\n  var Popover = function (element, options) {\r\n    this.init('popover', element, options)\r\n  }\r\n\r\n  if (!$.fn.tooltip) throw new Error('Popover requires tooltip.js')\r\n\r\n  Popover.VERSION  = '3.3.7'\r\n\r\n  Popover.DEFAULTS = $.extend({}, $.fn.tooltip.Constructor.DEFAULTS, {\r\n    placement: 'right',\r\n    trigger: 'click',\r\n    content: '',\r\n    template: '<div class=\"popover\" role=\"tooltip\"><div class=\"arrow\"></div><h3 class=\"popover-title\"></h3><div class=\"popover-content\"></div></div>'\r\n  })\r\n\r\n\r\n  // NOTE: POPOVER EXTENDS tooltip.js\r\n  // ================================\r\n\r\n  Popover.prototype = $.extend({}, $.fn.tooltip.Constructor.prototype)\r\n\r\n  Popover.prototype.constructor = Popover\r\n\r\n  Popover.prototype.getDefaults = function () {\r\n    return Popover.DEFAULTS\r\n  }\r\n\r\n  Popover.prototype.setContent = function () {\r\n    var $tip    = this.tip()\r\n    var title   = this.getTitle()\r\n    var content = this.getContent()\r\n\r\n    $tip.find('.popover-title')[this.options.html ? 'html' : 'text'](title)\r\n    $tip.find('.popover-content').children().detach().end()[ // we use append for html objects to maintain js events\r\n      this.options.html ? (typeof content == 'string' ? 'html' : 'append') : 'text'\r\n    ](content)\r\n\r\n    $tip.removeClass('fade top bottom left right in')\r\n\r\n    // IE8 doesn't accept hiding via the `:empty` pseudo selector, we have to do\r\n    // this manually by checking the contents.\r\n    if (!$tip.find('.popover-title').html()) $tip.find('.popover-title').hide()\r\n  }\r\n\r\n  Popover.prototype.hasContent = function () {\r\n    return this.getTitle() || this.getContent()\r\n  }\r\n\r\n  Popover.prototype.getContent = function () {\r\n    var $e = this.$element\r\n    var o  = this.options\r\n\r\n    return $e.attr('data-content')\r\n      || (typeof o.content == 'function' ?\r\n            o.content.call($e[0]) :\r\n            o.content)\r\n  }\r\n\r\n  Popover.prototype.arrow = function () {\r\n    return (this.$arrow = this.$arrow || this.tip().find('.arrow'))\r\n  }\r\n\r\n\r\n  // POPOVER PLUGIN DEFINITION\r\n  // =========================\r\n\r\n  function Plugin(option) {\r\n    return this.each(function () {\r\n      var $this   = $(this)\r\n      var data    = $this.data('bs.popover')\r\n      var options = typeof option == 'object' && option\r\n\r\n      if (!data && /destroy|hide/.test(option)) return\r\n      if (!data) $this.data('bs.popover', (data = new Popover(this, options)))\r\n      if (typeof option == 'string') data[option]()\r\n    })\r\n  }\r\n\r\n  var old = $.fn.popover\r\n\r\n  $.fn.popover             = Plugin\r\n  $.fn.popover.Constructor = Popover\r\n\r\n\r\n  // POPOVER NO CONFLICT\r\n  // ===================\r\n\r\n  $.fn.popover.noConflict = function () {\r\n    $.fn.popover = old\r\n    return this\r\n  }\r\n\r\n}(jQuery);\r\n\r\n/* ========================================================================\r\n * Bootstrap: scrollspy.js v3.3.7\r\n * http://getbootstrap.com/javascript/#scrollspy\r\n * ========================================================================\r\n * Copyright 2011-2016 Twitter, Inc.\r\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\r\n * ======================================================================== */\r\n\r\n\r\n+function ($) {\r\n  'use strict';\r\n\r\n  // SCROLLSPY CLASS DEFINITION\r\n  // ==========================\r\n\r\n  function ScrollSpy(element, options) {\r\n    this.$body          = $(document.body)\r\n    this.$scrollElement = $(element).is(document.body) ? $(window) : $(element)\r\n    this.options        = $.extend({}, ScrollSpy.DEFAULTS, options)\r\n    this.selector       = (this.options.target || '') + ' .nav li > a'\r\n    this.offsets        = []\r\n    this.targets        = []\r\n    this.activeTarget   = null\r\n    this.scrollHeight   = 0\r\n\r\n    this.$scrollElement.on('scroll.bs.scrollspy', $.proxy(this.process, this))\r\n    this.refresh()\r\n    this.process()\r\n  }\r\n\r\n  ScrollSpy.VERSION  = '3.3.7'\r\n\r\n  ScrollSpy.DEFAULTS = {\r\n    offset: 10\r\n  }\r\n\r\n  ScrollSpy.prototype.getScrollHeight = function () {\r\n    return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)\r\n  }\r\n\r\n  ScrollSpy.prototype.refresh = function () {\r\n    var that          = this\r\n    var offsetMethod  = 'offset'\r\n    var offsetBase    = 0\r\n\r\n    this.offsets      = []\r\n    this.targets      = []\r\n    this.scrollHeight = this.getScrollHeight()\r\n\r\n    if (!$.isWindow(this.$scrollElement[0])) {\r\n      offsetMethod = 'position'\r\n      offsetBase   = this.$scrollElement.scrollTop()\r\n    }\r\n\r\n    this.$body\r\n      .find(this.selector)\r\n      .map(function () {\r\n        var $el   = $(this)\r\n        var href  = $el.data('target') || $el.attr('href')\r\n        var $href = /^#./.test(href) && $(href)\r\n\r\n        return ($href\r\n          && $href.length\r\n          && $href.is(':visible')\r\n          && [[$href[offsetMethod]().top + offsetBase, href]]) || null\r\n      })\r\n      .sort(function (a, b) { return a[0] - b[0] })\r\n      .each(function () {\r\n        that.offsets.push(this[0])\r\n        that.targets.push(this[1])\r\n      })\r\n  }\r\n\r\n  ScrollSpy.prototype.process = function () {\r\n    var scrollTop    = this.$scrollElement.scrollTop() + this.options.offset\r\n    var scrollHeight = this.getScrollHeight()\r\n    var maxScroll    = this.options.offset + scrollHeight - this.$scrollElement.height()\r\n    var offsets      = this.offsets\r\n    var targets      = this.targets\r\n    var activeTarget = this.activeTarget\r\n    var i\r\n\r\n    if (this.scrollHeight != scrollHeight) {\r\n      this.refresh()\r\n    }\r\n\r\n    if (scrollTop >= maxScroll) {\r\n      return activeTarget != (i = targets[targets.length - 1]) && this.activate(i)\r\n    }\r\n\r\n    if (activeTarget && scrollTop < offsets[0]) {\r\n      this.activeTarget = null\r\n      return this.clear()\r\n    }\r\n\r\n    for (i = offsets.length; i--;) {\r\n      activeTarget != targets[i]\r\n        && scrollTop >= offsets[i]\r\n        && (offsets[i + 1] === undefined || scrollTop < offsets[i + 1])\r\n        && this.activate(targets[i])\r\n    }\r\n  }\r\n\r\n  ScrollSpy.prototype.activate = function (target) {\r\n    this.activeTarget = target\r\n\r\n    this.clear()\r\n\r\n    var selector = this.selector +\r\n      '[data-target=\"' + target + '\"],' +\r\n      this.selector + '[href=\"' + target + '\"]'\r\n\r\n    var active = $(selector)\r\n      .parents('li')\r\n      .addClass('active')\r\n\r\n    if (active.parent('.dropdown-menu').length) {\r\n      active = active\r\n        .closest('li.dropdown')\r\n        .addClass('active')\r\n    }\r\n\r\n    active.trigger('activate.bs.scrollspy')\r\n  }\r\n\r\n  ScrollSpy.prototype.clear = function () {\r\n    $(this.selector)\r\n      .parentsUntil(this.options.target, '.active')\r\n      .removeClass('active')\r\n  }\r\n\r\n\r\n  // SCROLLSPY PLUGIN DEFINITION\r\n  // ===========================\r\n\r\n  function Plugin(option) {\r\n    return this.each(function () {\r\n      var $this   = $(this)\r\n      var data    = $this.data('bs.scrollspy')\r\n      var options = typeof option == 'object' && option\r\n\r\n      if (!data) $this.data('bs.scrollspy', (data = new ScrollSpy(this, options)))\r\n      if (typeof option == 'string') data[option]()\r\n    })\r\n  }\r\n\r\n  var old = $.fn.scrollspy\r\n\r\n  $.fn.scrollspy             = Plugin\r\n  $.fn.scrollspy.Constructor = ScrollSpy\r\n\r\n\r\n  // SCROLLSPY NO CONFLICT\r\n  // =====================\r\n\r\n  $.fn.scrollspy.noConflict = function () {\r\n    $.fn.scrollspy = old\r\n    return this\r\n  }\r\n\r\n\r\n  // SCROLLSPY DATA-API\r\n  // ==================\r\n\r\n  $(window).on('load.bs.scrollspy.data-api', function () {\r\n    $('[data-spy=\"scroll\"]').each(function () {\r\n      var $spy = $(this)\r\n      Plugin.call($spy, $spy.data())\r\n    })\r\n  })\r\n\r\n}(jQuery);\r\n\r\n/* ========================================================================\r\n * Bootstrap: tab.js v3.3.7\r\n * http://getbootstrap.com/javascript/#tabs\r\n * ========================================================================\r\n * Copyright 2011-2016 Twitter, Inc.\r\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\r\n * ======================================================================== */\r\n\r\n\r\n+function ($) {\r\n  'use strict';\r\n\r\n  // TAB CLASS DEFINITION\r\n  // ====================\r\n\r\n  var Tab = function (element) {\r\n    // jscs:disable requireDollarBeforejQueryAssignment\r\n    this.element = $(element)\r\n    // jscs:enable requireDollarBeforejQueryAssignment\r\n  }\r\n\r\n  Tab.VERSION = '3.3.7'\r\n\r\n  Tab.TRANSITION_DURATION = 150\r\n\r\n  Tab.prototype.show = function () {\r\n    var $this    = this.element\r\n    var $ul      = $this.closest('ul:not(.dropdown-menu)')\r\n    var selector = $this.data('target')\r\n\r\n    if (!selector) {\r\n      selector = $this.attr('href')\r\n      selector = selector && selector.replace(/.*(?=#[^\\s]*$)/, '') // strip for ie7\r\n    }\r\n\r\n    if ($this.parent('li').hasClass('active')) return\r\n\r\n    var $previous = $ul.find('.active:last a')\r\n    var hideEvent = $.Event('hide.bs.tab', {\r\n      relatedTarget: $this[0]\r\n    })\r\n    var showEvent = $.Event('show.bs.tab', {\r\n      relatedTarget: $previous[0]\r\n    })\r\n\r\n    $previous.trigger(hideEvent)\r\n    $this.trigger(showEvent)\r\n\r\n    if (showEvent.isDefaultPrevented() || hideEvent.isDefaultPrevented()) return\r\n\r\n    var $target = $(selector)\r\n\r\n    this.activate($this.closest('li'), $ul)\r\n    this.activate($target, $target.parent(), function () {\r\n      $previous.trigger({\r\n        type: 'hidden.bs.tab',\r\n        relatedTarget: $this[0]\r\n      })\r\n      $this.trigger({\r\n        type: 'shown.bs.tab',\r\n        relatedTarget: $previous[0]\r\n      })\r\n    })\r\n  }\r\n\r\n  Tab.prototype.activate = function (element, container, callback) {\r\n    var $active    = container.find('> .active')\r\n    var transition = callback\r\n      && $.support.transition\r\n      && ($active.length && $active.hasClass('fade') || !!container.find('> .fade').length)\r\n\r\n    function next() {\r\n      $active\r\n        .removeClass('active')\r\n        .find('> .dropdown-menu > .active')\r\n          .removeClass('active')\r\n        .end()\r\n        .find('[data-toggle=\"tab\"]')\r\n          .attr('aria-expanded', false)\r\n\r\n      element\r\n        .addClass('active')\r\n        .find('[data-toggle=\"tab\"]')\r\n          .attr('aria-expanded', true)\r\n\r\n      if (transition) {\r\n        element[0].offsetWidth // reflow for transition\r\n        element.addClass('in')\r\n      } else {\r\n        element.removeClass('fade')\r\n      }\r\n\r\n      if (element.parent('.dropdown-menu').length) {\r\n        element\r\n          .closest('li.dropdown')\r\n            .addClass('active')\r\n          .end()\r\n          .find('[data-toggle=\"tab\"]')\r\n            .attr('aria-expanded', true)\r\n      }\r\n\r\n      callback && callback()\r\n    }\r\n\r\n    $active.length && transition ?\r\n      $active\r\n        .one('bsTransitionEnd', next)\r\n        .emulateTransitionEnd(Tab.TRANSITION_DURATION) :\r\n      next()\r\n\r\n    $active.removeClass('in')\r\n  }\r\n\r\n\r\n  // TAB PLUGIN DEFINITION\r\n  // =====================\r\n\r\n  function Plugin(option) {\r\n    return this.each(function () {\r\n      var $this = $(this)\r\n      var data  = $this.data('bs.tab')\r\n\r\n      if (!data) $this.data('bs.tab', (data = new Tab(this)))\r\n      if (typeof option == 'string') data[option]()\r\n    })\r\n  }\r\n\r\n  var old = $.fn.tab\r\n\r\n  $.fn.tab             = Plugin\r\n  $.fn.tab.Constructor = Tab\r\n\r\n\r\n  // TAB NO CONFLICT\r\n  // ===============\r\n\r\n  $.fn.tab.noConflict = function () {\r\n    $.fn.tab = old\r\n    return this\r\n  }\r\n\r\n\r\n  // TAB DATA-API\r\n  // ============\r\n\r\n  var clickHandler = function (e) {\r\n    e.preventDefault()\r\n    Plugin.call($(this), 'show')\r\n  }\r\n\r\n  $(document)\r\n    .on('click.bs.tab.data-api', '[data-toggle=\"tab\"]', clickHandler)\r\n    .on('click.bs.tab.data-api', '[data-toggle=\"pill\"]', clickHandler)\r\n\r\n}(jQuery);\r\n\r\n/* ========================================================================\r\n * Bootstrap: affix.js v3.3.7\r\n * http://getbootstrap.com/javascript/#affix\r\n * ========================================================================\r\n * Copyright 2011-2016 Twitter, Inc.\r\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\r\n * ======================================================================== */\r\n\r\n\r\n+function ($) {\r\n  'use strict';\r\n\r\n  // AFFIX CLASS DEFINITION\r\n  // ======================\r\n\r\n  var Affix = function (element, options) {\r\n    this.options = $.extend({}, Affix.DEFAULTS, options)\r\n\r\n    this.$target = $(this.options.target)\r\n      .on('scroll.bs.affix.data-api', $.proxy(this.checkPosition, this))\r\n      .on('click.bs.affix.data-api',  $.proxy(this.checkPositionWithEventLoop, this))\r\n\r\n    this.$element     = $(element)\r\n    this.affixed      = null\r\n    this.unpin        = null\r\n    this.pinnedOffset = null\r\n\r\n    this.checkPosition()\r\n  }\r\n\r\n  Affix.VERSION  = '3.3.7'\r\n\r\n  Affix.RESET    = 'affix affix-top affix-bottom'\r\n\r\n  Affix.DEFAULTS = {\r\n    offset: 0,\r\n    target: window\r\n  }\r\n\r\n  Affix.prototype.getState = function (scrollHeight, height, offsetTop, offsetBottom) {\r\n    var scrollTop    = this.$target.scrollTop()\r\n    var position     = this.$element.offset()\r\n    var targetHeight = this.$target.height()\r\n\r\n    if (offsetTop != null && this.affixed == 'top') return scrollTop < offsetTop ? 'top' : false\r\n\r\n    if (this.affixed == 'bottom') {\r\n      if (offsetTop != null) return (scrollTop + this.unpin <= position.top) ? false : 'bottom'\r\n      return (scrollTop + targetHeight <= scrollHeight - offsetBottom) ? false : 'bottom'\r\n    }\r\n\r\n    var initializing   = this.affixed == null\r\n    var colliderTop    = initializing ? scrollTop : position.top\r\n    var colliderHeight = initializing ? targetHeight : height\r\n\r\n    if (offsetTop != null && scrollTop <= offsetTop) return 'top'\r\n    if (offsetBottom != null && (colliderTop + colliderHeight >= scrollHeight - offsetBottom)) return 'bottom'\r\n\r\n    return false\r\n  }\r\n\r\n  Affix.prototype.getPinnedOffset = function () {\r\n    if (this.pinnedOffset) return this.pinnedOffset\r\n    this.$element.removeClass(Affix.RESET).addClass('affix')\r\n    var scrollTop = this.$target.scrollTop()\r\n    var position  = this.$element.offset()\r\n    return (this.pinnedOffset = position.top - scrollTop)\r\n  }\r\n\r\n  Affix.prototype.checkPositionWithEventLoop = function () {\r\n    setTimeout($.proxy(this.checkPosition, this), 1)\r\n  }\r\n\r\n  Affix.prototype.checkPosition = function () {\r\n    if (!this.$element.is(':visible')) return\r\n\r\n    var height       = this.$element.height()\r\n    var offset       = this.options.offset\r\n    var offsetTop    = offset.top\r\n    var offsetBottom = offset.bottom\r\n    var scrollHeight = Math.max($(document).height(), $(document.body).height())\r\n\r\n    if (typeof offset != 'object')         offsetBottom = offsetTop = offset\r\n    if (typeof offsetTop == 'function')    offsetTop    = offset.top(this.$element)\r\n    if (typeof offsetBottom == 'function') offsetBottom = offset.bottom(this.$element)\r\n\r\n    var affix = this.getState(scrollHeight, height, offsetTop, offsetBottom)\r\n\r\n    if (this.affixed != affix) {\r\n      if (this.unpin != null) this.$element.css('top', '')\r\n\r\n      var affixType = 'affix' + (affix ? '-' + affix : '')\r\n      var e         = $.Event(affixType + '.bs.affix')\r\n\r\n      this.$element.trigger(e)\r\n\r\n      if (e.isDefaultPrevented()) return\r\n\r\n      this.affixed = affix\r\n      this.unpin = affix == 'bottom' ? this.getPinnedOffset() : null\r\n\r\n      this.$element\r\n        .removeClass(Affix.RESET)\r\n        .addClass(affixType)\r\n        .trigger(affixType.replace('affix', 'affixed') + '.bs.affix')\r\n    }\r\n\r\n    if (affix == 'bottom') {\r\n      this.$element.offset({\r\n        top: scrollHeight - height - offsetBottom\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  // AFFIX PLUGIN DEFINITION\r\n  // =======================\r\n\r\n  function Plugin(option) {\r\n    return this.each(function () {\r\n      var $this   = $(this)\r\n      var data    = $this.data('bs.affix')\r\n      var options = typeof option == 'object' && option\r\n\r\n      if (!data) $this.data('bs.affix', (data = new Affix(this, options)))\r\n      if (typeof option == 'string') data[option]()\r\n    })\r\n  }\r\n\r\n  var old = $.fn.affix\r\n\r\n  $.fn.affix             = Plugin\r\n  $.fn.affix.Constructor = Affix\r\n\r\n\r\n  // AFFIX NO CONFLICT\r\n  // =================\r\n\r\n  $.fn.affix.noConflict = function () {\r\n    $.fn.affix = old\r\n    return this\r\n  }\r\n\r\n\r\n  // AFFIX DATA-API\r\n  // ==============\r\n\r\n  $(window).on('load', function () {\r\n    $('[data-spy=\"affix\"]').each(function () {\r\n      var $spy = $(this)\r\n      var data = $spy.data()\r\n\r\n      data.offset = data.offset || {}\r\n\r\n      if (data.offsetBottom != null) data.offset.bottom = data.offsetBottom\r\n      if (data.offsetTop    != null) data.offset.top    = data.offsetTop\r\n\r\n      Plugin.call($spy, data)\r\n    })\r\n  })\r\n\r\n}(jQuery);\r\n","import Ractive from  \"lib/ractive\";\nimport journey from \"lib/journey/journey\";\n\njourney.on( \"routeAbuseStart\", function ( ) {\n\tRactive.defaults.transitionsEnabled = false;\n\tconsole.log( \"* Animation disabled\" );\n} );\njourney.on( \"routeAbuseEnd\", function ( ) {\n\tRactive.defaults.transitionsEnabled = true;\n\tconsole.log( \"** Renabling animations\" );\n} );\n","import journey from 'lib/journey/journey.js';\r\nimport Ractive from 'lib/ractive.js';\r\nimport fade from \"lib/fade.js\";\r\nimport 'lib/prism.js';\r\nimport \"./config/routes.js\";\r\nimport menu from \"./menu/menu.js\";\r\nimport \"lib/bootstrap.js\";\r\nimport \"./animationMonitor.js\";\r\n\r\n//let contextPath = \"/dist\";\r\n//let contextPath = \"/journey-examples/\";\r\nlet contextPath = \"\";\r\n\r\nmenu.init( { target: \"#menu\", fallbackMenu: \"#menu-home\" } );\r\n\r\nif (location.pathname == \"/\" || location.pathname == contextPath || location.pathname == \"\") {\r\n\t//history.replaceState(null, null, \"/home\"); // change url to /home as a default\r\n}\r\n\r\nRactive.transitions = {\r\n\tfade\r\n};\r\n\r\njourney.on( \"entered\", function ( options ) {\r\n\tPrism.highlightAll();\r\n} );\r\n\r\njourney.start( {\r\n\ttarget: \"#container\",\r\n\tdebug: Ractive.DEBUG = true,\r\n\tfallback: '/notFound',\r\n\tbase: contextPath,\r\n\tdefaultRoute: '/home',\r\n\tuseOnHashChange: false,\r\n\tuseHash: true,\r\n\t//hash: '#!'\r\n} );\r\n"],"names":["RouteData","ref","route","pathname","params","query","hash","scrollX","scrollY","this","isInitial","_route","Route","path","options","pathHelper","stripSlashOrHashPrefix","segments","split","enter","updateable","update","HANDLERS","forEach","handler","other","opts","let","value","roadtrip","Promise","resolve","segmentsMatch","a","b","length","i","toHash","link","href","getAttribute","prefixWithHash","which","event","window","button","sameOrigin","origin","location","protocol","hostname","port","indexOf","isSameRoute","routeA","routeB","dataA","dataB","deepEqual","isArray","const","aKeys","Object","keys","bKeys","key","hasOwnProperty","thing","toString","call","noop","getNewData","target","newData","newRoute","routes","exec","historyListener","url","util","stripBase","config","base","otherOptions","internalOptions","_target","hashChange","popState","fulfil","reject","popEvent","scroll","scrollHistory","state","uid","x","y","_goto","currentID","forceReloadRoute","forceReload","targetHref","prefixWithSlash","result","tempHref","fallback","_sameRoute","currentRoute","currentData","isTransitioning","promise","extend","all","leave","beforeenter","then","catch","e","replaceState","uniqueID","watchHistory","useOnHashChange","setHash","useHash","prefixWithBase","history","EventEmitter","indexOfListener","listeners","listener","alias","name","apply","arguments","buildParams","prefix","obj","traditional","add","Array","item","index","rbracket","test","type","prototype","replace","toLowerCase","resetWhenNormal","delay","resetRequest","clearTimeout","setTimeout","reset","raiseError","journeyUtils","logError","error","journey","emit","raiseEvent","args","events","UPDATE","UPDATED","BEFORE_ENTER","BEFORE_ENTER_COMPLETE","to","from","ENTER","ENTERED","LEAVE","LEFT","wrap","enhanceEvent","wrapper","that","slice","startOptions","err","gatherErrorOptions","message","wrapRoadtripGoto","_origGoto","goto","isEqual","isNumeric","isNaN","parseFloat","isFinite","isObject","isObjectLike","format","shift","fatal","len","Error","logIfDebug","Ractive","DEBUG","log","warn","printWarning","warnOnce","alreadyWarned","warnIfDebug","warnOnceIfDebug","findInViewHierarchy","registryName","ractive","instance","findInstance","isolated","parent","interpolate","interpol","missingPlugin","interpolators","number","array","object","snap","addToArray","push","arrayContains","c","arrayContentsMatch","ensureArray","undefined","lastItem","removeFromArray","member","splice","combine","arrays","res","concat","idx","toArray","arrayLike","findMap","fn","detach","element","_detachNodes","tm","detachNodes","check","ready","outros","outroChildren","outrosComplete","decrementOutros","intros","totalChildren","callback","notifiedTotal","decrementTotal","detachImmediate","manager","node","trans","queue","detachQueue","collectAllOutros","j","start","contains","_list","list","children","dispatch","observer","flushChanges","batch","immediateObservers","fragment","fragments","transitionManager","deferredObservers","tasks","escapeKey","escapeKeyPattern","normalise","refPattern","splitKeypath","keypath","match","splitPattern","substr","unescapeKey","unescapeKeyPattern","set","pairs","k","keep","deep","shuffle","runloop","model","end","deepSet","get","comparator","getComparator","merge","gather","viewmodel","star","findMatches","joinAll","build","sets","map","m","dest","deepOpts","joinKey","option","comparators","d","pair","errorMessage","Ractive$add","getOptions","easing$$1","easing","linear","duration","complete","step","animate","noAnimation","interpolator","Ractive$animate","join","enqueue","_eventQueue","dequeue","pop","variants","initial","initStars","bubbleStars","parts","unshift","max","Math","pow","fireEvent","eventName","context","fireEventAs","_nsSubs","eventNames","initialFire","bubble","_subs","notifySubscribers","component","subscribers","originalEvent","stopEvent","off","preventDefault","stopPropagation","getRactiveContext","assigns","_fakeFragment","FakeFragment","getContext","ctx","extern","Context","create","assign","findAnchors","findAnchorsIn","isAnchor","items","iterations","updateAnchors","anchors","idxs","_children","byName","child","lastBound","removeChild","addChild","unrenderChild","meta","rendered","shouldDestroy","unrender","el","attachChild","constructor","findNextNode","nameOption","prepend","insertAt","parentFragment","external","@this.parent","@this.root","root","attachHook","fire","attached","addFragment","anchor","Ractive$detach","isDetached","__ractive_instances__","detachHook","detachChild","detached","detachHook$1","Ractive$find","selector","this$1","find","remote","Ractive$findAll","findAll","Ractive$findAllComponents","findAllComponents","Ractive$findComponent","findComponent","Ractive$findContainer","container","findContainer","Ractive$findParent","findParent","startCapturing","stack","captureGroup","stopCapturing","dependencies","capture","bind","cancel","destroyed","handleChange","mark","marked","markedAll","render","shuffled","teardown","unbind","unrenderAndDestroy","toString$1","toEscapedString","bind$1","bound","fnBind","prop","maybeBind","shouldBind","isRoot","boundValue","_r_unbound","updateFromBindings","findBoundValue","owner","checked","fireShuffleTasks","stage","shuffleTasks","register","registerQueue","newIndices","shuffling","childByKey","rebind","keyModels","getKeyModel","upstream","source","links","l","deps","notifyUpstream","rebindMatch","template","next","previous","r","isKey","isKeypath","last","findAlias","z","aliases","n","componentParent","tick","ticker","now","performance","tickers","requestAnimationFrame","running","prefixKeypath","prefixed","getPrefixer","rootKeypath","rootDot","prefixers","relativeKeypath","recreateArray","resolveReference","initialFragment","findContext","frag","explicitContext","context$1","getRactiveModel","badReference","repeater","findRepeatingFragment","isIteration","GlobalModel","SharedModel$1","context$2","getKeypathModel","ContextModel","_data","has","crossedComponentBoundary","shouldWarn","warnAboutAmbiguity","keyRef","indexRef","createLink","implicit","resolveInstanceMembers","model$1","getNewIndices","methodName","spliceArguments","getSpliceEquivalent","balance","removeStart","min","removeEnd","startIndex","touchedFrom","update$1","adapt","force","updateHook","Ractive$update","findElement","orComponent","ELEMENT","COMPONENT","ANCHOR","containerFragment","build$1","findModel","Ractive$fire","proto","forRactive","Ractive$get","getNodeInfo","staticInfo","createDocumentFragment","doc","getElement","input","output","win","nodeType","getElementById","querySelector","detachNode","parentNode","safeToStringValue","safeAttributeString","string","Ractive$insert","insertBefore","fireInsertHook","insertHook","there","here","sourcePath","lastLink","old","negativeOne","observe","observers","silent","caller","keypaths","filter","createObserver","_observers","o","isSilenced","silence","resume","wildcardIndex","double","PatternObserver","ArrayObserver","Observer","observeOnce","onceOptions","Ractive$off","trim","notEmptyString","subs","entry","s","Ractive$on","callback$1","Ractive$once","on","readLink","isLink","canonical","getKeypath","addCSS","styleDefinition","styleDefinitions","isDirty","applyCSS","useCssText","styleElement","styleSheet","cssText","getCSS","innerHTML","cssIds","style","id","reduce","styles","PREFIX","fillGaps","sources","toPairs","trim$1","str","extractString","unit","transformSelector","selectorUnits","selectorUnitPattern","modifiers","transformed","appended","prepended","transformCss","css","dataAttr","dataRvcGuidPattern","cleanCss","reconstruct","selectorsPattern","$1","excludePattern","selectors","keyframesDeclarationPattern","s4","floor","random","substring","uuid","validate","data","combine$1","parentValue","childValue","parentIsFn","childIsFn","fromProperties","callDataFunction","primary","secondary","fromExpression","body","Function","fromComputationString","bindTo","hasThis","functionBody","pattern","getFunction","functions","createFunction","addFunctions","exp","readDelimiterChange","parser","matchString","pos","allowWhitespace","opening","matchPattern","delimiterChangePattern","whitespacePattern","closing","readNumberLiteral","regexpPattern","t","REGEXP_LITERAL","v","escapeRegExp","pattern$1","decodeCharacterReferences","html","entityPattern","entity","code","htmlEntities","parseInt","codeToChar","validateCode","escapeHtml","amp","lessThan","greaterThan","controlCharacters","invalid","codePointSupport","readNumberLiteral$1","numberPattern","NUMBER_LITERAL","readBooleanLiteral","remaining","BOOLEAN_LITERAL","getString","literal","JSON","parse","escapes","escapeChar","readTemplateStringLiteral","done","stringMiddlePattern$1","escapeSequencePattern","STRING_LITERAL","expr","readExpression","BRACKETED","lineContinuationPattern","charCodeAt","part","INFIX_OPERATOR","readKey","token","readStringLiteral","identifier","readKeyValuePair","spread","refKey","nextChar","spreadPattern","KEY_VALUE_PAIR","REFERENCE","p","readKeyValuePairs","keyValuePairs","readLiteral","readObjectLiteral","readArrayLiteral","readReference","name$$1","global","reference","lastDotIndex","startPos","prefixPattern","relaxedNames","relaxedName","legalReference","actual","specials","inEvent","keywords","globals","GLOBAL","lastIndexOf","refLength","readBracketedExpression","expectedExpression","expectedParen","readRefinement","strictRefinement","REFINEMENT","getConditional","expression","readLogicalOr$1","ifTrue","ifFalse","CONDITIONAL","readExpressionList","isSpread","expressions","readExpressionOrReference","expectedFollowers","flattenExpression","stringify","String","ARRAY_LITERAL","hasSpread","makeSpread","OBJECT_LITERAL","stringifyPair","PREFIX_OPERATOR","INVOCATION","count","MEMBER","refs","open","close","out","extractRefs","stringified","vars","refineExpression","mustache","referenceExpression","getReferenceExpression","rx","refinement","members","splitEvent","slashes","readAttribute","nearest","attributeNamePattern","tags","readAttributeValue","valueStart","startDepth","sectionDepth","readQuotedAttributeValue","readUnquotedAttributeValue","readUnquotedAttributeValueToken","text","unquotedAttributeValueTextPattern","haystack","needles","getLowestIndex","inAttribute","tokens","readMustache","quoteMark","readQuotedStringToken","readAttributeOrDirective","directive","attribute","directives","f","decoratorPattern","DECORATOR","readArguments","transitionPattern","TRANSITION","eventPattern","EVENT","readProxyEvent","reservedEventNames","boundPattern","ATTRIBUTE","INTERPOLATOR","sanitizeEventAttributes","onPattern","exclude","quote","proxy","proxyEvent","whitespace","required","single","spreadArgs","inUnquotedAttribute","inside","readMustacheOfType","inTag","tag","reader","sortMustacheTags","delimiterChangeToken","rewind","readers","isStatic","includeLinePositions","getLinePos","readTriple","triple","TRIPLE","readUnescaped","readAliases","readAlias","asRE","legalAlias","readPartial","partial","PARTIAL","YIELDER","readComment","COMMENT","readInterpolator","charAt","readClosing","CLOSING","readElse","elsePattern","ELSE","readElseIf","elsePattern$1","ELSEIF","readSection","section","hasElse","block","unlessBlock","closed","expectedClose","aliasOnly","SECTION","SECTION_UNLESS","standardDelimiters","handlebarsBlockPattern","handlebarsBlockCodes","ALIAS","indexRefPattern","extra","keyIndexRefPattern","SECTION_IF","read","READERS","readHtmlComment","textOnlyMode","OPEN_COMMENT","endIndex","CLOSE_COMMENT","content","comment","isString","isComment","DELIMCHANGE","isSection","INVERTED","cleanup","stripComments","preserveWhitespace","removeLeadingWhitespace","removeTrailingWhitespace","previousItem","nextItem","preserveWhitespaceInsideFragment","removeLeadingWhitespaceInsideFragment","removeTrailingWhitespaceInsideFragment","stripStandalones","trimWhitespace","leadingWhitespace$1","trailingWhitespace","isPreserveWhitespaceElement","preserveWhitespaceElements","leadingNewLine","trailingNewLine","contiguousWhitespace","readClosingTag","closingTagPattern","CLOSING_TAG","readElement$1","selfClosing","partials","hasPartials","closingTag","DOCTYPE","anchorPattern","tagNamePattern","validTagNameFollower","lowerCaseName","voidElementNames","elementStack","reverse","canContain","closingTagName","readAnchorClose","PARTIAL_READERS","sanitizeElements","disallowed","disallowedContents","readText","barrier","readPartialDefinitionSection","delimiters","partialDefinitionSectionPattern","INLINE_PARTIAL","readTemplate","TEMPLATE_VERSION","insertExpressions","isExpression","addTo","hasChildren","StandardParser","throwNoParse","method","instructions","TEMPLATE_INSTRUCTIONS","createFunctionFromString","COMPUTATION_INSTRUCTIONS","resetValue","_config","getDynamicTemplate","fromId","isParsed","getParseOptions","parseTemplate","parseAsString","validate$1","parseFor","extendPartials","existingPartials","newPartials","overwrite","superMethod","getSuperMethod","_parent","hasSuper","oldSuper","_super","_method","getMessage","deprecated","correct","isError","deprecateOption","deprecatedOption","deprecate","adaptors","configure","Parent","isStandardKey","append","enhance","registries","registry","adaptConfigurator","templateConfigurator","cssConfigurator","extendOtherMethods","isBlacklisted","RactiveProto","makeObj","ExpressionProxy","ReferenceExpressionProxy","resolveAliases","resolved","readStyle","rule","rules","readClass","space","getUpdateDelegate","updateMultipleSelectValue","updateSelectValue","updateStringValue","updateContentEditableValue","binding","updateRadioValue","textTypes","updateValue","isTwoway","updateRadioName","updateCheckboxName","updateStyleAttribute","updateInlineStyle","namespaceURI","updateClassName","updateInlineClass","isBoolean","type$1","updateBoolean","namespace","updateNamespacedAttribute","updateAttribute","getValue","selected","optionValue","_ractive","locked","wasSelected","disabled","selectedIndex","wasChecked","compare","group","removeAttribute","setAttribute","valueAttribute","isChecked","props","prev","safe","setProperty","hyphenateCamel","cls","className","baseVal","attr","inlineClass","useProperty","propertyName","removeAttributeNS","setAttributeNS","inAttributes","attributes","doInAttributes","parseAttributes","isSvg","tagName","div$1","childNodes","notIn","needle","lookupNamespace","qualified","hasAttribute","namespaces","set$1","flag","current","recreateTwowayBinding","initLink","applyValue","_link","Missing","attachImplicits","attach","mdl","detachImplicits","unlink","getComputationSignature","signature","getter","setter","getterString","getterUseStack","setterString","construct","welcome","initialiseProperties","handleAttributes","delegate","constructHook","registryNames$1","_attributePartial","RootModel","getAdaptors","dataConfigurator","init","computed","compute","protoAdapt","lookup","adaptor","srcs","_guid","tpl","attrs","optional","mapAll","Ractive$teardown","torndown","teardown$1","getPromise","teardownHook","destructHook","renderItem","unrenderItem","nextNode","_partials","eventHandlers","findParentNode","render$1","occupants","checkAnchors","checking","setupArgsFn","models","resolveArgs","specialRef","teardownArgsFn","unregister","handleDomEvent","getBindingGroup","BindingGroup","bindings","handleBlur","handleDelay","timeout","getSelectedOptions","select","selectedOptions","getSiblings","siblings","getValue$1","isBindable","selectBinding","attributeByName","isBindableByValue","isBindableByContentEditable","contenteditable","ContentEditableBinding","isBindableByName","isBindableByChecked","RadioNameBinding","RadioBinding","isBindableByName$1","isBindableByChecked$1","CheckboxBinding","CheckboxNameBinding","FileBinding","NumericBinding","GenericBinding","MultipleSelectBinding","SingleSelectBinding","sortAttributes","left","right","toFront","inputIsCheckedRadio","nameAttr","stringifyAttribute","getNamespace","xmlns$$1","svg$1","handleReset","formBindings","updateModel","progressiveText","nodeValue","splitText","createTextNode","appendChild","getKeyValuePair","valueToken","createMapping","childData","val","isReadonly","boundFragment","Fragment","valueOf","scheduleTask","getPartialTemplate","getPartialFromRegistry","noThrow","parsed","findParentPartial","isOwner","noRegistryFunctionReturn","findOwner","_fn","findConstructor","_Parent","parsePartial","isEmpty","getType","hasIndexRef","SECTION_EACH","SECTION_IF_WITH","docFrag","onChange","visible","hidden","onHide","onShow","resetStyle","nearestProp","rendering","unrendering","elementCache","createElement","getComponentConstructor","Component","components","createItem","Text","ComponentConstructor","specialElements","Element","Item","Mapping","Attribute","constructors","processItems","values","guid","counter","TEXT","placeholderId","newModel","wrapperValue","unrenderAndDestroy$1","getChildQueue","hookQueue","childQueue","hook","initialise","userOptions","computations","computation","subscribe","configHook","initHook","begin","createFragment","DEBUG_PROMISES","cssId","config$$1","once","renderHook","completeHook","Ractive$render","others","Ractive$reset","rerender","changes","shouldRerender","unrenderHook","resetTemplate","renderHook$1","completeHook$1","resetHook","collect","refName","forceResetTemplate","Ractive$resetTemplate","transitionsEnabled","Ractive$set","Ractive$subtract","Ractive$toggle","TypeError","badArguments","Ractive$toCSS","ids","Ractive$toHTML","toText","Ractive$transition","HTMLElement","transition","Transition","registerTransition","Ractive$unrender","unrenderHook$1","Ractive$updateModel","cascade","extendOne","extendWith","Class","Target","Child","callsSuper","defineProperties","defaults","writable","configurable","extendClass","_on","_observe","joinKeys","splitKeypath$1","fade","targetOpacity","processParams","DEFAULTS","isIntro","getStyle","setStyle","animateStyle","createView","console","testThis","original","testArgs","currentInstance","bool","resetData","_toConsumableArray","arr","arr2","setupParsley","parsley","$","form","showFormValidationFeedback","field","ok","isValid","toggleClass","startListening","ERROR","stopListening","BEFORE_ENTER_COMLETE","json","response","reload","go","view","msg","submit","submitForm","files","FormData","each","ajax","cache","dataType","processData","contentType","textStatus","jqXHR","errorThrown","activate","simple","comp","compA","compB","swap","grid","gridComponent","handleAdd","row","sidePanel","panel","handleBodyClick","show","getUrlPath","ext","Prism","fileHighlight","is","getCurrentRoute","setupMenuListener","viewName","getViewName","$li","getMenu","hasActiveMenu","menuSlider","updateSlider","updateMenu","initializeSlider","hasParent","updateChild","getParent","updateLeaf","removeClass","addClass","$parent","$leaf","slideToMenu","getActiveMenuLocation","loc","setupWindowResizeListener","resize","windowResizeTimeoutId","windowResized","matchMedia","matches","$activeMenu","offsetLeft","$navbar","navbarOffset","offset","top","width","bottom","height","closest","stripSearch","isUrl","getLocationAsRelativeUrl","search","useDefaultRoute","getGotoPath","getInitialPath","relUrl","defaultRoute","startsWith","_ignoreHashChange","supportHistory","pushState","shouldUseOnHashChange","addEventListener","hashchangeEventLisener","popstateEventLisener","hashEvent","setListener","document","QUERYPAIR_REGEX","segment","toMatch","queryPairs","decodeURIComponent","src","nextKey","HashChangeEvent","lastURL","URL","defineProperty","enumerable","searchString","position","endsWith","subjectString","lastIndex","matchFound","some","_locked","metaKey","ctrlKey","shiftKey","defaultPrevented","nodeName","process","getListeners","evt","_getEvents","RegExp","flattenListeners","flatListeners","getListenersAsObject","addListener","listenerIsWrapped","addOnceListener","defineEvent","defineEvents","evts","removeListener","removeEvent","addListeners","manipulateListeners","removeListeners","remove","multiple","_events","removeAllListeners","emitEvent","listenersMap","_getOnceReturnValue","trigger","setOnceReturnValue","_onceReturnValue","module","exports","eventer","origEmit","arg","mode","utils","isFunction","fadeIn","opacity","Date","fadeOut","param","encodeURIComponent","logWarn","info","logInfo","callstack","debug","roadtripUtils","getBase","tripleDelimiters","staticDelimiters","staticTripleDelimiters","csp","sanitize","contextLines","parserTransforms","syncComputedChildren","twoway","lazy","noIntro","noOutro","nestedTransitions","noCssTransform","easeIn","easeOut","easeInOut","isClient","hasConsole","svg","implementation","hasFeature","vendors","welcomeIntro","WELCOME_MESSAGE","hasGroup","groupCollapsed","groupEnd","delta","intermediate","properties","prop$1","TransitionManager","starting","fulfilPromise","previousBatch","addFragmentToRoot","addObserver","defer","_manager","detachWhenReady","task","postRender","_batch","virtual","Hook","KeyModel","shouldCapture","dependant","registerLink","unregisterLink","unreference","KeypathModel","getChild","rebindChildren","dep","hasProp","early","ModelBase","patternObservers","addShuffleTask","addShuffleRegister","existingMatches","getValueChildren","skip","getVirtual","child$1","startPath","notify","notifiedUpstream","relinking","keypathModel","registerPatternObserver","registerTwowayBinding","unregisterPatternObserver","unregisterTwowayBinding","oneway","shufle","LinkModel","ModelBase$$1","__proto__","unwrap","bind$$1","rootLink","relinked","lnk","ln","Ticker","elapsed","eased","stop","abort","Model","rewrap","newWrapperValue","createBranch","__model","branch","retrieve","oldArray","newArray","oldLength","usedIndices","firstUnusedIndex","SharedModel","Model$$1","arrayProto","makeArrayMethod","result$1","promise$1","BINDING_FLAG","DELEGATE_FLAG","modelPush","modelPop","modelShift","modelUnshift","modelSort","modelSplice","modelReverse","ContextData","prototypeAccessors","decorators","intermediary","num","raise","ev","drop","sort","subtract","toggle","isBound","getBindingModel","getBindingPath","getBinding","setBinding","div","methodNames","unprefixed","makeFunction","instances","mathml","xlink","xml","xmlns","ns","createElementNS","toUpperCase","cloneNode","nodes","querySelectorAll","oldContext","dirty","oldValue","newValue","cancelled","resolver","strict","baseModel","baseKeypath","recursive","oldValues","newValues","changed","newKeys","wildcards","suffix","i$1","pending","sliced","inserted","deleted","hadIndex","newIndex","oldIndex","getElementsByTagName","additionalReplaceRules","hasCurly","textContent","ParseError","Parser","lineStart","lines","lineEnds","line","lineEnd","leftover","postProcess","converters","getContextMessage","lineNum","columnNum","contextUp","contextDown","numTabs","annotation","char","character","shortMessage","readTypeOf","regExpCache","booleanAttributes","quot","apos","lt","gt","nbsp","iexcl","cent","pound","curren","yen","brvbar","sect","uml","copy","ordf","laquo","not","shy","reg","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34","iquest","Agrave","Aacute","Acirc","Atilde","Auml","Aring","AElig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","times","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","szlig","agrave","aacute","acirc","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","divide","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","OElig","oelig","Scaron","scaron","Yuml","fnof","circ","tilde","Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega","alpha","beta","gamma","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigmaf","sigma","tau","upsilon","phi","chi","psi","omega","thetasym","upsih","piv","ensp","emsp","thinsp","zwnj","zwj","lrm","rlm","ndash","mdash","lsquo","rsquo","sbquo","ldquo","rdquo","bdquo","dagger","Dagger","bull","hellip","permil","prime","Prime","lsaquo","rsaquo","oline","frasl","euro","image","weierp","real","trade","alefsym","larr","uarr","rarr","darr","harr","crarr","lArr","uArr","rArr","dArr","hArr","forall","exist","empty","nabla","isin","notin","ni","prod","sum","minus","lowast","radic","infin","ang","and","or","cap","cup","int","there4","sim","cong","asymp","ne","equiv","le","ge","sub","sup","nsub","sube","supe","oplus","otimes","perp","sdot","lceil","rceil","lfloor","rfloor","lang","rang","loz","spades","clubs","hearts","diams","fromCodePoint","fromCharCode","makeQuotedStringMatcher","okQuote","singleMatcher","doubleMatcher","expressionList","readPrimary","readMemberOrInvocation","makePrefixSequenceMatcher","symbol","fallthrough","matcher","prefixOperators","readLogicalOr","readTypeof","makeInfixSequenceMatcher","infixOperators","no-delegation","if","with","unless","leadingLinebreak","trailingLinebreak","backOne","backTwo","lastSectionItem","leadingPattern","trailingPattern","li","dt","dd","rt","rp","optgroup","thead","tbody","tfoot","tr","td","th","shared","STANDARD_READERS","TRIPLE_READERS","STATIC_READERS","defaultInterpolate","isTriple","textarea","elements","eventAttributes","transforms","tlen","walk","parseOptions","registryNames","Registry","useDefaults","custom","defaultKeys","order","ContainerItem","firstNode","skipParent","escape","ComputationChild","Computation","computationContext","sig","setDependencies","prototype$1","actuallyChanged","ReferenceExpressionChild","Alias","ContainerItem$$1","camelCaseStr","propertyNames","accept-charset","accesskey","bgcolor","class","codebase","colspan","datetime","dirname","for","http-equiv","ismap","maxlength","novalidate","pubdate","readonly","rowspan","tabindex","usemap","ConditionalAttribute","Item$$1","updateDelegate","twowayBinding","lastVal","BindingFlag","RactiveModel","hasProp$1","targetPath","ractiveModel","unescapedKey","localKey","_inlinePartials","leftovers","toHTML","missingDecorator","Decorator","Doctype","proto$1","Binding","wasUndefined","getInitialValue","parentForm","setting","lastValue","setFromNode","Binding$$1","attachEvent","removeEventListener","push$1","checkboxName","noInitialValue","existingValue","bindingValue","valueSoFar","selectValue","GenericBinding$$1","selectedValues","previousValue","nameAttributeBinding","forceUpdate","optionWasSelected","DOMEvent","listen","unlisten","CustomEvent","eventPlugin","RactiveEvent","specialPattern","dollarArgsPattern","DelegateProxy","currentTarget","EventDirective","delegates","action","specialMatch","special","dollarMatch","oldEvent","returned","endsWithSemi","isVoid","deferContent","createTwowayBinding","existing","foundNode","intro","shouldFire","isOutro","name$1","isSelected","unbinding","outro","Form","Element$$1","Mustache","MustacheContainer","proto$2","Interpolator","Mustache$$1","Input","defaultValue","attrValue","specials$1","true","false","null","specialsPattern","onlyWhitespace","JsonParser","placeholder","stringLiteral","parseJSON","Option","selectedAttribute","Partial","MustacheContainer$$1","yielder","templateObj","named","setTemplate","partialTemplate","RepeatedFragment","pendingNewIndices","previousIterations","createIteration","bubbled","iteration","xs","updatePostShuffle","updating","toRemove","oldKeys","wasArray","fragment$1","newLength","indices","oldLen","removed","contiguous","Section","sectionType","templateSectionType","subordinate","sibling","nextSibling","isTruthy","siblingFalsey","lastType","newFragment","Select","sync","defaultSelected","selectNode","isMultiple","shouldSelect","valueContains","Textarea","Input$$1","proto$3","camelizeHyphenated","hyphenatedStr","prefixCache","testStyle","capped","vendor","prefix$1","prefix$2","createTransitions","unprefixPattern","unprefix","vendorPattern","hyphenate","TRANSITION$1","TRANSITIONEND","CSS_TRANSITIONS_ENABLED","TRANSITION_DURATION","TRANSITION_PROPERTY","TRANSITION_TIMING_FUNCTION","testStyle$1","linear$1","canUseCssTransitions","cannotUseCssTransitions","webkitTransition","changedProperties","transitionDone","cssTimeout","checkComplete","jsTransitionsComplete","cssTransitionsComplete","unregisterCompleteHandler","transitionEndHandler","cssTransitionsDone","property","timing","hashPrefix","easingName","cssTiming","registerCompleteHandler","originalValue","propertiesToTransitionInJs","createTransitions$1","getComputedStyle","names","t0","t1","t2","onComplete","computedStyle","getParams","value$1","nested","completed","originalStyle","noReset","proto$4","ieBug","ieBlacklist","TABLE","THEAD","TBODY","TR","SELECT","insertHtml","html$$1","selectedOption","firstChild","Triple","queryResult","queryAllResult","outerHTML","doctype","dirtyValue","createItems","wasBound","wasRendered","HookQueue","inProcess","resetPartial","collection","insert","toCSS","toCss","toHtml","script","currentScript","VERSION","transitions","_self","WorkerGlobalScope","self","uniqueId","_","manual","encode","Token","objId","clone","languages","redef","before","grammar","newToken","ret","DFS","visited","plugins","highlightAll","async","env","hooks","run","highlightElement","language","Worker","worker","filename","onmessage","highlightedCode","postMessage","immediateClose","highlight","tokenize","strarr","rest","tokenloop","patterns","lookbehind","greedy","lookbehindLength","flags","delNum","after","wrapped","callbacks","matchedStr","classes","readyState","markup","prolog","cdata","punctuation","attr-value","attr-name","atrule","important","function","style-attr","clike","class-name","keyword","boolean","operator","javascript","regex","template-string","interpolation","interpolation-punctuation","js","$$","con","hasClass","highlightLines","pre","range","ranges","parseMethod","isLineHeightRounded","lineHeight","applyHash","scrollIntoView","fontSize","padding","border","offsetHeight","fakeTimer","clsReg","lineNumbersWrapper","linesNum","counterReset","Extensions","py","rb","ps1","psm1","sh","bat","h","tex","extension","xhr","XMLHttpRequest","onreadystatechange","status","responseText","statusText","send","home","prevRoute","nextRoute","basic","loadView","getMilliseconds","methods","nav","gotoNewView","myArray","navTarget","navTargetParams","notFound","redirect","typeId","redirectTarget","basicForm","_slice","_slicedToArray","sliceIterator","_arr","_n","_d","_e","_s","_i","Symbol","iterator","factory","require","define","amd","jQuery","parsleyAdaptedCallback","eventPrefix","InputEvent","_this14","isNativeEvent","isTrusted","fakeInputEvent","misbehaves","behavesOk","install","inputEventPatched","uninstall","globalID","pastWarnings","Utils__Utils","$element","specified","camelize","deserializeValue","checkAttr","_checkAttr","setAttr","dasherize","generateID","Number","chr","_window$console","_resetWarnings","trimString","date","_parsed$map","_parsed$map2","year","month","day","getFullYear","getMonth","getDate","_string","integer","regexp","_regexp","parseRequirement","requirementType","converter","converted","namespaceEvents","difference","elem","promises","when","objectCreate","_SubmitSelector","Utils__default","Defaults","inputs","excluded","priorityEnabled","uiEnabled","validationThreshold","focus","triggerAfterFailure","errorClass","successClass","classHandler","Field","errorsContainer","errorsWrapper","errorTemplate","Base","__id__","asyncSupport","_pipeAccordingToValidationResult","_this","pipe","Deferred","validationResult","actualizeOptions","domOptions","_resetOptions","initOptions","_listeners","listenTo","unsubscribe","unsubscribeTo","extraArg","asyncIsValid","whenValid","_findRelated","convertArrayRequirement","convertExtraOptionRequirement","requirementSpec","extraOptionReader","main","Validator","spec","requirementFirstArg","validateMultiple","validateDate","_isDateInput","validateNumber","validateString","parseRequirements","requirements","isPlainObject","priority","ValidatorRegistry","validators","catalog","__class__","locale","typeTesters","email","digits","alphanum","decimalPlaces","ValidatorRegistry__parseArguments","ValidatorRegistry__operatorToValidator","_len","requirementsAndInput","_key","ValidatorRegistry__comparisonOperator","addValidator","Parsley","setLocale","addCatalog","messages","addMessage","addMessages","nameMessageObject","arg1","arg2","_setValidator","updateValidator","removeValidator","validator","getErrorMessage","constraint","formatMessage","defaultMessage","en","parameters","notblank","_ref","_ref$step","_ref$base","tester","nb","decimals","toInt","round","minlength","requirement","mincheck","maxcheck","equalto","refOrValue","$reference","UI","diffResults","newResult","oldResult","added","kept","found","assert","_actualizeTriggers","_this2","onSubmitValidate","onSubmitButton","_focusedField","fields","noFocus","_destroyUI","_reflowUI","_buildUI","_ui","diff","lastValidationResult","_manageStatusClass","_manageErrorsMessages","_failedOnce","getErrorsMessages","_getErrorMessage","addError","_ref2","_ref2$updateClass","updateClass","_addError","_errorClass","updateError","_ref3","_ref3$updateClass","_updateError","removeError","_ref4","_ref4$updateClass","_removeError","hasConstraints","needsValidation","_successClass","_resetClass","errorsMessagesDisabled","_insertErrorWrapper","$errorsWrapper","_ref5","_ref6","customConstraintErrorMessage","$errorClassHandler","_manageClassHandler","errorsWrapperId","validationInformationVisible","$handler","_inputHolder","$errorsContainer","_this3","$toBind","_validateIfNeeded","_this4","debounce","_debounced","_resetUI","Form__statusMapping","rejected","_this5","$submitSource","_$submitSource","first","whenValidate","_trigger","stopImmediatePropagation","_submit","$synthetic","appendTo","Event","_arguments","_Utils__default$all$done$fail$always","_this6","_ref7","submitEvent","_refreshFields","_withoutReactualizingFormOptions","fail","always","_arguments2","_this7","_ref8","destroy","removeData","_bindFields","_this8","oldFields","fieldsMappedById","fieldInstance","Factory","oldActualizeOptions","Constraint","parsleyField","isDomConstraint","validatorSpec","_validatorRegistry","_parseRequirements","capitalize","_validator","requirementList","_this9","parsleyFormInstance","constraints","constraintsByName","_bindConstraints","parsley_field__statusMapping","_whenValid$always$done$fail$always","_this10","_ref9","refreshConstraints","_isInGroup","_refreshed","_isRequired","validateIfEmpty","inArray","_arguments3","_this11","_ref10","_ref10$force","groupedConstraints","_getGroupedConstraints","_validateConstraint","_this12","_handleWhitespace","addConstraint","removeConstraint","updateConstraint","_bindHtml5Constraints","trimValue","parsley_field","Multiple","addElement","$elements","fieldConstraints","_init","savedparsleyFormInstance","__version__","handleMultiple","parsleyMultipleInstance","_this13","$previouslyRelated","doNotStore","parsleyInstance","ParsleyExtend","vernums","jquery","version","psly","ParsleyConfig","Utils","ParsleyUtils","i18n","ParsleyValidator","_window$Parsley","ParsleyUI","doNotUpdateClass","autoBind","unsubscribeAll","_instance","instanceGiven","asyncValidators","default","addAsyncValidator","ajaxOptions","csr","remoteOptions","_remoteCache","handleXhr","validatingForm","oncomplete","onteardown","ondestruct","isListening","lifecycleEvents","reloadView","updateView","onrender","basicAjax","getJSON","upload","basicPartial","hello","helloPartial","basicComp","multipleComp","rows","age","addRow","compPubSub","basicTransition","navTargetWithParams","pubSubComp","AjaxMonitor","Bar","DocumentMonitor","ElementMonitor","ElementTracker","EventLagMonitor","Evented","Events","NoTargetError","Pace","RequestIntercept","SOURCE_KEYS","Scaler","SocketRequestTracker","XHRRequestTracker","animation","avgAmplitude","bar","cancelAnimation","cancelAnimationFrame","defaultOptions","extendNative","getFromDOM","getIntercept","handlePushState","ignoreStack","runAnimation","scalers","shouldIgnoreURL","shouldTrack","uniScaler","_WebSocket","_XDomainRequest","_XMLHttpRequest","_intercept","_pushState","_ref1","_replaceState","__slice","__hasProp","__extends","ctor","__super__","__indexOf","catchupTime","initialRate","minTime","ghostTime","maxProgressPerFrame","easeFactor","startOnPageLoad","restartOnPushState","restartOnRequestAfter","checkInterval","eventLag","minSamples","sampleCount","lagThreshold","trackMethods","trackWebSockets","ignoreURLs","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","mozCancelAnimationFrame","abs","_error","_base","_results","paceOptions","progress","targetElement","finish","prog","progressStr","transform","_j","_len1","lastRenderedProgress","XDomainRequest","WebSocket","ignore","track","monitorXHR","req","_open","request","protocols","_arg","restart","watch","tracker","_onreadystatechange","ProgressEvent","lengthComputable","loaded","total","states","loading","interactive","avg","interval","points","samples","setInterval","clearInterval","sinceLastUpdate","rate","catchup","lastProgress","frameTime","scaling","_k","_len2","extraSources","enqueueNextFrame","scaler","scalerList","_options","sidePanelObj","menu","gotoEvents","showJavascript","routeName","showHtml","fallbackMenu","transitionEnd","transEndEventNames","WebkitTransition","MozTransition","OTransition","emulateTransitionEnd","called","$el","one","support","bsTransitionEnd","bindType","delegateType","handle","handleObj","Plugin","$this","Alert","dismiss","removeElement","isDefaultPrevented","alert","Constructor","noConflict","Button","setState","isLoading","loadingText","resetText","removeAttr","$input","$btn","Carousel","slide","pause","cycle","$indicators","paused","sliding","$active","$items","keyboard","keydown","documentElement","getItemIndex","getItemForDirection","direction","active","activeIndex","itemIndex","eq","$next","isCycling","relatedTarget","slideEvent","$nextIndicator","slidEvent","offsetWidth","carousel","clickHandler","$target","slideIndex","$carousel","getTargetFromTrigger","$trigger","Collapse","transitioning","addAriaAndCollapsedClass","dimension","activesData","actives","startEvent","scrollSize","camelCase","hide","isOpen","collapse","clearMenus","backdrop","Dropdown","isActive","insertAfter","dropdown","_relatedTarget","Modal","$body","$dialog","$backdrop","isShown","originalBodyPad","scrollbarWidth","ignoreBackdropClick","load","BACKDROP_TRANSITION_DURATION","checkScrollbar","setScrollbar","scrollTop","adjustDialog","enforceFocus","hideModal","handleUpdate","resetAdjustments","resetScrollbar","removeBackdrop","doAnimate","callbackRemove","modalIsOverflowing","scrollHeight","clientHeight","paddingLeft","bodyIsOverflowing","paddingRight","fullWindowWidth","innerWidth","documentElementRect","getBoundingClientRect","clientWidth","measureScrollbar","bodyPad","scrollDiv","modal","showEvent","Tooltip","enabled","hoverState","inState","placement","title","viewport","$viewport","click","hover","triggers","eventIn","eventOut","fixTitle","getDefaults","getDelegateOptions","tip","isInStateTrue","hasContent","inDom","ownerDocument","$tip","tipId","getUID","setContent","autoToken","autoPlace","display","getPosition","actualWidth","actualHeight","orgPlacement","viewportDim","calculatedOffset","getCalculatedOffset","applyPlacement","prevHoverState","marginTop","marginLeft","setOffset","using","getViewportAdjustedDelta","isVertical","arrowDelta","arrowOffsetPosition","replaceArrow","arrow","getTitle","$e","isBody","elRect","SVGElement","elOffset","outerDims","viewportPadding","viewportDimensions","topEdgeOffset","bottomEdgeOffset","leftEdgeOffset","rightEdgeOffset","$arrow","enable","disable","toggleEnabled","tooltip","Popover","getContent","popover","ScrollSpy","$scrollElement","offsets","targets","activeTarget","refresh","getScrollHeight","offsetMethod","offsetBase","isWindow","$href","maxScroll","clear","parents","parentsUntil","scrollspy","$spy","Tab","$ul","$previous","hideEvent","tab","Affix","checkPosition","checkPositionWithEventLoop","affixed","unpin","pinnedOffset","RESET","getState","offsetTop","offsetBottom","targetHeight","initializing","colliderTop","colliderHeight","getPinnedOffset","affix","affixType"],"mappings":"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,IAAKC,KAAM,IAAKC,KAAM,IAAKC,MAAO,IAAKC,IAAK,IAAKC,IAAK,IAAKC,IAAK,IAAKC,KAAM,IAAKC,IAAK,IAAKC,OAAQ,IAAKC,KAAM,IAAKC,KAAM,IAAKC,MAAO,IAAKC,MAAO,IAAKC,KAAM,IAAKC,OAAQ,IAAKC,MAAO,IAAKC,KAAM,IAAKC,KAAM,IAAKC,MAAO,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,MAAO,IAAKC,OAAQ,IAAKC,KAAM,IAAKC,MAAO,IAAKC,MAAO,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,MAAO,IAAKC,KAAM,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,MAAO,IAAKC,KAAM,IAAKC,IAAK,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,MAAO,IAAKC,OAAQ,IAAKC,KAAM,IAAKC,MAAO,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,MAAO,IAAKC,KAAM,IAAKC,OAAQ,IAAKC,MAAO,IAAKC,MAAO,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,MAAO,IAAKC,OAAQ,IAAKC,KAAM,IAAKC,MAAO,IAAKC,MAAO,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,MAAO,IAAKC,KAAM,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,MAAO,IAAKC,KAAM,IAAKC,IAAK,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,MAAO,IAAKC,OAAQ,IAAKC,KAAM,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,MAAO,IAAKC,KAAM,IAAKC,OAAQ,IAAKC,MAAO,IAAKC,KAAM,IAAKC,MAAO,IAAKC,MAAO,IAAKC,OAAQ,IAAKC,OAAQ,IAAKC,KAAM,IAAKC,KAAM,IAAKC,KAAM,IAAKC,MAAO,IAAKC,MAAO,IAAKC,KAAM,IAAKC,MAAO,IAAKC,MAAO,IAAKC,QAAS,IAAKC,KAAM,IAAKC,IAAK,IAAKC,MAAO,IAAKC,KAAM,IAAKC,MAAO,IAAKC,OAAQ,IAAKC,GAAI,IAAKC,GAAI,IAAKC,GAAI,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"}